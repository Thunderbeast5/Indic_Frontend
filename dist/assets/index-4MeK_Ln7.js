const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dagre-4EVJKHTY-CSPBMEDK.js","assets/graph-C4ob2OcR.js","assets/_baseUniq-C1f8ek-1.js","assets/layout-D1u-9Xsw.js","assets/_basePickBy-BD61J6ST.js","assets/clone-Bbl8pVkK.js","assets/c4Diagram-6F5ED5ID-DGv58o6n.js","assets/chunk-ASOPGD6M-CpEN1Ak0.js","assets/flowDiagram-7ASYPVHJ-C_20zU8L.js","assets/chunk-5HRBRIJM-DPB2Tpsa.js","assets/channel-DnGos3nr.js","assets/erDiagram-6RL3IURR-CJxvveQe.js","assets/gitGraphDiagram-NRZ2UAAF-CZJsnLvG.js","assets/chunk-TMUBEWPD-Bnd8O2Gr.js","assets/chunk-KFBOBJHC-BIct5GX9.js","assets/gitGraph-YCYPL57B-BK1LlAKm.js","assets/ganttDiagram-NTVNEXSI-BVb2h2NF.js","assets/linear-DleRwQxm.js","assets/init-Gi6I4Gst.js","assets/infoDiagram-A4XQUW5V-Ca7JD2wq.js","assets/pieDiagram-YF2LJOPJ-BjJEtYik.js","assets/arc-BKlZp3J1.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-OS5C2QUG-DVEVKOSw.js","assets/xychartDiagram-6QU3TZC5-CXCWbYpg.js","assets/requirementDiagram-MIRIMTAZ-BbzqVhpf.js","assets/sequenceDiagram-G6AWOVSC-B7BketID.js","assets/classDiagram-LNE6IOMH-DMgXiBPJ.js","assets/chunk-T2TOU4HS-Ba3og_KJ.js","assets/classDiagram-v2-MQ7JQ4JX-DMgXiBPJ.js","assets/stateDiagram-MAYHULR4-DOLzneMU.js","assets/chunk-7U56Z5CX-BQpOkP57.js","assets/stateDiagram-v2-4JROLMXI-C7Y3iR-A.js","assets/journeyDiagram-G5WM74LC-BtKQ3QGu.js","assets/timeline-definition-U7ZMHBDA-ChUO_e3R.js","assets/mindmap-definition-GWI6TPTV-C6dDsane.js","assets/cytoscape.esm-BlEmlE64.js","assets/sankeyDiagram-Y46BX6SQ-CNVuVJvz.js","assets/diagram-QW4FP2JN-BJTux46e.js","assets/blockDiagram-ZHA2E4KO-0uo0sgJ7.js","assets/architectureDiagram-UYN6MBPD-B2EBJXYm.js"])))=>i.map(i=>d[i]);
var x$=Object.defineProperty;var kB=n=>{throw TypeError(n)};var v$=(n,e,t)=>e in n?x$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ei=(n,e,t)=>v$(n,typeof e!="symbol"?e+"":e,t),_$=(n,e,t)=>e.has(n)||kB("Cannot "+t);var BB=(n,e,t)=>e.has(n)?kB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);var Ky=(n,e,t)=>(_$(n,e,"access private method"),t);function w$(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cC={exports:{}},Jy={},uC={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IB;function b$(){if(IB)return hr;IB=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function d(Z){return Z===null||typeof Z!="object"?null:(Z=h&&Z[h]||Z["@@iterator"],typeof Z=="function"?Z:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function w(Z,ne,ce){this.props=Z,this.context=ne,this.refs=v,this.updater=ce||m}w.prototype.isReactComponent={},w.prototype.setState=function(Z,ne){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ne,"setState")},w.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function _(){}_.prototype=w.prototype;function A(Z,ne,ce){this.props=Z,this.context=ne,this.refs=v,this.updater=ce||m}var S=A.prototype=new _;S.constructor=A,g(S,w.prototype),S.isPureReactComponent=!0;var R=Array.isArray,B=Object.prototype.hasOwnProperty,I={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function U(Z,ne,ce){var ye,he={},Ce=null,ke=null;if(ne!=null)for(ye in ne.ref!==void 0&&(ke=ne.ref),ne.key!==void 0&&(Ce=""+ne.key),ne)B.call(ne,ye)&&!N.hasOwnProperty(ye)&&(he[ye]=ne[ye]);var Ue=arguments.length-2;if(Ue===1)he.children=ce;else if(1<Ue){for(var Qe=Array(Ue),Te=0;Te<Ue;Te++)Qe[Te]=arguments[Te+2];he.children=Qe}if(Z&&Z.defaultProps)for(ye in Ue=Z.defaultProps,Ue)he[ye]===void 0&&(he[ye]=Ue[ye]);return{$$typeof:n,type:Z,key:Ce,ref:ke,props:he,_owner:I.current}}function O(Z,ne){return{$$typeof:n,type:Z.type,key:ne,ref:Z.ref,props:Z.props,_owner:Z._owner}}function P(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===n}function F(Z){var ne={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ce){return ne[ce]})}var K=/\/+/g;function Q(Z,ne){return typeof Z=="object"&&Z!==null&&Z.key!=null?F(""+Z.key):ne.toString(36)}function Y(Z,ne,ce,ye,he){var Ce=typeof Z;(Ce==="undefined"||Ce==="boolean")&&(Z=null);var ke=!1;if(Z===null)ke=!0;else switch(Ce){case"string":case"number":ke=!0;break;case"object":switch(Z.$$typeof){case n:case e:ke=!0}}if(ke)return ke=Z,he=he(ke),Z=ye===""?"."+Q(ke,0):ye,R(he)?(ce="",Z!=null&&(ce=Z.replace(K,"$&/")+"/"),Y(he,ne,ce,"",function(Te){return Te})):he!=null&&(P(he)&&(he=O(he,ce+(!he.key||ke&&ke.key===he.key?"":(""+he.key).replace(K,"$&/")+"/")+Z)),ne.push(he)),1;if(ke=0,ye=ye===""?".":ye+":",R(Z))for(var Ue=0;Ue<Z.length;Ue++){Ce=Z[Ue];var Qe=ye+Q(Ce,Ue);ke+=Y(Ce,ne,ce,Qe,he)}else if(Qe=d(Z),typeof Qe=="function")for(Z=Qe.call(Z),Ue=0;!(Ce=Z.next()).done;)Ce=Ce.value,Qe=ye+Q(Ce,Ue++),ke+=Y(Ce,ne,ce,Qe,he);else if(Ce==="object")throw ne=String(Z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return ke}function ee(Z,ne,ce){if(Z==null)return Z;var ye=[],he=0;return Y(Z,ye,"","",function(Ce){return ne.call(ce,Ce,he++)}),ye}function $(Z){if(Z._status===-1){var ne=Z._result;ne=ne(),ne.then(function(ce){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ce)},function(ce){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ce)}),Z._status===-1&&(Z._status=0,Z._result=ne)}if(Z._status===1)return Z._result.default;throw Z._result}var oe={current:null},G={transition:null},te={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:G,ReactCurrentOwner:I};function re(){throw Error("act(...) is not supported in production builds of React.")}return hr.Children={map:ee,forEach:function(Z,ne,ce){ee(Z,function(){ne.apply(this,arguments)},ce)},count:function(Z){var ne=0;return ee(Z,function(){ne++}),ne},toArray:function(Z){return ee(Z,function(ne){return ne})||[]},only:function(Z){if(!P(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},hr.Component=w,hr.Fragment=t,hr.Profiler=i,hr.PureComponent=A,hr.StrictMode=r,hr.Suspense=l,hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,hr.act=re,hr.cloneElement=function(Z,ne,ce){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var ye=g({},Z.props),he=Z.key,Ce=Z.ref,ke=Z._owner;if(ne!=null){if(ne.ref!==void 0&&(Ce=ne.ref,ke=I.current),ne.key!==void 0&&(he=""+ne.key),Z.type&&Z.type.defaultProps)var Ue=Z.type.defaultProps;for(Qe in ne)B.call(ne,Qe)&&!N.hasOwnProperty(Qe)&&(ye[Qe]=ne[Qe]===void 0&&Ue!==void 0?Ue[Qe]:ne[Qe])}var Qe=arguments.length-2;if(Qe===1)ye.children=ce;else if(1<Qe){Ue=Array(Qe);for(var Te=0;Te<Qe;Te++)Ue[Te]=arguments[Te+2];ye.children=Ue}return{$$typeof:n,type:Z.type,key:he,ref:Ce,props:ye,_owner:ke}},hr.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:s,_context:Z},Z.Consumer=Z},hr.createElement=U,hr.createFactory=function(Z){var ne=U.bind(null,Z);return ne.type=Z,ne},hr.createRef=function(){return{current:null}},hr.forwardRef=function(Z){return{$$typeof:a,render:Z}},hr.isValidElement=P,hr.lazy=function(Z){return{$$typeof:u,_payload:{_status:-1,_result:Z},_init:$}},hr.memo=function(Z,ne){return{$$typeof:c,type:Z,compare:ne===void 0?null:ne}},hr.startTransition=function(Z){var ne=G.transition;G.transition={};try{Z()}finally{G.transition=ne}},hr.unstable_act=re,hr.useCallback=function(Z,ne){return oe.current.useCallback(Z,ne)},hr.useContext=function(Z){return oe.current.useContext(Z)},hr.useDebugValue=function(){},hr.useDeferredValue=function(Z){return oe.current.useDeferredValue(Z)},hr.useEffect=function(Z,ne){return oe.current.useEffect(Z,ne)},hr.useId=function(){return oe.current.useId()},hr.useImperativeHandle=function(Z,ne,ce){return oe.current.useImperativeHandle(Z,ne,ce)},hr.useInsertionEffect=function(Z,ne){return oe.current.useInsertionEffect(Z,ne)},hr.useLayoutEffect=function(Z,ne){return oe.current.useLayoutEffect(Z,ne)},hr.useMemo=function(Z,ne){return oe.current.useMemo(Z,ne)},hr.useReducer=function(Z,ne,ce){return oe.current.useReducer(Z,ne,ce)},hr.useRef=function(Z){return oe.current.useRef(Z)},hr.useState=function(Z){return oe.current.useState(Z)},hr.useSyncExternalStore=function(Z,ne,ce){return oe.current.useSyncExternalStore(Z,ne,ce)},hr.useTransition=function(){return oe.current.useTransition()},hr.version="18.3.1",hr}var LB;function nA(){return LB||(LB=1,uC.exports=b$()),uC.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DB;function A$(){if(DB)return Jy;DB=1;var n=nA(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},d=null,m=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:d,ref:m,props:h,_owner:i.current}}return Jy.Fragment=t,Jy.jsx=o,Jy.jsxs=o,Jy}var FB;function S$(){return FB||(FB=1,cC.exports=A$()),cC.exports}var C=S$(),L=nA();const Hl=jg(L),C$=w$({__proto__:null,default:Hl},[L]);var M1={},hC={exports:{}},qo={},fC={exports:{}},dC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NB;function T$(){return NB||(NB=1,function(n){function e(G,te){var re=G.length;G.push(te);e:for(;0<re;){var Z=re-1>>>1,ne=G[Z];if(0<i(ne,te))G[Z]=te,G[re]=ne,re=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],re=G.pop();if(re!==te){G[0]=re;e:for(var Z=0,ne=G.length,ce=ne>>>1;Z<ce;){var ye=2*(Z+1)-1,he=G[ye],Ce=ye+1,ke=G[Ce];if(0>i(he,re))Ce<ne&&0>i(ke,he)?(G[Z]=ke,G[Ce]=re,Z=Ce):(G[Z]=he,G[ye]=re,Z=ye);else if(Ce<ne&&0>i(ke,re))G[Z]=ke,G[Ce]=re,Z=Ce;else break e}}return te}function i(G,te){var re=G.sortIndex-te.sortIndex;return re!==0?re:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,m=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var te=t(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=G)r(c),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(c)}}function R(G){if(v=!1,S(G),!g)if(t(l)!==null)g=!0,$(B);else{var te=t(c);te!==null&&oe(R,te.startTime-G)}}function B(G,te){g=!1,v&&(v=!1,_(U),U=-1),m=!0;var re=d;try{for(S(te),h=t(l);h!==null&&(!(h.expirationTime>te)||G&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,d=h.priorityLevel;var ne=Z(h.expirationTime<=te);te=n.unstable_now(),typeof ne=="function"?h.callback=ne:h===t(l)&&r(l),S(te)}else r(l);h=t(l)}if(h!==null)var ce=!0;else{var ye=t(c);ye!==null&&oe(R,ye.startTime-te),ce=!1}return ce}finally{h=null,d=re,m=!1}}var I=!1,N=null,U=-1,O=5,P=-1;function F(){return!(n.unstable_now()-P<O)}function K(){if(N!==null){var G=n.unstable_now();P=G;var te=!0;try{te=N(!0,G)}finally{te?Q():(I=!1,N=null)}}else I=!1}var Q;if(typeof A=="function")Q=function(){A(K)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ee=Y.port2;Y.port1.onmessage=K,Q=function(){ee.postMessage(null)}}else Q=function(){w(K,0)};function $(G){N=G,I||(I=!0,Q())}function oe(G,te){U=w(function(){G(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(B))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(d){case 1:case 2:case 3:var te=3;break;default:te=d}var re=d;d=te;try{return G()}finally{d=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=d;d=G;try{return te()}finally{d=re}},n.unstable_scheduleCallback=function(G,te,re){var Z=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Z+re:Z):re=Z,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=re+ne,G={id:u++,callback:te,priorityLevel:G,startTime:re,expirationTime:ne,sortIndex:-1},re>Z?(G.sortIndex=re,e(c,G),t(l)===null&&G===t(c)&&(v?(_(U),U=-1):v=!0,oe(R,re-Z))):(G.sortIndex=ne,e(l,G),g||m||(g=!0,$(B))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var te=d;return function(){var re=d;d=te;try{return G.apply(this,arguments)}finally{d=re}}}}(dC)),dC}var OB;function E$(){return OB||(OB=1,fC.exports=T$()),fC.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UB;function M$(){if(UB)return qo;UB=1;var n=nA(),e=E$();function t(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(f,p){o(f,p),o(f+"Capture",p)}function o(f,p){for(i[f]=p,f=0;f<p.length;f++)r.add(p[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function d(f){return l.call(h,f)?!0:l.call(u,f)?!1:c.test(f)?h[f]=!0:(u[f]=!0,!1)}function m(f,p,b,M){if(b!==null&&b.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return M?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function g(f,p,b,M){if(p===null||typeof p>"u"||m(f,p,b,M))return!0;if(M)return!1;if(b!==null)switch(b.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function v(f,p,b,M,D,j,se){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=M,this.attributeNamespace=D,this.mustUseProperty=b,this.propertyName=f,this.type=p,this.sanitizeURL=j,this.removeEmptyString=se}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){w[f]=new v(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var p=f[0];w[p]=new v(p,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){w[f]=new v(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){w[f]=new v(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){w[f]=new v(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){w[f]=new v(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){w[f]=new v(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){w[f]=new v(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){w[f]=new v(f,5,!1,f.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function A(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var p=f.replace(_,A);w[p]=new v(p,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var p=f.replace(_,A);w[p]=new v(p,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var p=f.replace(_,A);w[p]=new v(p,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){w[f]=new v(f,1,!1,f.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){w[f]=new v(f,1,!1,f.toLowerCase(),null,!0,!0)});function S(f,p,b,M){var D=w.hasOwnProperty(p)?w[p]:null;(D!==null?D.type!==0:M||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(g(p,b,D,M)&&(b=null),M||D===null?d(p)&&(b===null?f.removeAttribute(p):f.setAttribute(p,""+b)):D.mustUseProperty?f[D.propertyName]=b===null?D.type===3?!1:"":b:(p=D.attributeName,M=D.attributeNamespace,b===null?f.removeAttribute(p):(D=D.type,b=D===3||D===4&&b===!0?"":""+b,M?f.setAttributeNS(M,p,b):f.setAttribute(p,b))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),I=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),F=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),G=Symbol.iterator;function te(f){return f===null||typeof f!="object"?null:(f=G&&f[G]||f["@@iterator"],typeof f=="function"?f:null)}var re=Object.assign,Z;function ne(f){if(Z===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);Z=p&&p[1]||""}return`
`+Z+f}var ce=!1;function ye(f,p){if(!f||ce)return"";ce=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(tt){var M=tt}Reflect.construct(f,[],p)}else{try{p.call()}catch(tt){M=tt}f.call(p.prototype)}else{try{throw Error()}catch(tt){M=tt}f()}}catch(tt){if(tt&&M&&typeof tt.stack=="string"){for(var D=tt.stack.split(`
`),j=M.stack.split(`
`),se=D.length-1,Ae=j.length-1;1<=se&&0<=Ae&&D[se]!==j[Ae];)Ae--;for(;1<=se&&0<=Ae;se--,Ae--)if(D[se]!==j[Ae]){if(se!==1||Ae!==1)do if(se--,Ae--,0>Ae||D[se]!==j[Ae]){var Ie=`
`+D[se].replace(" at new "," at ");return f.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",f.displayName)),Ie}while(1<=se&&0<=Ae);break}}}finally{ce=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?ne(f):""}function he(f){switch(f.tag){case 5:return ne(f.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return f=ye(f.type,!1),f;case 11:return f=ye(f.type.render,!1),f;case 1:return f=ye(f.type,!0),f;default:return""}}function Ce(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case N:return"Fragment";case I:return"Portal";case O:return"Profiler";case U:return"StrictMode";case Q:return"Suspense";case Y:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case F:return(f.displayName||"Context")+".Consumer";case P:return(f._context.displayName||"Context")+".Provider";case K:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case ee:return p=f.displayName||null,p!==null?p:Ce(f.type)||"Memo";case $:p=f._payload,f=f._init;try{return Ce(f(p))}catch{}}return null}function ke(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(p);case 8:return p===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Ue(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Qe(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Te(f){var p=Qe(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),M=""+f[p];if(!f.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var D=b.get,j=b.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return D.call(this)},set:function(se){M=""+se,j.call(this,se)}}),Object.defineProperty(f,p,{enumerable:b.enumerable}),{getValue:function(){return M},setValue:function(se){M=""+se},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function $e(f){f._valueTracker||(f._valueTracker=Te(f))}function Ee(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var b=p.getValue(),M="";return f&&(M=Qe(f)?f.checked?"true":"false":f.value),f=M,f!==b?(p.setValue(f),!0):!1}function Oe(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function le(f,p){var b=p.checked;return re({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function vt(f,p){var b=p.defaultValue==null?"":p.defaultValue,M=p.checked!=null?p.checked:p.defaultChecked;b=Ue(p.value!=null?p.value:b),f._wrapperState={initialChecked:M,initialValue:b,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function ft(f,p){p=p.checked,p!=null&&S(f,"checked",p,!1)}function _t(f,p){ft(f,p);var b=Ue(p.value),M=p.type;if(b!=null)M==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(M==="submit"||M==="reset"){f.removeAttribute("value");return}p.hasOwnProperty("value")?Vt(f,p.type,b):p.hasOwnProperty("defaultValue")&&Vt(f,p.type,Ue(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(f.defaultChecked=!!p.defaultChecked)}function mt(f,p,b){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var M=p.type;if(!(M!=="submit"&&M!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+f._wrapperState.initialValue,b||p===f.value||(f.value=p),f.defaultValue=p}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function Vt(f,p,b){(p!=="number"||Oe(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var bt=Array.isArray;function de(f,p,b,M){if(f=f.options,p){p={};for(var D=0;D<b.length;D++)p["$"+b[D]]=!0;for(b=0;b<f.length;b++)D=p.hasOwnProperty("$"+f[b].value),f[b].selected!==D&&(f[b].selected=D),D&&M&&(f[b].defaultSelected=!0)}else{for(b=""+Ue(b),p=null,D=0;D<f.length;D++){if(f[D].value===b){f[D].selected=!0,M&&(f[D].defaultSelected=!0);return}p!==null||f[D].disabled||(p=f[D])}p!==null&&(p.selected=!0)}}function ae(f,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},p,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function He(f,p){var b=p.value;if(b==null){if(b=p.children,p=p.defaultValue,b!=null){if(p!=null)throw Error(t(92));if(bt(b)){if(1<b.length)throw Error(t(93));b=b[0]}p=b}p==null&&(p=""),b=p}f._wrapperState={initialValue:Ue(b)}}function Ze(f,p){var b=Ue(p.value),M=Ue(p.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),p.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),M!=null&&(f.defaultValue=""+M)}function ut(f){var p=f.textContent;p===f._wrapperState.initialValue&&p!==""&&p!==null&&(f.value=p)}function st(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(f,p){return f==null||f==="http://www.w3.org/1999/xhtml"?st(p):f==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Et,Lt=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,b,M,D){MSApp.execUnsafeLocalFunction(function(){return f(p,b,M,D)})}:f}(function(f,p){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=p;else{for(Et=Et||document.createElement("div"),Et.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Et.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;p.firstChild;)f.appendChild(p.firstChild)}});function hn(f,p){if(p){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=p;return}}f.textContent=p}var gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jt=["Webkit","ms","Moz","O"];Object.keys(gt).forEach(function(f){jt.forEach(function(p){p=p+f.charAt(0).toUpperCase()+f.substring(1),gt[p]=gt[f]})});function $t(f,p,b){return p==null||typeof p=="boolean"||p===""?"":b||typeof p!="number"||p===0||gt.hasOwnProperty(f)&&gt[f]?(""+p).trim():p+"px"}function zt(f,p){f=f.style;for(var b in p)if(p.hasOwnProperty(b)){var M=b.indexOf("--")===0,D=$t(b,p[b],M);b==="float"&&(b="cssFloat"),M?f.setProperty(b,D):f[b]=D}}var Ft=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(f,p){if(p){if(Ft[f]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function et(f,p){if(f.indexOf("-")===-1)return typeof p.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function Se(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var je=null,qe=null,at=null;function Nt(f){if(f=gl(f)){if(typeof je!="function")throw Error(t(280));var p=f.stateNode;p&&(p=Yp(p),je(f.stateNode,f.type,p))}}function Dt(f){qe?at?at.push(f):at=[f]:qe=f}function kt(){if(qe){var f=qe,p=at;if(at=qe=null,Nt(f),p)for(f=0;f<p.length;f++)Nt(p[f])}}function En(f,p){return f(p)}function xr(){}var Mn=!1;function _r(f,p,b){if(Mn)return f(p,b);Mn=!0;try{return En(f,p,b)}finally{Mn=!1,(qe!==null||at!==null)&&(xr(),kt())}}function Or(f,p){var b=f.stateNode;if(b===null)return null;var M=Yp(b);if(M===null)return null;b=M[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(f=f.type,M=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!M;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(t(231,p,typeof b));return b}var Xi=!1;if(a)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{Xi=!1}function ur(f,p,b,M,D,j,se,Ae,Ie){var tt=Array.prototype.slice.call(arguments,3);try{p.apply(b,tt)}catch(St){this.onError(St)}}var Gr=!1,Ni=null,Xn=!1,fn=null,Js={onError:function(f){Gr=!0,Ni=f}};function Pi(f,p,b,M,D,j,se,Ae,Ie){Gr=!1,Ni=null,ur.apply(Js,arguments)}function J(f,p,b,M,D,j,se,Ae,Ie){if(Pi.apply(this,arguments),Gr){if(Gr){var tt=Ni;Gr=!1,Ni=null}else throw Error(t(198));Xn||(Xn=!0,fn=tt)}}function ue(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,p.flags&4098&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function Re(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function Xe(f){if(ue(f)!==f)throw Error(t(188))}function it(f){var p=f.alternate;if(!p){if(p=ue(f),p===null)throw Error(t(188));return p!==f?null:f}for(var b=f,M=p;;){var D=b.return;if(D===null)break;var j=D.alternate;if(j===null){if(M=D.return,M!==null){b=M;continue}break}if(D.child===j.child){for(j=D.child;j;){if(j===b)return Xe(D),f;if(j===M)return Xe(D),p;j=j.sibling}throw Error(t(188))}if(b.return!==M.return)b=D,M=j;else{for(var se=!1,Ae=D.child;Ae;){if(Ae===b){se=!0,b=D,M=j;break}if(Ae===M){se=!0,M=D,b=j;break}Ae=Ae.sibling}if(!se){for(Ae=j.child;Ae;){if(Ae===b){se=!0,b=j,M=D;break}if(Ae===M){se=!0,M=j,b=D;break}Ae=Ae.sibling}if(!se)throw Error(t(189))}}if(b.alternate!==M)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?f:p}function Le(f){return f=it(f),f!==null?me(f):null}function me(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=me(f);if(p!==null)return p;f=f.sibling}return null}var De=e.unstable_scheduleCallback,q=e.unstable_cancelCallback,pe=e.unstable_shouldYield,be=e.unstable_requestPaint,xe=e.unstable_now,Pe=e.unstable_getCurrentPriorityLevel,Ge=e.unstable_ImmediatePriority,nt=e.unstable_UserBlockingPriority,rt=e.unstable_NormalPriority,dt=e.unstable_LowPriority,Mt=e.unstable_IdlePriority,Ct=null,pt=null;function Wt(f){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Ct,f,void 0,(f.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:ln,Sn=Math.log,nn=Math.LN2;function ln(f){return f>>>=0,f===0?32:31-(Sn(f)/nn|0)|0}var qt=64,Hn=4194304;function xn(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function In(f,p){var b=f.pendingLanes;if(b===0)return 0;var M=0,D=f.suspendedLanes,j=f.pingedLanes,se=b&268435455;if(se!==0){var Ae=se&~D;Ae!==0?M=xn(Ae):(j&=se,j!==0&&(M=xn(j)))}else se=b&~D,se!==0?M=xn(se):j!==0&&(M=xn(j));if(M===0)return 0;if(p!==0&&p!==M&&!(p&D)&&(D=M&-M,j=p&-p,D>=j||D===16&&(j&4194240)!==0))return p;if(M&4&&(M|=b&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=M;0<p;)b=31-Gt(p),D=1<<b,M|=f[b],p&=~D;return M}function Jn(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(f,p){for(var b=f.suspendedLanes,M=f.pingedLanes,D=f.expirationTimes,j=f.pendingLanes;0<j;){var se=31-Gt(j),Ae=1<<se,Ie=D[se];Ie===-1?(!(Ae&b)||Ae&M)&&(D[se]=Jn(Ae,p)):Ie<=p&&(f.expiredLanes|=Ae),j&=~Ae}}function Wn(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function vn(){var f=qt;return qt<<=1,!(qt&4194240)&&(qt=64),f}function Ur(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function pr(f,p,b){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-Gt(p),f[p]=b}function Br(f,p){var b=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var M=f.eventTimes;for(f=f.expirationTimes;0<b;){var D=31-Gt(b),j=1<<D;p[D]=0,M[D]=-1,f[D]=-1,b&=~j}}function ii(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var M=31-Gt(b),D=1<<M;D&p|f[M]&p&&(f[M]|=p),b&=~D}}var ir=0;function as(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var Ea,eh,Af,Ma,th,ul=!1,nh=[],Oo=null,$n=null,Ls=null,hl=new Map,sc=new Map,Ra=[],fy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function si(f,p){switch(f){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":hl.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":sc.delete(p.pointerId)}}function Pa(f,p,b,M,D,j){return f===null||f.nativeEvent!==j?(f={blockedOn:p,domEventName:b,eventSystemFlags:M,nativeEvent:j,targetContainers:[D]},p!==null&&(p=gl(p),p!==null&&eh(p)),f):(f.eventSystemFlags|=M,p=f.targetContainers,D!==null&&p.indexOf(D)===-1&&p.push(D),f)}function Pp(f,p,b,M,D){switch(p){case"focusin":return Oo=Pa(Oo,f,p,b,M,D),!0;case"dragenter":return $n=Pa($n,f,p,b,M,D),!0;case"mouseover":return Ls=Pa(Ls,f,p,b,M,D),!0;case"pointerover":var j=D.pointerId;return hl.set(j,Pa(hl.get(j)||null,f,p,b,M,D)),!0;case"gotpointercapture":return j=D.pointerId,sc.set(j,Pa(sc.get(j)||null,f,p,b,M,D)),!0}return!1}function ka(f){var p=vc(f.target);if(p!==null){var b=ue(p);if(b!==null){if(p=b.tag,p===13){if(p=Re(b),p!==null){f.blockedOn=p,th(f.priority,function(){Af(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function bs(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var b=Ds(f.domEventName,f.eventSystemFlags,p[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var M=new b.constructor(b.type,b);wt=M,b.target.dispatchEvent(M),wt=null}else return p=gl(b),p!==null&&eh(p),f.blockedOn=b,!1;p.shift()}return!0}function Kc(f,p,b){bs(f)&&b.delete(p)}function Uo(){ul=!1,Oo!==null&&bs(Oo)&&(Oo=null),$n!==null&&bs($n)&&($n=null),Ls!==null&&bs(Ls)&&(Ls=null),hl.forEach(Kc),sc.forEach(Kc)}function oc(f,p){f.blockedOn===p&&(f.blockedOn=null,ul||(ul=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Uo)))}function ac(f){function p(D){return oc(D,f)}if(0<nh.length){oc(nh[0],f);for(var b=1;b<nh.length;b++){var M=nh[b];M.blockedOn===f&&(M.blockedOn=null)}}for(Oo!==null&&oc(Oo,f),$n!==null&&oc($n,f),Ls!==null&&oc(Ls,f),hl.forEach(p),sc.forEach(p),b=0;b<Ra.length;b++)M=Ra[b],M.blockedOn===f&&(M.blockedOn=null);for(;0<Ra.length&&(b=Ra[0],b.blockedOn===null);)ka(b),b.blockedOn===null&&Ra.shift()}var Oi=R.ReactCurrentBatchConfig,As=!0;function aa(f,p,b,M){var D=ir,j=Oi.transition;Oi.transition=null;try{ir=1,lc(f,p,b,M)}finally{ir=D,Oi.transition=j}}function rh(f,p,b,M){var D=ir,j=Oi.transition;Oi.transition=null;try{ir=4,lc(f,p,b,M)}finally{ir=D,Oi.transition=j}}function lc(f,p,b,M){if(As){var D=Ds(f,p,b,M);if(D===null)Gp(f,p,M,ih,b),si(f,M);else if(Pp(D,f,p,b,M))M.stopPropagation();else if(si(f,M),p&4&&-1<fy.indexOf(f)){for(;D!==null;){var j=gl(D);if(j!==null&&Ea(j),j=Ds(f,p,b,M),j===null&&Gp(f,p,M,ih,b),j===D)break;D=j}D!==null&&M.stopPropagation()}else Gp(f,p,M,null,b)}}var ih=null;function Ds(f,p,b,M){if(ih=null,f=Se(M),f=vc(f),f!==null)if(p=ue(f),p===null)f=null;else if(b=p.tag,b===13){if(f=Re(p),f!==null)return f;f=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null);return ih=f,null}function fl(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pe()){case Ge:return 1;case nt:return 4;case rt:case dt:return 16;case Mt:return 536870912;default:return 16}default:return 16}}var Zs=null,sh=null,Ss=null;function cc(){if(Ss)return Ss;var f,p=sh,b=p.length,M,D="value"in Zs?Zs.value:Zs.textContent,j=D.length;for(f=0;f<b&&p[f]===D[f];f++);var se=b-f;for(M=1;M<=se&&p[b-M]===D[j-M];M++);return Ss=D.slice(f,1<M?1-M:void 0)}function zo(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function Ho(){return!0}function oh(){return!1}function qi(f){function p(b,M,D,j,se){this._reactName=b,this._targetInst=D,this.type=M,this.nativeEvent=j,this.target=se,this.currentTarget=null;for(var Ae in f)f.hasOwnProperty(Ae)&&(b=f[Ae],this[Ae]=b?b(j):j[Ae]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Ho:oh,this.isPropagationStopped=oh,this}return re(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),p}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=qi(Ba),Ia=re({},Ba,{view:0,detail:0}),La=qi(Ia),ls,Qs,eo,hc=re({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==eo&&(eo&&f.type==="mousemove"?(ls=f.screenX-eo.screenX,Qs=f.screenY-eo.screenY):Qs=ls=0,eo=f),ls)},movementY:function(f){return"movementY"in f?f.movementY:Qs}}),Sf=qi(hc),jo=re({},hc,{dataTransfer:0}),Da=qi(jo),ah=re({},Ia,{relatedTarget:0}),fc=qi(ah),lh=re({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),kp=qi(lh),Bp=re({},Ba,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),dc=qi(Bp),ch=re({},Ba,{data:0}),Cf=qi(ch),Ip={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=uh[f])?!!p[f]:!1}function z(){return E}var W=re({},Ia,{key:function(f){if(f.key){var p=Ip[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=zo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Tf[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z,charCode:function(f){return f.type==="keypress"?zo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?zo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),ie=qi(W),ge=re({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_e=qi(ge),ve=re({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z}),Be=qi(ve),Ye=re({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),xt=qi(Ye),Ot=re({},hc,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Cn=qi(Ot),cn=[9,13,27,32],Pt=a&&"CompositionEvent"in window,en=null;a&&"documentMode"in document&&(en=document.documentMode);var sn=a&&"TextEvent"in window&&!en,wr=a&&(!Pt||en&&8<en&&11>=en),sr=" ",_i=!1;function Cs(f,p){switch(f){case"keyup":return cn.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ui(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Zn=!1;function ki(f,p){switch(f){case"compositionend":return Ui(p);case"keypress":return p.which!==32?null:(_i=!0,sr);case"textInput":return f=p.data,f===sr&&_i?null:f;default:return null}}function to(f,p){if(Zn)return f==="compositionend"||!Pt&&Cs(f,p)?(f=cc(),Ss=sh=Zs=null,Zn=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return wr&&p.locale!=="ko"?null:p.data;default:return null}}var pc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!pc[f.type]:p==="textarea"}function mc(f,p,b,M){Dt(M),p=Vp(p,"onChange"),0<p.length&&(b=new uc("onChange","change",null,b,M),f.push({event:b,listeners:p}))}var Fa=null,gc=null;function Jc(f){mh(f,0)}function dl(f){var p=wi(f);if(Ee(p))return f}function Wv(f,p){if(f==="change")return p}var fh=!1;if(a){var no;if(a){var Zc="oninput"in document;if(!Zc){var Qc=document.createElement("div");Qc.setAttribute("oninput","return;"),Zc=typeof Qc.oninput=="function"}no=Zc}else no=!1;fh=no&&(!document.documentMode||9<document.documentMode)}function la(){Fa&&(Fa.detachEvent("onpropertychange",Lp),gc=Fa=null)}function Lp(f){if(f.propertyName==="value"&&dl(gc)){var p=[];mc(p,gc,f,Se(f)),_r(Jc,p)}}function dh(f,p,b){f==="focusin"?(la(),Fa=p,gc=b,Fa.attachEvent("onpropertychange",Lp)):f==="focusout"&&la()}function $v(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return dl(gc)}function dy(f,p){if(f==="click")return dl(p)}function oi(f,p){if(f==="input"||f==="change")return dl(p)}function Dp(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var yo=typeof Object.is=="function"?Object.is:Dp;function eu(f,p){if(yo(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),M=Object.keys(p);if(b.length!==M.length)return!1;for(M=0;M<b.length;M++){var D=b[M];if(!l.call(p,D)||!yo(f[D],p[D]))return!1}return!0}function Ef(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function xo(f,p){var b=Ef(f);f=0;for(var M;b;){if(b.nodeType===3){if(M=f+b.textContent.length,f<=p&&M>=p)return{node:b,offset:p-f};f=M}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Ef(b)}}function tu(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?tu(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function ai(){for(var f=window,p=Oe();p instanceof f.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)f=p.contentWindow;else break;p=Oe(f.document)}return p}function Yi(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}function Ki(f){var p=ai(),b=f.focusedElem,M=f.selectionRange;if(p!==b&&b&&b.ownerDocument&&tu(b.ownerDocument.documentElement,b)){if(M!==null&&Yi(b)){if(p=M.start,f=M.end,f===void 0&&(f=p),"selectionStart"in b)b.selectionStart=p,b.selectionEnd=Math.min(f,b.value.length);else if(f=(p=b.ownerDocument||document)&&p.defaultView||window,f.getSelection){f=f.getSelection();var D=b.textContent.length,j=Math.min(M.start,D);M=M.end===void 0?j:Math.min(M.end,D),!f.extend&&j>M&&(D=M,M=j,j=D),D=xo(b,j);var se=xo(b,M);D&&se&&(f.rangeCount!==1||f.anchorNode!==D.node||f.anchorOffset!==D.offset||f.focusNode!==se.node||f.focusOffset!==se.offset)&&(p=p.createRange(),p.setStart(D.node,D.offset),f.removeAllRanges(),j>M?(f.addRange(p),f.extend(se.node,se.offset)):(p.setEnd(se.node,se.offset),f.addRange(p)))}}for(p=[],f=b;f=f.parentNode;)f.nodeType===1&&p.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<p.length;b++)f=p[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Fp=a&&"documentMode"in document&&11>=document.documentMode,Na=null,nu=null,Mf=null,Ji=!1;function Np(f,p,b){var M=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Ji||Na==null||Na!==Oe(M)||(M=Na,"selectionStart"in M&&Yi(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Mf&&eu(Mf,M)||(Mf=M,M=Vp(nu,"onSelect"),0<M.length&&(p=new uc("onSelect","select",null,p,b),f.push({event:p,listeners:M}),p.target=Na)))}function ph(f,p){var b={};return b[f.toLowerCase()]=p.toLowerCase(),b["Webkit"+f]="webkit"+p,b["Moz"+f]="moz"+p,b}var yc={animationend:ph("Animation","AnimationEnd"),animationiteration:ph("Animation","AnimationIteration"),animationstart:ph("Animation","AnimationStart"),transitionend:ph("Transition","TransitionEnd")},ca={},ua={};a&&(ua=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function Oa(f){if(ca[f])return ca[f];if(!yc[f])return f;var p=yc[f],b;for(b in p)if(p.hasOwnProperty(b)&&b in ua)return ca[f]=p[b];return f}var Rf=Oa("animationend"),Pf=Oa("animationiteration"),py=Oa("animationstart"),my=Oa("transitionend"),gy=new Map,yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pl(f,p){gy.set(f,p),s(p,[f])}for(var Op=0;Op<yy.length;Op++){var kf=yy[Op],Bf=kf.toLowerCase(),Xv=kf[0].toUpperCase()+kf.slice(1);pl(Bf,"on"+Xv)}pl(Rf,"onAnimationEnd"),pl(Pf,"onAnimationIteration"),pl(py,"onAnimationStart"),pl("dblclick","onDoubleClick"),pl("focusin","onFocus"),pl("focusout","onBlur"),pl(my,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Up=new Set("cancel close invalid load scroll toggle".split(" ").concat(xc));function zp(f,p,b){var M=f.type||"unknown-event";f.currentTarget=b,J(M,p,void 0,f),f.currentTarget=null}function mh(f,p){p=(p&4)!==0;for(var b=0;b<f.length;b++){var M=f[b],D=M.event;M=M.listeners;e:{var j=void 0;if(p)for(var se=M.length-1;0<=se;se--){var Ae=M[se],Ie=Ae.instance,tt=Ae.currentTarget;if(Ae=Ae.listener,Ie!==j&&D.isPropagationStopped())break e;zp(D,Ae,tt),j=Ie}else for(se=0;se<M.length;se++){if(Ae=M[se],Ie=Ae.instance,tt=Ae.currentTarget,Ae=Ae.listener,Ie!==j&&D.isPropagationStopped())break e;zp(D,Ae,tt),j=Ie}}}if(Xn)throw f=fn,Xn=!1,fn=null,f}function Vr(f,p){var b=p[su];b===void 0&&(b=p[su]=new Set);var M=f+"__bubble";b.has(M)||(jp(p,f,2,!1),b.add(M))}function Hp(f,p,b){var M=0;p&&(M|=4),jp(b,f,M,p)}var If="_reactListening"+Math.random().toString(36).slice(2);function gh(f){if(!f[If]){f[If]=!0,r.forEach(function(b){b!=="selectionchange"&&(Up.has(b)||Hp(b,!1,f),Hp(b,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[If]||(p[If]=!0,Hp("selectionchange",!1,p))}}function jp(f,p,b,M){switch(fl(p)){case 1:var D=aa;break;case 4:D=rh;break;default:D=lc}b=D.bind(null,p,b,f),D=void 0,!Xi||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(D=!0),M?D!==void 0?f.addEventListener(p,b,{capture:!0,passive:D}):f.addEventListener(p,b,!0):D!==void 0?f.addEventListener(p,b,{passive:D}):f.addEventListener(p,b,!1)}function Gp(f,p,b,M,D){var j=M;if(!(p&1)&&!(p&2)&&M!==null)e:for(;;){if(M===null)return;var se=M.tag;if(se===3||se===4){var Ae=M.stateNode.containerInfo;if(Ae===D||Ae.nodeType===8&&Ae.parentNode===D)break;if(se===4)for(se=M.return;se!==null;){var Ie=se.tag;if((Ie===3||Ie===4)&&(Ie=se.stateNode.containerInfo,Ie===D||Ie.nodeType===8&&Ie.parentNode===D))return;se=se.return}for(;Ae!==null;){if(se=vc(Ae),se===null)return;if(Ie=se.tag,Ie===5||Ie===6){M=j=se;continue e}Ae=Ae.parentNode}}M=M.return}_r(function(){var tt=j,St=Se(b),Tt=[];e:{var At=gy.get(f);if(At!==void 0){var Qt=uc,an=f;switch(f){case"keypress":if(zo(b)===0)break e;case"keydown":case"keyup":Qt=ie;break;case"focusin":an="focus",Qt=fc;break;case"focusout":an="blur",Qt=fc;break;case"beforeblur":case"afterblur":Qt=fc;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qt=Sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qt=Da;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qt=Be;break;case Rf:case Pf:case py:Qt=kp;break;case my:Qt=xt;break;case"scroll":Qt=La;break;case"wheel":Qt=Cn;break;case"copy":case"cut":case"paste":Qt=dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qt=_e}var un=(p&4)!==0,Hi=!un&&f==="scroll",We=un?At!==null?At+"Capture":null:At;un=[];for(var Fe=tt,Ke;Fe!==null;){Ke=Fe;var Bt=Ke.stateNode;if(Ke.tag===5&&Bt!==null&&(Ke=Bt,We!==null&&(Bt=Or(Fe,We),Bt!=null&&un.push(yh(Fe,Bt,Ke)))),Hi)break;Fe=Fe.return}0<un.length&&(At=new Qt(At,an,null,b,St),Tt.push({event:At,listeners:un}))}}if(!(p&7)){e:{if(At=f==="mouseover"||f==="pointerover",Qt=f==="mouseout"||f==="pointerout",At&&b!==wt&&(an=b.relatedTarget||b.fromElement)&&(vc(an)||an[vo]))break e;if((Qt||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,Qt?(an=b.relatedTarget||b.toElement,Qt=tt,an=an?vc(an):null,an!==null&&(Hi=ue(an),an!==Hi||an.tag!==5&&an.tag!==6)&&(an=null)):(Qt=null,an=tt),Qt!==an)){if(un=Sf,Bt="onMouseLeave",We="onMouseEnter",Fe="mouse",(f==="pointerout"||f==="pointerover")&&(un=_e,Bt="onPointerLeave",We="onPointerEnter",Fe="pointer"),Hi=Qt==null?At:wi(Qt),Ke=an==null?At:wi(an),At=new un(Bt,Fe+"leave",Qt,b,St),At.target=Hi,At.relatedTarget=Ke,Bt=null,vc(St)===tt&&(un=new un(We,Fe+"enter",an,b,St),un.target=Ke,un.relatedTarget=Hi,Bt=un),Hi=Bt,Qt&&an)t:{for(un=Qt,We=an,Fe=0,Ke=un;Ke;Ke=ru(Ke))Fe++;for(Ke=0,Bt=We;Bt;Bt=ru(Bt))Ke++;for(;0<Fe-Ke;)un=ru(un),Fe--;for(;0<Ke-Fe;)We=ru(We),Ke--;for(;Fe--;){if(un===We||We!==null&&un===We.alternate)break t;un=ru(un),We=ru(We)}un=null}else un=null;Qt!==null&&qv(Tt,At,Qt,un,!1),an!==null&&Hi!==null&&qv(Tt,Hi,an,un,!0)}}e:{if(At=tt?wi(tt):window,Qt=At.nodeName&&At.nodeName.toLowerCase(),Qt==="select"||Qt==="input"&&At.type==="file")var mn=Wv;else if(hh(At))if(fh)mn=oi;else{mn=$v;var Rn=dh}else(Qt=At.nodeName)&&Qt.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(mn=dy);if(mn&&(mn=mn(f,tt))){mc(Tt,mn,b,St);break e}Rn&&Rn(f,At,tt),f==="focusout"&&(Rn=At._wrapperState)&&Rn.controlled&&At.type==="number"&&Vt(At,"number",At.value)}switch(Rn=tt?wi(tt):window,f){case"focusin":(hh(Rn)||Rn.contentEditable==="true")&&(Na=Rn,nu=tt,Mf=null);break;case"focusout":Mf=nu=Na=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,Np(Tt,b,St);break;case"selectionchange":if(Fp)break;case"keydown":case"keyup":Np(Tt,b,St)}var Pn;if(Pt)e:{switch(f){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else Zn?Cs(f,b)&&(Nn="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Nn="onCompositionStart");Nn&&(wr&&b.locale!=="ko"&&(Zn||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&Zn&&(Pn=cc()):(Zs=St,sh="value"in Zs?Zs.value:Zs.textContent,Zn=!0)),Rn=Vp(tt,Nn),0<Rn.length&&(Nn=new Cf(Nn,f,null,b,St),Tt.push({event:Nn,listeners:Rn}),Pn?Nn.data=Pn:(Pn=Ui(b),Pn!==null&&(Nn.data=Pn)))),(Pn=sn?ki(f,b):to(f,b))&&(tt=Vp(tt,"onBeforeInput"),0<tt.length&&(St=new Cf("onBeforeInput","beforeinput",null,b,St),Tt.push({event:St,listeners:tt}),St.data=Pn))}mh(Tt,p)})}function yh(f,p,b){return{instance:f,listener:p,currentTarget:b}}function Vp(f,p){for(var b=p+"Capture",M=[];f!==null;){var D=f,j=D.stateNode;D.tag===5&&j!==null&&(D=j,j=Or(f,b),j!=null&&M.unshift(yh(f,j,D)),j=Or(f,p),j!=null&&M.push(yh(f,j,D))),f=f.return}return M}function ru(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function qv(f,p,b,M,D){for(var j=p._reactName,se=[];b!==null&&b!==M;){var Ae=b,Ie=Ae.alternate,tt=Ae.stateNode;if(Ie!==null&&Ie===M)break;Ae.tag===5&&tt!==null&&(Ae=tt,D?(Ie=Or(b,j),Ie!=null&&se.unshift(yh(b,Ie,Ae))):D||(Ie=Or(b,j),Ie!=null&&se.push(yh(b,Ie,Ae)))),b=b.return}se.length!==0&&f.push({event:p,listeners:se})}var FS=/\r\n?/g,Yv=/\u0000|\uFFFD/g;function xy(f){return(typeof f=="string"?f:""+f).replace(FS,`
`).replace(Yv,"")}function Lf(f,p,b){if(p=xy(p),xy(f)!==p&&b)throw Error(t(425))}function Df(){}var xh=null,vy=null;function _y(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var wy=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(f){return Wp.resolve(null).then(f).catch(Kv)}:wy;function Kv(f){setTimeout(function(){throw f})}function $p(f,p){var b=p,M=0;do{var D=b.nextSibling;if(f.removeChild(b),D&&D.nodeType===8)if(b=D.data,b==="/$"){if(M===0){f.removeChild(D),ac(p);return}M--}else b!=="$"&&b!=="$?"&&b!=="$!"||M++;b=D}while(b);ac(p)}function ml(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return f}function Ay(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return f;p--}else b==="/$"&&p++}f=f.previousSibling}return null}var iu=Math.random().toString(36).slice(2),zi="__reactFiber$"+iu,vh="__reactProps$"+iu,vo="__reactContainer$"+iu,su="__reactEvents$"+iu,Xp="__reactListeners$"+iu,qp="__reactHandles$"+iu;function vc(f){var p=f[zi];if(p)return p;for(var b=f.parentNode;b;){if(p=b[vo]||b[zi]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(f=Ay(f);f!==null;){if(b=f[zi])return b;f=Ay(f)}return p}f=b,b=f.parentNode}return null}function gl(f){return f=f[zi]||f[vo],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function wi(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function Yp(f){return f[vh]||null}var Sy=[],Zi=-1;function pi(f){return{current:f}}function Wr(f){0>Zi||(f.current=Sy[Zi],Sy[Zi]=null,Zi--)}function zr(f,p){Zi++,Sy[Zi]=f.current,f.current=p}var yl={},cs=pi(yl),Fs=pi(!1),xl=yl;function ou(f,p){var b=f.type.contextTypes;if(!b)return yl;var M=f.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var D={},j;for(j in b)D[j]=p[j];return M&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=D),D}function Ts(f){return f=f.childContextTypes,f!=null}function Ff(){Wr(Fs),Wr(cs)}function Cy(f,p,b){if(cs.current!==yl)throw Error(t(168));zr(cs,p),zr(Fs,b)}function Nf(f,p,b){var M=f.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return b;M=M.getChildContext();for(var D in M)if(!(D in p))throw Error(t(108,ke(f)||"Unknown",D));return re({},b,M)}function au(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||yl,xl=cs.current,zr(cs,f),zr(Fs,Fs.current),!0}function Ty(f,p,b){var M=f.stateNode;if(!M)throw Error(t(169));b?(f=Nf(f,p,xl),M.__reactInternalMemoizedMergedChildContext=f,Wr(Fs),Wr(cs),zr(cs,f)):Wr(Fs),zr(Fs,b)}var ha=null,Of=!1,Kp=!1;function Uf(f){ha===null?ha=[f]:ha.push(f)}function Jv(f){Of=!0,Uf(f)}function Ua(){if(!Kp&&ha!==null){Kp=!0;var f=0,p=ir;try{var b=ha;for(ir=1;f<b.length;f++){var M=b[f];do M=M(!0);while(M!==null)}ha=null,Of=!1}catch(D){throw ha!==null&&(ha=ha.slice(f+1)),De(Ge,Ua),D}finally{ir=p,Kp=!1}}return null}var lu=[],ro=0,Jp=null,Zp=0,Ns=[],Qi=0,cu=null,Ht=1,Go="";function vl(f,p){lu[ro++]=Zp,lu[ro++]=Jp,Jp=f,Zp=p}function Ey(f,p,b){Ns[Qi++]=Ht,Ns[Qi++]=Go,Ns[Qi++]=cu,cu=f;var M=Ht;f=Go;var D=32-Gt(M)-1;M&=~(1<<D),b+=1;var j=32-Gt(p)+D;if(30<j){var se=D-D%5;j=(M&(1<<se)-1).toString(32),M>>=se,D-=se,Ht=1<<32-Gt(p)+D|b<<D|M,Go=j+f}else Ht=1<<j|b<<D|M,Go=f}function My(f){f.return!==null&&(vl(f,1),Ey(f,1,0))}function _l(f){for(;f===Jp;)Jp=lu[--ro],lu[ro]=null,Zp=lu[--ro],lu[ro]=null;for(;f===cu;)cu=Ns[--Qi],Ns[Qi]=null,Go=Ns[--Qi],Ns[Qi]=null,Ht=Ns[--Qi],Ns[Qi]=null}var us=null,Os=null,Kr=!1,Vo=null;function Ry(f,p){var b=Va(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=f,p=f.deletions,p===null?(f.deletions=[b],f.flags|=16):p.push(b)}function Py(f,p){switch(f.tag){case 5:var b=f.type;return p=p.nodeType!==1||b.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(f.stateNode=p,us=f,Os=ml(p.firstChild),!0):!1;case 6:return p=f.pendingProps===""||p.nodeType!==3?null:p,p!==null?(f.stateNode=p,us=f,Os=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(b=cu!==null?{id:Ht,overflow:Go}:null,f.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=Va(18,null,null,0),b.stateNode=p,b.return=f,f.child=b,us=f,Os=null,!0):!1;default:return!1}}function Qp(f){return(f.mode&1)!==0&&(f.flags&128)===0}function em(f){if(Kr){var p=Os;if(p){var b=p;if(!Py(f,p)){if(Qp(f))throw Error(t(418));p=ml(b.nextSibling);var M=us;p&&Py(f,p)?Ry(M,b):(f.flags=f.flags&-4097|2,Kr=!1,us=f)}}else{if(Qp(f))throw Error(t(418));f.flags=f.flags&-4097|2,Kr=!1,us=f}}}function tm(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;us=f}function _h(f){if(f!==us)return!1;if(!Kr)return tm(f),Kr=!0,!1;var p;if((p=f.tag!==3)&&!(p=f.tag!==5)&&(p=f.type,p=p!=="head"&&p!=="body"&&!_y(f.type,f.memoizedProps)),p&&(p=Os)){if(Qp(f))throw ky(),Error(t(418));for(;p;)Ry(f,p),p=ml(p.nextSibling)}if(tm(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(p===0){Os=ml(f.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++}f=f.nextSibling}Os=null}}else Os=us?ml(f.stateNode.nextSibling):null;return!0}function ky(){for(var f=Os;f;)f=ml(f.nextSibling)}function _c(){Os=us=null,Kr=!1}function wh(f){Vo===null?Vo=[f]:Vo.push(f)}var OS=R.ReactCurrentBatchConfig;function zf(f,p,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var M=b.stateNode}if(!M)throw Error(t(147,f));var D=M,j=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===j?p.ref:(p=function(se){var Ae=D.refs;se===null?delete Ae[j]:Ae[j]=se},p._stringRef=j,p)}if(typeof f!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,f))}return f}function Hf(f,p){throw f=Object.prototype.toString.call(p),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function By(f){var p=f._init;return p(f._payload)}function Iy(f){function p(We,Fe){if(f){var Ke=We.deletions;Ke===null?(We.deletions=[Fe],We.flags|=16):Ke.push(Fe)}}function b(We,Fe){if(!f)return null;for(;Fe!==null;)p(We,Fe),Fe=Fe.sibling;return null}function M(We,Fe){for(We=new Map;Fe!==null;)Fe.key!==null?We.set(Fe.key,Fe):We.set(Fe.index,Fe),Fe=Fe.sibling;return We}function D(We,Fe){return We=Bh(We,Fe),We.index=0,We.sibling=null,We}function j(We,Fe,Ke){return We.index=Ke,f?(Ke=We.alternate,Ke!==null?(Ke=Ke.index,Ke<Fe?(We.flags|=2,Fe):Ke):(We.flags|=2,Fe)):(We.flags|=1048576,Fe)}function se(We){return f&&We.alternate===null&&(We.flags|=2),We}function Ae(We,Fe,Ke,Bt){return Fe===null||Fe.tag!==6?(Fe=rC(Ke,We.mode,Bt),Fe.return=We,Fe):(Fe=D(Fe,Ke),Fe.return=We,Fe)}function Ie(We,Fe,Ke,Bt){var mn=Ke.type;return mn===N?St(We,Fe,Ke.props.children,Bt,Ke.key):Fe!==null&&(Fe.elementType===mn||typeof mn=="object"&&mn!==null&&mn.$$typeof===$&&By(mn)===Fe.type)?(Bt=D(Fe,Ke.props),Bt.ref=zf(We,Fe,Ke),Bt.return=We,Bt):(Bt=_1(Ke.type,Ke.key,Ke.props,null,We.mode,Bt),Bt.ref=zf(We,Fe,Ke),Bt.return=We,Bt)}function tt(We,Fe,Ke,Bt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Ke.containerInfo||Fe.stateNode.implementation!==Ke.implementation?(Fe=iC(Ke,We.mode,Bt),Fe.return=We,Fe):(Fe=D(Fe,Ke.children||[]),Fe.return=We,Fe)}function St(We,Fe,Ke,Bt,mn){return Fe===null||Fe.tag!==7?(Fe=id(Ke,We.mode,Bt,mn),Fe.return=We,Fe):(Fe=D(Fe,Ke),Fe.return=We,Fe)}function Tt(We,Fe,Ke){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=rC(""+Fe,We.mode,Ke),Fe.return=We,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case B:return Ke=_1(Fe.type,Fe.key,Fe.props,null,We.mode,Ke),Ke.ref=zf(We,null,Fe),Ke.return=We,Ke;case I:return Fe=iC(Fe,We.mode,Ke),Fe.return=We,Fe;case $:var Bt=Fe._init;return Tt(We,Bt(Fe._payload),Ke)}if(bt(Fe)||te(Fe))return Fe=id(Fe,We.mode,Ke,null),Fe.return=We,Fe;Hf(We,Fe)}return null}function At(We,Fe,Ke,Bt){var mn=Fe!==null?Fe.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return mn!==null?null:Ae(We,Fe,""+Ke,Bt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case B:return Ke.key===mn?Ie(We,Fe,Ke,Bt):null;case I:return Ke.key===mn?tt(We,Fe,Ke,Bt):null;case $:return mn=Ke._init,At(We,Fe,mn(Ke._payload),Bt)}if(bt(Ke)||te(Ke))return mn!==null?null:St(We,Fe,Ke,Bt,null);Hf(We,Ke)}return null}function Qt(We,Fe,Ke,Bt,mn){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number")return We=We.get(Ke)||null,Ae(Fe,We,""+Bt,mn);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case B:return We=We.get(Bt.key===null?Ke:Bt.key)||null,Ie(Fe,We,Bt,mn);case I:return We=We.get(Bt.key===null?Ke:Bt.key)||null,tt(Fe,We,Bt,mn);case $:var Rn=Bt._init;return Qt(We,Fe,Ke,Rn(Bt._payload),mn)}if(bt(Bt)||te(Bt))return We=We.get(Ke)||null,St(Fe,We,Bt,mn,null);Hf(Fe,Bt)}return null}function an(We,Fe,Ke,Bt){for(var mn=null,Rn=null,Pn=Fe,Nn=Fe=0,Ps=null;Pn!==null&&Nn<Ke.length;Nn++){Pn.index>Nn?(Ps=Pn,Pn=null):Ps=Pn.sibling;var Rr=At(We,Pn,Ke[Nn],Bt);if(Rr===null){Pn===null&&(Pn=Ps);break}f&&Pn&&Rr.alternate===null&&p(We,Pn),Fe=j(Rr,Fe,Nn),Rn===null?mn=Rr:Rn.sibling=Rr,Rn=Rr,Pn=Ps}if(Nn===Ke.length)return b(We,Pn),Kr&&vl(We,Nn),mn;if(Pn===null){for(;Nn<Ke.length;Nn++)Pn=Tt(We,Ke[Nn],Bt),Pn!==null&&(Fe=j(Pn,Fe,Nn),Rn===null?mn=Pn:Rn.sibling=Pn,Rn=Pn);return Kr&&vl(We,Nn),mn}for(Pn=M(We,Pn);Nn<Ke.length;Nn++)Ps=Qt(Pn,We,Nn,Ke[Nn],Bt),Ps!==null&&(f&&Ps.alternate!==null&&Pn.delete(Ps.key===null?Nn:Ps.key),Fe=j(Ps,Fe,Nn),Rn===null?mn=Ps:Rn.sibling=Ps,Rn=Ps);return f&&Pn.forEach(function(Ih){return p(We,Ih)}),Kr&&vl(We,Nn),mn}function un(We,Fe,Ke,Bt){var mn=te(Ke);if(typeof mn!="function")throw Error(t(150));if(Ke=mn.call(Ke),Ke==null)throw Error(t(151));for(var Rn=mn=null,Pn=Fe,Nn=Fe=0,Ps=null,Rr=Ke.next();Pn!==null&&!Rr.done;Nn++,Rr=Ke.next()){Pn.index>Nn?(Ps=Pn,Pn=null):Ps=Pn.sibling;var Ih=At(We,Pn,Rr.value,Bt);if(Ih===null){Pn===null&&(Pn=Ps);break}f&&Pn&&Ih.alternate===null&&p(We,Pn),Fe=j(Ih,Fe,Nn),Rn===null?mn=Ih:Rn.sibling=Ih,Rn=Ih,Pn=Ps}if(Rr.done)return b(We,Pn),Kr&&vl(We,Nn),mn;if(Pn===null){for(;!Rr.done;Nn++,Rr=Ke.next())Rr=Tt(We,Rr.value,Bt),Rr!==null&&(Fe=j(Rr,Fe,Nn),Rn===null?mn=Rr:Rn.sibling=Rr,Rn=Rr);return Kr&&vl(We,Nn),mn}for(Pn=M(We,Pn);!Rr.done;Nn++,Rr=Ke.next())Rr=Qt(Pn,We,Nn,Rr.value,Bt),Rr!==null&&(f&&Rr.alternate!==null&&Pn.delete(Rr.key===null?Nn:Rr.key),Fe=j(Rr,Fe,Nn),Rn===null?mn=Rr:Rn.sibling=Rr,Rn=Rr);return f&&Pn.forEach(function(y$){return p(We,y$)}),Kr&&vl(We,Nn),mn}function Hi(We,Fe,Ke,Bt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===N&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case B:e:{for(var mn=Ke.key,Rn=Fe;Rn!==null;){if(Rn.key===mn){if(mn=Ke.type,mn===N){if(Rn.tag===7){b(We,Rn.sibling),Fe=D(Rn,Ke.props.children),Fe.return=We,We=Fe;break e}}else if(Rn.elementType===mn||typeof mn=="object"&&mn!==null&&mn.$$typeof===$&&By(mn)===Rn.type){b(We,Rn.sibling),Fe=D(Rn,Ke.props),Fe.ref=zf(We,Rn,Ke),Fe.return=We,We=Fe;break e}b(We,Rn);break}else p(We,Rn);Rn=Rn.sibling}Ke.type===N?(Fe=id(Ke.props.children,We.mode,Bt,Ke.key),Fe.return=We,We=Fe):(Bt=_1(Ke.type,Ke.key,Ke.props,null,We.mode,Bt),Bt.ref=zf(We,Fe,Ke),Bt.return=We,We=Bt)}return se(We);case I:e:{for(Rn=Ke.key;Fe!==null;){if(Fe.key===Rn)if(Fe.tag===4&&Fe.stateNode.containerInfo===Ke.containerInfo&&Fe.stateNode.implementation===Ke.implementation){b(We,Fe.sibling),Fe=D(Fe,Ke.children||[]),Fe.return=We,We=Fe;break e}else{b(We,Fe);break}else p(We,Fe);Fe=Fe.sibling}Fe=iC(Ke,We.mode,Bt),Fe.return=We,We=Fe}return se(We);case $:return Rn=Ke._init,Hi(We,Fe,Rn(Ke._payload),Bt)}if(bt(Ke))return an(We,Fe,Ke,Bt);if(te(Ke))return un(We,Fe,Ke,Bt);Hf(We,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,Fe!==null&&Fe.tag===6?(b(We,Fe.sibling),Fe=D(Fe,Ke),Fe.return=We,We=Fe):(b(We,Fe),Fe=rC(Ke,We.mode,Bt),Fe.return=We,We=Fe),se(We)):b(We,Fe)}return Hi}var uu=Iy(!0),jf=Iy(!1),hu=pi(null),fu=null,wl=null,bh=null;function du(){bh=wl=fu=null}function Gf(f){var p=hu.current;Wr(hu),f._currentValue=p}function Vf(f,p,b){for(;f!==null;){var M=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),f===b)break;f=f.return}}function wc(f,p){fu=f,bh=wl=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&p&&(er=!0),f.firstContext=null)}function _o(f){var p=f._currentValue;if(bh!==f)if(f={context:f,memoizedValue:p,next:null},wl===null){if(fu===null)throw Error(t(308));wl=f,fu.dependencies={lanes:0,firstContext:f}}else wl=wl.next=f;return p}var bl=null;function Ly(f){bl===null?bl=[f]:bl.push(f)}function Wf(f,p,b,M){var D=p.interleaved;return D===null?(b.next=b,Ly(p)):(b.next=D.next,D.next=b),p.interleaved=b,fa(f,M)}function fa(f,p){f.lanes|=p;var b=f.alternate;for(b!==null&&(b.lanes|=p),b=f,f=f.return;f!==null;)f.childLanes|=p,b=f.alternate,b!==null&&(b.childLanes|=p),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Ir=!1;function Qn(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bi(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Lr(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function Qr(f,p,b){var M=f.updateQueue;if(M===null)return null;if(M=M.shared,Cr&2){var D=M.pending;return D===null?p.next=p:(p.next=D.next,D.next=p),M.pending=p,fa(f,b)}return D=M.interleaved,D===null?(p.next=p,Ly(M)):(p.next=D.next,D.next=p),M.interleaved=p,fa(f,b)}function Es(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var M=p.lanes;M&=f.pendingLanes,b|=M,p.lanes=b,ii(f,b)}}function pu(f,p){var b=f.updateQueue,M=f.alternate;if(M!==null&&(M=M.updateQueue,b===M)){var D=null,j=null;if(b=b.firstBaseUpdate,b!==null){do{var se={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};j===null?D=j=se:j=j.next=se,b=b.next}while(b!==null);j===null?D=j=p:j=j.next=p}else D=j=p;b={baseState:M.baseState,firstBaseUpdate:D,lastBaseUpdate:j,shared:M.shared,effects:M.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function mi(f,p,b,M){var D=f.updateQueue;Ir=!1;var j=D.firstBaseUpdate,se=D.lastBaseUpdate,Ae=D.shared.pending;if(Ae!==null){D.shared.pending=null;var Ie=Ae,tt=Ie.next;Ie.next=null,se===null?j=tt:se.next=tt,se=Ie;var St=f.alternate;St!==null&&(St=St.updateQueue,Ae=St.lastBaseUpdate,Ae!==se&&(Ae===null?St.firstBaseUpdate=tt:Ae.next=tt,St.lastBaseUpdate=Ie))}if(j!==null){var Tt=D.baseState;se=0,St=tt=Ie=null,Ae=j;do{var At=Ae.lane,Qt=Ae.eventTime;if((M&At)===At){St!==null&&(St=St.next={eventTime:Qt,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var an=f,un=Ae;switch(At=p,Qt=b,un.tag){case 1:if(an=un.payload,typeof an=="function"){Tt=an.call(Qt,Tt,At);break e}Tt=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=un.payload,At=typeof an=="function"?an.call(Qt,Tt,At):an,At==null)break e;Tt=re({},Tt,At);break e;case 2:Ir=!0}}Ae.callback!==null&&Ae.lane!==0&&(f.flags|=64,At=D.effects,At===null?D.effects=[Ae]:At.push(Ae))}else Qt={eventTime:Qt,lane:At,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},St===null?(tt=St=Qt,Ie=Tt):St=St.next=Qt,se|=At;if(Ae=Ae.next,Ae===null){if(Ae=D.shared.pending,Ae===null)break;At=Ae,Ae=At.next,At.next=null,D.lastBaseUpdate=At,D.shared.pending=null}}while(!0);if(St===null&&(Ie=Tt),D.baseState=Ie,D.firstBaseUpdate=tt,D.lastBaseUpdate=St,p=D.shared.interleaved,p!==null){D=p;do se|=D.lane,D=D.next;while(D!==p)}else j===null&&(D.shared.lanes=0);ed|=se,f.lanes=se,f.memoizedState=Tt}}function Ah(f,p,b){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var M=f[p],D=M.callback;if(D!==null){if(M.callback=null,M=b,typeof D!="function")throw Error(t(191,D));D.call(M)}}}var za={},wo=pi(za),mu=pi(za),Al=pi(za);function Bi(f){if(f===za)throw Error(t(174));return f}function $f(f,p){switch(zr(Al,p),zr(mu,f),zr(wo,za),f=p.nodeType,f){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:It(null,"");break;default:f=f===8?p.parentNode:p,p=f.namespaceURI||null,f=f.tagName,p=It(p,f)}Wr(wo),zr(wo,p)}function bc(){Wr(wo),Wr(mu),Wr(Al)}function gu(f){Bi(Al.current);var p=Bi(wo.current),b=It(p,f.type);p!==b&&(zr(mu,f),zr(wo,b))}function Sh(f){mu.current===f&&(Wr(wo),Wr(mu))}var Jr=pi(0);function da(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ch=[];function Ha(){for(var f=0;f<Ch.length;f++)Ch[f]._workInProgressVersionPrimary=null;Ch.length=0}var yu=R.ReactCurrentDispatcher,xu=R.ReactCurrentBatchConfig,Sl=0,$r=null,gi=null,br=null,pa=!1,Ms=!1,Ac=0,io=0;function hs(){throw Error(t(321))}function Xf(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!yo(f[b],p[b]))return!1;return!0}function qf(f,p,b,M,D,j){if(Sl=j,$r=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,yu.current=f===null||f.memoizedState===null?i1:s1,f=b(M,D),Ms){j=0;do{if(Ms=!1,Ac=0,25<=j)throw Error(t(301));j+=1,br=gi=null,p.updateQueue=null,yu.current=o1,f=b(M,D)}while(Ms)}if(yu.current=lm,p=gi!==null&&gi.next!==null,Sl=0,br=gi=$r=null,pa=!1,p)throw Error(t(300));return f}function Dy(){var f=Ac!==0;return Ac=0,f}function fs(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?$r.memoizedState=br=f:br=br.next=f,br}function bo(){if(gi===null){var f=$r.alternate;f=f!==null?f.memoizedState:null}else f=gi.next;var p=br===null?$r.memoizedState:br.next;if(p!==null)br=p,gi=f;else{if(f===null)throw Error(t(310));gi=f,f={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},br===null?$r.memoizedState=br=f:br=br.next=f}return br}function Th(f,p){return typeof p=="function"?p(f):p}function Yf(f){var p=bo(),b=p.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var M=gi,D=M.baseQueue,j=b.pending;if(j!==null){if(D!==null){var se=D.next;D.next=j.next,j.next=se}M.baseQueue=D=j,b.pending=null}if(D!==null){j=D.next,M=M.baseState;var Ae=se=null,Ie=null,tt=j;do{var St=tt.lane;if((Sl&St)===St)Ie!==null&&(Ie=Ie.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),M=tt.hasEagerState?tt.eagerState:f(M,tt.action);else{var Tt={lane:St,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};Ie===null?(Ae=Ie=Tt,se=M):Ie=Ie.next=Tt,$r.lanes|=St,ed|=St}tt=tt.next}while(tt!==null&&tt!==j);Ie===null?se=M:Ie.next=Ae,yo(M,p.memoizedState)||(er=!0),p.memoizedState=M,p.baseState=se,p.baseQueue=Ie,b.lastRenderedState=M}if(f=b.interleaved,f!==null){D=f;do j=D.lane,$r.lanes|=j,ed|=j,D=D.next;while(D!==f)}else D===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function Cl(f){var p=bo(),b=p.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var M=b.dispatch,D=b.pending,j=p.memoizedState;if(D!==null){b.pending=null;var se=D=D.next;do j=f(j,se.action),se=se.next;while(se!==D);yo(j,p.memoizedState)||(er=!0),p.memoizedState=j,p.baseQueue===null&&(p.baseState=j),b.lastRenderedState=j}return[j,M]}function Fy(){}function Ny(f,p){var b=$r,M=bo(),D=p(),j=!yo(M.memoizedState,D);if(j&&(M.memoizedState=D,er=!0),M=M.queue,zy(Zv.bind(null,b,M,f),[f]),M.getSnapshot!==p||j||br!==null&&br.memoizedState.tag&1){if(b.flags|=2048,ma(9,Kf.bind(null,b,M,D,p),void 0,null),Rs===null)throw Error(t(349));Sl&30||nm(b,p,D)}return D}function nm(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=$r.updateQueue,p===null?(p={lastEffect:null,stores:null},$r.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function Kf(f,p,b,M){p.value=b,p.getSnapshot=M,Qv(p)&&Oy(f)}function Zv(f,p,b){return b(function(){Qv(p)&&Oy(f)})}function Qv(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!yo(f,b)}catch{return!0}}function Oy(f){var p=fa(f,1);p!==null&&Pl(p,f,1,-1)}function Uy(f){var p=fs();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Th,lastRenderedState:f},p.queue=f,f=f.dispatch=vu.bind(null,$r,f),[p.memoizedState,f]}function ma(f,p,b,M){return f={tag:f,create:p,destroy:b,deps:M,next:null},p=$r.updateQueue,p===null?(p={lastEffect:null,stores:null},$r.updateQueue=p,p.lastEffect=f.next=f):(b=p.lastEffect,b===null?p.lastEffect=f.next=f:(M=b.next,b.next=f,f.next=M,p.lastEffect=f)),f}function e1(){return bo().memoizedState}function ja(f,p,b,M){var D=fs();$r.flags|=f,D.memoizedState=ma(1|p,b,void 0,M===void 0?null:M)}function Jf(f,p,b,M){var D=bo();M=M===void 0?null:M;var j=void 0;if(gi!==null){var se=gi.memoizedState;if(j=se.destroy,M!==null&&Xf(M,se.deps)){D.memoizedState=ma(p,b,j,M);return}}$r.flags|=f,D.memoizedState=ma(1|p,b,j,M)}function Us(f,p){return ja(8390656,8,f,p)}function zy(f,p){return Jf(2048,8,f,p)}function Hy(f,p){return Jf(4,2,f,p)}function t1(f,p){return Jf(4,4,f,p)}function n1(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function jy(f,p,b){return b=b!=null?b.concat([f]):null,Jf(4,4,n1.bind(null,p,f),b)}function rm(){}function r1(f,p){var b=bo();p=p===void 0?null:p;var M=b.memoizedState;return M!==null&&p!==null&&Xf(p,M[1])?M[0]:(b.memoizedState=[f,p],f)}function Ao(f,p){var b=bo();p=p===void 0?null:p;var M=b.memoizedState;return M!==null&&p!==null&&Xf(p,M[1])?M[0]:(f=f(),b.memoizedState=[f,p],f)}function im(f,p,b){return Sl&21?(yo(b,p)||(b=vn(),$r.lanes|=b,ed|=b,f.baseState=!0),p):(f.baseState&&(f.baseState=!1,er=!0),f.memoizedState=b)}function US(f,p){var b=ir;ir=b!==0&&4>b?b:4,f(!0);var M=xu.transition;xu.transition={};try{f(!1),p()}finally{ir=b,xu.transition=M}}function Tl(){return bo().memoizedState}function sm(f,p,b){var M=Ph(f);if(b={lane:M,action:b,hasEagerState:!1,eagerState:null,next:null},Zf(f))om(p,b);else if(b=Wf(f,p,b,M),b!==null){var D=Co();Pl(b,f,M,D),am(b,p,M)}}function vu(f,p,b){var M=Ph(f),D={lane:M,action:b,hasEagerState:!1,eagerState:null,next:null};if(Zf(f))om(p,D);else{var j=f.alternate;if(f.lanes===0&&(j===null||j.lanes===0)&&(j=p.lastRenderedReducer,j!==null))try{var se=p.lastRenderedState,Ae=j(se,b);if(D.hasEagerState=!0,D.eagerState=Ae,yo(Ae,se)){var Ie=p.interleaved;Ie===null?(D.next=D,Ly(p)):(D.next=Ie.next,Ie.next=D),p.interleaved=D;return}}catch{}finally{}b=Wf(f,p,D,M),b!==null&&(D=Co(),Pl(b,f,M,D),am(b,p,M))}}function Zf(f){var p=f.alternate;return f===$r||p!==null&&p===$r}function om(f,p){Ms=pa=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function am(f,p,b){if(b&4194240){var M=p.lanes;M&=f.pendingLanes,b|=M,p.lanes=b,ii(f,b)}}var lm={readContext:_o,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},i1={readContext:_o,useCallback:function(f,p){return fs().memoizedState=[f,p===void 0?null:p],f},useContext:_o,useEffect:Us,useImperativeHandle:function(f,p,b){return b=b!=null?b.concat([f]):null,ja(4194308,4,n1.bind(null,p,f),b)},useLayoutEffect:function(f,p){return ja(4194308,4,f,p)},useInsertionEffect:function(f,p){return ja(4,2,f,p)},useMemo:function(f,p){var b=fs();return p=p===void 0?null:p,f=f(),b.memoizedState=[f,p],f},useReducer:function(f,p,b){var M=fs();return p=b!==void 0?b(p):p,M.memoizedState=M.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},M.queue=f,f=f.dispatch=sm.bind(null,$r,f),[M.memoizedState,f]},useRef:function(f){var p=fs();return f={current:f},p.memoizedState=f},useState:Uy,useDebugValue:rm,useDeferredValue:function(f){return fs().memoizedState=f},useTransition:function(){var f=Uy(!1),p=f[0];return f=US.bind(null,f[1]),fs().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,b){var M=$r,D=fs();if(Kr){if(b===void 0)throw Error(t(407));b=b()}else{if(b=p(),Rs===null)throw Error(t(349));Sl&30||nm(M,p,b)}D.memoizedState=b;var j={value:b,getSnapshot:p};return D.queue=j,Us(Zv.bind(null,M,j,f),[f]),M.flags|=2048,ma(9,Kf.bind(null,M,j,b,p),void 0,null),b},useId:function(){var f=fs(),p=Rs.identifierPrefix;if(Kr){var b=Go,M=Ht;b=(M&~(1<<32-Gt(M)-1)).toString(32)+b,p=":"+p+"R"+b,b=Ac++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=io++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},s1={readContext:_o,useCallback:r1,useContext:_o,useEffect:zy,useImperativeHandle:jy,useInsertionEffect:Hy,useLayoutEffect:t1,useMemo:Ao,useReducer:Yf,useRef:e1,useState:function(){return Yf(Th)},useDebugValue:rm,useDeferredValue:function(f){var p=bo();return im(p,gi.memoizedState,f)},useTransition:function(){var f=Yf(Th)[0],p=bo().memoizedState;return[f,p]},useMutableSource:Fy,useSyncExternalStore:Ny,useId:Tl,unstable_isNewReconciler:!1},o1={readContext:_o,useCallback:r1,useContext:_o,useEffect:zy,useImperativeHandle:jy,useInsertionEffect:Hy,useLayoutEffect:t1,useMemo:Ao,useReducer:Cl,useRef:e1,useState:function(){return Cl(Th)},useDebugValue:rm,useDeferredValue:function(f){var p=bo();return gi===null?p.memoizedState=f:im(p,gi.memoizedState,f)},useTransition:function(){var f=Cl(Th)[0],p=bo().memoizedState;return[f,p]},useMutableSource:Fy,useSyncExternalStore:Ny,useId:Tl,unstable_isNewReconciler:!1};function Wo(f,p){if(f&&f.defaultProps){p=re({},p),f=f.defaultProps;for(var b in f)p[b]===void 0&&(p[b]=f[b]);return p}return p}function Qf(f,p,b,M){p=f.memoizedState,b=b(M,p),b=b==null?p:re({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var cm={isMounted:function(f){return(f=f._reactInternals)?ue(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var M=Co(),D=Ph(f),j=Lr(M,D);j.payload=p,b!=null&&(j.callback=b),p=Qr(f,j,D),p!==null&&(Pl(p,f,D,M),Es(p,f,D))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var M=Co(),D=Ph(f),j=Lr(M,D);j.tag=1,j.payload=p,b!=null&&(j.callback=b),p=Qr(f,j,D),p!==null&&(Pl(p,f,D,M),Es(p,f,D))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=Co(),M=Ph(f),D=Lr(b,M);D.tag=2,p!=null&&(D.callback=p),p=Qr(f,D,M),p!==null&&(Pl(p,f,M,b),Es(p,f,M))}};function a1(f,p,b,M,D,j,se){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(M,j,se):p.prototype&&p.prototype.isPureReactComponent?!eu(b,M)||!eu(D,j):!0}function y(f,p,b){var M=!1,D=yl,j=p.contextType;return typeof j=="object"&&j!==null?j=_o(j):(D=Ts(p)?xl:cs.current,M=p.contextTypes,j=(M=M!=null)?ou(f,D):yl),p=new p(b,j),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=cm,f.stateNode=p,p._reactInternals=f,M&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=D,f.__reactInternalMemoizedMaskedChildContext=j),p}function x(f,p,b,M){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,M),p.state!==f&&cm.enqueueReplaceState(p,p.state,null)}function T(f,p,b,M){var D=f.stateNode;D.props=b,D.state=f.memoizedState,D.refs={},Qn(f);var j=p.contextType;typeof j=="object"&&j!==null?D.context=_o(j):(j=Ts(p)?xl:cs.current,D.context=ou(f,j)),D.state=f.memoizedState,j=p.getDerivedStateFromProps,typeof j=="function"&&(Qf(f,p,j,b),D.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(p=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),p!==D.state&&cm.enqueueReplaceState(D,D.state,null),mi(f,b,D,M),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308)}function k(f,p){try{var b="",M=p;do b+=he(M),M=M.return;while(M);var D=b}catch(j){D=`
Error generating stack: `+j.message+`
`+j.stack}return{value:f,source:p,stack:D,digest:null}}function H(f,p,b){return{value:f,source:null,stack:b??null,digest:p??null}}function X(f,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var we=typeof WeakMap=="function"?WeakMap:Map;function Ne(f,p,b){b=Lr(-1,b),b.tag=3,b.payload={element:null};var M=p.value;return b.callback=function(){p1||(p1=!0,YS=M),X(f,p)},b}function ct(f,p,b){b=Lr(-1,b),b.tag=3;var M=f.type.getDerivedStateFromError;if(typeof M=="function"){var D=p.value;b.payload=function(){return M(D)},b.callback=function(){X(f,p)}}var j=f.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(b.callback=function(){X(f,p),typeof M!="function"&&(Mh===null?Mh=new Set([this]):Mh.add(this));var se=p.stack;this.componentDidCatch(p.value,{componentStack:se!==null?se:""})}),b}function Rt(f,p,b){var M=f.pingCache;if(M===null){M=f.pingCache=new we;var D=new Set;M.set(p,D)}else D=M.get(p),D===void 0&&(D=new Set,M.set(p,D));D.has(b)||(D.add(b),f=a$.bind(null,f,p,b),p.then(f,f))}function tn(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function jn(f,p,b,M,D){return f.mode&1?(f.flags|=65536,f.lanes=D,f):(f===p?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=Lr(-1,1),p.tag=2,Qr(b,p,1))),b.lanes|=1),f)}var Tn=R.ReactCurrentOwner,er=!1;function Jt(f,p,b,M){p.child=f===null?jf(p,null,b,M):uu(p,f.child,b,M)}function ds(f,p,b,M,D){b=b.render;var j=p.ref;return wc(p,D),M=qf(f,p,b,M,j,D),b=Dy(),f!==null&&!er?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~D,_u(f,p,D)):(Kr&&b&&My(p),p.flags|=1,Jt(f,p,M,D),p.child)}function So(f,p,b,M,D){if(f===null){var j=b.type;return typeof j=="function"&&!nC(j)&&j.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=j,Je(f,p,j,M,D)):(f=_1(b.type,null,M,p,p.mode,D),f.ref=p.ref,f.return=p,p.child=f)}if(j=f.child,!(f.lanes&D)){var se=j.memoizedProps;if(b=b.compare,b=b!==null?b:eu,b(se,M)&&f.ref===p.ref)return _u(f,p,D)}return p.flags|=1,f=Bh(j,M),f.ref=p.ref,f.return=p,p.child=f}function Je(f,p,b,M,D){if(f!==null){var j=f.memoizedProps;if(eu(j,M)&&f.ref===p.ref)if(er=!1,p.pendingProps=M=j,(f.lanes&D)!==0)f.flags&131072&&(er=!0);else return p.lanes=f.lanes,_u(f,p,D)}return Yt(f,p,b,M,D)}function ze(f,p,b){var M=p.pendingProps,D=M.children,j=f!==null?f.memoizedState:null;if(M.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},zr(hm,ga),ga|=b;else{if(!(b&1073741824))return f=j!==null?j.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null,transitions:null},p.updateQueue=null,zr(hm,ga),ga|=f,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=j!==null?j.baseLanes:b,zr(hm,ga),ga|=M}else j!==null?(M=j.baseLanes|b,p.memoizedState=null):M=b,zr(hm,ga),ga|=M;return Jt(f,p,D,b),p.child}function ot(f,p){var b=p.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function Yt(f,p,b,M,D){var j=Ts(b)?xl:cs.current;return j=ou(p,j),wc(p,D),b=qf(f,p,b,M,j,D),M=Dy(),f!==null&&!er?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~D,_u(f,p,D)):(Kr&&M&&My(p),p.flags|=1,Jt(f,p,b,D),p.child)}function dn(f,p,b,M,D){if(Ts(b)){var j=!0;au(p)}else j=!1;if(wc(p,D),p.stateNode===null)c1(f,p),y(p,b,M),T(p,b,M,D),M=!0;else if(f===null){var se=p.stateNode,Ae=p.memoizedProps;se.props=Ae;var Ie=se.context,tt=b.contextType;typeof tt=="object"&&tt!==null?tt=_o(tt):(tt=Ts(b)?xl:cs.current,tt=ou(p,tt));var St=b.getDerivedStateFromProps,Tt=typeof St=="function"||typeof se.getSnapshotBeforeUpdate=="function";Tt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Ae!==M||Ie!==tt)&&x(p,se,M,tt),Ir=!1;var At=p.memoizedState;se.state=At,mi(p,M,se,D),Ie=p.memoizedState,Ae!==M||At!==Ie||Fs.current||Ir?(typeof St=="function"&&(Qf(p,b,St,M),Ie=p.memoizedState),(Ae=Ir||a1(p,b,Ae,M,At,Ie,tt))?(Tt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(p.flags|=4194308)):(typeof se.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Ie),se.props=M,se.state=Ie,se.context=tt,M=Ae):(typeof se.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{se=p.stateNode,bi(f,p),Ae=p.memoizedProps,tt=p.type===p.elementType?Ae:Wo(p.type,Ae),se.props=tt,Tt=p.pendingProps,At=se.context,Ie=b.contextType,typeof Ie=="object"&&Ie!==null?Ie=_o(Ie):(Ie=Ts(b)?xl:cs.current,Ie=ou(p,Ie));var Qt=b.getDerivedStateFromProps;(St=typeof Qt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Ae!==Tt||At!==Ie)&&x(p,se,M,Ie),Ir=!1,At=p.memoizedState,se.state=At,mi(p,M,se,D);var an=p.memoizedState;Ae!==Tt||At!==an||Fs.current||Ir?(typeof Qt=="function"&&(Qf(p,b,Qt,M),an=p.memoizedState),(tt=Ir||a1(p,b,tt,M,At,an,Ie)||!1)?(St||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(M,an,Ie),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(M,an,Ie)),typeof se.componentDidUpdate=="function"&&(p.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof se.componentDidUpdate!="function"||Ae===f.memoizedProps&&At===f.memoizedState||(p.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Ae===f.memoizedProps&&At===f.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=an),se.props=M,se.state=an,se.context=Ie,M=tt):(typeof se.componentDidUpdate!="function"||Ae===f.memoizedProps&&At===f.memoizedState||(p.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Ae===f.memoizedProps&&At===f.memoizedState||(p.flags|=1024),M=!1)}return qn(f,p,b,M,j,D)}function qn(f,p,b,M,D,j){ot(f,p);var se=(p.flags&128)!==0;if(!M&&!se)return D&&Ty(p,b,!1),_u(f,p,j);M=p.stateNode,Tn.current=p;var Ae=se&&typeof b.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,f!==null&&se?(p.child=uu(p,f.child,null,j),p.child=uu(p,null,Ae,j)):Jt(f,p,Ae,j),p.memoizedState=M.state,D&&Ty(p,b,!0),p.child}function Gn(f){var p=f.stateNode;p.pendingContext?Cy(f,p.pendingContext,p.pendingContext!==p.context):p.context&&Cy(f,p.context,!1),$f(f,p.containerInfo)}function vr(f,p,b,M,D){return _c(),wh(D),p.flags|=256,Jt(f,p,b,M),p.child}var Ii={dehydrated:null,treeContext:null,retryLane:0};function yr(f){return{baseLanes:f,cachePool:null,transitions:null}}function El(f,p,b){var M=p.pendingProps,D=Jr.current,j=!1,se=(p.flags&128)!==0,Ae;if((Ae=se)||(Ae=f!==null&&f.memoizedState===null?!1:(D&2)!==0),Ae?(j=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(D|=1),zr(Jr,D&1),f===null)return em(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(p.mode&1?f.data==="$!"?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(se=M.children,f=M.fallback,j?(M=p.mode,j=p.child,se={mode:"hidden",children:se},!(M&1)&&j!==null?(j.childLanes=0,j.pendingProps=se):j=w1(se,M,0,null),f=id(f,M,b,null),j.return=p,f.return=p,j.sibling=f,p.child=j,p.child.memoizedState=yr(b),p.memoizedState=Ii,f):Gy(p,se));if(D=f.memoizedState,D!==null&&(Ae=D.dehydrated,Ae!==null))return YW(f,p,se,M,Ae,D,b);if(j){j=M.fallback,se=p.mode,D=f.child,Ae=D.sibling;var Ie={mode:"hidden",children:M.children};return!(se&1)&&p.child!==D?(M=p.child,M.childLanes=0,M.pendingProps=Ie,p.deletions=null):(M=Bh(D,Ie),M.subtreeFlags=D.subtreeFlags&14680064),Ae!==null?j=Bh(Ae,j):(j=id(j,se,b,null),j.flags|=2),j.return=p,M.return=p,M.sibling=j,p.child=M,M=j,j=p.child,se=f.child.memoizedState,se=se===null?yr(b):{baseLanes:se.baseLanes|b,cachePool:null,transitions:se.transitions},j.memoizedState=se,j.childLanes=f.childLanes&~b,p.memoizedState=Ii,M}return j=f.child,f=j.sibling,M=Bh(j,{mode:"visible",children:M.children}),!(p.mode&1)&&(M.lanes=b),M.return=p,M.sibling=null,f!==null&&(b=p.deletions,b===null?(p.deletions=[f],p.flags|=16):b.push(f)),p.child=M,p.memoizedState=null,M}function Gy(f,p){return p=w1({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function l1(f,p,b,M){return M!==null&&wh(M),uu(p,f.child,null,b),f=Gy(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function YW(f,p,b,M,D,j,se){if(b)return p.flags&256?(p.flags&=-257,M=H(Error(t(422))),l1(f,p,se,M)):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(j=M.fallback,D=p.mode,M=w1({mode:"visible",children:M.children},D,0,null),j=id(j,D,se,null),j.flags|=2,M.return=p,j.return=p,M.sibling=j,p.child=M,p.mode&1&&uu(p,f.child,null,se),p.child.memoizedState=yr(se),p.memoizedState=Ii,j);if(!(p.mode&1))return l1(f,p,se,null);if(D.data==="$!"){if(M=D.nextSibling&&D.nextSibling.dataset,M)var Ae=M.dgst;return M=Ae,j=Error(t(419)),M=H(j,M,void 0),l1(f,p,se,M)}if(Ae=(se&f.childLanes)!==0,er||Ae){if(M=Rs,M!==null){switch(se&-se){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=D&(M.suspendedLanes|se)?0:D,D!==0&&D!==j.retryLane&&(j.retryLane=D,fa(f,D),Pl(M,f,D,-1))}return tC(),M=H(Error(t(421))),l1(f,p,se,M)}return D.data==="$?"?(p.flags|=128,p.child=f.child,p=l$.bind(null,f),D._reactRetry=p,null):(f=j.treeContext,Os=ml(D.nextSibling),us=p,Kr=!0,Vo=null,f!==null&&(Ns[Qi++]=Ht,Ns[Qi++]=Go,Ns[Qi++]=cu,Ht=f.id,Go=f.overflow,cu=p),p=Gy(p,M.children),p.flags|=4096,p)}function eB(f,p,b){f.lanes|=p;var M=f.alternate;M!==null&&(M.lanes|=p),Vf(f.return,p,b)}function zS(f,p,b,M,D){var j=f.memoizedState;j===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:b,tailMode:D}:(j.isBackwards=p,j.rendering=null,j.renderingStartTime=0,j.last=M,j.tail=b,j.tailMode=D)}function tB(f,p,b){var M=p.pendingProps,D=M.revealOrder,j=M.tail;if(Jt(f,p,M.children,b),M=Jr.current,M&2)M=M&1|2,p.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&eB(f,b,p);else if(f.tag===19)eB(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}M&=1}if(zr(Jr,M),!(p.mode&1))p.memoizedState=null;else switch(D){case"forwards":for(b=p.child,D=null;b!==null;)f=b.alternate,f!==null&&da(f)===null&&(D=b),b=b.sibling;b=D,b===null?(D=p.child,p.child=null):(D=b.sibling,b.sibling=null),zS(p,!1,D,b,j);break;case"backwards":for(b=null,D=p.child,p.child=null;D!==null;){if(f=D.alternate,f!==null&&da(f)===null){p.child=D;break}f=D.sibling,D.sibling=b,b=D,D=f}zS(p,!0,b,null,j);break;case"together":zS(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function c1(f,p){!(p.mode&1)&&f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2)}function _u(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),ed|=p.lanes,!(b&p.childLanes))return null;if(f!==null&&p.child!==f.child)throw Error(t(153));if(p.child!==null){for(f=p.child,b=Bh(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=Bh(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function KW(f,p,b){switch(p.tag){case 3:Gn(p),_c();break;case 5:gu(p);break;case 1:Ts(p.type)&&au(p);break;case 4:$f(p,p.stateNode.containerInfo);break;case 10:var M=p.type._context,D=p.memoizedProps.value;zr(hu,M._currentValue),M._currentValue=D;break;case 13:if(M=p.memoizedState,M!==null)return M.dehydrated!==null?(zr(Jr,Jr.current&1),p.flags|=128,null):b&p.child.childLanes?El(f,p,b):(zr(Jr,Jr.current&1),f=_u(f,p,b),f!==null?f.sibling:null);zr(Jr,Jr.current&1);break;case 19:if(M=(b&p.childLanes)!==0,f.flags&128){if(M)return tB(f,p,b);p.flags|=128}if(D=p.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),zr(Jr,Jr.current),M)break;return null;case 22:case 23:return p.lanes=0,ze(f,p,b)}return _u(f,p,b)}var nB,HS,rB,iB;nB=function(f,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},HS=function(){},rB=function(f,p,b,M){var D=f.memoizedProps;if(D!==M){f=p.stateNode,Bi(wo.current);var j=null;switch(b){case"input":D=le(f,D),M=le(f,M),j=[];break;case"select":D=re({},D,{value:void 0}),M=re({},M,{value:void 0}),j=[];break;case"textarea":D=ae(f,D),M=ae(f,M),j=[];break;default:typeof D.onClick!="function"&&typeof M.onClick=="function"&&(f.onclick=Df)}Me(b,M);var se;b=null;for(tt in D)if(!M.hasOwnProperty(tt)&&D.hasOwnProperty(tt)&&D[tt]!=null)if(tt==="style"){var Ae=D[tt];for(se in Ae)Ae.hasOwnProperty(se)&&(b||(b={}),b[se]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(i.hasOwnProperty(tt)?j||(j=[]):(j=j||[]).push(tt,null));for(tt in M){var Ie=M[tt];if(Ae=D!=null?D[tt]:void 0,M.hasOwnProperty(tt)&&Ie!==Ae&&(Ie!=null||Ae!=null))if(tt==="style")if(Ae){for(se in Ae)!Ae.hasOwnProperty(se)||Ie&&Ie.hasOwnProperty(se)||(b||(b={}),b[se]="");for(se in Ie)Ie.hasOwnProperty(se)&&Ae[se]!==Ie[se]&&(b||(b={}),b[se]=Ie[se])}else b||(j||(j=[]),j.push(tt,b)),b=Ie;else tt==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Ae=Ae?Ae.__html:void 0,Ie!=null&&Ae!==Ie&&(j=j||[]).push(tt,Ie)):tt==="children"?typeof Ie!="string"&&typeof Ie!="number"||(j=j||[]).push(tt,""+Ie):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(i.hasOwnProperty(tt)?(Ie!=null&&tt==="onScroll"&&Vr("scroll",f),j||Ae===Ie||(j=[])):(j=j||[]).push(tt,Ie))}b&&(j=j||[]).push("style",b);var tt=j;(p.updateQueue=tt)&&(p.flags|=4)}},iB=function(f,p,b,M){b!==M&&(p.flags|=4)};function Vy(f,p){if(!Kr)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var M=null;b!==null;)b.alternate!==null&&(M=b),b=b.sibling;M===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:M.sibling=null}}function so(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,M=0;if(p)for(var D=f.child;D!==null;)b|=D.lanes|D.childLanes,M|=D.subtreeFlags&14680064,M|=D.flags&14680064,D.return=f,D=D.sibling;else for(D=f.child;D!==null;)b|=D.lanes|D.childLanes,M|=D.subtreeFlags,M|=D.flags,D.return=f,D=D.sibling;return f.subtreeFlags|=M,f.childLanes=b,p}function JW(f,p,b){var M=p.pendingProps;switch(_l(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(p),null;case 1:return Ts(p.type)&&Ff(),so(p),null;case 3:return M=p.stateNode,bc(),Wr(Fs),Wr(cs),Ha(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(f===null||f.child===null)&&(_h(p)?p.flags|=4:f===null||f.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Vo!==null&&(ZS(Vo),Vo=null))),HS(f,p),so(p),null;case 5:Sh(p);var D=Bi(Al.current);if(b=p.type,f!==null&&p.stateNode!=null)rB(f,p,b,M,D),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(t(166));return so(p),null}if(f=Bi(wo.current),_h(p)){M=p.stateNode,b=p.type;var j=p.memoizedProps;switch(M[zi]=p,M[vh]=j,f=(p.mode&1)!==0,b){case"dialog":Vr("cancel",M),Vr("close",M);break;case"iframe":case"object":case"embed":Vr("load",M);break;case"video":case"audio":for(D=0;D<xc.length;D++)Vr(xc[D],M);break;case"source":Vr("error",M);break;case"img":case"image":case"link":Vr("error",M),Vr("load",M);break;case"details":Vr("toggle",M);break;case"input":vt(M,j),Vr("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!j.multiple},Vr("invalid",M);break;case"textarea":He(M,j),Vr("invalid",M)}Me(b,j),D=null;for(var se in j)if(j.hasOwnProperty(se)){var Ae=j[se];se==="children"?typeof Ae=="string"?M.textContent!==Ae&&(j.suppressHydrationWarning!==!0&&Lf(M.textContent,Ae,f),D=["children",Ae]):typeof Ae=="number"&&M.textContent!==""+Ae&&(j.suppressHydrationWarning!==!0&&Lf(M.textContent,Ae,f),D=["children",""+Ae]):i.hasOwnProperty(se)&&Ae!=null&&se==="onScroll"&&Vr("scroll",M)}switch(b){case"input":$e(M),mt(M,j,!0);break;case"textarea":$e(M),ut(M);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(M.onclick=Df)}M=D,p.updateQueue=M,M!==null&&(p.flags|=4)}else{se=D.nodeType===9?D:D.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=st(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=se.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof M.is=="string"?f=se.createElement(b,{is:M.is}):(f=se.createElement(b),b==="select"&&(se=f,M.multiple?se.multiple=!0:M.size&&(se.size=M.size))):f=se.createElementNS(f,b),f[zi]=p,f[vh]=M,nB(f,p,!1,!1),p.stateNode=f;e:{switch(se=et(b,M),b){case"dialog":Vr("cancel",f),Vr("close",f),D=M;break;case"iframe":case"object":case"embed":Vr("load",f),D=M;break;case"video":case"audio":for(D=0;D<xc.length;D++)Vr(xc[D],f);D=M;break;case"source":Vr("error",f),D=M;break;case"img":case"image":case"link":Vr("error",f),Vr("load",f),D=M;break;case"details":Vr("toggle",f),D=M;break;case"input":vt(f,M),D=le(f,M),Vr("invalid",f);break;case"option":D=M;break;case"select":f._wrapperState={wasMultiple:!!M.multiple},D=re({},M,{value:void 0}),Vr("invalid",f);break;case"textarea":He(f,M),D=ae(f,M),Vr("invalid",f);break;default:D=M}Me(b,D),Ae=D;for(j in Ae)if(Ae.hasOwnProperty(j)){var Ie=Ae[j];j==="style"?zt(f,Ie):j==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Ie!=null&&Lt(f,Ie)):j==="children"?typeof Ie=="string"?(b!=="textarea"||Ie!=="")&&hn(f,Ie):typeof Ie=="number"&&hn(f,""+Ie):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?Ie!=null&&j==="onScroll"&&Vr("scroll",f):Ie!=null&&S(f,j,Ie,se))}switch(b){case"input":$e(f),mt(f,M,!1);break;case"textarea":$e(f),ut(f);break;case"option":M.value!=null&&f.setAttribute("value",""+Ue(M.value));break;case"select":f.multiple=!!M.multiple,j=M.value,j!=null?de(f,!!M.multiple,j,!1):M.defaultValue!=null&&de(f,!!M.multiple,M.defaultValue,!0);break;default:typeof D.onClick=="function"&&(f.onclick=Df)}switch(b){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return so(p),null;case 6:if(f&&p.stateNode!=null)iB(f,p,f.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(t(166));if(b=Bi(Al.current),Bi(wo.current),_h(p)){if(M=p.stateNode,b=p.memoizedProps,M[zi]=p,(j=M.nodeValue!==b)&&(f=us,f!==null))switch(f.tag){case 3:Lf(M.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Lf(M.nodeValue,b,(f.mode&1)!==0)}j&&(p.flags|=4)}else M=(b.nodeType===9?b:b.ownerDocument).createTextNode(M),M[zi]=p,p.stateNode=M}return so(p),null;case 13:if(Wr(Jr),M=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Kr&&Os!==null&&p.mode&1&&!(p.flags&128))ky(),_c(),p.flags|=98560,j=!1;else if(j=_h(p),M!==null&&M.dehydrated!==null){if(f===null){if(!j)throw Error(t(318));if(j=p.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[zi]=p}else _c(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;so(p),j=!1}else Vo!==null&&(ZS(Vo),Vo=null),j=!0;if(!j)return p.flags&65536?p:null}return p.flags&128?(p.lanes=b,p):(M=M!==null,M!==(f!==null&&f.memoizedState!==null)&&M&&(p.child.flags|=8192,p.mode&1&&(f===null||Jr.current&1?ps===0&&(ps=3):tC())),p.updateQueue!==null&&(p.flags|=4),so(p),null);case 4:return bc(),HS(f,p),f===null&&gh(p.stateNode.containerInfo),so(p),null;case 10:return Gf(p.type._context),so(p),null;case 17:return Ts(p.type)&&Ff(),so(p),null;case 19:if(Wr(Jr),j=p.memoizedState,j===null)return so(p),null;if(M=(p.flags&128)!==0,se=j.rendering,se===null)if(M)Vy(j,!1);else{if(ps!==0||f!==null&&f.flags&128)for(f=p.child;f!==null;){if(se=da(f),se!==null){for(p.flags|=128,Vy(j,!1),M=se.updateQueue,M!==null&&(p.updateQueue=M,p.flags|=4),p.subtreeFlags=0,M=b,b=p.child;b!==null;)j=b,f=M,j.flags&=14680066,se=j.alternate,se===null?(j.childLanes=0,j.lanes=f,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=se.childLanes,j.lanes=se.lanes,j.child=se.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=se.memoizedProps,j.memoizedState=se.memoizedState,j.updateQueue=se.updateQueue,j.type=se.type,f=se.dependencies,j.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return zr(Jr,Jr.current&1|2),p.child}f=f.sibling}j.tail!==null&&xe()>fm&&(p.flags|=128,M=!0,Vy(j,!1),p.lanes=4194304)}else{if(!M)if(f=da(se),f!==null){if(p.flags|=128,M=!0,b=f.updateQueue,b!==null&&(p.updateQueue=b,p.flags|=4),Vy(j,!0),j.tail===null&&j.tailMode==="hidden"&&!se.alternate&&!Kr)return so(p),null}else 2*xe()-j.renderingStartTime>fm&&b!==1073741824&&(p.flags|=128,M=!0,Vy(j,!1),p.lanes=4194304);j.isBackwards?(se.sibling=p.child,p.child=se):(b=j.last,b!==null?b.sibling=se:p.child=se,j.last=se)}return j.tail!==null?(p=j.tail,j.rendering=p,j.tail=p.sibling,j.renderingStartTime=xe(),p.sibling=null,b=Jr.current,zr(Jr,M?b&1|2:b&1),p):(so(p),null);case 22:case 23:return eC(),M=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==M&&(p.flags|=8192),M&&p.mode&1?ga&1073741824&&(so(p),p.subtreeFlags&6&&(p.flags|=8192)):so(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function ZW(f,p){switch(_l(p),p.tag){case 1:return Ts(p.type)&&Ff(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return bc(),Wr(Fs),Wr(cs),Ha(),f=p.flags,f&65536&&!(f&128)?(p.flags=f&-65537|128,p):null;case 5:return Sh(p),null;case 13:if(Wr(Jr),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(t(340));_c()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return Wr(Jr),null;case 4:return bc(),null;case 10:return Gf(p.type._context),null;case 22:case 23:return eC(),null;case 24:return null;default:return null}}var u1=!1,oo=!1,QW=typeof WeakSet=="function"?WeakSet:Set,on=null;function um(f,p){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(M){Li(f,p,M)}else b.current=null}function jS(f,p,b){try{b()}catch(M){Li(f,p,M)}}var sB=!1;function e$(f,p){if(xh=As,f=ai(),Yi(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var M=b.getSelection&&b.getSelection();if(M&&M.rangeCount!==0){b=M.anchorNode;var D=M.anchorOffset,j=M.focusNode;M=M.focusOffset;try{b.nodeType,j.nodeType}catch{b=null;break e}var se=0,Ae=-1,Ie=-1,tt=0,St=0,Tt=f,At=null;t:for(;;){for(var Qt;Tt!==b||D!==0&&Tt.nodeType!==3||(Ae=se+D),Tt!==j||M!==0&&Tt.nodeType!==3||(Ie=se+M),Tt.nodeType===3&&(se+=Tt.nodeValue.length),(Qt=Tt.firstChild)!==null;)At=Tt,Tt=Qt;for(;;){if(Tt===f)break t;if(At===b&&++tt===D&&(Ae=se),At===j&&++St===M&&(Ie=se),(Qt=Tt.nextSibling)!==null)break;Tt=At,At=Tt.parentNode}Tt=Qt}b=Ae===-1||Ie===-1?null:{start:Ae,end:Ie}}else b=null}b=b||{start:0,end:0}}else b=null;for(vy={focusedElem:f,selectionRange:b},As=!1,on=p;on!==null;)if(p=on,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,on=f;else for(;on!==null;){p=on;try{var an=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(an!==null){var un=an.memoizedProps,Hi=an.memoizedState,We=p.stateNode,Fe=We.getSnapshotBeforeUpdate(p.elementType===p.type?un:Wo(p.type,un),Hi);We.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:var Ke=p.stateNode.containerInfo;Ke.nodeType===1?Ke.textContent="":Ke.nodeType===9&&Ke.documentElement&&Ke.removeChild(Ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Bt){Li(p,p.return,Bt)}if(f=p.sibling,f!==null){f.return=p.return,on=f;break}on=p.return}return an=sB,sB=!1,an}function Wy(f,p,b){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var D=M=M.next;do{if((D.tag&f)===f){var j=D.destroy;D.destroy=void 0,j!==void 0&&jS(p,b,j)}D=D.next}while(D!==M)}}function h1(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&f)===f){var M=b.create;b.destroy=M()}b=b.next}while(b!==p)}}function GS(f){var p=f.ref;if(p!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof p=="function"?p(f):p.current=f}}function oB(f){var p=f.alternate;p!==null&&(f.alternate=null,oB(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&(delete p[zi],delete p[vh],delete p[su],delete p[Xp],delete p[qp])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function aB(f){return f.tag===5||f.tag===3||f.tag===4}function lB(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||aB(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function VS(f,p,b){var M=f.tag;if(M===5||M===6)f=f.stateNode,p?b.nodeType===8?b.parentNode.insertBefore(f,p):b.insertBefore(f,p):(b.nodeType===8?(p=b.parentNode,p.insertBefore(f,b)):(p=b,p.appendChild(f)),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Df));else if(M!==4&&(f=f.child,f!==null))for(VS(f,p,b),f=f.sibling;f!==null;)VS(f,p,b),f=f.sibling}function WS(f,p,b){var M=f.tag;if(M===5||M===6)f=f.stateNode,p?b.insertBefore(f,p):b.appendChild(f);else if(M!==4&&(f=f.child,f!==null))for(WS(f,p,b),f=f.sibling;f!==null;)WS(f,p,b),f=f.sibling}var zs=null,Ml=!1;function Eh(f,p,b){for(b=b.child;b!==null;)cB(f,p,b),b=b.sibling}function cB(f,p,b){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Ct,b)}catch{}switch(b.tag){case 5:oo||um(b,p);case 6:var M=zs,D=Ml;zs=null,Eh(f,p,b),zs=M,Ml=D,zs!==null&&(Ml?(f=zs,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):zs.removeChild(b.stateNode));break;case 18:zs!==null&&(Ml?(f=zs,b=b.stateNode,f.nodeType===8?$p(f.parentNode,b):f.nodeType===1&&$p(f,b),ac(f)):$p(zs,b.stateNode));break;case 4:M=zs,D=Ml,zs=b.stateNode.containerInfo,Ml=!0,Eh(f,p,b),zs=M,Ml=D;break;case 0:case 11:case 14:case 15:if(!oo&&(M=b.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){D=M=M.next;do{var j=D,se=j.destroy;j=j.tag,se!==void 0&&(j&2||j&4)&&jS(b,p,se),D=D.next}while(D!==M)}Eh(f,p,b);break;case 1:if(!oo&&(um(b,p),M=b.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=b.memoizedProps,M.state=b.memoizedState,M.componentWillUnmount()}catch(Ae){Li(b,p,Ae)}Eh(f,p,b);break;case 21:Eh(f,p,b);break;case 22:b.mode&1?(oo=(M=oo)||b.memoizedState!==null,Eh(f,p,b),oo=M):Eh(f,p,b);break;default:Eh(f,p,b)}}function uB(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new QW),p.forEach(function(M){var D=c$.bind(null,f,M);b.has(M)||(b.add(M),M.then(D,D))})}}function Rl(f,p){var b=p.deletions;if(b!==null)for(var M=0;M<b.length;M++){var D=b[M];try{var j=f,se=p,Ae=se;e:for(;Ae!==null;){switch(Ae.tag){case 5:zs=Ae.stateNode,Ml=!1;break e;case 3:zs=Ae.stateNode.containerInfo,Ml=!0;break e;case 4:zs=Ae.stateNode.containerInfo,Ml=!0;break e}Ae=Ae.return}if(zs===null)throw Error(t(160));cB(j,se,D),zs=null,Ml=!1;var Ie=D.alternate;Ie!==null&&(Ie.return=null),D.return=null}catch(tt){Li(D,p,tt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)hB(p,f),p=p.sibling}function hB(f,p){var b=f.alternate,M=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Rl(p,f),Sc(f),M&4){try{Wy(3,f,f.return),h1(3,f)}catch(un){Li(f,f.return,un)}try{Wy(5,f,f.return)}catch(un){Li(f,f.return,un)}}break;case 1:Rl(p,f),Sc(f),M&512&&b!==null&&um(b,b.return);break;case 5:if(Rl(p,f),Sc(f),M&512&&b!==null&&um(b,b.return),f.flags&32){var D=f.stateNode;try{hn(D,"")}catch(un){Li(f,f.return,un)}}if(M&4&&(D=f.stateNode,D!=null)){var j=f.memoizedProps,se=b!==null?b.memoizedProps:j,Ae=f.type,Ie=f.updateQueue;if(f.updateQueue=null,Ie!==null)try{Ae==="input"&&j.type==="radio"&&j.name!=null&&ft(D,j),et(Ae,se);var tt=et(Ae,j);for(se=0;se<Ie.length;se+=2){var St=Ie[se],Tt=Ie[se+1];St==="style"?zt(D,Tt):St==="dangerouslySetInnerHTML"?Lt(D,Tt):St==="children"?hn(D,Tt):S(D,St,Tt,tt)}switch(Ae){case"input":_t(D,j);break;case"textarea":Ze(D,j);break;case"select":var At=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!j.multiple;var Qt=j.value;Qt!=null?de(D,!!j.multiple,Qt,!1):At!==!!j.multiple&&(j.defaultValue!=null?de(D,!!j.multiple,j.defaultValue,!0):de(D,!!j.multiple,j.multiple?[]:"",!1))}D[vh]=j}catch(un){Li(f,f.return,un)}}break;case 6:if(Rl(p,f),Sc(f),M&4){if(f.stateNode===null)throw Error(t(162));D=f.stateNode,j=f.memoizedProps;try{D.nodeValue=j}catch(un){Li(f,f.return,un)}}break;case 3:if(Rl(p,f),Sc(f),M&4&&b!==null&&b.memoizedState.isDehydrated)try{ac(p.containerInfo)}catch(un){Li(f,f.return,un)}break;case 4:Rl(p,f),Sc(f);break;case 13:Rl(p,f),Sc(f),D=f.child,D.flags&8192&&(j=D.memoizedState!==null,D.stateNode.isHidden=j,!j||D.alternate!==null&&D.alternate.memoizedState!==null||(qS=xe())),M&4&&uB(f);break;case 22:if(St=b!==null&&b.memoizedState!==null,f.mode&1?(oo=(tt=oo)||St,Rl(p,f),oo=tt):Rl(p,f),Sc(f),M&8192){if(tt=f.memoizedState!==null,(f.stateNode.isHidden=tt)&&!St&&f.mode&1)for(on=f,St=f.child;St!==null;){for(Tt=on=St;on!==null;){switch(At=on,Qt=At.child,At.tag){case 0:case 11:case 14:case 15:Wy(4,At,At.return);break;case 1:um(At,At.return);var an=At.stateNode;if(typeof an.componentWillUnmount=="function"){M=At,b=At.return;try{p=M,an.props=p.memoizedProps,an.state=p.memoizedState,an.componentWillUnmount()}catch(un){Li(M,b,un)}}break;case 5:um(At,At.return);break;case 22:if(At.memoizedState!==null){pB(Tt);continue}}Qt!==null?(Qt.return=At,on=Qt):pB(Tt)}St=St.sibling}e:for(St=null,Tt=f;;){if(Tt.tag===5){if(St===null){St=Tt;try{D=Tt.stateNode,tt?(j=D.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Ae=Tt.stateNode,Ie=Tt.memoizedProps.style,se=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null,Ae.style.display=$t("display",se))}catch(un){Li(f,f.return,un)}}}else if(Tt.tag===6){if(St===null)try{Tt.stateNode.nodeValue=tt?"":Tt.memoizedProps}catch(un){Li(f,f.return,un)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===f)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===f)break e;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===f)break e;St===Tt&&(St=null),Tt=Tt.return}St===Tt&&(St=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}break;case 19:Rl(p,f),Sc(f),M&4&&uB(f);break;case 21:break;default:Rl(p,f),Sc(f)}}function Sc(f){var p=f.flags;if(p&2){try{e:{for(var b=f.return;b!==null;){if(aB(b)){var M=b;break e}b=b.return}throw Error(t(160))}switch(M.tag){case 5:var D=M.stateNode;M.flags&32&&(hn(D,""),M.flags&=-33);var j=lB(f);WS(f,j,D);break;case 3:case 4:var se=M.stateNode.containerInfo,Ae=lB(f);VS(f,Ae,se);break;default:throw Error(t(161))}}catch(Ie){Li(f,f.return,Ie)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function t$(f,p,b){on=f,fB(f)}function fB(f,p,b){for(var M=(f.mode&1)!==0;on!==null;){var D=on,j=D.child;if(D.tag===22&&M){var se=D.memoizedState!==null||u1;if(!se){var Ae=D.alternate,Ie=Ae!==null&&Ae.memoizedState!==null||oo;Ae=u1;var tt=oo;if(u1=se,(oo=Ie)&&!tt)for(on=D;on!==null;)se=on,Ie=se.child,se.tag===22&&se.memoizedState!==null?mB(D):Ie!==null?(Ie.return=se,on=Ie):mB(D);for(;j!==null;)on=j,fB(j),j=j.sibling;on=D,u1=Ae,oo=tt}dB(f)}else D.subtreeFlags&8772&&j!==null?(j.return=D,on=j):dB(f)}}function dB(f){for(;on!==null;){var p=on;if(p.flags&8772){var b=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:oo||h1(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!oo)if(b===null)M.componentDidMount();else{var D=p.elementType===p.type?b.memoizedProps:Wo(p.type,b.memoizedProps);M.componentDidUpdate(D,b.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var j=p.updateQueue;j!==null&&Ah(p,j,M);break;case 3:var se=p.updateQueue;if(se!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=p.child.stateNode;break;case 1:b=p.child.stateNode}Ah(p,se,b)}break;case 5:var Ae=p.stateNode;if(b===null&&p.flags&4){b=Ae;var Ie=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ie.autoFocus&&b.focus();break;case"img":Ie.src&&(b.src=Ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var tt=p.alternate;if(tt!==null){var St=tt.memoizedState;if(St!==null){var Tt=St.dehydrated;Tt!==null&&ac(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}oo||p.flags&512&&GS(p)}catch(At){Li(p,p.return,At)}}if(p===f){on=null;break}if(b=p.sibling,b!==null){b.return=p.return,on=b;break}on=p.return}}function pB(f){for(;on!==null;){var p=on;if(p===f){on=null;break}var b=p.sibling;if(b!==null){b.return=p.return,on=b;break}on=p.return}}function mB(f){for(;on!==null;){var p=on;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{h1(4,p)}catch(Ie){Li(p,b,Ie)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var D=p.return;try{M.componentDidMount()}catch(Ie){Li(p,D,Ie)}}var j=p.return;try{GS(p)}catch(Ie){Li(p,j,Ie)}break;case 5:var se=p.return;try{GS(p)}catch(Ie){Li(p,se,Ie)}}}catch(Ie){Li(p,p.return,Ie)}if(p===f){on=null;break}var Ae=p.sibling;if(Ae!==null){Ae.return=p.return,on=Ae;break}on=p.return}}var n$=Math.ceil,f1=R.ReactCurrentDispatcher,$S=R.ReactCurrentOwner,Ga=R.ReactCurrentBatchConfig,Cr=0,Rs=null,es=null,Hs=0,ga=0,hm=pi(0),ps=0,$y=null,ed=0,d1=0,XS=0,Xy=null,$o=null,qS=0,fm=1/0,wu=null,p1=!1,YS=null,Mh=null,m1=!1,Rh=null,g1=0,qy=0,KS=null,y1=-1,x1=0;function Co(){return Cr&6?xe():y1!==-1?y1:y1=xe()}function Ph(f){return f.mode&1?Cr&2&&Hs!==0?Hs&-Hs:OS.transition!==null?(x1===0&&(x1=vn()),x1):(f=ir,f!==0||(f=window.event,f=f===void 0?16:fl(f.type)),f):1}function Pl(f,p,b,M){if(50<qy)throw qy=0,KS=null,Error(t(185));pr(f,b,M),(!(Cr&2)||f!==Rs)&&(f===Rs&&(!(Cr&2)&&(d1|=b),ps===4&&kh(f,Hs)),Xo(f,M),b===1&&Cr===0&&!(p.mode&1)&&(fm=xe()+500,Of&&Ua()))}function Xo(f,p){var b=f.callbackNode;Dn(f,p);var M=In(f,f===Rs?Hs:0);if(M===0)b!==null&&q(b),f.callbackNode=null,f.callbackPriority=0;else if(p=M&-M,f.callbackPriority!==p){if(b!=null&&q(b),p===1)f.tag===0?Jv(yB.bind(null,f)):Uf(yB.bind(null,f)),NS(function(){!(Cr&6)&&Ua()}),b=null;else{switch(as(M)){case 1:b=Ge;break;case 4:b=nt;break;case 16:b=rt;break;case 536870912:b=Mt;break;default:b=rt}b=CB(b,gB.bind(null,f))}f.callbackPriority=p,f.callbackNode=b}}function gB(f,p){if(y1=-1,x1=0,Cr&6)throw Error(t(327));var b=f.callbackNode;if(dm()&&f.callbackNode!==b)return null;var M=In(f,f===Rs?Hs:0);if(M===0)return null;if(M&30||M&f.expiredLanes||p)p=v1(f,M);else{p=M;var D=Cr;Cr|=2;var j=vB();(Rs!==f||Hs!==p)&&(wu=null,fm=xe()+500,nd(f,p));do try{s$();break}catch(Ae){xB(f,Ae)}while(!0);du(),f1.current=j,Cr=D,es!==null?p=0:(Rs=null,Hs=0,p=ps)}if(p!==0){if(p===2&&(D=Wn(f),D!==0&&(M=D,p=JS(f,D))),p===1)throw b=$y,nd(f,0),kh(f,M),Xo(f,xe()),b;if(p===6)kh(f,M);else{if(D=f.current.alternate,!(M&30)&&!r$(D)&&(p=v1(f,M),p===2&&(j=Wn(f),j!==0&&(M=j,p=JS(f,j))),p===1))throw b=$y,nd(f,0),kh(f,M),Xo(f,xe()),b;switch(f.finishedWork=D,f.finishedLanes=M,p){case 0:case 1:throw Error(t(345));case 2:rd(f,$o,wu);break;case 3:if(kh(f,M),(M&130023424)===M&&(p=qS+500-xe(),10<p)){if(In(f,0)!==0)break;if(D=f.suspendedLanes,(D&M)!==M){Co(),f.pingedLanes|=f.suspendedLanes&D;break}f.timeoutHandle=wy(rd.bind(null,f,$o,wu),p);break}rd(f,$o,wu);break;case 4:if(kh(f,M),(M&4194240)===M)break;for(p=f.eventTimes,D=-1;0<M;){var se=31-Gt(M);j=1<<se,se=p[se],se>D&&(D=se),M&=~j}if(M=D,M=xe()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*n$(M/1960))-M,10<M){f.timeoutHandle=wy(rd.bind(null,f,$o,wu),M);break}rd(f,$o,wu);break;case 5:rd(f,$o,wu);break;default:throw Error(t(329))}}}return Xo(f,xe()),f.callbackNode===b?gB.bind(null,f):null}function JS(f,p){var b=Xy;return f.current.memoizedState.isDehydrated&&(nd(f,p).flags|=256),f=v1(f,p),f!==2&&(p=$o,$o=b,p!==null&&ZS(p)),f}function ZS(f){$o===null?$o=f:$o.push.apply($o,f)}function r$(f){for(var p=f;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var M=0;M<b.length;M++){var D=b[M],j=D.getSnapshot;D=D.value;try{if(!yo(j(),D))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function kh(f,p){for(p&=~XS,p&=~d1,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var b=31-Gt(p),M=1<<b;f[b]=-1,p&=~M}}function yB(f){if(Cr&6)throw Error(t(327));dm();var p=In(f,0);if(!(p&1))return Xo(f,xe()),null;var b=v1(f,p);if(f.tag!==0&&b===2){var M=Wn(f);M!==0&&(p=M,b=JS(f,M))}if(b===1)throw b=$y,nd(f,0),kh(f,p),Xo(f,xe()),b;if(b===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,rd(f,$o,wu),Xo(f,xe()),null}function QS(f,p){var b=Cr;Cr|=1;try{return f(p)}finally{Cr=b,Cr===0&&(fm=xe()+500,Of&&Ua())}}function td(f){Rh!==null&&Rh.tag===0&&!(Cr&6)&&dm();var p=Cr;Cr|=1;var b=Ga.transition,M=ir;try{if(Ga.transition=null,ir=1,f)return f()}finally{ir=M,Ga.transition=b,Cr=p,!(Cr&6)&&Ua()}}function eC(){ga=hm.current,Wr(hm)}function nd(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,by(b)),es!==null)for(b=es.return;b!==null;){var M=b;switch(_l(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Ff();break;case 3:bc(),Wr(Fs),Wr(cs),Ha();break;case 5:Sh(M);break;case 4:bc();break;case 13:Wr(Jr);break;case 19:Wr(Jr);break;case 10:Gf(M.type._context);break;case 22:case 23:eC()}b=b.return}if(Rs=f,es=f=Bh(f.current,null),Hs=ga=p,ps=0,$y=null,XS=d1=ed=0,$o=Xy=null,bl!==null){for(p=0;p<bl.length;p++)if(b=bl[p],M=b.interleaved,M!==null){b.interleaved=null;var D=M.next,j=b.pending;if(j!==null){var se=j.next;j.next=D,M.next=se}b.pending=M}bl=null}return f}function xB(f,p){do{var b=es;try{if(du(),yu.current=lm,pa){for(var M=$r.memoizedState;M!==null;){var D=M.queue;D!==null&&(D.pending=null),M=M.next}pa=!1}if(Sl=0,br=gi=$r=null,Ms=!1,Ac=0,$S.current=null,b===null||b.return===null){ps=1,$y=p,es=null;break}e:{var j=f,se=b.return,Ae=b,Ie=p;if(p=Hs,Ae.flags|=32768,Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var tt=Ie,St=Ae,Tt=St.tag;if(!(St.mode&1)&&(Tt===0||Tt===11||Tt===15)){var At=St.alternate;At?(St.updateQueue=At.updateQueue,St.memoizedState=At.memoizedState,St.lanes=At.lanes):(St.updateQueue=null,St.memoizedState=null)}var Qt=tn(se);if(Qt!==null){Qt.flags&=-257,jn(Qt,se,Ae,j,p),Qt.mode&1&&Rt(j,tt,p),p=Qt,Ie=tt;var an=p.updateQueue;if(an===null){var un=new Set;un.add(Ie),p.updateQueue=un}else an.add(Ie);break e}else{if(!(p&1)){Rt(j,tt,p),tC();break e}Ie=Error(t(426))}}else if(Kr&&Ae.mode&1){var Hi=tn(se);if(Hi!==null){!(Hi.flags&65536)&&(Hi.flags|=256),jn(Hi,se,Ae,j,p),wh(k(Ie,Ae));break e}}j=Ie=k(Ie,Ae),ps!==4&&(ps=2),Xy===null?Xy=[j]:Xy.push(j),j=se;do{switch(j.tag){case 3:j.flags|=65536,p&=-p,j.lanes|=p;var We=Ne(j,Ie,p);pu(j,We);break e;case 1:Ae=Ie;var Fe=j.type,Ke=j.stateNode;if(!(j.flags&128)&&(typeof Fe.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Mh===null||!Mh.has(Ke)))){j.flags|=65536,p&=-p,j.lanes|=p;var Bt=ct(j,Ae,p);pu(j,Bt);break e}}j=j.return}while(j!==null)}wB(b)}catch(mn){p=mn,es===b&&b!==null&&(es=b=b.return);continue}break}while(!0)}function vB(){var f=f1.current;return f1.current=lm,f===null?lm:f}function tC(){(ps===0||ps===3||ps===2)&&(ps=4),Rs===null||!(ed&268435455)&&!(d1&268435455)||kh(Rs,Hs)}function v1(f,p){var b=Cr;Cr|=2;var M=vB();(Rs!==f||Hs!==p)&&(wu=null,nd(f,p));do try{i$();break}catch(D){xB(f,D)}while(!0);if(du(),Cr=b,f1.current=M,es!==null)throw Error(t(261));return Rs=null,Hs=0,ps}function i$(){for(;es!==null;)_B(es)}function s$(){for(;es!==null&&!pe();)_B(es)}function _B(f){var p=SB(f.alternate,f,ga);f.memoizedProps=f.pendingProps,p===null?wB(f):es=p,$S.current=null}function wB(f){var p=f;do{var b=p.alternate;if(f=p.return,p.flags&32768){if(b=ZW(b,p),b!==null){b.flags&=32767,es=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{ps=6,es=null;return}}else if(b=JW(b,p,ga),b!==null){es=b;return}if(p=p.sibling,p!==null){es=p;return}es=p=f}while(p!==null);ps===0&&(ps=5)}function rd(f,p,b){var M=ir,D=Ga.transition;try{Ga.transition=null,ir=1,o$(f,p,b,M)}finally{Ga.transition=D,ir=M}return null}function o$(f,p,b,M){do dm();while(Rh!==null);if(Cr&6)throw Error(t(327));b=f.finishedWork;var D=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var j=b.lanes|b.childLanes;if(Br(f,j),f===Rs&&(es=Rs=null,Hs=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||m1||(m1=!0,CB(rt,function(){return dm(),null})),j=(b.flags&15990)!==0,b.subtreeFlags&15990||j){j=Ga.transition,Ga.transition=null;var se=ir;ir=1;var Ae=Cr;Cr|=4,$S.current=null,e$(f,b),hB(b,f),Ki(vy),As=!!xh,vy=xh=null,f.current=b,t$(b),be(),Cr=Ae,ir=se,Ga.transition=j}else f.current=b;if(m1&&(m1=!1,Rh=f,g1=D),j=f.pendingLanes,j===0&&(Mh=null),Wt(b.stateNode),Xo(f,xe()),p!==null)for(M=f.onRecoverableError,b=0;b<p.length;b++)D=p[b],M(D.value,{componentStack:D.stack,digest:D.digest});if(p1)throw p1=!1,f=YS,YS=null,f;return g1&1&&f.tag!==0&&dm(),j=f.pendingLanes,j&1?f===KS?qy++:(qy=0,KS=f):qy=0,Ua(),null}function dm(){if(Rh!==null){var f=as(g1),p=Ga.transition,b=ir;try{if(Ga.transition=null,ir=16>f?16:f,Rh===null)var M=!1;else{if(f=Rh,Rh=null,g1=0,Cr&6)throw Error(t(331));var D=Cr;for(Cr|=4,on=f.current;on!==null;){var j=on,se=j.child;if(on.flags&16){var Ae=j.deletions;if(Ae!==null){for(var Ie=0;Ie<Ae.length;Ie++){var tt=Ae[Ie];for(on=tt;on!==null;){var St=on;switch(St.tag){case 0:case 11:case 15:Wy(8,St,j)}var Tt=St.child;if(Tt!==null)Tt.return=St,on=Tt;else for(;on!==null;){St=on;var At=St.sibling,Qt=St.return;if(oB(St),St===tt){on=null;break}if(At!==null){At.return=Qt,on=At;break}on=Qt}}}var an=j.alternate;if(an!==null){var un=an.child;if(un!==null){an.child=null;do{var Hi=un.sibling;un.sibling=null,un=Hi}while(un!==null)}}on=j}}if(j.subtreeFlags&2064&&se!==null)se.return=j,on=se;else e:for(;on!==null;){if(j=on,j.flags&2048)switch(j.tag){case 0:case 11:case 15:Wy(9,j,j.return)}var We=j.sibling;if(We!==null){We.return=j.return,on=We;break e}on=j.return}}var Fe=f.current;for(on=Fe;on!==null;){se=on;var Ke=se.child;if(se.subtreeFlags&2064&&Ke!==null)Ke.return=se,on=Ke;else e:for(se=Fe;on!==null;){if(Ae=on,Ae.flags&2048)try{switch(Ae.tag){case 0:case 11:case 15:h1(9,Ae)}}catch(mn){Li(Ae,Ae.return,mn)}if(Ae===se){on=null;break e}var Bt=Ae.sibling;if(Bt!==null){Bt.return=Ae.return,on=Bt;break e}on=Ae.return}}if(Cr=D,Ua(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Ct,f)}catch{}M=!0}return M}finally{ir=b,Ga.transition=p}}return!1}function bB(f,p,b){p=k(b,p),p=Ne(f,p,1),f=Qr(f,p,1),p=Co(),f!==null&&(pr(f,1,p),Xo(f,p))}function Li(f,p,b){if(f.tag===3)bB(f,f,b);else for(;p!==null;){if(p.tag===3){bB(p,f,b);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Mh===null||!Mh.has(M))){f=k(b,f),f=ct(p,f,1),p=Qr(p,f,1),f=Co(),p!==null&&(pr(p,1,f),Xo(p,f));break}}p=p.return}}function a$(f,p,b){var M=f.pingCache;M!==null&&M.delete(p),p=Co(),f.pingedLanes|=f.suspendedLanes&b,Rs===f&&(Hs&b)===b&&(ps===4||ps===3&&(Hs&130023424)===Hs&&500>xe()-qS?nd(f,0):XS|=b),Xo(f,p)}function AB(f,p){p===0&&(f.mode&1?(p=Hn,Hn<<=1,!(Hn&130023424)&&(Hn=4194304)):p=1);var b=Co();f=fa(f,p),f!==null&&(pr(f,p,b),Xo(f,b))}function l$(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),AB(f,b)}function c$(f,p){var b=0;switch(f.tag){case 13:var M=f.stateNode,D=f.memoizedState;D!==null&&(b=D.retryLane);break;case 19:M=f.stateNode;break;default:throw Error(t(314))}M!==null&&M.delete(p),AB(f,b)}var SB;SB=function(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps||Fs.current)er=!0;else{if(!(f.lanes&b)&&!(p.flags&128))return er=!1,KW(f,p,b);er=!!(f.flags&131072)}else er=!1,Kr&&p.flags&1048576&&Ey(p,Zp,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;c1(f,p),f=p.pendingProps;var D=ou(p,cs.current);wc(p,b),D=qf(null,p,M,f,D,b);var j=Dy();return p.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Ts(M)?(j=!0,au(p)):j=!1,p.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,Qn(p),D.updater=cm,p.stateNode=D,D._reactInternals=p,T(p,M,f,b),p=qn(null,p,M,!0,j,b)):(p.tag=0,Kr&&j&&My(p),Jt(null,p,D,b),p=p.child),p;case 16:M=p.elementType;e:{switch(c1(f,p),f=p.pendingProps,D=M._init,M=D(M._payload),p.type=M,D=p.tag=h$(M),f=Wo(M,f),D){case 0:p=Yt(null,p,M,f,b);break e;case 1:p=dn(null,p,M,f,b);break e;case 11:p=ds(null,p,M,f,b);break e;case 14:p=So(null,p,M,Wo(M.type,f),b);break e}throw Error(t(306,M,""))}return p;case 0:return M=p.type,D=p.pendingProps,D=p.elementType===M?D:Wo(M,D),Yt(f,p,M,D,b);case 1:return M=p.type,D=p.pendingProps,D=p.elementType===M?D:Wo(M,D),dn(f,p,M,D,b);case 3:e:{if(Gn(p),f===null)throw Error(t(387));M=p.pendingProps,j=p.memoizedState,D=j.element,bi(f,p),mi(p,M,null,b);var se=p.memoizedState;if(M=se.element,j.isDehydrated)if(j={element:M,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},p.updateQueue.baseState=j,p.memoizedState=j,p.flags&256){D=k(Error(t(423)),p),p=vr(f,p,M,b,D);break e}else if(M!==D){D=k(Error(t(424)),p),p=vr(f,p,M,b,D);break e}else for(Os=ml(p.stateNode.containerInfo.firstChild),us=p,Kr=!0,Vo=null,b=jf(p,null,M,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(_c(),M===D){p=_u(f,p,b);break e}Jt(f,p,M,b)}p=p.child}return p;case 5:return gu(p),f===null&&em(p),M=p.type,D=p.pendingProps,j=f!==null?f.memoizedProps:null,se=D.children,_y(M,D)?se=null:j!==null&&_y(M,j)&&(p.flags|=32),ot(f,p),Jt(f,p,se,b),p.child;case 6:return f===null&&em(p),null;case 13:return El(f,p,b);case 4:return $f(p,p.stateNode.containerInfo),M=p.pendingProps,f===null?p.child=uu(p,null,M,b):Jt(f,p,M,b),p.child;case 11:return M=p.type,D=p.pendingProps,D=p.elementType===M?D:Wo(M,D),ds(f,p,M,D,b);case 7:return Jt(f,p,p.pendingProps,b),p.child;case 8:return Jt(f,p,p.pendingProps.children,b),p.child;case 12:return Jt(f,p,p.pendingProps.children,b),p.child;case 10:e:{if(M=p.type._context,D=p.pendingProps,j=p.memoizedProps,se=D.value,zr(hu,M._currentValue),M._currentValue=se,j!==null)if(yo(j.value,se)){if(j.children===D.children&&!Fs.current){p=_u(f,p,b);break e}}else for(j=p.child,j!==null&&(j.return=p);j!==null;){var Ae=j.dependencies;if(Ae!==null){se=j.child;for(var Ie=Ae.firstContext;Ie!==null;){if(Ie.context===M){if(j.tag===1){Ie=Lr(-1,b&-b),Ie.tag=2;var tt=j.updateQueue;if(tt!==null){tt=tt.shared;var St=tt.pending;St===null?Ie.next=Ie:(Ie.next=St.next,St.next=Ie),tt.pending=Ie}}j.lanes|=b,Ie=j.alternate,Ie!==null&&(Ie.lanes|=b),Vf(j.return,b,p),Ae.lanes|=b;break}Ie=Ie.next}}else if(j.tag===10)se=j.type===p.type?null:j.child;else if(j.tag===18){if(se=j.return,se===null)throw Error(t(341));se.lanes|=b,Ae=se.alternate,Ae!==null&&(Ae.lanes|=b),Vf(se,b,p),se=j.sibling}else se=j.child;if(se!==null)se.return=j;else for(se=j;se!==null;){if(se===p){se=null;break}if(j=se.sibling,j!==null){j.return=se.return,se=j;break}se=se.return}j=se}Jt(f,p,D.children,b),p=p.child}return p;case 9:return D=p.type,M=p.pendingProps.children,wc(p,b),D=_o(D),M=M(D),p.flags|=1,Jt(f,p,M,b),p.child;case 14:return M=p.type,D=Wo(M,p.pendingProps),D=Wo(M.type,D),So(f,p,M,D,b);case 15:return Je(f,p,p.type,p.pendingProps,b);case 17:return M=p.type,D=p.pendingProps,D=p.elementType===M?D:Wo(M,D),c1(f,p),p.tag=1,Ts(M)?(f=!0,au(p)):f=!1,wc(p,b),y(p,M,D),T(p,M,D,b),qn(null,p,M,!0,f,b);case 19:return tB(f,p,b);case 22:return ze(f,p,b)}throw Error(t(156,p.tag))};function CB(f,p){return De(f,p)}function u$(f,p,b,M){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(f,p,b,M){return new u$(f,p,b,M)}function nC(f){return f=f.prototype,!(!f||!f.isReactComponent)}function h$(f){if(typeof f=="function")return nC(f)?1:0;if(f!=null){if(f=f.$$typeof,f===K)return 11;if(f===ee)return 14}return 2}function Bh(f,p){var b=f.alternate;return b===null?(b=Va(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function _1(f,p,b,M,D,j){var se=2;if(M=f,typeof f=="function")nC(f)&&(se=1);else if(typeof f=="string")se=5;else e:switch(f){case N:return id(b.children,D,j,p);case U:se=8,D|=8;break;case O:return f=Va(12,b,p,D|2),f.elementType=O,f.lanes=j,f;case Q:return f=Va(13,b,p,D),f.elementType=Q,f.lanes=j,f;case Y:return f=Va(19,b,p,D),f.elementType=Y,f.lanes=j,f;case oe:return w1(b,D,j,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case P:se=10;break e;case F:se=9;break e;case K:se=11;break e;case ee:se=14;break e;case $:se=16,M=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return p=Va(se,b,p,D),p.elementType=f,p.type=M,p.lanes=j,p}function id(f,p,b,M){return f=Va(7,f,M,p),f.lanes=b,f}function w1(f,p,b,M){return f=Va(22,f,M,p),f.elementType=oe,f.lanes=b,f.stateNode={isHidden:!1},f}function rC(f,p,b){return f=Va(6,f,null,p),f.lanes=b,f}function iC(f,p,b){return p=Va(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function f$(f,p,b,M,D){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ur(0),this.expirationTimes=Ur(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.identifierPrefix=M,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function sC(f,p,b,M,D,j,se,Ae,Ie){return f=new f$(f,p,b,Ae,Ie),p===1?(p=1,j===!0&&(p|=8)):p=0,j=Va(3,null,null,p),f.current=j,j.stateNode=f,j.memoizedState={element:M,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qn(j),f}function d$(f,p,b){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:M==null?null:""+M,children:f,containerInfo:p,implementation:b}}function TB(f){if(!f)return yl;f=f._reactInternals;e:{if(ue(f)!==f||f.tag!==1)throw Error(t(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Ts(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(f.tag===1){var b=f.type;if(Ts(b))return Nf(f,b,p)}return p}function EB(f,p,b,M,D,j,se,Ae,Ie){return f=sC(b,M,!0,f,D,j,se,Ae,Ie),f.context=TB(null),b=f.current,M=Co(),D=Ph(b),j=Lr(M,D),j.callback=p??null,Qr(b,j,D),f.current.lanes=D,pr(f,D,M),Xo(f,M),f}function b1(f,p,b,M){var D=p.current,j=Co(),se=Ph(D);return b=TB(b),p.context===null?p.context=b:p.pendingContext=b,p=Lr(j,se),p.payload={element:f},M=M===void 0?null:M,M!==null&&(p.callback=M),f=Qr(D,p,se),f!==null&&(Pl(f,D,se,j),Es(f,D,se)),se}function A1(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function MB(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function oC(f,p){MB(f,p),(f=f.alternate)&&MB(f,p)}var RB=typeof reportError=="function"?reportError:function(f){console.error(f)};function aC(f){this._internalRoot=f}S1.prototype.render=aC.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(t(409));b1(f,p,null,null)},S1.prototype.unmount=aC.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;td(function(){b1(null,f,null,null)}),p[vo]=null}};function S1(f){this._internalRoot=f}S1.prototype.unstable_scheduleHydration=function(f){if(f){var p=Ma();f={blockedOn:null,target:f,priority:p};for(var b=0;b<Ra.length&&p!==0&&p<Ra[b].priority;b++);Ra.splice(b,0,f),b===0&&ka(f)}};function lC(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function C1(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function PB(){}function p$(f,p,b,M,D){if(D){if(typeof M=="function"){var j=M;M=function(){var tt=A1(se);j.call(tt)}}var se=EB(p,M,f,0,null,!1,!1,"",PB);return f._reactRootContainer=se,f[vo]=se.current,gh(f.nodeType===8?f.parentNode:f),td(),se}for(;D=f.lastChild;)f.removeChild(D);if(typeof M=="function"){var Ae=M;M=function(){var tt=A1(Ie);Ae.call(tt)}}var Ie=sC(f,0,!1,null,null,!1,!1,"",PB);return f._reactRootContainer=Ie,f[vo]=Ie.current,gh(f.nodeType===8?f.parentNode:f),td(function(){b1(p,Ie,b,M)}),Ie}function T1(f,p,b,M,D){var j=b._reactRootContainer;if(j){var se=j;if(typeof D=="function"){var Ae=D;D=function(){var Ie=A1(se);Ae.call(Ie)}}b1(p,se,f,D)}else se=p$(b,p,f,D,M);return A1(se)}Ea=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var b=xn(p.pendingLanes);b!==0&&(ii(p,b|1),Xo(p,xe()),!(Cr&6)&&(fm=xe()+500,Ua()))}break;case 13:td(function(){var M=fa(f,1);if(M!==null){var D=Co();Pl(M,f,1,D)}}),oC(f,1)}},eh=function(f){if(f.tag===13){var p=fa(f,134217728);if(p!==null){var b=Co();Pl(p,f,134217728,b)}oC(f,134217728)}},Af=function(f){if(f.tag===13){var p=Ph(f),b=fa(f,p);if(b!==null){var M=Co();Pl(b,f,p,M)}oC(f,p)}},Ma=function(){return ir},th=function(f,p){var b=ir;try{return ir=f,p()}finally{ir=b}},je=function(f,p,b){switch(p){case"input":if(_t(f,b),p=b.name,b.type==="radio"&&p!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<b.length;p++){var M=b[p];if(M!==f&&M.form===f.form){var D=Yp(M);if(!D)throw Error(t(90));Ee(M),_t(M,D)}}}break;case"textarea":Ze(f,b);break;case"select":p=b.value,p!=null&&de(f,!!b.multiple,p,!1)}},En=QS,xr=td;var m$={usingClientEntryPoint:!1,Events:[gl,wi,Yp,Dt,kt,QS]},Yy={findFiberByHostInstance:vc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g$={bundleType:Yy.bundleType,version:Yy.version,rendererPackageName:Yy.rendererPackageName,rendererConfig:Yy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Le(f),f===null?null:f.stateNode},findFiberByHostInstance:Yy.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var E1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!E1.isDisabled&&E1.supportsFiber)try{Ct=E1.inject(g$),pt=E1}catch{}}return qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m$,qo.createPortal=function(f,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lC(p))throw Error(t(200));return d$(f,p,null,b)},qo.createRoot=function(f,p){if(!lC(f))throw Error(t(299));var b=!1,M="",D=RB;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onRecoverableError!==void 0&&(D=p.onRecoverableError)),p=sC(f,1,!1,null,null,b,!1,M,D),f[vo]=p.current,gh(f.nodeType===8?f.parentNode:f),new aC(p)},qo.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=Le(p),f=f===null?null:f.stateNode,f},qo.flushSync=function(f){return td(f)},qo.hydrate=function(f,p,b){if(!C1(p))throw Error(t(200));return T1(null,f,p,!0,b)},qo.hydrateRoot=function(f,p,b){if(!lC(f))throw Error(t(405));var M=b!=null&&b.hydratedSources||null,D=!1,j="",se=RB;if(b!=null&&(b.unstable_strictMode===!0&&(D=!0),b.identifierPrefix!==void 0&&(j=b.identifierPrefix),b.onRecoverableError!==void 0&&(se=b.onRecoverableError)),p=EB(p,null,f,1,b??null,D,!1,j,se),f[vo]=p.current,gh(f),M)for(f=0;f<M.length;f++)b=M[f],D=b._getVersion,D=D(b._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[b,D]:p.mutableSourceEagerHydrationData.push(b,D);return new S1(p)},qo.render=function(f,p,b){if(!C1(p))throw Error(t(200));return T1(null,f,p,!1,b)},qo.unmountComponentAtNode=function(f){if(!C1(f))throw Error(t(40));return f._reactRootContainer?(td(function(){T1(null,null,f,!1,function(){f._reactRootContainer=null,f[vo]=null})}),!0):!1},qo.unstable_batchedUpdates=QS,qo.unstable_renderSubtreeIntoContainer=function(f,p,b,M){if(!C1(b))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return T1(f,p,b,!1,M)},qo.version="18.3.1-next-f1338f8080-20240426",qo}var zB;function K3(){if(zB)return hC.exports;zB=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hC.exports=M$(),hC.exports}var HB;function R$(){if(HB)return M1;HB=1;var n=K3();return M1.createRoot=n.createRoot,M1.hydrateRoot=n.hydrateRoot,M1}var J3=R$();function Z3(n,e){return function(){return n.apply(e,arguments)}}const{toString:P$}=Object.prototype,{getPrototypeOf:O2}=Object,rA=(n=>e=>{const t=P$.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Zl=n=>(n=n.toLowerCase(),e=>rA(e)===n),iA=n=>e=>typeof e===n,{isArray:Gg}=Array,xx=iA("undefined");function k$(n){return n!==null&&!xx(n)&&n.constructor!==null&&!xx(n.constructor)&&ba(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Q3=Zl("ArrayBuffer");function B$(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Q3(n.buffer),e}const I$=iA("string"),ba=iA("function"),eO=iA("number"),sA=n=>n!==null&&typeof n=="object",L$=n=>n===!0||n===!1,K_=n=>{if(rA(n)!=="object")return!1;const e=O2(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},D$=Zl("Date"),F$=Zl("File"),N$=Zl("Blob"),O$=Zl("FileList"),U$=n=>sA(n)&&ba(n.pipe),z$=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ba(n.append)&&((e=rA(n))==="formdata"||e==="object"&&ba(n.toString)&&n.toString()==="[object FormData]"))},H$=Zl("URLSearchParams"),[j$,G$,V$,W$]=["ReadableStream","Request","Response","Headers"].map(Zl),$$=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function iv(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Gg(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function tO(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const kd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nO=n=>!xx(n)&&n!==kd;function PE(){const{caseless:n}=nO(this)&&this||{},e={},t=(r,i)=>{const s=n&&tO(e,i)||i;K_(e[s])&&K_(r)?e[s]=PE(e[s],r):K_(r)?e[s]=PE({},r):Gg(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&iv(arguments[r],t);return e}const X$=(n,e,t,{allOwnKeys:r}={})=>(iv(e,(i,s)=>{t&&ba(i)?n[s]=Z3(i,t):n[s]=i},{allOwnKeys:r}),n),q$=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Y$=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},K$=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&O2(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},J$=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Z$=n=>{if(!n)return null;if(Gg(n))return n;let e=n.length;if(!eO(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Q$=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&O2(Uint8Array)),e7=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},t7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},n7=Zl("HTMLFormElement"),r7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),jB=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),i7=Zl("RegExp"),rO=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};iv(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},s7=n=>{rO(n,(e,t)=>{if(ba(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ba(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},o7=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Gg(n)?r(n):r(String(n).split(e)),t},a7=()=>{},l7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,pC="abcdefghijklmnopqrstuvwxyz",GB="0123456789",iO={DIGIT:GB,ALPHA:pC,ALPHA_DIGIT:pC+pC.toUpperCase()+GB},c7=(n=16,e=iO.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function u7(n){return!!(n&&ba(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const h7=n=>{const e=new Array(10),t=(r,i)=>{if(sA(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Gg(r)?[]:{};return iv(r,(o,a)=>{const l=t(o,i+1);!xx(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},f7=Zl("AsyncFunction"),d7=n=>n&&(sA(n)||ba(n))&&ba(n.then)&&ba(n.catch),sO=((n,e)=>n?setImmediate:e?((t,r)=>(kd.addEventListener("message",({source:i,data:s})=>{i===kd&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),kd.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ba(kd.postMessage)),p7=typeof queueMicrotask<"u"?queueMicrotask.bind(kd):typeof process<"u"&&process.nextTick||sO,lt={isArray:Gg,isArrayBuffer:Q3,isBuffer:k$,isFormData:z$,isArrayBufferView:B$,isString:I$,isNumber:eO,isBoolean:L$,isObject:sA,isPlainObject:K_,isReadableStream:j$,isRequest:G$,isResponse:V$,isHeaders:W$,isUndefined:xx,isDate:D$,isFile:F$,isBlob:N$,isRegExp:i7,isFunction:ba,isStream:U$,isURLSearchParams:H$,isTypedArray:Q$,isFileList:O$,forEach:iv,merge:PE,extend:X$,trim:$$,stripBOM:q$,inherits:Y$,toFlatObject:K$,kindOf:rA,kindOfTest:Zl,endsWith:J$,toArray:Z$,forEachEntry:e7,matchAll:t7,isHTMLForm:n7,hasOwnProperty:jB,hasOwnProp:jB,reduceDescriptors:rO,freezeMethods:s7,toObjectSet:o7,toCamelCase:r7,noop:a7,toFiniteNumber:l7,findKey:tO,global:kd,isContextDefined:nO,ALPHABET:iO,generateString:c7,isSpecCompliantForm:u7,toJSONObject:h7,isAsyncFn:f7,isThenable:d7,setImmediate:sO,asap:p7};function rr(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}lt.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}});const oO=rr.prototype,aO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{aO[n]={value:n}});Object.defineProperties(rr,aO);Object.defineProperty(oO,"isAxiosError",{value:!0});rr.from=(n,e,t,r,i,s)=>{const o=Object.create(oO);return lt.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),rr.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const m7=null;function kE(n){return lt.isPlainObject(n)||lt.isArray(n)}function lO(n){return lt.endsWith(n,"[]")?n.slice(0,-2):n}function VB(n,e,t){return n?n.concat(e).map(function(i,s){return i=lO(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function g7(n){return lt.isArray(n)&&!n.some(kE)}const y7=lt.toFlatObject(lt,{},null,function(e){return/^is[A-Z]/.test(e)});function oA(n,e,t){if(!lt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=lt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!lt.isUndefined(w[v])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(e);if(!lt.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(lt.isDate(g))return g.toISOString();if(!l&&lt.isBlob(g))throw new rr("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(g)||lt.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,w){let _=g;if(g&&!w&&typeof g=="object"){if(lt.endsWith(v,"{}"))v=r?v:v.slice(0,-2),g=JSON.stringify(g);else if(lt.isArray(g)&&g7(g)||(lt.isFileList(g)||lt.endsWith(v,"[]"))&&(_=lt.toArray(g)))return v=lO(v),_.forEach(function(S,R){!(lt.isUndefined(S)||S===null)&&e.append(o===!0?VB([v],R,s):o===null?v:v+"[]",c(S))}),!1}return kE(g)?!0:(e.append(VB(w,v,s),c(g)),!1)}const h=[],d=Object.assign(y7,{defaultVisitor:u,convertValue:c,isVisitable:kE});function m(g,v){if(!lt.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(g),lt.forEach(g,function(_,A){(!(lt.isUndefined(_)||_===null)&&i.call(e,_,lt.isString(A)?A.trim():A,v,d))===!0&&m(_,v?v.concat(A):[A])}),h.pop()}}if(!lt.isObject(n))throw new TypeError("data must be an object");return m(n),e}function WB(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function U2(n,e){this._pairs=[],n&&oA(n,this,e)}const cO=U2.prototype;cO.append=function(e,t){this._pairs.push([e,t])};cO.toString=function(e){const t=e?function(r){return e.call(this,r,WB)}:WB;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function x7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uO(n,e,t){if(!e)return n;const r=t&&t.encode||x7;lt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=lt.isURLSearchParams(e)?e.toString():new U2(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class $B{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){lt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v7=typeof URLSearchParams<"u"?URLSearchParams:U2,_7=typeof FormData<"u"?FormData:null,w7=typeof Blob<"u"?Blob:null,b7={isBrowser:!0,classes:{URLSearchParams:v7,FormData:_7,Blob:w7},protocols:["http","https","file","blob","url","data"]},z2=typeof window<"u"&&typeof document<"u",BE=typeof navigator=="object"&&navigator||void 0,A7=z2&&(!BE||["ReactNative","NativeScript","NS"].indexOf(BE.product)<0),S7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",C7=z2&&window.location.href||"http://localhost",T7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:z2,hasStandardBrowserEnv:A7,hasStandardBrowserWebWorkerEnv:S7,navigator:BE,origin:C7},Symbol.toStringTag,{value:"Module"})),ho={...T7,...b7};function E7(n,e){return oA(n,new ho.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return ho.isNode&&lt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function M7(n){return lt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function R7(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function fO(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&lt.isArray(i)?i.length:o,l?(lt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!lt.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&lt.isArray(i[o])&&(i[o]=R7(i[o])),!a)}if(lt.isFormData(n)&&lt.isFunction(n.entries)){const t={};return lt.forEachEntry(n,(r,i)=>{e(M7(r),i,t,0)}),t}return null}function P7(n,e,t){if(lt.isString(n))try{return(e||JSON.parse)(n),lt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const sv={transitional:hO,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=lt.isObject(e);if(s&&lt.isHTMLForm(e)&&(e=new FormData(e)),lt.isFormData(e))return i?JSON.stringify(fO(e)):e;if(lt.isArrayBuffer(e)||lt.isBuffer(e)||lt.isStream(e)||lt.isFile(e)||lt.isBlob(e)||lt.isReadableStream(e))return e;if(lt.isArrayBufferView(e))return e.buffer;if(lt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return E7(e,this.formSerializer).toString();if((a=lt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return oA(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),P7(e)):e}],transformResponse:[function(e){const t=this.transitional||sv.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(lt.isResponse(e)||lt.isReadableStream(e))return e;if(e&&lt.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?rr.from(a,rr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ho.classes.FormData,Blob:ho.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],n=>{sv.headers[n]={}});const k7=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B7=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&k7[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},XB=Symbol("internals");function Zy(n){return n&&String(n).trim().toLowerCase()}function J_(n){return n===!1||n==null?n:lt.isArray(n)?n.map(J_):String(n)}function I7(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const L7=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function mC(n,e,t,r,i){if(lt.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!lt.isString(e)){if(lt.isString(r))return e.indexOf(r)!==-1;if(lt.isRegExp(r))return r.test(e)}}function D7(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function F7(n,e){const t=lt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class ia{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,c){const u=Zy(l);if(!u)throw new Error("header name must be a non-empty string");const h=lt.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=J_(a))}const o=(a,l)=>lt.forEach(a,(c,u)=>s(c,u,l));if(lt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(lt.isString(e)&&(e=e.trim())&&!L7(e))o(B7(e),t);else if(lt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=Zy(e),e){const r=lt.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return I7(i);if(lt.isFunction(t))return t.call(this,i,r);if(lt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zy(e),e){const r=lt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||mC(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=Zy(o),o){const a=lt.findKey(r,o);a&&(!t||mC(r,r[a],a,t))&&(delete r[a],i=!0)}}return lt.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||mC(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return lt.forEach(this,(i,s)=>{const o=lt.findKey(r,s);if(o){t[o]=J_(i),delete t[s];return}const a=e?D7(s):String(s).trim();a!==s&&delete t[s],t[a]=J_(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return lt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&lt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[XB]=this[XB]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Zy(o);r[a]||(F7(i,o),r[a]=!0)}return lt.isArray(e)?e.forEach(s):s(e),this}}ia.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(ia.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});lt.freezeMethods(ia);function gC(n,e){const t=this||sv,r=e||t,i=ia.from(r.headers);let s=r.data;return lt.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function dO(n){return!!(n&&n.__CANCEL__)}function Vg(n,e,t){rr.call(this,n??"canceled",rr.ERR_CANCELED,e,t),this.name="CanceledError"}lt.inherits(Vg,rr,{__CANCEL__:!0});function pO(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new rr("Request failed with status code "+t.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function N7(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function O7(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),t[i]=l,r[i]=c;let h=s,d=0;for(;h!==i;)d+=t[h++],h=h%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const m=u&&c-u;return m?Math.round(d*1e3/m):void 0}}function U7(n,e){let t=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-t;h>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const Cw=(n,e,t=3)=>{let r=0;const i=O7(50,250);return U7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(h)},t)},qB=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},YB=n=>(...e)=>lt.asap(()=>n(...e)),z7=ho.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ho.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ho.origin),ho.navigator&&/(msie|trident)/i.test(ho.navigator.userAgent)):()=>!0,H7=ho.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];lt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),lt.isString(r)&&o.push("path="+r),lt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function j7(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function G7(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function mO(n,e){return n&&!j7(e)?G7(n,e):e}const KB=n=>n instanceof ia?{...n}:n;function rp(n,e){e=e||{};const t={};function r(c,u,h,d){return lt.isPlainObject(c)&&lt.isPlainObject(u)?lt.merge.call({caseless:d},c,u):lt.isPlainObject(u)?lt.merge({},u):lt.isArray(u)?u.slice():u}function i(c,u,h,d){if(lt.isUndefined(u)){if(!lt.isUndefined(c))return r(void 0,c,h,d)}else return r(c,u,h,d)}function s(c,u){if(!lt.isUndefined(u))return r(void 0,u)}function o(c,u){if(lt.isUndefined(u)){if(!lt.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,h){if(h in e)return r(c,u);if(h in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>i(KB(c),KB(u),h,!0)};return lt.forEach(Object.keys(Object.assign({},n,e)),function(u){const h=l[u]||i,d=h(n[u],e[u],u);lt.isUndefined(d)&&h!==a||(t[u]=d)}),t}const gO=n=>{const e=rp({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=ia.from(o),e.url=uO(mO(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(lt.isFormData(t)){if(ho.hasStandardBrowserEnv||ho.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ho.hasStandardBrowserEnv&&(r&&lt.isFunction(r)&&(r=r(e)),r||r!==!1&&z7(e.url))){const c=i&&s&&H7.read(s);c&&o.set(i,c)}return e},V7=typeof XMLHttpRequest<"u",W7=V7&&function(n){return new Promise(function(t,r){const i=gO(n);let s=i.data;const o=ia.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,h,d,m,g;function v(){m&&m(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function _(){if(!w)return;const S=ia.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),B={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:S,config:n,request:w};pO(function(N){t(N),v()},function(N){r(N),v()},B),w=null}"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(_)},w.onabort=function(){w&&(r(new rr("Request aborted",rr.ECONNABORTED,n,w)),w=null)},w.onerror=function(){r(new rr("Network Error",rr.ERR_NETWORK,n,w)),w=null},w.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const B=i.transitional||hO;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),r(new rr(R,B.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,n,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&lt.forEach(o.toJSON(),function(R,B){w.setRequestHeader(B,R)}),lt.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),a&&a!=="json"&&(w.responseType=i.responseType),c&&([d,g]=Cw(c,!0),w.addEventListener("progress",d)),l&&w.upload&&([h,m]=Cw(l),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(u=S=>{w&&(r(!S||S.type?new Vg(null,n,w):S),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const A=N7(i.url);if(A&&ho.protocols.indexOf(A)===-1){r(new rr("Unsupported protocol "+A+":",rr.ERR_BAD_REQUEST,n));return}w.send(s||null)})},$7=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof rr?u:new Vg(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new rr(`timeout ${e} of ms exceeded`,rr.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>lt.asap(a),l}},X7=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},q7=async function*(n,e){for await(const t of Y7(n))yield*X7(t,e)},Y7=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},JB=(n,e,t,r)=>{const i=q7(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let h=u.byteLength;if(t){let d=s+=h;t(d)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},aA=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yO=aA&&typeof ReadableStream=="function",K7=aA&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),xO=(n,...e)=>{try{return!!n(...e)}catch{return!1}},J7=yO&&xO(()=>{let n=!1;const e=new Request(ho.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),ZB=64*1024,IE=yO&&xO(()=>lt.isReadableStream(new Response("").body)),Tw={stream:IE&&(n=>n.body)};aA&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Tw[e]&&(Tw[e]=lt.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new rr(`Response type '${e}' is not supported`,rr.ERR_NOT_SUPPORT,r)})})})(new Response);const Z7=async n=>{if(n==null)return 0;if(lt.isBlob(n))return n.size;if(lt.isSpecCompliantForm(n))return(await new Request(ho.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(n)||lt.isArrayBuffer(n))return n.byteLength;if(lt.isURLSearchParams(n)&&(n=n+""),lt.isString(n))return(await K7(n)).byteLength},Q7=async(n,e)=>{const t=lt.toFiniteNumber(n.getContentLength());return t??Z7(e)},eX=aA&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=gO(n);c=c?(c+"").toLowerCase():"text";let m=$7([i,s&&s.toAbortSignal()],o),g;const v=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let w;try{if(l&&J7&&t!=="get"&&t!=="head"&&(w=await Q7(u,r))!==0){let B=new Request(e,{method:"POST",body:r,duplex:"half"}),I;if(lt.isFormData(r)&&(I=B.headers.get("content-type"))&&u.setContentType(I),B.body){const[N,U]=qB(w,Cw(YB(l)));r=JB(B.body,ZB,N,U)}}lt.isString(h)||(h=h?"include":"omit");const _="credentials"in Request.prototype;g=new Request(e,{...d,signal:m,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:_?h:void 0});let A=await fetch(g);const S=IE&&(c==="stream"||c==="response");if(IE&&(a||S&&v)){const B={};["status","statusText","headers"].forEach(O=>{B[O]=A[O]});const I=lt.toFiniteNumber(A.headers.get("content-length")),[N,U]=a&&qB(I,Cw(YB(a),!0))||[];A=new Response(JB(A.body,ZB,N,()=>{U&&U(),v&&v()}),B)}c=c||"text";let R=await Tw[lt.findKey(Tw,c)||"text"](A,n);return!S&&v&&v(),await new Promise((B,I)=>{pO(B,I,{data:R,headers:ia.from(A.headers),status:A.status,statusText:A.statusText,config:n,request:g})})}catch(_){throw v&&v(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new rr("Network Error",rr.ERR_NETWORK,n,g),{cause:_.cause||_}):rr.from(_,_&&_.code,n,g)}}),LE={http:m7,xhr:W7,fetch:eX};lt.forEach(LE,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const QB=n=>`- ${n}`,tX=n=>lt.isFunction(n)||n===null||n===!1,vO={getAdapter:n=>{n=lt.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!tX(t)&&(r=LE[(o=String(t)).toLowerCase()],r===void 0))throw new rr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(QB).join(`
`):" "+QB(s[0]):"as no adapter specified";throw new rr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:LE};function yC(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Vg(null,n)}function eI(n){return yC(n),n.headers=ia.from(n.headers),n.data=gC.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),vO.getAdapter(n.adapter||sv.adapter)(n).then(function(r){return yC(n),r.data=gC.call(n,n.transformResponse,r),r.headers=ia.from(r.headers),r},function(r){return dO(r)||(yC(n),r&&r.response&&(r.response.data=gC.call(n,n.transformResponse,r.response),r.response.headers=ia.from(r.response.headers))),Promise.reject(r)})}const _O="1.7.9",lA={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{lA[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const tI={};lA.transitional=function(e,t,r){function i(s,o){return"[Axios v"+_O+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new rr(i(o," has been removed"+(t?" in "+t:"")),rr.ERR_DEPRECATED);return t&&!tI[o]&&(tI[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};lA.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function nX(n,e,t){if(typeof n!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new rr("option "+s+" must be "+l,rr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new rr("Unknown option "+s,rr.ERR_BAD_OPTION)}}const Z_={assertOptions:nX,validators:lA},Cc=Z_.validators;class Xd{constructor(e){this.defaults=e,this.interceptors={request:new $B,response:new $B}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=rp(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Z_.assertOptions(r,{silentJSONParsing:Cc.transitional(Cc.boolean),forcedJSONParsing:Cc.transitional(Cc.boolean),clarifyTimeoutError:Cc.transitional(Cc.boolean)},!1),i!=null&&(lt.isFunction(i)?t.paramsSerializer={serialize:i}:Z_.assertOptions(i,{encode:Cc.function,serialize:Cc.function},!0)),Z_.assertOptions(t,{baseUrl:Cc.spelling("baseURL"),withXsrfToken:Cc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&lt.merge(s.common,s[t.method]);s&&lt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=ia.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,h=0,d;if(!l){const g=[eI.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),d=g.length,u=Promise.resolve(t);h<d;)u=u.then(g[h++],g[h++]);return u}d=a.length;let m=t;for(h=0;h<d;){const g=a[h++],v=a[h++];try{m=g(m)}catch(w){v.call(this,w);break}}try{u=eI.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,d=c.length;h<d;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=rp(this.defaults,e);const t=mO(e.baseURL,e.url);return uO(t,e.params,e.paramsSerializer)}}lt.forEach(["delete","get","head","options"],function(e){Xd.prototype[e]=function(t,r){return this.request(rp(r||{},{method:e,url:t,data:(r||{}).data}))}});lt.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(rp(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Xd.prototype[e]=t(),Xd.prototype[e+"Form"]=t(!0)});class H2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Vg(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new H2(function(i){e=i}),cancel:e}}}function rX(n){return function(t){return n.apply(null,t)}}function iX(n){return lt.isObject(n)&&n.isAxiosError===!0}const DE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(DE).forEach(([n,e])=>{DE[e]=n});function wO(n){const e=new Xd(n),t=Z3(Xd.prototype.request,e);return lt.extend(t,Xd.prototype,e,{allOwnKeys:!0}),lt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return wO(rp(n,i))},t}const kr=wO(sv);kr.Axios=Xd;kr.CanceledError=Vg;kr.CancelToken=H2;kr.isCancel=dO;kr.VERSION=_O;kr.toFormData=oA;kr.AxiosError=rr;kr.Cancel=kr.CanceledError;kr.all=function(e){return Promise.all(e)};kr.spread=rX;kr.isAxiosError=iX;kr.mergeConfig=rp;kr.AxiosHeaders=ia;kr.formToJSON=n=>fO(lt.isHTMLForm(n)?new FormData(n):n);kr.getAdapter=vO.getAdapter;kr.HttpStatusCode=DE;kr.default=kr;var Qy={},nI;function sX(){if(nI)return Qy;nI=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.parse=o,Qy.serialize=c;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,m){const g=new s,v=d.length;if(v<2)return g;const w=(m==null?void 0:m.decode)||u;let _=0;do{const A=d.indexOf("=",_);if(A===-1)break;const S=d.indexOf(";",_),R=S===-1?v:S;if(A>R){_=d.lastIndexOf(";",A-1)+1;continue}const B=a(d,_,A),I=l(d,A,B),N=d.slice(B,I);if(g[N]===void 0){let U=a(d,A+1,R),O=l(d,R,U);const P=w(d.slice(U,O));g[N]=P}_=R+1}while(_<v);return g}function a(d,m,g){do{const v=d.charCodeAt(m);if(v!==32&&v!==9)return m}while(++m<g);return g}function l(d,m,g){for(;m>g;){const v=d.charCodeAt(--m);if(v!==32&&v!==9)return m+1}return g}function c(d,m,g){const v=(g==null?void 0:g.encode)||encodeURIComponent;if(!n.test(d))throw new TypeError(`argument name is invalid: ${d}`);const w=v(m);if(!e.test(w))throw new TypeError(`argument val is invalid: ${m}`);let _=d+"="+w;if(!g)return _;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);_+="; Max-Age="+g.maxAge}if(g.domain){if(!t.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);_+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);_+="; Path="+g.path}if(g.expires){if(!h(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);_+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(_+="; HttpOnly"),g.secure&&(_+="; Secure"),g.partitioned&&(_+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return _}function u(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function h(d){return i.call(d)==="[object Date]"}return Qy}sX();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rI="popstate";function oX(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return FE("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:vx(i)}return lX(e,t,null,n)}function vi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jl(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aX(){return Math.random().toString(36).substring(2,10)}function iI(n,e){return{usr:n.state,key:n.key,idx:e}}function FE(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Wg(e):e,state:t,key:e&&e.key||r||aX()}}function vx({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Wg(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function lX(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let w=u(),_=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:_})}function d(w,_){a="PUSH";let A=FE(v.location,w,_);c=u()+1;let S=iI(A,c),R=v.createHref(A);try{o.pushState(S,"",R)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(R)}s&&l&&l({action:a,location:v.location,delta:1})}function m(w,_){a="REPLACE";let A=FE(v.location,w,_);c=u();let S=iI(A,c),R=v.createHref(A);o.replaceState(S,"",R),s&&l&&l({action:a,location:v.location,delta:0})}function g(w){let _=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof w=="string"?w:vx(w);return A=A.replace(/ $/,"%20"),vi(_,`No window.location.(origin|href) available to create URL for href: ${A}`),new URL(A,_)}let v={get action(){return a},get location(){return n(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rI,h),l=w,()=>{i.removeEventListener(rI,h),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let _=g(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:m,go(w){return o.go(w)}};return v}function bO(n,e,t="/"){return cX(n,e,t,!1)}function cX(n,e,t,r){let i=typeof e=="string"?Wg(e):e,s=sf(i.pathname||"/",t);if(s==null)return null;let o=AO(n);uX(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=wX(s);a=vX(o[l],c,r)}return a}function AO(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vi(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Ou([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(vi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),AO(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yX(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of SO(s.path))i(s,o,l)}),e}function SO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SO(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function uX(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xX(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var hX=/^:[\w-]+$/,fX=3,dX=2,pX=1,mX=10,gX=-2,sI=n=>n==="*";function yX(n,e){let t=n.split("/"),r=t.length;return t.some(sI)&&(r+=gX),e&&(r+=dX),t.filter(i=>!sI(i)).reduce((i,s)=>i+(hX.test(s)?fX:s===""?pX:mX),r)}function xX(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function vX(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=Ew({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=Ew({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Ou([s,h.pathname]),pathnameBase:CX(Ou([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Ou([s,h.pathnameBase]))}return o}function Ew(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=_X(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:h},d)=>{if(u==="*"){let g=a[d]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[d];return h&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function _X(n,e=!1,t=!0){Jl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wX(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function sf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function bX(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Wg(n):n;return{pathname:t?t.startsWith("/")?t:AX(t,e):e,search:TX(r),hash:EX(i)}}function AX(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function xC(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SX(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function j2(n){let e=SX(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function G2(n,e,t,r=!1){let i;typeof n=="string"?i=Wg(n):(i={...n},vi(!i.pathname||!i.pathname.includes("?"),xC("?","pathname","search",i)),vi(!i.pathname||!i.pathname.includes("#"),xC("#","pathname","hash",i)),vi(!i.search||!i.search.includes("#"),xC("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=bX(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Ou=n=>n.join("/").replace(/\/\/+/g,"/"),CX=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TX=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,EX=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function MX(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var CO=["POST","PUT","PATCH","DELETE"];new Set(CO);var RX=["GET",...CO];new Set(RX);var $g=L.createContext(null);$g.displayName="DataRouter";var cA=L.createContext(null);cA.displayName="DataRouterState";var TO=L.createContext({isTransitioning:!1});TO.displayName="ViewTransition";var PX=L.createContext(new Map);PX.displayName="Fetchers";var kX=L.createContext(null);kX.displayName="Await";var Ql=L.createContext(null);Ql.displayName="Navigation";var ov=L.createContext(null);ov.displayName="Location";var $c=L.createContext({outlet:null,matches:[],isDataRoute:!1});$c.displayName="Route";var V2=L.createContext(null);V2.displayName="RouteError";function BX(n,{relative:e}={}){vi(Xg(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=L.useContext(Ql),{hash:i,pathname:s,search:o}=av(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:Ou([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Xg(){return L.useContext(ov)!=null}function Ku(){return vi(Xg(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(ov).location}var EO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function MO(n){L.useContext(Ql).static||L.useLayoutEffect(n)}function al(){let{isDataRoute:n}=L.useContext($c);return n?WX():IX()}function IX(){vi(Xg(),"useNavigate() may be used only in the context of a <Router> component.");let n=L.useContext($g),{basename:e,navigator:t}=L.useContext(Ql),{matches:r}=L.useContext($c),{pathname:i}=Ku(),s=JSON.stringify(j2(r)),o=L.useRef(!1);return MO(()=>{o.current=!0}),L.useCallback((l,c={})=>{if(Jl(o.current,EO),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=G2(l,JSON.parse(s),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ou([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,s,i,n])}L.createContext(null);function av(n,{relative:e}={}){let{matches:t}=L.useContext($c),{pathname:r}=Ku(),i=JSON.stringify(j2(t));return L.useMemo(()=>G2(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function LX(n,e){return RO(n,e)}function RO(n,e,t,r){var _;vi(Xg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=L.useContext(Ql),{matches:s}=L.useContext($c),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let A=u&&u.path||"";PO(l,!u||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let h=Ku(),d;if(e){let A=typeof e=="string"?Wg(e):e;vi(c==="/"||((_=A.pathname)==null?void 0:_.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${A.pathname}" was given in the \`location\` prop.`),d=A}else d=h;let m=d.pathname||"/",g=m;if(c!=="/"){let A=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let v=bO(n,{pathname:g});Jl(u||v!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Jl(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=UX(v&&v.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Ou([c,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:Ou([c,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,t,r);return e&&w?L.createElement(ov.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},w):w}function DX(){let n=VX(),e=MX(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:s},"ErrorBoundary")," or"," ",L.createElement("code",{style:s},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:i},t):null,o)}var FX=L.createElement(DX,null),NX=class extends L.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?L.createElement($c.Provider,{value:this.props.routeContext},L.createElement(V2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OX({routeContext:n,match:e,children:t}){let r=L.useContext($g);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement($c.Provider,{value:n},t)}function UX(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);vi(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:h}=t,d=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let h,d=!1,m=null,g=null;t&&(h=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||FX,o&&(a<0&&u===0?(PO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,g=null):a===u&&(d=!0,g=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),w=()=>{let _;return h?_=m:d?_=g:c.route.Component?_=L.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=l,L.createElement(OX,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:_})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?L.createElement(NX,{location:t.location,revalidation:t.revalidation,component:m,error:h,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}function W2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zX(n){let e=L.useContext($g);return vi(e,W2(n)),e}function HX(n){let e=L.useContext(cA);return vi(e,W2(n)),e}function jX(n){let e=L.useContext($c);return vi(e,W2(n)),e}function $2(n){let e=jX(n),t=e.matches[e.matches.length-1];return vi(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function GX(){return $2("useRouteId")}function VX(){var r;let n=L.useContext(V2),e=HX("useRouteError"),t=$2("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function WX(){let{router:n}=zX("useNavigate"),e=$2("useNavigate"),t=L.useRef(!1);return MO(()=>{t.current=!0}),L.useCallback(async(i,s={})=>{Jl(t.current,EO),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var oI={};function PO(n,e,t){!e&&!oI[n]&&(oI[n]=!0,Jl(!1,t))}L.memo($X);function $X({routes:n,future:e,state:t}){return RO(n,void 0,t,e)}function XX({to:n,replace:e,state:t,relative:r}){vi(Xg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=L.useContext(Ql);Jl(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=L.useContext($c),{pathname:o}=Ku(),a=al(),l=G2(n,j2(s),o,r==="path"),c=JSON.stringify(l);return L.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:r})},[a,c,r,e,t]),null}function Tr(n){vi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qX({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){vi(!Xg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=L.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Wg(t));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:d="default"}=t,m=L.useMemo(()=>{let g=sf(l,o);return g==null?null:{location:{pathname:g,search:c,hash:u,state:h,key:d},navigationType:r}},[o,l,c,u,h,d,r]);return Jl(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:L.createElement(Ql.Provider,{value:a},L.createElement(ov.Provider,{children:e,value:m}))}function YX({children:n,location:e}){return LX(NE(n),e)}function NE(n,e=[]){let t=[];return L.Children.forEach(n,(r,i)=>{if(!L.isValidElement(r))return;let s=[...e,i];if(r.type===L.Fragment){t.push.apply(t,NE(r.props.children,s));return}vi(r.type===Tr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=NE(r.props.children,s)),t.push(o)}),t}var Q_="get",ew="application/x-www-form-urlencoded";function uA(n){return n!=null&&typeof n.tagName=="string"}function KX(n){return uA(n)&&n.tagName.toLowerCase()==="button"}function JX(n){return uA(n)&&n.tagName.toLowerCase()==="form"}function ZX(n){return uA(n)&&n.tagName.toLowerCase()==="input"}function QX(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eq(n,e){return n.button===0&&(!e||e==="_self")&&!QX(n)}var R1=null;function tq(){if(R1===null)try{new FormData(document.createElement("form"),0),R1=!1}catch{R1=!0}return R1}var nq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vC(n){return n!=null&&!nq.has(n)?(Jl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ew}"`),null):n}function rq(n,e){let t,r,i,s,o;if(JX(n)){let a=n.getAttribute("action");r=a?sf(a,e):null,t=n.getAttribute("method")||Q_,i=vC(n.getAttribute("enctype"))||ew,s=new FormData(n)}else if(KX(n)||ZX(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?sf(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Q_,i=vC(n.getAttribute("formenctype"))||vC(a.getAttribute("enctype"))||ew,s=new FormData(a,n),!tq()){let{name:c,type:u,value:h}=n;if(u==="image"){let d=c?`${c}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else c&&s.append(c,h)}}else{if(uA(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Q_,r=null,i=ew,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}function X2(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function iq(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sq(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function oq(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await iq(s,t);return o.links?o.links():[]}return[]}));return uq(r.flat(1).filter(sq).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function aI(n,e,t,r,i,s){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var h;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function aq(n,e){return lq(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function lq(n){return[...new Set(n)]}function cq(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function uq(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(cq(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function hq(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function fq(){let n=L.useContext($g);return X2(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function dq(){let n=L.useContext(cA);return X2(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var q2=L.createContext(void 0);q2.displayName="FrameworkContext";function kO(){let n=L.useContext(q2);return X2(n,"You must render this element inside a <HydratedRouter> element"),n}function pq(n,e){let t=L.useContext(q2),[r,i]=L.useState(!1),[s,o]=L.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,d=L.useRef(null);L.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=_=>{_.forEach(A=>{o(A.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return d.current&&w.observe(d.current),()=>{w.disconnect()}}},[n]),L.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,d,{}]:[s,d,{onFocus:e0(a,m),onBlur:e0(l,g),onMouseEnter:e0(c,m),onMouseLeave:e0(u,g),onTouchStart:e0(h,m)}]:[!1,d,{}]}function e0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function mq({page:n,...e}){let{router:t}=fq(),r=L.useMemo(()=>bO(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?L.createElement(yq,{page:n,matches:r,...e}):null}function gq(n){let{manifest:e,routeModules:t}=kO(),[r,i]=L.useState([]);return L.useEffect(()=>{let s=!1;return oq(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function yq({page:n,matches:e,...t}){let r=Ku(),{manifest:i,routeModules:s}=kO(),{loaderData:o,matches:a}=dq(),l=L.useMemo(()=>aI(n,e,a,i,r,"data"),[n,e,a,i,r]),c=L.useMemo(()=>aI(n,e,a,i,r,"assets"),[n,e,a,i,r]),u=L.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(e.forEach(w=>{var A;let _=i.routes[w.route.id];!_||!_.hasLoader||(!l.some(S=>S.route.id===w.route.id)&&w.route.id in o&&((A=s[w.route.id])!=null&&A.shouldRevalidate)||_.hasClientLoader?g=!0:m.add(w.route.id))}),m.size===0)return[];let v=hq(n);return g&&m.size>0&&v.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[v.pathname+v.search]},[o,r,i,l,e,n,s]),h=L.useMemo(()=>aq(c,i),[c,i]),d=gq(c);return L.createElement(L.Fragment,null,u.map(m=>L.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),h.map(m=>L.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),d.map(({key:m,link:g})=>L.createElement("link",{key:m,...g})))}function xq(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var BO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BO&&(window.__reactRouterVersion="7.1.3")}catch{}function vq({basename:n,children:e,window:t}){let r=L.useRef();r.current==null&&(r.current=oX({window:t,v5Compat:!0}));let i=r.current,[s,o]=L.useState({action:i.action,location:i.location}),a=L.useCallback(l=>{L.startTransition(()=>o(l))},[o]);return L.useLayoutEffect(()=>i.listen(a),[i,a]),L.createElement(qX,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var IO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ti=L.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...d},m){let{basename:g}=L.useContext(Ql),v=typeof c=="string"&&IO.test(c),w,_=!1;if(typeof c=="string"&&v&&(w=c,BO))try{let O=new URL(window.location.href),P=c.startsWith("//")?new URL(O.protocol+c):new URL(c),F=sf(P.pathname,g);P.origin===O.origin&&F!=null?c=F+P.search+P.hash:_=!0}catch{Jl(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=BX(c,{relative:i}),[S,R,B]=pq(r,d),I=Aq(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function N(O){e&&e(O),O.defaultPrevented||I(O)}let U=L.createElement("a",{...d,...B,href:w||A,onClick:_||s?e:N,ref:xq(m,R),target:l,"data-discover":!v&&t==="render"?"true":void 0});return S&&!v?L.createElement(L.Fragment,null,U,L.createElement(mq,{page:A})):U});ti.displayName="Link";var _q=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let h=av(o,{relative:c.relative}),d=Ku(),m=L.useContext(cA),{navigator:g,basename:v}=L.useContext(Ql),w=m!=null&&Mq(h)&&a===!0,_=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,A=d.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(A=A.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&v&&(S=sf(S,v)||S);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let B=A===_||!i&&A.startsWith(_)&&A.charAt(R)==="/",I=S!=null&&(S===_||!i&&S.startsWith(_)&&S.charAt(_.length)==="/"),N={isActive:B,isPending:I,isTransitioning:w},U=B?e:void 0,O;typeof r=="function"?O=r(N):O=[r,B?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(N):s;return L.createElement(ti,{...c,"aria-current":U,className:O,ref:u,style:P,to:o,viewTransition:a},typeof l=="function"?l(N):l)});_q.displayName="NavLink";var wq=L.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=Q_,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...d},m)=>{let g=Tq(),v=Eq(a,{relative:c}),w=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&IO.test(a),A=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let R=S.nativeEvent.submitter,B=(R==null?void 0:R.getAttribute("formmethod"))||o;g(R||S.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:h})};return L.createElement("form",{ref:m,method:w,action:v,onSubmit:r?l:A,...d,"data-discover":!_&&n==="render"?"true":void 0})});wq.displayName="Form";function bq(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LO(n){let e=L.useContext($g);return vi(e,bq(n)),e}function Aq(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=al(),l=Ku(),c=av(n,{relative:s});return L.useCallback(u=>{if(eq(u,e)){u.preventDefault();let h=t!==void 0?t:vx(l)===vx(c);a(n,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,t,r,e,n,i,s,o])}var Sq=0,Cq=()=>`__${String(++Sq)}__`;function Tq(){let{router:n}=LO("useSubmit"),{basename:e}=L.useContext(Ql),t=GX();return L.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=rq(r,e);if(i.navigate===!1){let u=i.fetcherKey||Cq();await n.fetch(u,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function Eq(n,{relative:e}={}){let{basename:t}=L.useContext(Ql),r=L.useContext($c);vi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...av(n||".",{relative:e})},o=Ku();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();s.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ou([t,s.pathname])),vx(s)}function Mq(n,e={}){let t=L.useContext(TO);vi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=LO("useViewTransitionState"),i=av(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=sf(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=sf(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ew(i.pathname,o)!=null||Ew(i.pathname,s)!=null}new TextEncoder;var Y2=K3();const Rq=jg(Y2);function Pq(n){return Object.prototype.toString.call(n)==="[object Object]"}function lI(n){return Pq(n)||Array.isArray(n)}function kq(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function K2(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;const i=JSON.stringify(Object.keys(n.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return i!==s?!1:t.every(o=>{const a=n[o],l=e[o];return typeof a=="function"?`${a}`==`${l}`:!lI(a)||!lI(l)?a===l:K2(a,l)})}function cI(n){return n.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function Bq(n,e){if(n.length!==e.length)return!1;const t=cI(n),r=cI(e);return t.every((i,s)=>{const o=r[s];return K2(i,o)})}function J2(n){return typeof n=="number"}function OE(n){return typeof n=="string"}function hA(n){return typeof n=="boolean"}function uI(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ai(n){return Math.abs(n)}function Z2(n){return Math.sign(n)}function $0(n,e){return Ai(n-e)}function Iq(n,e){if(n===0||e===0||Ai(n)<=Ai(e))return 0;const t=$0(Ai(n),Ai(e));return Ai(t/n)}function Lq(n){return Math.round(n*100)/100}function _x(n){return wx(n).map(Number)}function $l(n){return n[lv(n)]}function lv(n){return Math.max(0,n.length-1)}function Q2(n,e){return e===lv(n)}function hI(n,e=0){return Array.from(Array(n),(t,r)=>e+r)}function wx(n){return Object.keys(n)}function DO(n,e){return[n,e].reduce((t,r)=>(wx(r).forEach(i=>{const s=t[i],o=r[i],a=uI(s)&&uI(o);t[i]=a?DO(s,o):o}),t),{})}function UE(n,e){return typeof e.MouseEvent<"u"&&n instanceof e.MouseEvent}function Dq(n,e){const t={start:r,center:i,end:s};function r(){return 0}function i(l){return s(l)/2}function s(l){return e-l}function o(l,c){return OE(n)?t[n](l):n(e,l,c)}return{measure:o}}function bx(){let n=[];function e(i,s,o,a={passive:!0}){let l;if("addEventListener"in i)i.addEventListener(s,o,a),l=()=>i.removeEventListener(s,o,a);else{const c=i;c.addListener(o),l=()=>c.removeListener(o)}return n.push(l),r}function t(){n=n.filter(i=>i())}const r={add:e,clear:t};return r}function Fq(n,e,t,r){const i=bx(),s=1e3/60;let o=null,a=0,l=0;function c(){i.add(n,"visibilitychange",()=>{n.hidden&&g()})}function u(){m(),i.clear()}function h(w){if(!l)return;o||(o=w,t(),t());const _=w-o;for(o=w,a+=_;a>=s;)t(),a-=s;const A=a/s;r(A),l&&(l=e.requestAnimationFrame(h))}function d(){l||(l=e.requestAnimationFrame(h))}function m(){e.cancelAnimationFrame(l),o=null,a=0,l=0}function g(){o=null,a=0}return{init:c,destroy:u,start:d,stop:m,update:t,render:r}}function Nq(n,e){const t=e==="rtl",r=n==="y",i=r?"y":"x",s=r?"x":"y",o=!r&&t?-1:1,a=u(),l=h();function c(g){const{height:v,width:w}=g;return r?v:w}function u(){return r?"top":t?"right":"left"}function h(){return r?"bottom":t?"left":"right"}function d(g){return g*o}return{scroll:i,cross:s,startEdge:a,endEdge:l,measureSize:c,direction:d}}function ip(n=0,e=0){const t=Ai(n-e);function r(c){return c<n}function i(c){return c>e}function s(c){return r(c)||i(c)}function o(c){return s(c)?r(c)?n:e:c}function a(c){return t?c-t*Math.ceil((c-e)/t):c}return{length:t,max:e,min:n,constrain:o,reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:a}}function FO(n,e,t){const{constrain:r}=ip(0,n),i=n+1;let s=o(e);function o(d){return t?Ai((i+d)%i):r(d)}function a(){return s}function l(d){return s=o(d),h}function c(d){return u().set(a()+d)}function u(){return FO(n,a(),t)}const h={get:a,set:l,add:c,clone:u};return h}function Oq(n,e,t,r,i,s,o,a,l,c,u,h,d,m,g,v,w,_,A){const{cross:S,direction:R}=n,B=["INPUT","SELECT","TEXTAREA"],I={passive:!1},N=bx(),U=bx(),O=ip(50,225).constrain(m.measure(20)),P={mouse:300,touch:400},F={mouse:500,touch:600},K=g?43:25;let Q=!1,Y=0,ee=0,$=!1,oe=!1,G=!1,te=!1;function re(Ee){if(!A)return;function Oe(vt){(hA(A)||A(Ee,vt))&&Ce(vt)}const le=e;N.add(le,"dragstart",vt=>vt.preventDefault(),I).add(le,"touchmove",()=>{},I).add(le,"touchend",()=>{}).add(le,"touchstart",Oe).add(le,"mousedown",Oe).add(le,"touchcancel",Ue).add(le,"contextmenu",Ue).add(le,"click",Qe,!0)}function Z(){N.clear(),U.clear()}function ne(){const Ee=te?t:e;U.add(Ee,"touchmove",ke,I).add(Ee,"touchend",Ue).add(Ee,"mousemove",ke,I).add(Ee,"mouseup",Ue)}function ce(Ee){const Oe=Ee.nodeName||"";return B.includes(Oe)}function ye(){return(g?F:P)[te?"mouse":"touch"]}function he(Ee,Oe){const le=h.add(Z2(Ee)*-1),vt=u.byDistance(Ee,!g).distance;return g||Ai(Ee)<O?vt:w&&Oe?vt*.5:u.byIndex(le.get(),0).distance}function Ce(Ee){const Oe=UE(Ee,r);te=Oe,G=g&&Oe&&!Ee.buttons&&Q,Q=$0(i.get(),o.get())>=2,!(Oe&&Ee.button!==0)&&(ce(Ee.target)||($=!0,s.pointerDown(Ee),c.useFriction(0).useDuration(0),i.set(o),ne(),Y=s.readPoint(Ee),ee=s.readPoint(Ee,S),d.emit("pointerDown")))}function ke(Ee){if(!UE(Ee,r)&&Ee.touches.length>=2)return Ue(Ee);const le=s.readPoint(Ee),vt=s.readPoint(Ee,S),ft=$0(le,Y),_t=$0(vt,ee);if(!oe&&!te&&(!Ee.cancelable||(oe=ft>_t,!oe)))return Ue(Ee);const mt=s.pointerMove(Ee);ft>v&&(G=!0),c.useFriction(.3).useDuration(.75),a.start(),i.add(R(mt)),Ee.preventDefault()}function Ue(Ee){const le=u.byDistance(0,!1).index!==h.get(),vt=s.pointerUp(Ee)*ye(),ft=he(R(vt),le),_t=Iq(vt,ft),mt=K-10*_t,Vt=_+_t/50;oe=!1,$=!1,U.clear(),c.useDuration(mt).useFriction(Vt),l.distance(ft,!g),te=!1,d.emit("pointerUp")}function Qe(Ee){G&&(Ee.stopPropagation(),Ee.preventDefault(),G=!1)}function Te(){return $}return{init:re,destroy:Z,pointerDown:Te}}function Uq(n,e){let r,i;function s(h){return h.timeStamp}function o(h,d){const g=`client${(d||n.scroll)==="x"?"X":"Y"}`;return(UE(h,e)?h:h.touches[0])[g]}function a(h){return r=h,i=h,o(h)}function l(h){const d=o(h)-o(i),m=s(h)-s(r)>170;return i=h,m&&(r=h),d}function c(h){if(!r||!i)return 0;const d=o(i)-o(r),m=s(h)-s(r),g=s(h)-s(i)>170,v=d/m;return m&&!g&&Ai(v)>.1?v:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:o}}function zq(){function n(t){const{offsetTop:r,offsetLeft:i,offsetWidth:s,offsetHeight:o}=t;return{top:r,right:i+s,bottom:r+o,left:i,width:s,height:o}}return{measure:n}}function Hq(n){function e(r){return n*(r/100)}return{measure:e}}function jq(n,e,t,r,i,s,o){const a=[n].concat(r);let l,c,u=[],h=!1;function d(w){return i.measureSize(o.measure(w))}function m(w){if(!s)return;c=d(n),u=r.map(d);function _(A){for(const S of A){if(h)return;const R=S.target===n,B=r.indexOf(S.target),I=R?c:u[B],N=d(R?n:r[B]);if(Ai(N-I)>=.5){w.reInit(),e.emit("resize");break}}}l=new ResizeObserver(A=>{(hA(s)||s(w,A))&&_(A)}),t.requestAnimationFrame(()=>{a.forEach(A=>l.observe(A))})}function g(){h=!0,l&&l.disconnect()}return{init:m,destroy:g}}function Gq(n,e,t,r,i,s){let o=0,a=0,l=i,c=s,u=n.get(),h=0;function d(){const I=r.get()-n.get(),N=!l;let U=0;return N?(o=0,t.set(r),n.set(r),U=I):(t.set(n),o+=I/l,o*=c,u+=o,n.add(o),U=u-h),a=Z2(U),h=u,B}function m(){const I=r.get()-e.get();return Ai(I)<.001}function g(){return l}function v(){return a}function w(){return o}function _(){return S(i)}function A(){return R(s)}function S(I){return l=I,B}function R(I){return c=I,B}const B={direction:v,duration:g,velocity:w,seek:d,settled:m,useBaseFriction:A,useBaseDuration:_,useFriction:R,useDuration:S};return B}function Vq(n,e,t,r,i){const s=i.measure(10),o=i.measure(50),a=ip(.1,.99);let l=!1;function c(){return!(l||!n.reachedAny(t.get())||!n.reachedAny(e.get()))}function u(m){if(!c())return;const g=n.reachedMin(e.get())?"min":"max",v=Ai(n[g]-e.get()),w=t.get()-e.get(),_=a.constrain(v/o);t.subtract(w*_),!m&&Ai(w)<s&&(t.set(n.constrain(t.get())),r.useDuration(25).useBaseFriction())}function h(m){l=!m}return{shouldConstrain:c,constrain:u,toggleActive:h}}function Wq(n,e,t,r,i){const s=ip(-e+n,0),o=h(),a=u(),l=d();function c(g,v){return $0(g,v)<=1}function u(){const g=o[0],v=$l(o),w=o.lastIndexOf(g),_=o.indexOf(v)+1;return ip(w,_)}function h(){return t.map((g,v)=>{const{min:w,max:_}=s,A=s.constrain(g),S=!v,R=Q2(t,v);return S?_:R||c(w,A)?w:c(_,A)?_:A}).map(g=>parseFloat(g.toFixed(3)))}function d(){if(e<=n+i)return[s.max];if(r==="keepSnaps")return o;const{min:g,max:v}=a;return o.slice(g,v)}return{snapsContained:l,scrollContainLimit:a}}function $q(n,e,t){const r=e[0],i=t?r-n:$l(e);return{limit:ip(i,r)}}function Xq(n,e,t,r){const s=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:l}=ip(s,o);function c(d){return d===1?l(t.get()):d===-1?a(t.get()):!1}function u(d){if(!c(d))return;const m=n*(d*-1);r.forEach(g=>g.add(m))}return{loop:u}}function qq(n){const{max:e,length:t}=n;function r(s){const o=s-e;return t?o/-t:0}return{get:r}}function Yq(n,e,t,r,i){const{startEdge:s,endEdge:o}=n,{groupSlides:a}=i,l=h().map(e.measure),c=d(),u=m();function h(){return a(r).map(v=>$l(v)[o]-v[0][s]).map(Ai)}function d(){return r.map(v=>t[s]-v[s]).map(v=>-Ai(v))}function m(){return a(c).map(v=>v[0]).map((v,w)=>v+l[w])}return{snaps:c,snapsAligned:u}}function Kq(n,e,t,r,i,s){const{groupSlides:o}=i,{min:a,max:l}=r,c=u();function u(){const d=o(s),m=!n||e==="keepSnaps";return t.length===1?[s]:m?d:d.slice(a,l).map((g,v,w)=>{const _=!v,A=Q2(w,v);if(_){const S=$l(w[0])+1;return hI(S)}if(A){const S=lv(s)-$l(w)[0]+1;return hI(S,$l(w)[0])}return g})}return{slideRegistry:c}}function Jq(n,e,t,r,i){const{reachedAny:s,removeOffset:o,constrain:a}=r;function l(g){return g.concat().sort((v,w)=>Ai(v)-Ai(w))[0]}function c(g){const v=n?o(g):a(g),w=e.map((A,S)=>({diff:u(A-v,0),index:S})).sort((A,S)=>Ai(A.diff)-Ai(S.diff)),{index:_}=w[0];return{index:_,distance:v}}function u(g,v){const w=[g,g+t,g-t];if(!n)return g;if(!v)return l(w);const _=w.filter(A=>Z2(A)===v);return _.length?l(_):$l(w)-t}function h(g,v){const w=e[g]-i.get(),_=u(w,v);return{index:g,distance:_}}function d(g,v){const w=i.get()+g,{index:_,distance:A}=c(w),S=!n&&s(w);if(!v||S)return{index:_,distance:g};const R=e[_]-A,B=g+u(R,0);return{index:_,distance:B}}return{byDistance:d,byIndex:h,shortcut:u}}function Zq(n,e,t,r,i,s,o){function a(h){const d=h.distance,m=h.index!==e.get();s.add(d),d&&(r.duration()?n.start():(n.update(),n.render(1),n.update())),m&&(t.set(e.get()),e.set(h.index),o.emit("select"))}function l(h,d){const m=i.byDistance(h,d);a(m)}function c(h,d){const m=e.clone().set(h),g=i.byIndex(m.get(),d);a(g)}return{distance:l,index:c}}function Qq(n,e,t,r,i,s,o,a){const l={passive:!0,capture:!0};let c=0;function u(m){if(!a)return;function g(v){if(new Date().getTime()-c>10)return;o.emit("slideFocusStart"),n.scrollLeft=0;const A=t.findIndex(S=>S.includes(v));J2(A)&&(i.useDuration(0),r.index(A,0),o.emit("slideFocus"))}s.add(document,"keydown",h,!1),e.forEach((v,w)=>{s.add(v,"focus",_=>{(hA(a)||a(m,_))&&g(w)},l)})}function h(m){m.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function L0(n){let e=n;function t(){return e}function r(l){e=o(l)}function i(l){e+=o(l)}function s(l){e-=o(l)}function o(l){return J2(l)?l:l.get()}return{get:t,set:r,add:i,subtract:s}}function NO(n,e){const t=n.scroll==="x"?o:a,r=e.style;let i=null,s=!1;function o(d){return`translate3d(${d}px,0px,0px)`}function a(d){return`translate3d(0px,${d}px,0px)`}function l(d){if(s)return;const m=Lq(n.direction(d));m!==i&&(r.transform=t(m),i=m)}function c(d){s=!d}function u(){s||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:u,to:l,toggleActive:c}}function eY(n,e,t,r,i,s,o,a,l){const u=_x(i),h=_x(i).reverse(),d=_().concat(A());function m(N,U){return N.reduce((O,P)=>O-i[P],U)}function g(N,U){return N.reduce((O,P)=>m(O,U)>0?O.concat([P]):O,[])}function v(N){return s.map((U,O)=>({start:U-r[O]+.5+N,end:U+e-.5+N}))}function w(N,U,O){const P=v(U);return N.map(F=>{const K=O?0:-t,Q=O?t:0,Y=O?"end":"start",ee=P[F][Y];return{index:F,loopPoint:ee,slideLocation:L0(-1),translate:NO(n,l[F]),target:()=>a.get()>ee?K:Q}})}function _(){const N=o[0],U=g(h,N);return w(U,t,!1)}function A(){const N=e-o[0]-1,U=g(u,N);return w(U,-t,!0)}function S(){return d.every(({index:N})=>{const U=u.filter(O=>O!==N);return m(U,e)<=.1})}function R(){d.forEach(N=>{const{target:U,translate:O,slideLocation:P}=N,F=U();F!==P.get()&&(O.to(F),P.set(F))})}function B(){d.forEach(N=>N.translate.clear())}return{canLoop:S,clear:B,loop:R,loopPoints:d}}function tY(n,e,t){let r,i=!1;function s(l){if(!t)return;function c(u){for(const h of u)if(h.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(u=>{i||(hA(t)||t(l,u))&&c(u)}),r.observe(n,{childList:!0})}function o(){r&&r.disconnect(),i=!0}return{init:s,destroy:o}}function nY(n,e,t,r){const i={};let s=null,o=null,a,l=!1;function c(){a=new IntersectionObserver(g=>{l||(g.forEach(v=>{const w=e.indexOf(v.target);i[w]=v}),s=null,o=null,t.emit("slidesInView"))},{root:n.parentElement,threshold:r}),e.forEach(g=>a.observe(g))}function u(){a&&a.disconnect(),l=!0}function h(g){return wx(i).reduce((v,w)=>{const _=parseInt(w),{isIntersecting:A}=i[_];return(g&&A||!g&&!A)&&v.push(_),v},[])}function d(g=!0){if(g&&s)return s;if(!g&&o)return o;const v=h(g);return g&&(s=v),g||(o=v),v}return{init:c,destroy:u,get:d}}function rY(n,e,t,r,i,s){const{measureSize:o,startEdge:a,endEdge:l}=n,c=t[0]&&i,u=g(),h=v(),d=t.map(o),m=w();function g(){if(!c)return 0;const A=t[0];return Ai(e[a]-A[a])}function v(){if(!c)return 0;const A=s.getComputedStyle($l(r));return parseFloat(A.getPropertyValue(`margin-${l}`))}function w(){return t.map((A,S,R)=>{const B=!S,I=Q2(R,S);return B?d[S]+u:I?d[S]+h:R[S+1][a]-A[a]}).map(Ai)}return{slideSizes:d,slideSizesWithGaps:m,startGap:u,endGap:h}}function iY(n,e,t,r,i,s,o,a,l){const{startEdge:c,endEdge:u,direction:h}=n,d=J2(t);function m(_,A){return _x(_).filter(S=>S%A===0).map(S=>_.slice(S,S+A))}function g(_){return _.length?_x(_).reduce((A,S,R)=>{const B=$l(A)||0,I=B===0,N=S===lv(_),U=i[c]-s[B][c],O=i[c]-s[S][u],P=!r&&I?h(o):0,F=!r&&N?h(a):0,K=Ai(O-F-(U+P));return R&&K>e+l&&A.push(S),N&&A.push(_.length),A},[]).map((A,S,R)=>{const B=Math.max(R[S-1]||0);return _.slice(B,A)}):[]}function v(_){return d?m(_,t):g(_)}return{groupSlides:v}}function sY(n,e,t,r,i,s,o){const{align:a,axis:l,direction:c,startIndex:u,loop:h,duration:d,dragFree:m,dragThreshold:g,inViewThreshold:v,slidesToScroll:w,skipSnaps:_,containScroll:A,watchResize:S,watchSlides:R,watchDrag:B,watchFocus:I}=s,N=2,U=zq(),O=U.measure(e),P=t.map(U.measure),F=Nq(l,c),K=F.measureSize(O),Q=Hq(K),Y=Dq(a,K),ee=!h&&!!A,$=h||!!A,{slideSizes:oe,slideSizesWithGaps:G,startGap:te,endGap:re}=rY(F,O,P,t,$,i),Z=iY(F,K,w,h,O,P,te,re,N),{snaps:ne,snapsAligned:ce}=Yq(F,Y,O,P,Z),ye=-$l(ne)+$l(G),{snapsContained:he,scrollContainLimit:Ce}=Wq(K,ye,ce,A,N),ke=ee?he:ce,{limit:Ue}=$q(ye,ke,h),Qe=FO(lv(ke),u,h),Te=Qe.clone(),$e=_x(t),Ee=({dragHandler:hn,scrollBody:gt,scrollBounds:jt,options:{loop:$t}})=>{$t||jt.constrain(hn.pointerDown()),gt.seek()},Oe=({scrollBody:hn,translate:gt,location:jt,offsetLocation:$t,previousLocation:zt,scrollLooper:Ft,slideLooper:Me,dragHandler:et,animation:wt,eventHandler:Se,scrollBounds:je,options:{loop:qe}},at)=>{const Nt=hn.settled(),Dt=!je.shouldConstrain(),kt=qe?Nt:Nt&&Dt;kt&&!et.pointerDown()&&(wt.stop(),Se.emit("settle")),kt||Se.emit("scroll");const En=jt.get()*at+zt.get()*(1-at);$t.set(En),qe&&(Ft.loop(hn.direction()),Me.loop()),gt.to($t.get())},le=Fq(r,i,()=>Ee(Lt),hn=>Oe(Lt,hn)),vt=.68,ft=ke[Qe.get()],_t=L0(ft),mt=L0(ft),Vt=L0(ft),bt=L0(ft),de=Gq(_t,Vt,mt,bt,d,vt),ae=Jq(h,ke,ye,Ue,bt),He=Zq(le,Qe,Te,de,ae,bt,o),Ze=qq(Ue),ut=bx(),st=nY(e,t,o,v),{slideRegistry:It}=Kq(ee,A,ke,Ce,Z,$e),Et=Qq(n,t,It,He,de,ut,o,I),Lt={ownerDocument:r,ownerWindow:i,eventHandler:o,containerRect:O,slideRects:P,animation:le,axis:F,dragHandler:Oq(F,n,r,i,bt,Uq(F,i),_t,le,He,de,ae,Qe,o,Q,m,g,_,vt,B),eventStore:ut,percentOfView:Q,index:Qe,indexPrevious:Te,limit:Ue,location:_t,offsetLocation:Vt,previousLocation:mt,options:s,resizeHandler:jq(e,o,i,t,F,S,U),scrollBody:de,scrollBounds:Vq(Ue,Vt,bt,de,Q),scrollLooper:Xq(ye,Ue,Vt,[_t,Vt,mt,bt]),scrollProgress:Ze,scrollSnapList:ke.map(Ze.get),scrollSnaps:ke,scrollTarget:ae,scrollTo:He,slideLooper:eY(F,K,ye,oe,G,ne,ke,Vt,t),slideFocus:Et,slidesHandler:tY(e,o,R),slidesInView:st,slideIndexes:$e,slideRegistry:It,slidesToScroll:Z,target:bt,translate:NO(F,e)};return Lt}function oY(){let n={},e;function t(c){e=c}function r(c){return n[c]||[]}function i(c){return r(c).forEach(u=>u(e,c)),l}function s(c,u){return n[c]=r(c).concat([u]),l}function o(c,u){return n[c]=r(c).filter(h=>h!==u),l}function a(){n={}}const l={init:t,emit:i,off:o,on:s,clear:a};return l}const aY={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function lY(n){function e(s,o){return DO(s,o||{})}function t(s){const o=s.breakpoints||{},a=wx(o).filter(l=>n.matchMedia(l).matches).map(l=>o[l]).reduce((l,c)=>e(l,c),{});return e(s,a)}function r(s){return s.map(o=>wx(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(n.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:r}}function cY(n){let e=[];function t(s,o){return e=o.filter(({options:a})=>n.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(s,n)),o.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){e=e.filter(s=>s.destroy())}return{init:t,destroy:r}}function Mw(n,e,t){const r=n.ownerDocument,i=r.defaultView,s=lY(i),o=cY(s),a=bx(),l=oY(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:h}=s,{on:d,off:m,emit:g}=l,v=F;let w=!1,_,A=c(aY,Mw.globalOptions),S=c(A),R=[],B,I,N;function U(){const{container:$e,slides:Ee}=S;I=(OE($e)?n.querySelector($e):$e)||n.children[0];const le=OE(Ee)?I.querySelectorAll(Ee):Ee;N=[].slice.call(le||I.children)}function O($e){const Ee=sY(n,I,N,r,i,$e,l);if($e.loop&&!Ee.slideLooper.canLoop()){const Oe=Object.assign({},$e,{loop:!1});return O(Oe)}return Ee}function P($e,Ee){w||(A=c(A,$e),S=u(A),R=Ee||R,U(),_=O(S),h([A,...R.map(({options:Oe})=>Oe)]).forEach(Oe=>a.add(Oe,"change",F)),S.active&&(_.translate.to(_.location.get()),_.animation.init(),_.slidesInView.init(),_.slideFocus.init(Te),_.eventHandler.init(Te),_.resizeHandler.init(Te),_.slidesHandler.init(Te),_.options.loop&&_.slideLooper.loop(),I.offsetParent&&N.length&&_.dragHandler.init(Te),B=o.init(Te,R)))}function F($e,Ee){const Oe=Z();K(),P(c({startIndex:Oe},$e),Ee),l.emit("reInit")}function K(){_.dragHandler.destroy(),_.eventStore.clear(),_.translate.clear(),_.slideLooper.clear(),_.resizeHandler.destroy(),_.slidesHandler.destroy(),_.slidesInView.destroy(),_.animation.destroy(),o.destroy(),a.clear()}function Q(){w||(w=!0,a.clear(),K(),l.emit("destroy"),l.clear())}function Y($e,Ee,Oe){!S.active||w||(_.scrollBody.useBaseFriction().useDuration(Ee===!0?0:S.duration),_.scrollTo.index($e,Oe||0))}function ee($e){const Ee=_.index.add(1).get();Y(Ee,$e,-1)}function $($e){const Ee=_.index.add(-1).get();Y(Ee,$e,1)}function oe(){return _.index.add(1).get()!==Z()}function G(){return _.index.add(-1).get()!==Z()}function te(){return _.scrollSnapList}function re(){return _.scrollProgress.get(_.location.get())}function Z(){return _.index.get()}function ne(){return _.indexPrevious.get()}function ce(){return _.slidesInView.get()}function ye(){return _.slidesInView.get(!1)}function he(){return B}function Ce(){return _}function ke(){return n}function Ue(){return I}function Qe(){return N}const Te={canScrollNext:oe,canScrollPrev:G,containerNode:Ue,internalEngine:Ce,destroy:Q,off:m,on:d,emit:g,plugins:he,previousScrollSnap:ne,reInit:v,rootNode:ke,scrollNext:ee,scrollPrev:$,scrollProgress:re,scrollSnapList:te,scrollTo:Y,selectedScrollSnap:Z,slideNodes:Qe,slidesInView:ce,slidesNotInView:ye};return P(e,t),setTimeout(()=>l.emit("init"),0),Te}Mw.globalOptions=void 0;function eR(n={},e=[]){const t=L.useRef(n),r=L.useRef(e),[i,s]=L.useState(),[o,a]=L.useState(),l=L.useCallback(()=>{i&&i.reInit(t.current,r.current)},[i]);return L.useEffect(()=>{K2(t.current,n)||(t.current=n,l())},[n,l]),L.useEffect(()=>{Bq(r.current,e)||(r.current=e,l())},[e,l]),L.useEffect(()=>{if(kq()&&o){Mw.globalOptions=eR.globalOptions;const c=Mw(o,t.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[o,s]),[a,i]}eR.globalOptions=void 0;const uY={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function hY(n,e){const t=n.scrollSnapList();return typeof e=="number"?t.map(()=>e):e(t,n)}function fY(n,e){const t=n.rootNode();return e&&e(t)||t}function tR(n={}){let e,t,r,i,s=null,o=0,a=!1,l=!1,c=!1,u=!1;function h(Y,ee){t=Y;const{mergeOptions:$,optionsAtMedia:oe}=ee,G=$(uY,tR.globalOptions),te=$(G,n);if(e=oe(te),t.scrollSnapList().length<=1)return;u=e.jump,r=!1,i=hY(t,e.delay);const{eventStore:re,ownerDocument:Z}=t.internalEngine(),ne=!!t.internalEngine().options.watchDrag,ce=fY(t,e.rootNode);re.add(Z,"visibilitychange",_),ne&&t.on("pointerDown",S),ne&&!e.stopOnInteraction&&t.on("pointerUp",R),e.stopOnMouseEnter&&re.add(ce,"mouseenter",B),e.stopOnMouseEnter&&!e.stopOnInteraction&&re.add(ce,"mouseleave",I),e.stopOnFocusIn&&t.on("slideFocusStart",w),e.stopOnFocusIn&&!e.stopOnInteraction&&re.add(t.containerNode(),"focusout",v),e.playOnInit&&v()}function d(){t.off("pointerDown",S).off("pointerUp",R).off("slideFocusStart",w),w(),r=!0,a=!1}function m(){const{ownerWindow:Y}=t.internalEngine();Y.clearTimeout(o),o=Y.setTimeout(F,i[t.selectedScrollSnap()]),s=new Date().getTime(),t.emit("autoplay:timerset")}function g(){const{ownerWindow:Y}=t.internalEngine();Y.clearTimeout(o),o=0,s=null,t.emit("autoplay:timerstopped")}function v(){if(!r){if(A()){c=!0;return}a||t.emit("autoplay:play"),m(),a=!0}}function w(){r||(a&&t.emit("autoplay:stop"),g(),a=!1)}function _(){if(A())return c=a,w();c&&v()}function A(){const{ownerDocument:Y}=t.internalEngine();return Y.visibilityState==="hidden"}function S(){l||w()}function R(){l||v()}function B(){l=!0,w()}function I(){l=!1,v()}function N(Y){typeof Y<"u"&&(u=Y),v()}function U(){a&&w()}function O(){a&&v()}function P(){return a}function F(){const{index:Y}=t.internalEngine(),ee=Y.clone().add(1).get(),$=t.scrollSnapList().length-1,oe=e.stopOnLastSnap&&ee===$;if(t.canScrollNext()?t.scrollNext(u):t.scrollTo(0,u),t.emit("autoplay:select"),oe)return w();v()}function K(){if(!s)return null;const Y=i[t.selectedScrollSnap()],ee=new Date().getTime()-s;return Y-ee}return{name:"autoplay",options:n,init:h,destroy:d,play:N,stop:U,reset:O,isPlaying:P,timeUntilNext:K}}tR.globalOptions=void 0;/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OO=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=L.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>L.createElement("svg",{ref:l,...pY,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:OO("lucide",i),...a},[...o.map(([c,u])=>L.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=(n,e)=>{const t=L.forwardRef(({className:r,...i},s)=>L.createElement(mY,{ref:s,iconNode:e,className:OO(`lucide-${dY(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],UO=os("ArrowLeft",gY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xY=os("ArrowRight",yY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],_Y=os("Book",vY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],bY=os("Crown",wY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],SY=os("Gamepad",AY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],TY=os("Gift",CY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],MY=os("Hand",EY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],PY=os("House",RY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],zO=os("Loader",kY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],IY=os("Map",BY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],DY=os("MessageCircle",LY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],NY=os("Mic",FY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],UY=os("Play",OY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],HY=os("Plus",zY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],GY=os("Send",jY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],WY=os("Star",VY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],fI=os("Trophy",$Y);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],dI=os("User",XY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],YY=os("Volume2",qY);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HO=os("X",KY);function jO(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=jO(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function GO(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=jO(n))&&(r&&(r+=" "),r+=e);return r}const nR="-",JY=n=>{const e=QY(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(nR);return a[0]===""&&a.length!==1&&a.shift(),VO(a,e)||ZY(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},VO=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?VO(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(nR);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},pI=/^\[(.+)\]$/,ZY=n=>{if(pI.test(n)){const e=pI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},QY=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return tK(Object.entries(n.classGroups),t).forEach(([s,o])=>{zE(o,r,s,e)}),r},zE=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:mI(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(eK(i)){zE(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{zE(o,mI(e,s),t,r)})})},mI=(n,e)=>{let t=n;return e.split(nR).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},eK=n=>n.isThemeGetter,tK=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,nK=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},WO="!",rK=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let _=a[w];if(c===0){if(_===i&&(r||a.slice(w,w+s)===e)){l.push(a.slice(u,w)),u=w+s;continue}if(_==="/"){h=w;continue}}_==="["?c++:_==="]"&&c--}const d=l.length===0?a:a.substring(u),m=d.startsWith(WO),g=m?d.substring(1):d,v=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:o}):o},iK=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},sK=n=>({cache:nK(n.cacheSize),parseClassName:rK(n),...JY(n)}),oK=/\s+/,aK=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(oK);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:m}=t(c);let g=!!m,v=r(g?d.substring(0,m):d);if(!v){if(!g){a=c+(a.length>0?" "+a:a);continue}if(v=r(d),!v){a=c+(a.length>0?" "+a:a);continue}g=!1}const w=iK(u).join(":"),_=h?w+WO:w,A=_+v;if(s.includes(A))continue;s.push(A);const S=i(v,g);for(let R=0;R<S.length;++R){const B=S[R];s.push(_+B)}a=c+(a.length>0?" "+a:a)}return a};function lK(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=$O(e))&&(r&&(r+=" "),r+=t);return r}const $O=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=$O(n[r]))&&(t&&(t+=" "),t+=e);return t};function cK(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),n());return t=sK(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=aK(l,t);return i(l,u),u}return function(){return s(lK.apply(null,arguments))}}const li=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},XO=/^\[(?:([a-z-]+):)?(.+)\]$/i,uK=/^\d+\/\d+$/,hK=new Set(["px","full","screen"]),fK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bu=n=>tg(n)||hK.has(n)||uK.test(n),Lh=n=>qg(n,"length",SK),tg=n=>!!n&&!Number.isNaN(Number(n)),_C=n=>qg(n,"number",tg),t0=n=>!!n&&Number.isInteger(Number(n)),yK=n=>n.endsWith("%")&&tg(n.slice(0,-1)),or=n=>XO.test(n),Dh=n=>fK.test(n),xK=new Set(["length","size","percentage"]),vK=n=>qg(n,xK,qO),_K=n=>qg(n,"position",qO),wK=new Set(["image","url"]),bK=n=>qg(n,wK,TK),AK=n=>qg(n,"",CK),n0=()=>!0,qg=(n,e,t)=>{const r=XO.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},SK=n=>dK.test(n)&&!pK.test(n),qO=()=>!1,CK=n=>mK.test(n),TK=n=>gK.test(n),EK=()=>{const n=li("colors"),e=li("spacing"),t=li("blur"),r=li("brightness"),i=li("borderColor"),s=li("borderRadius"),o=li("borderSpacing"),a=li("borderWidth"),l=li("contrast"),c=li("grayscale"),u=li("hueRotate"),h=li("invert"),d=li("gap"),m=li("gradientColorStops"),g=li("gradientColorStopPositions"),v=li("inset"),w=li("margin"),_=li("opacity"),A=li("padding"),S=li("saturate"),R=li("scale"),B=li("sepia"),I=li("skew"),N=li("space"),U=li("translate"),O=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",or,e],K=()=>[or,e],Q=()=>["",bu,Lh],Y=()=>["auto",tg,or],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",or],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[tg,or];return{cacheSize:500,separator:":",theme:{colors:[n0],spacing:[bu,Lh],blur:["none","",Dh,or],brightness:Z(),borderColor:[n],borderRadius:["none","","full",Dh,or],borderSpacing:K(),borderWidth:Q(),contrast:Z(),grayscale:te(),hueRotate:Z(),invert:te(),gap:K(),gradientColorStops:[n],gradientColorStopPositions:[yK,Lh],inset:F(),margin:F(),opacity:Z(),padding:K(),saturate:Z(),scale:Z(),sepia:te(),skew:Z(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",or]}],container:["container"],columns:[{columns:[Dh]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),or]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",t0,or]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",or]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",t0,or]}],"grid-cols":[{"grid-cols":[n0]}],"col-start-end":[{col:["auto",{span:["full",t0,or]},or]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[n0]}],"row-start-end":[{row:["auto",{span:[t0,or]},or]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",or]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",or]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",or,e]}],"min-w":[{"min-w":[or,e,"min","max","fit"]}],"max-w":[{"max-w":[or,e,"none","full","min","max","fit","prose",{screen:[Dh]},Dh]}],h:[{h:[or,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[or,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[or,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[or,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Dh,Lh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_C]}],"font-family":[{font:[n0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",or]}],"line-clamp":[{"line-clamp":["none",tg,_C]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bu,or]}],"list-image":[{"list-image":["none",or]}],"list-style-type":[{list:["none","disc","decimal",or]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bu,Lh]}],"underline-offset":[{"underline-offset":["auto",bu,or]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",or]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",or]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),_K]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bK]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:$()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[bu,or]}],"outline-w":[{outline:[bu,Lh]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[bu,Lh]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Dh,AK]}],"shadow-color":[{shadow:[n0]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Dh,or]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[B]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",or]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",or]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",or]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[t0,or]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",or]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",or]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",or]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[bu,Lh,_C]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},MK=cK(EK);function Mi(...n){return MK(GO(n))}const YO=L.createContext(null);function fA(){const n=L.useContext(YO);if(!n)throw new Error("useCarousel must be used within a <Carousel />");return n}const KO=L.forwardRef(({orientation:n="horizontal",opts:e,setApi:t,plugins:r,className:i,children:s,...o},a)=>{const[l,c]=eR({...e,axis:n==="horizontal"?"x":"y"},r),[u,h]=L.useState(!1),[d,m]=L.useState(!1),g=L.useCallback(_=>{_&&(h(_.canScrollPrev()),m(_.canScrollNext()))},[]),v=L.useCallback(()=>{c==null||c.scrollPrev()},[c]),w=L.useCallback(()=>{c==null||c.scrollNext()},[c]);return L.useEffect(()=>{!c||!t||t(c)},[c,t]),L.useEffect(()=>{if(c)return g(c),c.on("select",g),c.on("reInit",g),()=>{c.off("select",g),c.off("reInit",g)}},[c,g]),C.jsx(YO.Provider,{value:{carouselRef:l,api:c,opts:e,orientation:n||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:v,scrollNext:w,canScrollPrev:u,canScrollNext:d},children:C.jsx("div",{ref:a,className:Mi("relative",i),role:"region","aria-roledescription":"carousel",...o,children:s})})}),JO=L.forwardRef(({className:n,...e},t)=>{const{carouselRef:r,orientation:i}=fA();return C.jsx("div",{ref:r,className:"overflow-hidden",children:C.jsx("div",{ref:t,className:Mi("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",n),...e})})}),ZO=L.forwardRef(({className:n,...e},t)=>{const{orientation:r}=fA();return C.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:Mi("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",n),...e})}),QO=L.forwardRef(({className:n,...e},t)=>{const{orientation:r,scrollPrev:i,canScrollPrev:s}=fA();return C.jsxs("button",{ref:t,className:Mi("absolute h-8 w-8 rounded-full",r==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!s,onClick:i,...e,children:[C.jsx(UO,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Previous slide"})]})}),e4=L.forwardRef(({className:n,...e},t)=>{const{orientation:r,scrollNext:i,canScrollNext:s}=fA();return C.jsxs("button",{ref:t,className:Mi("absolute h-8 w-8 rounded-full",r==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!s,onClick:i,...e,children:[C.jsx(xY,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Next slide"})]})});KO.displayName="Carousel";JO.displayName="CarouselContent";ZO.displayName="CarouselItem";QO.displayName="CarouselPrevious";e4.displayName="CarouselNext";const dA=L.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Mi("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));dA.displayName="Card";const t4=L.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Mi("flex flex-col space-y-1.5 p-6",n),...e}));t4.displayName="CardHeader";const n4=L.forwardRef(({className:n,...e},t)=>C.jsx("h3",{ref:t,className:Mi("text-2xl font-semibold leading-none tracking-tight",n),...e}));n4.displayName="CardTitle";const RK=L.forwardRef(({className:n,...e},t)=>C.jsx("p",{ref:t,className:Mi("text-sm text-muted-foreground",n),...e}));RK.displayName="CardDescription";const rR=L.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Mi("p-6 pt-0",n),...e}));rR.displayName="CardContent";const r4=L.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Mi("flex items-center p-6 pt-0",n),...e}));r4.displayName="CardFooter";const PK=[{name:"Shweta Jadhav",feedback:"This platform is amazing! It has helped me learn so much."},{name:"Shital Bhandare",feedback:"The interactive games make learning so fun and easy!"},{name:"Snehal Kamlapur",feedback:"I love the teaching style. It keeps me engaged throughout."},{name:"I Priyadarshani",feedback:"A wonderful learning experience for kids."}],kK=[{name:"Vedant Purkar",role:"Founder & CEO",image:"/images/team/IMG_8468.jpeg",description:"Leading innovation in digital education"},{name:"Sanchita Rajurkar",role:"Head of Technology",image:"/images/team/IMG_8466.jpeg",description:"Expert in educational technology"},{name:"Snehal Sanap",role:"Content Director",image:"/images/team/IMG_8471.jpeg",description:"Crafting engaging learning experiences"},{name:"Piyush Sanap",role:"Creative Lead",image:"/images/team/IMG_8477.jpeg",description:"Designing interactive learning solutions"}],BK=()=>{const n=Hl.useRef(tR({delay:4e3,stopOnInteraction:!0}));return C.jsx("div",{className:"bg-white",children:C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative left-[calc(50%+11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[-30deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-30 sm:left-[calc(50%+30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsxs("div",{className:"mx-auto max-w-2xl py-12 sm:py-16 lg:py-20",children:[C.jsx("div",{className:"hidden sm:mb-6 sm:flex sm:justify-center",children:C.jsxs("div",{className:"relative rounded-full px-3 py-1 text-sm text-gray-600 ring-1 ring-gray-900/10 hover:ring-gray-900/20",children:["Explore the World of INDIC"," ",C.jsxs(ti,{to:"#",className:"font-semibold text-indigo-600",children:[C.jsx("span",{className:"absolute inset-0","aria-hidden":"true"}),"Learn More ",C.jsx("span",{"aria-hidden":"true",children:"→"})]})]})}),C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-5xl font-semibold tracking-tight text-gray-900 sm:text-7xl",children:"Immersive Digital Experiences"}),C.jsx("p",{className:"mt-6 text-lg font-medium text-gray-500 sm:text-xl",children:"Dive into a world of interactive games, captivating stories, innovative learning, and augmented reality adventures."}),C.jsxs("div",{className:"mt-8 flex items-center justify-center gap-x-6",children:[C.jsx(ti,{to:"/home",className:"rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500",children:"Start Exploring"}),C.jsxs(ti,{to:"/login",className:"text-sm font-semibold text-gray-900",children:["Log in ",C.jsx("span",{"aria-hidden":"true",children:"→"})]})]})]})]}),C.jsxs("div",{className:"mx-auto max-w-6xl px-4 -mt-4",children:[C.jsx("h3",{className:"text-2xl font-semibold text-center mb-8",children:"What Our Users Say"}),C.jsxs(KO,{opts:{align:"start",loop:!0},plugins:[n.current],className:"w-full max-w-5xl mx-auto",children:[C.jsx(JO,{children:PK.map((e,t)=>C.jsx(ZO,{className:"md:basis-1/3",children:C.jsx(dA,{className:"bg-white shadow-lg",children:C.jsxs(rR,{className:"flex flex-col items-center justify-center min-h-[200px] p-6",children:[C.jsxs("p",{className:"text-gray-600 text-center mb-4 text-lg italic",children:['"',e.feedback,'"']}),C.jsxs("h3",{className:"font-bold text-lg text-indigo-600",children:["- ",e.name]})]})})},t))}),C.jsx(QO,{}),C.jsx(e4,{})]})]}),C.jsxs("div",{className:"mx-auto max-w-6xl px-4 mt-16",children:[C.jsx("h3",{className:"text-3xl font-semibold text-center mb-8",children:"Meet Our Team"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:kK.map((e,t)=>C.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300 hover:scale-105",children:[C.jsx("div",{className:"relative pb-[100%]",children:C.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"})}),C.jsxs("div",{className:"p-4",children:[C.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),C.jsx("p",{className:"text-indigo-600 font-medium text-sm mb-2",children:e.role}),C.jsx("p",{className:"text-gray-600 text-sm",children:e.description})]})]},t))})]}),C.jsxs("div",{className:"relative mt-16",children:[C.jsx("div",{className:"absolute inset-0 overflow-hidden",children:C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-100 to-indigo-50 opacity-95"})}),C.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 py-8",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs("div",{className:"md:col-span-1",children:[C.jsx("h4",{className:"text-lg font-semibold mb-3 text-indigo-900",children:"Quick Feedback"}),C.jsxs("form",{className:"space-y-3",children:[C.jsx("div",{children:C.jsx("textarea",{id:"feedback",rows:"3",className:"w-full px-3 py-2 text-indigo-900 bg-white/80 rounded-md border border-indigo-200 focus:ring-1 focus:ring-indigo-400 focus:outline-none text-sm",placeholder:"Share your thoughts..."})}),C.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 px-4 py-1.5 rounded text-sm font-medium text-white transition-colors",children:"Send"})]})]}),C.jsxs("div",{className:"md:col-span-1",children:[C.jsx("h4",{className:"text-lg font-semibold mb-3 text-indigo-900",children:"Links"}),C.jsxs("ul",{className:"space-y-1.5 text-sm text-indigo-800",children:[C.jsx("li",{children:C.jsx(ti,{to:"#",className:"hover:text-indigo-600 transition-colors",children:"About Us"})}),C.jsx("li",{children:C.jsx(ti,{to:"#",className:"hover:text-indigo-600 transition-colors",children:"Our Games"})}),C.jsx("li",{children:C.jsx(ti,{to:"#",className:"hover:text-indigo-600 transition-colors",children:"Stories"})}),C.jsx("li",{children:C.jsx(ti,{to:"#",className:"hover:text-indigo-600 transition-colors",children:"Contact"})})]})]}),C.jsxs("div",{className:"md:col-span-1",children:[C.jsx("h4",{className:"text-lg font-semibold mb-3 text-indigo-900",children:"Contact"}),C.jsxs("div",{className:"space-y-1.5 text-sm text-indigo-800",children:[C.jsx("p",{children:"Email: contact@indic.com"}),C.jsx("p",{children:"Phone: (555) 123-4567"}),C.jsxs("p",{children:["123 Learning Street",C.jsx("br",{}),"Education City, ED 12345"]})]})]})]}),C.jsx("div",{className:"border-t border-indigo-200 mt-6 pt-6 text-center text-xs text-indigo-700",children:C.jsx("p",{children:"© 2025 INDIC. All rights reserved."})})]})]})]})})};var wC={exports:{}},bC,gI;function IK(){if(gI)return bC;gI=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bC=n,bC}var AC,yI;function LK(){if(yI)return AC;yI=1;var n=IK();function e(){}function t(){}return t.resetWarningCache=e,AC=function(){function r(o,a,l,c,u,h){if(h!==n){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},AC}var xI;function DK(){return xI||(xI=1,wC.exports=LK()()),wC.exports}var FK=DK();const Ar=jg(FK);function Zr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function NK(n,e){const t=L.createContext(e),r=s=>{const{children:o,...a}=s,l=L.useMemo(()=>a,Object.values(a));return C.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function i(s){const o=L.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function cv(n,e=[]){let t=[];function r(s,o){const a=L.createContext(o),l=t.length;t=[...t,o];const c=h=>{var _;const{scope:d,children:m,...g}=h,v=((_=d==null?void 0:d[n])==null?void 0:_[l])||a,w=L.useMemo(()=>g,Object.values(g));return C.jsx(v.Provider,{value:w,children:m})};c.displayName=s+"Provider";function u(h,d){var v;const m=((v=d==null?void 0:d[n])==null?void 0:v[l])||a,g=L.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,OK(i,...e)]}function OK(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function vI(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function i4(...n){return e=>{let t=!1;const r=n.map(i=>{const s=vI(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():vI(n[i],null)}}}}function rl(...n){return L.useCallback(i4(...n),n)}var xg=L.forwardRef((n,e)=>{const{children:t,...r}=n,i=L.Children.toArray(t),s=i.find(zK);if(s){const o=s.props.children,a=i.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return C.jsx(HE,{...r,ref:e,children:L.isValidElement(o)?L.cloneElement(o,void 0,a):null})}return C.jsx(HE,{...r,ref:e,children:t})});xg.displayName="Slot";var HE=L.forwardRef((n,e)=>{const{children:t,...r}=n;if(L.isValidElement(t)){const i=jK(t);return L.cloneElement(t,{...HK(r,t.props),ref:e?i4(e,i):i})}return L.Children.count(t)>1?L.Children.only(null):null});HE.displayName="SlotClone";var UK=({children:n})=>C.jsx(C.Fragment,{children:n});function zK(n){return L.isValidElement(n)&&n.type===UK}function HK(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function jK(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function s4(n){const e=n+"CollectionProvider",[t,r]=cv(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:v}=m,w=Hl.useRef(null),_=Hl.useRef(new Map).current;return C.jsx(i,{scope:g,itemMap:_,collectionRef:w,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=Hl.forwardRef((m,g)=>{const{scope:v,children:w}=m,_=s(a,v),A=rl(g,_.collectionRef);return C.jsx(xg,{ref:A,children:w})});l.displayName=a;const c=n+"CollectionItemSlot",u="data-radix-collection-item",h=Hl.forwardRef((m,g)=>{const{scope:v,children:w,..._}=m,A=Hl.useRef(null),S=rl(g,A),R=s(c,v);return Hl.useEffect(()=>(R.itemMap.set(A,{ref:A,..._}),()=>void R.itemMap.delete(A))),C.jsx(xg,{[u]:"",ref:S,children:w})});h.displayName=c;function d(m){const g=s(n+"CollectionConsumer",m);return Hl.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((R,B)=>_.indexOf(R.ref.current)-_.indexOf(B.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},d,r]}var Ax=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},GK=C$.useId||(()=>{}),VK=0;function X0(n){const[e,t]=L.useState(GK());return Ax(()=>{n||t(r=>r??String(VK++))},[n]),n||(e?`radix-${e}`:"")}var WK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ri=WK.reduce((n,e)=>{const t=L.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?xg:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(a,{...o,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function o4(n,e){n&&Y2.flushSync(()=>n.dispatchEvent(e))}function il(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),L.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function pA({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=$K({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=il(t),l=L.useCallback(c=>{if(s){const h=typeof c=="function"?c(n):c;h!==n&&a(h)}else i(c)},[s,n,i,a]);return[o,l]}function $K({defaultProp:n,onChange:e}){const t=L.useState(n),[r]=t,i=L.useRef(r),s=il(e);return L.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var XK=L.createContext(void 0);function a4(n){const e=L.useContext(XK);return n||e||"ltr"}var SC="rovingFocusGroup.onEntryFocus",qK={bubbles:!1,cancelable:!0},mA="RovingFocusGroup",[jE,l4,YK]=s4(mA),[KK,c4]=cv(mA,[YK]),[JK,ZK]=KK(mA),u4=L.forwardRef((n,e)=>C.jsx(jE.Provider,{scope:n.__scopeRovingFocusGroup,children:C.jsx(jE.Slot,{scope:n.__scopeRovingFocusGroup,children:C.jsx(QK,{...n,ref:e})})}));u4.displayName=mA;var QK=L.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=n,d=L.useRef(null),m=rl(e,d),g=a4(s),[v=null,w]=pA({prop:o,defaultProp:a,onChange:l}),[_,A]=L.useState(!1),S=il(c),R=l4(t),B=L.useRef(!1),[I,N]=L.useState(0);return L.useEffect(()=>{const U=d.current;if(U)return U.addEventListener(SC,S),()=>U.removeEventListener(SC,S)},[S]),C.jsx(JK,{scope:t,orientation:r,dir:g,loop:i,currentTabStopId:v,onItemFocus:L.useCallback(U=>w(U),[w]),onItemShiftTab:L.useCallback(()=>A(!0),[]),onFocusableItemAdd:L.useCallback(()=>N(U=>U+1),[]),onFocusableItemRemove:L.useCallback(()=>N(U=>U-1),[]),children:C.jsx(Ri.div,{tabIndex:_||I===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...n.style},onMouseDown:Zr(n.onMouseDown,()=>{B.current=!0}),onFocus:Zr(n.onFocus,U=>{const O=!B.current;if(U.target===U.currentTarget&&O&&!_){const P=new CustomEvent(SC,qK);if(U.currentTarget.dispatchEvent(P),!P.defaultPrevented){const F=R().filter($=>$.focusable),K=F.find($=>$.active),Q=F.find($=>$.id===v),ee=[K,Q,...F].filter(Boolean).map($=>$.ref.current);d4(ee,u)}}B.current=!1}),onBlur:Zr(n.onBlur,()=>A(!1))})})}),h4="RovingFocusGroupItem",f4=L.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...o}=n,a=X0(),l=s||a,c=ZK(h4,t),u=c.currentTabStopId===l,h=l4(t),{onFocusableItemAdd:d,onFocusableItemRemove:m}=c;return L.useEffect(()=>{if(r)return d(),()=>m()},[r,d,m]),C.jsx(jE.ItemSlot,{scope:t,id:l,focusable:r,active:i,children:C.jsx(Ri.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Zr(n.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:Zr(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:Zr(n.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=nJ(g,c.orientation,c.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=h().filter(A=>A.focusable).map(A=>A.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const A=_.indexOf(g.currentTarget);_=c.loop?rJ(_,A+1):_.slice(A+1)}setTimeout(()=>d4(_))}})})})});f4.displayName=h4;var eJ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tJ(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function nJ(n,e,t){const r=tJ(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return eJ[r]}function d4(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function rJ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var iJ=u4,sJ=f4;function oJ(n,e){return L.useReducer((t,r)=>e[t][r]??t,n)}var Yg=n=>{const{present:e,children:t}=n,r=aJ(e),i=typeof t=="function"?t({present:r.isPresent}):L.Children.only(t),s=rl(r.ref,lJ(i));return typeof t=="function"||r.isPresent?L.cloneElement(i,{ref:s}):null};Yg.displayName="Presence";function aJ(n){const[e,t]=L.useState(),r=L.useRef({}),i=L.useRef(n),s=L.useRef("none"),o=n?"mounted":"unmounted",[a,l]=oJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=P1(r.current);s.current=a==="mounted"?c:"none"},[a]),Ax(()=>{const c=r.current,u=i.current;if(u!==n){const d=s.current,m=P1(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Ax(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=m=>{const v=P1(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},d=m=>{m.target===e&&(s.current=P1(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function P1(n){return(n==null?void 0:n.animationName)||"none"}function lJ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var iR="Tabs",[cJ,n2e]=cv(iR,[c4]),p4=c4(),[uJ,sR]=cJ(iR),m4=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=a4(a),[h,d]=pA({prop:r,onChange:i,defaultProp:s});return C.jsx(uJ,{scope:t,baseId:X0(),value:h,onValueChange:d,orientation:o,dir:u,activationMode:l,children:C.jsx(Ri.div,{dir:u,"data-orientation":o,...c,ref:e})})});m4.displayName=iR;var g4="TabsList",y4=L.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=sR(g4,t),o=p4(t);return C.jsx(iJ,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:C.jsx(Ri.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});y4.displayName=g4;var x4="TabsTrigger",v4=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=sR(x4,t),a=p4(t),l=b4(o.baseId,r),c=A4(o.baseId,r),u=r===o.value;return C.jsx(sJ,{asChild:!0,...a,focusable:!i,active:u,children:C.jsx(Ri.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:Zr(n.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Zr(n.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Zr(n.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});v4.displayName=x4;var _4="TabsContent",w4=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=sR(_4,t),l=b4(a.baseId,r),c=A4(a.baseId,r),u=r===a.value,h=L.useRef(u);return L.useEffect(()=>{const d=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(d)},[]),C.jsx(Yg,{present:i||u,children:({present:d})=>C.jsx(Ri.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:h.current?"0s":void 0},children:d&&s})})});w4.displayName=_4;function b4(n,e){return`${n}-trigger-${e}`}function A4(n,e){return`${n}-content-${e}`}var hJ=m4,S4=y4,C4=v4,T4=w4;const oR=hJ,gA=L.forwardRef(({className:n,...e},t)=>C.jsx(S4,{ref:t,className:Mi("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));gA.displayName=S4.displayName;const sp=L.forwardRef(({className:n,...e},t)=>C.jsx(C4,{ref:t,className:Mi("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));sp.displayName=C4.displayName;const op=L.forwardRef(({className:n,...e},t)=>C.jsx(T4,{ref:t,className:Mi("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));op.displayName=T4.displayName;const _I=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,wI=GO,aR=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return wI(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],h=s==null?void 0:s[c];if(u===null)return null;const d=_I(u)||_I(h);return i[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:d,...m}=u;return Object.entries(m).every(g=>{let[v,w]=g;return Array.isArray(w)?w.includes({...s,...a}[v]):{...s,...a}[v]===w})?[...c,h,d]:c},[]);return wI(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},fJ=aR("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ap=L.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?xg:"button";return C.jsx(o,{className:Mi(fJ({variant:e,size:t,className:n})),ref:s,...i})});ap.displayName="Button";const Ec=L.forwardRef(({className:n,type:e,...t},r)=>C.jsx("input",{type:e,className:Mi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));Ec.displayName="Input";var dJ="Label",E4=L.forwardRef((n,e)=>C.jsx(Ri.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));E4.displayName=dJ;var M4=E4;const pJ=aR("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ja=L.forwardRef(({className:n,...e},t)=>C.jsx(M4,{ref:t,className:Mi(pJ(),n),...e}));Ja.displayName=M4.displayName;function mJ(n,e=globalThis==null?void 0:globalThis.document){const t=il(n);L.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var gJ="DismissableLayer",GE="dismissableLayer.update",yJ="dismissableLayer.pointerDownOutside",xJ="dismissableLayer.focusOutside",bI,R4=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lR=L.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=L.useContext(R4),[u,h]=L.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=L.useState({}),g=rl(e,N=>h(N)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(w),A=u?v.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=A>=_,B=_J(N=>{const U=N.target,O=[...c.branches].some(P=>P.contains(U));!R||O||(i==null||i(N),o==null||o(N),N.defaultPrevented||a==null||a())},d),I=wJ(N=>{const U=N.target;[...c.branches].some(P=>P.contains(U))||(s==null||s(N),o==null||o(N),N.defaultPrevented||a==null||a())},d);return mJ(N=>{A===c.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&a&&(N.preventDefault(),a()))},d),L.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(bI=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),AI(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=bI)}},[u,d,t,c]),L.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),AI())},[u,c]),L.useEffect(()=>{const N=()=>m({});return document.addEventListener(GE,N),()=>document.removeEventListener(GE,N)},[]),C.jsx(Ri.div,{...l,ref:g,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:Zr(n.onFocusCapture,I.onFocusCapture),onBlurCapture:Zr(n.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Zr(n.onPointerDownCapture,B.onPointerDownCapture)})});lR.displayName=gJ;var vJ="DismissableLayerBranch",P4=L.forwardRef((n,e)=>{const t=L.useContext(R4),r=L.useRef(null),i=rl(e,r);return L.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),C.jsx(Ri.div,{...n,ref:i})});P4.displayName=vJ;function _J(n,e=globalThis==null?void 0:globalThis.document){const t=il(n),r=L.useRef(!1),i=L.useRef(()=>{});return L.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){k4(yJ,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function wJ(n,e=globalThis==null?void 0:globalThis.document){const t=il(n),r=L.useRef(!1);return L.useEffect(()=>{const i=s=>{s.target&&!r.current&&k4(xJ,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function AI(){const n=new CustomEvent(GE);document.dispatchEvent(n)}function k4(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?o4(i,s):i.dispatchEvent(s)}var bJ=lR,AJ=P4,SJ="Portal",cR=L.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=L.useState(!1);Ax(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Rq.createPortal(C.jsx(Ri.div,{...r,ref:e}),o):null});cR.displayName=SJ;var CJ="VisuallyHidden",uR=L.forwardRef((n,e)=>C.jsx(Ri.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));uR.displayName=CJ;var hR="ToastProvider",[fR,TJ,EJ]=s4("Toast"),[B4,r2e]=cv("Toast",[EJ]),[MJ,yA]=B4(hR),I4=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=L.useState(null),[c,u]=L.useState(0),h=L.useRef(!1),d=L.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${hR}\`. Expected non-empty \`string\`.`),C.jsx(fR.Provider,{scope:e,children:C.jsx(MJ,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:L.useCallback(()=>u(m=>m+1),[]),onToastRemove:L.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:d,children:o})})};I4.displayName=hR;var L4="ToastViewport",RJ=["F8"],VE="toast.viewportPause",WE="toast.viewportResume",D4=L.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=RJ,label:i="Notifications ({hotkey})",...s}=n,o=yA(L4,t),a=TJ(t),l=L.useRef(null),c=L.useRef(null),u=L.useRef(null),h=L.useRef(null),d=rl(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;L.useEffect(()=>{const w=_=>{var S;r.length!==0&&r.every(R=>_[R]||_.code===R)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),L.useEffect(()=>{const w=l.current,_=h.current;if(g&&w&&_){const A=()=>{if(!o.isClosePausedRef.current){const I=new CustomEvent(VE);_.dispatchEvent(I),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const I=new CustomEvent(WE);_.dispatchEvent(I),o.isClosePausedRef.current=!1}},R=I=>{!w.contains(I.relatedTarget)&&S()},B=()=>{w.contains(document.activeElement)||S()};return w.addEventListener("focusin",A),w.addEventListener("focusout",R),w.addEventListener("pointermove",A),w.addEventListener("pointerleave",B),window.addEventListener("blur",A),window.addEventListener("focus",S),()=>{w.removeEventListener("focusin",A),w.removeEventListener("focusout",R),w.removeEventListener("pointermove",A),w.removeEventListener("pointerleave",B),window.removeEventListener("blur",A),window.removeEventListener("focus",S)}}},[g,o.isClosePausedRef]);const v=L.useCallback(({tabbingDirection:w})=>{const A=a().map(S=>{const R=S.ref.current,B=[R,...GJ(R)];return w==="forwards"?B:B.reverse()});return(w==="forwards"?A.reverse():A).flat()},[a]);return L.useEffect(()=>{const w=h.current;if(w){const _=A=>{var B,I,N;const S=A.altKey||A.ctrlKey||A.metaKey;if(A.key==="Tab"&&!S){const U=document.activeElement,O=A.shiftKey;if(A.target===w&&O){(B=c.current)==null||B.focus();return}const K=v({tabbingDirection:O?"backwards":"forwards"}),Q=K.findIndex(Y=>Y===U);CC(K.slice(Q+1))?A.preventDefault():O?(I=c.current)==null||I.focus():(N=u.current)==null||N.focus()}};return w.addEventListener("keydown",_),()=>w.removeEventListener("keydown",_)}},[a,v]),C.jsxs(AJ,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&C.jsx($E,{ref:c,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});CC(w)}}),C.jsx(fR.Slot,{scope:t,children:C.jsx(Ri.ol,{tabIndex:-1,...s,ref:d})}),g&&C.jsx($E,{ref:u,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});CC(w)}})]})});D4.displayName=L4;var F4="ToastFocusProxy",$E=L.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=yA(F4,t);return C.jsx(uR,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});$E.displayName=F4;var xA="Toast",PJ="toast.swipeStart",kJ="toast.swipeMove",BJ="toast.swipeCancel",IJ="toast.swipeEnd",N4=L.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a=!0,l]=pA({prop:r,defaultProp:i,onChange:s});return C.jsx(Yg,{present:t||a,children:C.jsx(FJ,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:il(n.onPause),onResume:il(n.onResume),onSwipeStart:Zr(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Zr(n.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Zr(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Zr(n.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});N4.displayName=xA;var[LJ,DJ]=B4(xA,{onClose(){}}),FJ=L.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:d,onSwipeEnd:m,...g}=n,v=yA(xA,t),[w,_]=L.useState(null),A=rl(e,Y=>_(Y)),S=L.useRef(null),R=L.useRef(null),B=i||v.duration,I=L.useRef(0),N=L.useRef(B),U=L.useRef(0),{onToastAdd:O,onToastRemove:P}=v,F=il(()=>{var ee;(w==null?void 0:w.contains(document.activeElement))&&((ee=v.viewport)==null||ee.focus()),o()}),K=L.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(U.current),I.current=new Date().getTime(),U.current=window.setTimeout(F,Y))},[F]);L.useEffect(()=>{const Y=v.viewport;if(Y){const ee=()=>{K(N.current),c==null||c()},$=()=>{const oe=new Date().getTime()-I.current;N.current=N.current-oe,window.clearTimeout(U.current),l==null||l()};return Y.addEventListener(VE,$),Y.addEventListener(WE,ee),()=>{Y.removeEventListener(VE,$),Y.removeEventListener(WE,ee)}}},[v.viewport,B,l,c,K]),L.useEffect(()=>{s&&!v.isClosePausedRef.current&&K(B)},[s,B,v.isClosePausedRef,K]),L.useEffect(()=>(O(),()=>P()),[O,P]);const Q=L.useMemo(()=>w?V4(w):null,[w]);return v.viewport?C.jsxs(C.Fragment,{children:[Q&&C.jsx(NJ,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Q}),C.jsx(LJ,{scope:t,onClose:F,children:Y2.createPortal(C.jsx(fR.ItemSlot,{scope:t,children:C.jsx(bJ,{asChild:!0,onEscapeKeyDown:Zr(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||F(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:C.jsx(Ri.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:A,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Zr(n.onKeyDown,Y=>{Y.key==="Escape"&&(a==null||a(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Zr(n.onPointerDown,Y=>{Y.button===0&&(S.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:Zr(n.onPointerMove,Y=>{if(!S.current)return;const ee=Y.clientX-S.current.x,$=Y.clientY-S.current.y,oe=!!R.current,G=["left","right"].includes(v.swipeDirection),te=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,re=G?te(0,ee):0,Z=G?0:te(0,$),ne=Y.pointerType==="touch"?10:2,ce={x:re,y:Z},ye={originalEvent:Y,delta:ce};oe?(R.current=ce,k1(kJ,h,ye,{discrete:!1})):SI(ce,v.swipeDirection,ne)?(R.current=ce,k1(PJ,u,ye,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(ee)>ne||Math.abs($)>ne)&&(S.current=null)}),onPointerUp:Zr(n.onPointerUp,Y=>{const ee=R.current,$=Y.target;if($.hasPointerCapture(Y.pointerId)&&$.releasePointerCapture(Y.pointerId),R.current=null,S.current=null,ee){const oe=Y.currentTarget,G={originalEvent:Y,delta:ee};SI(ee,v.swipeDirection,v.swipeThreshold)?k1(IJ,m,G,{discrete:!0}):k1(BJ,d,G,{discrete:!0}),oe.addEventListener("click",te=>te.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),NJ=n=>{const{__scopeToast:e,children:t,...r}=n,i=yA(xA,e),[s,o]=L.useState(!1),[a,l]=L.useState(!1);return HJ(()=>o(!0)),L.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:C.jsx(cR,{asChild:!0,children:C.jsx(uR,{...r,children:s&&C.jsxs(C.Fragment,{children:[i.label," ",t]})})})},OJ="ToastTitle",O4=L.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return C.jsx(Ri.div,{...r,ref:e})});O4.displayName=OJ;var UJ="ToastDescription",U4=L.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return C.jsx(Ri.div,{...r,ref:e})});U4.displayName=UJ;var z4="ToastAction",zJ=L.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?C.jsx(G4,{altText:t,asChild:!0,children:C.jsx(j4,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${z4}\`. Expected non-empty \`string\`.`),null)});zJ.displayName=z4;var H4="ToastClose",j4=L.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=DJ(H4,t);return C.jsx(G4,{asChild:!0,children:C.jsx(Ri.button,{type:"button",...r,ref:e,onClick:Zr(n.onClick,i.onClose)})})});j4.displayName=H4;var G4=L.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return C.jsx(Ri.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function V4(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),jJ(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...V4(r))}}),e}function k1(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?o4(i,s):i.dispatchEvent(s)}var SI=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function HJ(n=()=>{}){const e=il(n);Ax(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function jJ(n){return n.nodeType===n.ELEMENT_NODE}function GJ(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function CC(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}const W4=L.createContext();function $4(){return L.useContext(W4)}function VJ({children:n}){const[e,t]=L.useState(!1),[r,i]=L.useState({title:"",description:"",type:"success"}),s=({title:o,description:a,type:l="success"})=>{i({title:o,description:a,type:l}),t(!0)};return C.jsxs(W4.Provider,{value:{showToast:s},children:[n,C.jsxs(I4,{swipeDirection:"right",children:[C.jsxs(N4,{open:e,onOpenChange:o=>t(o),className:`bg-${r.type==="success"?"green":"red"}-500 text-white`,children:[C.jsx(O4,{children:r.title}),C.jsx(U4,{children:r.description})]}),C.jsx(D4,{})]})]})}const WJ=[{value:"Hindi",label:"Hindi"},{value:"English",label:"English"},{value:"Marathi",label:"Marathi"},{value:"Other",label:"Other"}],$J=[{value:"Hindi",label:"Hindi"},{value:"English",label:"English"},{value:"Marathi",label:"Marathi"},{value:"Other",label:"Other"}],XE=({options:n,selectedValue:e,onSelect:t,placeholder:r,isOpen:i,toggleOpen:s})=>{var o;return C.jsxs("div",{className:"relative w-full",children:[C.jsxs("button",{type:"button",className:"w-full border rounded p-2 flex justify-between items-center",onClick:s,children:[e?(o=n.find(a=>a.value===e))==null?void 0:o.label:r,C.jsx("span",{children:"▼"})]}),i&&C.jsx("div",{className:"absolute z-10 w-full border rounded mt-1 bg-white shadow-lg",children:n.map(a=>C.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex justify-between",onClick:()=>{t(a.value),s()},children:[a.label,e===a.value&&C.jsx("span",{children:"✓"})]},a.value))})]})};XE.propTypes={options:Ar.arrayOf(Ar.shape({value:Ar.string.isRequired,label:Ar.string.isRequired})).isRequired,selectedValue:Ar.string,onSelect:Ar.func.isRequired,placeholder:Ar.string.isRequired,isOpen:Ar.bool.isRequired,toggleOpen:Ar.func.isRequired};const X4=({checked:n,onChange:e,label:t})=>C.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:e,children:[C.jsx("div",{className:`w-5 h-5 border rounded ${n?"bg-blue-500 text-white":"bg-white"} flex items-center justify-center`,children:n&&"✓"}),C.jsx("label",{children:t})]});X4.propTypes={checked:Ar.bool.isRequired,onChange:Ar.func.isRequired,label:Ar.string.isRequired};const XJ=()=>{const n=al(),{showToast:e}=$4(),[t,r]=L.useState("personal"),[i,s]=L.useState(""),[o,a]=L.useState(""),[l,c]=L.useState(""),[u,h]=L.useState(""),[d,m]=L.useState(""),[g,v]=L.useState(""),[w,_]=L.useState(""),[A,S]=L.useState(!1),[R,B]=L.useState(!1),[I,N]=L.useState(!1),[U,O]=L.useState({}),P={lightestBlue:"#C5BAFF",lightBlue:"#C4D9FF"},F=()=>{const ee={};return i||(ee.fullname="Full name is required"),o||(ee.username="Username is required"),l||(ee.email="Email is required"),u?u.length<8&&(ee.password="Password must be at least 8 characters"):ee.password="Password is required",d?(isNaN(d)||d<=0)&&(ee.age="Please enter a valid age"):ee.age="Age is required",O(ee),Object.keys(ee).length===0},K=()=>{const ee={};return g||(ee.nativeLanguage="Please select your native language"),w||(ee.learningLanguage="Please select a learning language"),O(ee),Object.keys(ee).length===0},Q=()=>{F()&&r("language")},Y=async()=>{var $,oe;if(!K())return;const ee={fullname:i,username:o,email:l,password:u,age:parseInt(d),nativeLanguage:g,learningLanguage:w,speciallyAbled:A};try{const G=await kr.post("https://indic-backend.onrender.com/api/auth/signup",ee,{withCredentials:!0,headers:{"Content-Type":"application/json"}});G.status===201?(e({title:"Signup Successful",description:"Your account has been created successfully.",type:"success"}),n("/home")):(e({title:"Signup Failed",description:G.data.message||"An error occurred during signup.",type:"error"}),console.log("Signup failed: ",G.data.message))}catch(G){console.log("Error during signup: ",G),e({title:"Signup Failed",description:((oe=($=G.response)==null?void 0:$.data)==null?void 0:oe.message)||"An error occurred during signup.",type:"error"}),G.response&&G.response.data?O({form:G.response.data.message}):O({form:"An unexpected error occurred"})}};return C.jsx("div",{className:"bg-white min-h-screen flex items-center justify-center",children:C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative right-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] translate-x-1/2 rotate-[-30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:right-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(25.9% 44.1%, 0% 61.6%, 2.5% 26.9%, 14.5% 0.1%, 19.3% 2%, 27.5% 32.5%, 39.8% 62.4%, 47.6% 68.1%, 52.5% 58.3%, 54.8% 34.5%, 72.5% 76.7%, 99.9% 64.9%, 82.1% 100%, 72.4% 76.8%, 23.9% 97.7%, 25.9% 44.1%)"}})]}),C.jsx("div",{className:"flex justify-center items-center",children:C.jsxs(oR,{value:t,onValueChange:r,className:"w-[400px] bg-white p-6 rounded-xl shadow-md",children:[C.jsxs(gA,{className:"grid w-full grid-cols-2 mb-6",children:[C.jsx(sp,{value:"personal",children:"Personal Details"}),C.jsx(sp,{value:"language",children:"Language Preferences"})]}),U.form&&C.jsx("div",{className:"mb-4 text-red-500 text-center",children:U.form}),C.jsx(op,{value:"personal",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"fullname",children:"Full Name"}),C.jsx(Ec,{id:"fullname",type:"text",placeholder:"Enter your full name",value:i,onChange:ee=>s(ee.target.value)}),U.fullname&&C.jsx("small",{className:"text-red-500",children:U.fullname})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"username",children:"Username"}),C.jsx(Ec,{id:"username",type:"text",placeholder:"Choose a username",value:o,onChange:ee=>a(ee.target.value)}),U.username&&C.jsx("small",{className:"text-red-500",children:U.username})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"email",children:"Email"}),C.jsx(Ec,{id:"email",type:"email",placeholder:"Enter your email",value:l,onChange:ee=>c(ee.target.value)}),U.email&&C.jsx("small",{className:"text-red-500",children:U.email})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"password",children:"Password"}),C.jsx(Ec,{id:"password",type:"password",placeholder:"Create a password",value:u,onChange:ee=>h(ee.target.value)}),U.password&&C.jsx("small",{className:"text-red-500",children:U.password})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"age",children:"Age"}),C.jsx(Ec,{id:"age",type:"number",placeholder:"Enter your age",value:d,onChange:ee=>m(ee.target.value)}),U.age&&C.jsx("small",{className:"text-red-500",children:U.age})]}),C.jsx(ap,{className:"w-full",style:{backgroundColor:P.lightestBlue,cursor:"pointer"},onClick:Q,children:"Next"})]})}),C.jsx(op,{value:"language",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"native-language",children:"Native Language"}),C.jsx(XE,{options:WJ,selectedValue:g,onSelect:v,placeholder:"Select Native Language",isOpen:R,toggleOpen:()=>B(!R)}),U.nativeLanguage&&C.jsx("small",{className:"text-red-500",children:U.nativeLanguage})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"learning-language",children:"Learning Language"}),C.jsx(XE,{options:$J,selectedValue:w,onSelect:_,placeholder:"Select Learning Language",isOpen:I,toggleOpen:()=>N(!I)}),U.learningLanguage&&C.jsx("small",{className:"text-red-500",children:U.learningLanguage})]}),C.jsx("div",{children:C.jsx(X4,{checked:A,onChange:()=>S(!A),label:"Specially Abled"})}),C.jsx(ap,{className:"w-full",style:{backgroundColor:P.lightBlue,cursor:"pointer"},onClick:Y,children:"Sign Up"}),C.jsx("div",{className:"text-center mt-2",children:C.jsx(ti,{to:"/login",className:"text-sm text-blue-600 hover:underline",children:"Already have an account? Login"})})]})})]})})]})})},vA=L.createContext(),qJ=({children:n})=>{const[e,t]=L.useState(null);L.useEffect(()=>{(async()=>{try{const o=await kr.get("https://indic-backend.onrender.com/api/auth/verify",{withCredentials:!0});o.status===200&&t(o.data.user)}catch(o){console.error("User not authenticated",o)}})()},[]);const r=s=>{t(s)},i=()=>{t(null),kr.get("https://indic-backend.onrender.com/api/auth/logout",{withCredentials:!0})};return C.jsx(vA.Provider,{value:{user:e,login:r,logout:i},children:n})},YJ=()=>{const[n,e]=L.useState("login"),[t,r]=L.useState(""),[i,s]=L.useState(""),{login:o}=L.useContext(vA),a=al(),{showToast:l}=$4(),c={lightestBlue:"#C5BAFF",lightBlue:"#C4D9FF"},u=async h=>{var d,m;h.preventDefault();try{const g=await kr.post("https://indic-backend.onrender.com/api/auth/login",{username:t,password:i},{withCredentials:!0});if(g.status===200){const v=g.data.user;o(v),l({title:"Login Successful",description:"You have been logged in successfully.",type:"success"}),a("/home")}else l({title:"Login Failed",description:g.data.message||"An error occurred during login.",type:"error"}),console.log("Login failed: ",g.data.message)}catch(g){console.log("Error during login: ",g),l({title:"Login Failed",description:((m=(d=g.response)==null?void 0:d.data)==null?void 0:m.message)||"An error occurred during login.",type:"error"})}};return C.jsx("div",{className:"bg-white min-h-screen flex items-center justify-center",children:C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsx("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})}),C.jsx("div",{className:"flex justify-center items-center",children:C.jsxs(oR,{value:n,onValueChange:e,className:"w-[400px] bg-white p-6 rounded-xl shadow-md",children:[C.jsxs(gA,{className:"grid w-full grid-cols-2 mb-6",children:[C.jsx(sp,{value:"login",children:"Login"}),C.jsx(sp,{value:"reset",children:"Reset Password"})]}),C.jsx(op,{value:"login",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"username",children:"Username"}),C.jsx(Ec,{id:"username",type:"text",placeholder:"Enter your username",value:t,onChange:h=>r(h.target.value)})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"password",children:"Password"}),C.jsx(Ec,{id:"password",type:"password",placeholder:"Enter your password",value:i,onChange:h=>s(h.target.value)})]}),C.jsx(ap,{className:"w-full",style:{backgroundColor:c.lightestBlue,cursor:"pointer"},onClick:u,children:"Login"}),C.jsx("div",{className:"text-center",children:C.jsx(ti,{to:"/signup",className:"text-sm text-blue-600 hover:underline",children:"Don't have an account? Sign Up"})})]})}),C.jsx(op,{value:"reset",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"reset-username",children:"Username"}),C.jsx(Ec,{id:"reset-username",type:"text",placeholder:"Enter your username"})]}),C.jsxs("div",{children:[C.jsx(Ja,{htmlFor:"reset-email",children:"Email"}),C.jsx(Ec,{id:"reset-email",type:"email",placeholder:"Enter your email"})]}),C.jsx(ap,{className:"w-full",style:{backgroundColor:c.lightBlue},children:"Reset Password"})]})})]})})]})})},Jh=[{id:1,name:"Swar (स्वर)",file:"swar.json",description:"Hindi vowels"},{id:2,name:"Consonants (व्यंजन)",file:"vyanjan.json",description:"Hindi consonants"},{id:3,name:"Noun (संज्ञा)",file:"noun.json",description:"Hindi nouns"},{id:4,name:"Pronoun (सर्वनाम)",file:"pronoun.json",description:"Hindi pronouns"},{id:5,name:"Verbs (क्रिया)",file:"verbs.json",description:"Hindi verbs"},{id:6,name:"Adjective (विशेषण)",file:"adjective.json",description:"Hindi adjectives"},{id:7,name:"Sentence (वाक्य)",file:"sentence.json",description:"Hindi sentences"},{id:8,name:"Words (शब्द)",file:"words.json",description:"Different types of Hindi words"},{id:9,name:"Greetings (अभिवादन)",file:"greetings.json",description:"Hindi greetings"},{id:10,name:"Complex Sentences (जटिल)",file:"complex.json",description:"Complex Hindi phrases"}],KJ=({level:n,onSelect:e,progress:t})=>{const[r,i]=L.useState(0),[s,o]=L.useState(0);L.useEffect(()=>{(async()=>{try{const v=await fetch(`/syllabus/${n.file}`);if(v.ok){const w=await v.json();if(i(w.length),t&&t.lastLesson!==void 0){const _=Math.round(t.lastLesson/w.length*100);o(_)}}}catch(v){console.error(`❌ Error fetching lesson count for ${n.file}:`,v)}})()},[n.file,t]);const a=40,l=3,c=(a-l)/2,u=2*Math.PI*c,h=u-s/100*u,m=(g=>g<30?"#ef4444":g<60?"#f59e0b":"#22c55e")(s);return C.jsxs("div",{className:"backdrop-blur-md  bg-white/30 border border-gray-400/50 rounded-lg p-4 h-80 w-80 shadow-lg cursor-pointer hover:scale-105 transform transition-all flex flex-col justify-center items-center relative overflow-hidden",onClick:()=>e(n),children:[C.jsxs("div",{className:"absolute inset-0 -z-10 transform-gpu overflow-hidden blur-2xl","aria-hidden":"true",children:[C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[-10deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsxs("div",{className:"absolute top-4 right-4 flex items-center justify-center z-10",children:[C.jsxs("svg",{width:a,height:a,className:"transform -rotate-90",children:[C.jsx("circle",{cx:a/2,cy:a/2,r:c,strokeWidth:l,stroke:"#e2e8f0",fill:"none"}),C.jsx("circle",{cx:a/2,cy:a/2,r:c,strokeWidth:l,stroke:m,fill:"none",strokeLinecap:"round",strokeDasharray:u,strokeDashoffset:h,className:"transition-all duration-500 ease-in-out"})]}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:C.jsxs("span",{className:"text-xs font-bold text-gray-800",children:[s,"%"]})})]}),C.jsxs("div",{className:"bg-gradient-to-r from-[#9089fc]/90 to-[#ff80b5]/90 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-bold mb-2 z-10 shadow-md border border-[#ff80b5]/50",children:["Lesson ",n.id]}),C.jsx("h3",{className:"text-lg font-semibold text-gray-800 z-10",children:n.name})]})};var TC="focusScope.autoFocusOnMount",EC="focusScope.autoFocusOnUnmount",CI={bubbles:!1,cancelable:!0},JJ="FocusScope",q4=L.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=L.useState(null),c=il(i),u=il(s),h=L.useRef(null),d=rl(e,v=>l(v)),m=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(r){let v=function(S){if(m.paused||!a)return;const R=S.target;a.contains(R)?h.current=R:qh(h.current,{select:!0})},w=function(S){if(m.paused||!a)return;const R=S.relatedTarget;R!==null&&(a.contains(R)||qh(h.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const B of S)B.removedNodes.length>0&&qh(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const A=new MutationObserver(_);return a&&A.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),A.disconnect()}}},[r,a,m.paused]),L.useEffect(()=>{if(a){EI.add(m);const v=document.activeElement;if(!a.contains(v)){const _=new CustomEvent(TC,CI);a.addEventListener(TC,c),a.dispatchEvent(_),_.defaultPrevented||(ZJ(rZ(Y4(a)),{select:!0}),document.activeElement===v&&qh(a))}return()=>{a.removeEventListener(TC,c),setTimeout(()=>{const _=new CustomEvent(EC,CI);a.addEventListener(EC,u),a.dispatchEvent(_),_.defaultPrevented||qh(v??document.body,{select:!0}),a.removeEventListener(EC,u),EI.remove(m)},0)}}},[a,c,u,m]);const g=L.useCallback(v=>{if(!t&&!r||m.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(w&&_){const A=v.currentTarget,[S,R]=QJ(A);S&&R?!v.shiftKey&&_===R?(v.preventDefault(),t&&qh(S,{select:!0})):v.shiftKey&&_===S&&(v.preventDefault(),t&&qh(R,{select:!0})):_===A&&v.preventDefault()}},[t,r,m.paused]);return C.jsx(Ri.div,{tabIndex:-1,...o,ref:d,onKeyDown:g})});q4.displayName=JJ;function ZJ(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(qh(r,{select:e}),document.activeElement!==t)return}function QJ(n){const e=Y4(n),t=TI(e,n),r=TI(e.reverse(),n);return[t,r]}function Y4(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function TI(n,e){for(const t of n)if(!eZ(t,{upTo:e}))return t}function eZ(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function tZ(n){return n instanceof HTMLInputElement&&"select"in n}function qh(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&tZ(n)&&e&&n.select()}}var EI=nZ();function nZ(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=MI(n,e),n.unshift(e)},remove(e){var t;n=MI(n,e),(t=n[0])==null||t.resume()}}}function MI(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function rZ(n){return n.filter(e=>e.tagName!=="A")}var MC=0;function iZ(){L.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??RI()),document.body.insertAdjacentElement("beforeend",n[1]??RI()),MC++,()=>{MC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),MC--}},[])}function RI(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Mc=function(){return Mc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Mc.apply(this,arguments)};function K4(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sZ(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var tw="right-scroll-bar-position",nw="width-before-scroll-bar",oZ="with-scroll-bars-hidden",aZ="--removed-body-scroll-bar-size";function RC(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function lZ(n,e){var t=L.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var cZ=typeof window<"u"?L.useLayoutEffect:L.useEffect,PI=new WeakMap;function uZ(n,e){var t=lZ(null,function(r){return n.forEach(function(i){return RC(i,r)})});return cZ(function(){var r=PI.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||RC(a,null)}),s.forEach(function(a){i.has(a)||RC(a,o)})}PI.set(t,n)},[n]),t}function hZ(n){return n}function fZ(n,e){e===void 0&&(e=hZ);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function dZ(n){n===void 0&&(n={});var e=fZ(null);return e.options=Mc({async:!0,ssr:!1},n),e}var J4=function(n){var e=n.sideCar,t=K4(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return L.createElement(r,Mc({},t))};J4.isSideCarExport=!0;function pZ(n,e){return n.useMedium(e),J4}var Z4=dZ(),PC=function(){},_A=L.forwardRef(function(n,e){var t=L.useRef(null),r=L.useState({onScrollCapture:PC,onWheelCapture:PC,onTouchMoveCapture:PC}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,h=n.shards,d=n.sideCar,m=n.noIsolation,g=n.inert,v=n.allowPinchZoom,w=n.as,_=w===void 0?"div":w,A=n.gapMode,S=K4(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=d,B=uZ([t,e]),I=Mc(Mc({},S),i);return L.createElement(L.Fragment,null,u&&L.createElement(R,{sideCar:Z4,removeScrollBar:c,shards:h,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:t,gapMode:A}),o?L.cloneElement(L.Children.only(a),Mc(Mc({},I),{ref:B})):L.createElement(_,Mc({},I,{className:l,ref:B}),a))});_A.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_A.classNames={fullWidth:nw,zeroRight:tw};var mZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gZ(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=mZ();return e&&n.setAttribute("nonce",e),n}function yZ(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function xZ(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var vZ=function(){var n=0,e=null;return{add:function(t){n==0&&(e=gZ())&&(yZ(e,t),xZ(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_Z=function(){var n=vZ();return function(e,t){L.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Q4=function(){var n=_Z(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},wZ={left:0,top:0,right:0,gap:0},kC=function(n){return parseInt(n||"",10)||0},bZ=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[kC(t),kC(r),kC(i)]},AZ=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return wZ;var e=bZ(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},SZ=Q4(),ng="data-scroll-locked",CZ=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(oZ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ng,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tw,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(nw,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tw," .").concat(tw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nw," .").concat(nw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ng,`] {
    `).concat(aZ,": ").concat(a,`px;
  }
`)},kI=function(){var n=parseInt(document.body.getAttribute(ng)||"0",10);return isFinite(n)?n:0},TZ=function(){L.useEffect(function(){return document.body.setAttribute(ng,(kI()+1).toString()),function(){var n=kI()-1;n<=0?document.body.removeAttribute(ng):document.body.setAttribute(ng,n.toString())}},[])},EZ=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;TZ();var s=L.useMemo(function(){return AZ(i)},[i]);return L.createElement(SZ,{styles:CZ(s,!e,i,t?"":"!important")})},qE=!1;if(typeof window<"u")try{var B1=Object.defineProperty({},"passive",{get:function(){return qE=!0,!0}});window.addEventListener("test",B1,B1),window.removeEventListener("test",B1,B1)}catch{qE=!1}var pm=qE?{passive:!1}:!1,MZ=function(n){return n.tagName==="TEXTAREA"},eU=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!MZ(n)&&t[e]==="visible")},RZ=function(n){return eU(n,"overflowY")},PZ=function(n){return eU(n,"overflowX")},BI=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=tU(n,r);if(i){var s=nU(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},kZ=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},BZ=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},tU=function(n,e){return n==="v"?RZ(e):PZ(e)},nU=function(n,e){return n==="v"?kZ(e):BZ(e)},IZ=function(n,e){return n==="h"&&e==="rtl"?-1:1},LZ=function(n,e,t,r,i){var s=IZ(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,h=0,d=0;do{var m=nU(n,a),g=m[0],v=m[1],w=m[2],_=v-w-s*g;(g||_)&&tU(n,a)&&(h+=_,d+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(d)<1)&&(c=!0),c},I1=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},II=function(n){return[n.deltaX,n.deltaY]},LI=function(n){return n&&"current"in n?n.current:n},DZ=function(n,e){return n[0]===e[0]&&n[1]===e[1]},FZ=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},NZ=0,mm=[];function OZ(n){var e=L.useRef([]),t=L.useRef([0,0]),r=L.useRef(),i=L.useState(NZ++)[0],s=L.useState(Q4)[0],o=L.useRef(n);L.useEffect(function(){o.current=n},[n]),L.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var v=sZ([n.lockRef.current],(n.shards||[]).map(LI),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=L.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var _=I1(v),A=t.current,S="deltaX"in v?v.deltaX:A[0]-_[0],R="deltaY"in v?v.deltaY:A[1]-_[1],B,I=v.target,N=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in v&&N==="h"&&I.type==="range")return!1;var U=BI(N,I);if(!U)return!0;if(U?B=N:(B=N==="v"?"h":"v",U=BI(N,I)),!U)return!1;if(!r.current&&"changedTouches"in v&&(S||R)&&(r.current=B),!B)return!0;var O=r.current||B;return LZ(O,w,v,O==="h"?S:R)},[]),l=L.useCallback(function(v){var w=v;if(!(!mm.length||mm[mm.length-1]!==s)){var _="deltaY"in w?II(w):I1(w),A=e.current.filter(function(B){return B.name===w.type&&(B.target===w.target||w.target===B.shadowParent)&&DZ(B.delta,_)})[0];if(A&&A.should){w.cancelable&&w.preventDefault();return}if(!A){var S=(o.current.shards||[]).map(LI).filter(Boolean).filter(function(B){return B.contains(w.target)}),R=S.length>0?a(w,S[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),c=L.useCallback(function(v,w,_,A){var S={name:v,delta:w,target:_,should:A,shadowParent:UZ(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(R){return R!==S})},1)},[]),u=L.useCallback(function(v){t.current=I1(v),r.current=void 0},[]),h=L.useCallback(function(v){c(v.type,II(v),v.target,a(v,n.lockRef.current))},[]),d=L.useCallback(function(v){c(v.type,I1(v),v.target,a(v,n.lockRef.current))},[]);L.useEffect(function(){return mm.push(s),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,pm),document.addEventListener("touchmove",l,pm),document.addEventListener("touchstart",u,pm),function(){mm=mm.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,pm),document.removeEventListener("touchmove",l,pm),document.removeEventListener("touchstart",u,pm)}},[]);var m=n.removeScrollBar,g=n.inert;return L.createElement(L.Fragment,null,g?L.createElement(s,{styles:FZ(i)}):null,m?L.createElement(EZ,{gapMode:n.gapMode}):null)}function UZ(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const zZ=pZ(Z4,OZ);var rU=L.forwardRef(function(n,e){return L.createElement(_A,Mc({},n,{ref:e,sideCar:zZ}))});rU.classNames=_A.classNames;var HZ=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},gm=new WeakMap,L1=new WeakMap,D1={},BC=0,iU=function(n){return n&&(n.host||iU(n.parentNode))},jZ=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=iU(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},GZ=function(n,e,t,r){var i=jZ(e,Array.isArray(n)?n:[n]);D1[t]||(D1[t]=new WeakMap);var s=D1[t],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var m=d.getAttribute(r),g=m!==null&&m!=="false",v=(gm.get(d)||0)+1,w=(s.get(d)||0)+1;gm.set(d,v),s.set(d,w),o.push(d),v===1&&g&&L1.set(d,!0),w===1&&d.setAttribute(t,"true"),g||d.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",d,_)}})};return u(e),a.clear(),BC++,function(){o.forEach(function(h){var d=gm.get(h)-1,m=s.get(h)-1;gm.set(h,d),s.set(h,m),d||(L1.has(h)||h.removeAttribute(r),L1.delete(h)),m||h.removeAttribute(t)}),BC--,BC||(gm=new WeakMap,gm=new WeakMap,L1=new WeakMap,D1={})}},VZ=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=HZ(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),GZ(r,i,t,"aria-hidden")):function(){return null}},dR="Dialog",[sU,i2e]=cv(dR),[WZ,ec]=sU(dR),oU=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=L.useRef(null),l=L.useRef(null),[c=!1,u]=pA({prop:r,defaultProp:i,onChange:s});return C.jsx(WZ,{scope:e,triggerRef:a,contentRef:l,contentId:X0(),titleId:X0(),descriptionId:X0(),open:c,onOpenChange:u,onOpenToggle:L.useCallback(()=>u(h=>!h),[u]),modal:o,children:t})};oU.displayName=dR;var aU="DialogTrigger",lU=L.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ec(aU,t),s=rl(e,i.triggerRef);return C.jsx(Ri.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":gR(i.open),...r,ref:s,onClick:Zr(n.onClick,i.onOpenToggle)})});lU.displayName=aU;var pR="DialogPortal",[$Z,cU]=sU(pR,{forceMount:void 0}),uU=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=ec(pR,e);return C.jsx($Z,{scope:e,forceMount:t,children:L.Children.map(r,o=>C.jsx(Yg,{present:t||s.open,children:C.jsx(cR,{asChild:!0,container:i,children:o})}))})};uU.displayName=pR;var Rw="DialogOverlay",hU=L.forwardRef((n,e)=>{const t=cU(Rw,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=ec(Rw,n.__scopeDialog);return s.modal?C.jsx(Yg,{present:r||s.open,children:C.jsx(XZ,{...i,ref:e})}):null});hU.displayName=Rw;var XZ=L.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ec(Rw,t);return C.jsx(rU,{as:xg,allowPinchZoom:!0,shards:[i.contentRef],children:C.jsx(Ri.div,{"data-state":gR(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),lp="DialogContent",fU=L.forwardRef((n,e)=>{const t=cU(lp,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=ec(lp,n.__scopeDialog);return C.jsx(Yg,{present:r||s.open,children:s.modal?C.jsx(qZ,{...i,ref:e}):C.jsx(YZ,{...i,ref:e})})});fU.displayName=lp;var qZ=L.forwardRef((n,e)=>{const t=ec(lp,n.__scopeDialog),r=L.useRef(null),i=rl(e,t.contentRef,r);return L.useEffect(()=>{const s=r.current;if(s)return VZ(s)},[]),C.jsx(dU,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zr(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Zr(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Zr(n.onFocusOutside,s=>s.preventDefault())})}),YZ=L.forwardRef((n,e)=>{const t=ec(lp,n.__scopeDialog),r=L.useRef(!1),i=L.useRef(!1);return C.jsx(dU,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),dU=L.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=ec(lp,t),l=L.useRef(null),c=rl(e,l);return iZ(),C.jsxs(C.Fragment,{children:[C.jsx(q4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:C.jsx(lR,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":gR(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(KZ,{titleId:a.titleId}),C.jsx(ZZ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),mR="DialogTitle",pU=L.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ec(mR,t);return C.jsx(Ri.h2,{id:i.titleId,...r,ref:e})});pU.displayName=mR;var mU="DialogDescription",gU=L.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ec(mU,t);return C.jsx(Ri.p,{id:i.descriptionId,...r,ref:e})});gU.displayName=mU;var yU="DialogClose",xU=L.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ec(yU,t);return C.jsx(Ri.button,{type:"button",...r,ref:e,onClick:Zr(n.onClick,()=>i.onOpenChange(!1))})});xU.displayName=yU;function gR(n){return n?"open":"closed"}var vU="DialogTitleWarning",[s2e,_U]=NK(vU,{contentName:lp,titleName:mR,docsSlug:"dialog"}),KZ=({titleId:n})=>{const e=_U(vU),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return L.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},JZ="DialogDescriptionWarning",ZZ=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_U(JZ).contentName}}.`;return L.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},QZ=oU,eQ=lU,tQ=uU,wU=hU,bU=fU,AU=pU,SU=gU,nQ=xU;const DI=QZ,FI=eQ,rQ=tQ,CU=L.forwardRef(({className:n,...e},t)=>C.jsx(wU,{className:Mi("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));CU.displayName=wU.displayName;const iQ=aR("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),YE=L.forwardRef(({side:n="right",className:e,children:t,...r},i)=>C.jsxs(rQ,{children:[C.jsx(CU,{}),C.jsxs(bU,{ref:i,className:Mi(iQ({side:n}),e),...r,children:[t,C.jsxs(nQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[C.jsx(HO,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));YE.displayName=bU.displayName;const KE=({className:n,...e})=>C.jsx("div",{className:Mi("flex flex-col space-y-2 text-center sm:text-left",n),...e});KE.displayName="SheetHeader";const JE=L.forwardRef(({className:n,...e},t)=>C.jsx(AU,{ref:t,className:Mi("text-lg font-semibold text-foreground",n),...e}));JE.displayName=AU.displayName;const sQ=L.forwardRef(({className:n,...e},t)=>C.jsx(SU,{ref:t,className:Mi("text-sm text-muted-foreground",n),...e}));sQ.displayName=SU.displayName;const oQ=()=>{const n=al(),[e,t]=L.useState(null),[r,i]=L.useState(!0),[s,o]=L.useState({});L.useEffect(()=>{(async()=>{try{const c=await kr.get("https://indic-backend.onrender.com/api/auth/me",{withCredentials:!0});t(c.data.user),console.log("🔥 Logged-in User:",c.data.user)}catch(c){console.error("❌ Error fetching user:",c)}finally{i(!1)}})()},[]),L.useEffect(()=>{e&&(async()=>{if(e)try{const c={};for(const u of Jh)try{const h=await fetch(`https://indic-backend.onrender.com/api/progress/${e.username}/${u.file}`);if(h.ok){const d=await h.json();c[u.id]=d}}catch(h){console.error(`❌ Failed to fetch progress for level ${u.id}:`,h)}o(c),console.log("🔥 All progress data:",c)}catch(c){console.error("❌ Error fetching progress data:",c)}})()},[e]);const a=l=>{if(!r&&!e){console.error("❌ No user found, redirecting to login..."),n("/login",{state:{redirectTo:`/lesson/${l.id}`,levelFile:l.file}});return}console.log("🚀 Navigating with User:",e.username),n(`/lesson/${l.id}`,{state:{levelFile:l.file,userId:e.username}})};return C.jsx("div",{className:"bg-white min-h-screen",children:C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative right-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] translate-x-1/2 rotate-[-30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:right-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(25.9% 44.1%, 0% 61.6%, 2.5% 26.9%, 14.5% 0.1%, 19.3% 2%, 27.5% 32.5%, 39.8% 62.4%, 47.6% 68.1%, 52.5% 58.3%, 54.8% 34.5%, 72.5% 76.7%, 99.9% 64.9%, 82.1% 100%, 72.4% 76.8%, 23.9% 97.7%, 25.9% 44.1%)"}})]}),C.jsx("div",{className:"flex min-h-screen items-center justify-center pt-20 pb-12",children:C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-15 max-w-6xl mx-auto justify-items-center",children:Jh.map((l,c)=>C.jsx("div",{className:`w-80 h-80 bg-white rounded-lg shadow-md flex items-center justify-center ${c===Jh.length-1&&Jh.length%3===1?"lg:col-start-2":c===Jh.length-1&&Jh.length%3===2?"lg:col-start-2 lg:col-span-2":""}`,children:C.jsx(KJ,{level:l,onSelect:a,progress:s[l.id]})},l.id))})})]})})},aQ=[{id:1,value:"कुत्ता",match:"🐕",type:"text"},{id:2,value:"बिल्ली",match:"🐈",type:"text"},{id:3,value:"हाथी",match:"🐘",type:"text"},{id:7,value:"शेर",match:"🦁",type:"text"},{id:9,value:"गाय",match:"🐄",type:"text"},{id:12,value:"घोड़ा",match:"🐎",type:"text"},{id:4,value:"🐕",match:"कुत्ता",type:"emoji"},{id:5,value:"🐈",match:"बिल्ली",type:"emoji"},{id:6,value:"🐘",match:"हाथी",type:"emoji"},{id:8,value:"🦁",match:"शेर",type:"emoji"},{id:10,value:"🐄",match:"गाय",type:"emoji"},{id:11,value:"🐓",match:"मुर्गा",type:"emoji"}];function lQ(){const[n,e]=L.useState([]),[t,r]=L.useState([]),[i,s]=L.useState(!1),[o,a]=L.useState([]);L.useEffect(()=>{const h=aQ.sort(()=>Math.random()-.5).map(d=>({...d,id:Math.random()}));e(h)},[]);const l=h=>{if(!i&&(r(d=>[...d,h]),t.length===1)){s(!0);const d=t[0],m=h;d.value===m.match||d.match===m.value?(e(g=>g.map(v=>v.value===d.value||v.value===m.value?{...v,matched:!0}:v)),c()):(a([d,m]),setTimeout(()=>{a([]),c()},1e3))}},c=()=>{r([]),s(!1)},u=h=>o.includes(h);return C.jsx("div",{className:"min-h-screen bg-blue-100 flex items-center justify-center p-5",children:C.jsx("div",{className:"grid grid-cols-4 gap-4 max-w-lg w-full",children:n.map(h=>C.jsx("div",{className:"relative w-full aspect-[4/5] perspective cursor-pointer",onClick:()=>!t.includes(h)&&!h.matched&&l(h),children:C.jsx("div",{className:`absolute w-full h-full rounded-lg shadow-md flex justify-center items-center transition-transform duration-500 transform 
                ${t.includes(h)||h.matched?"rotate-y-0 bg-white":"rotate-y-180 bg-blue-500"}
                ${h.matched?"border-4 border-green-500":""}
                ${u(h)?"border-4 border-red-500":""}`,children:C.jsx("span",{className:`${t.includes(h)||h.matched?h.type==="emoji"?"text-5xl":"text-lg":"hidden"}`,children:h.value})})},h.id))})})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const uv="172",wd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TU=0,ZE=1,EU=2,cQ=3,MU=0,wA=1,q0=2,Ul=3,Oc=0,Lo=1,wa=2,Bc=0,qd=1,QE=2,eM=3,tM=4,RU=5,ef=100,PU=101,kU=102,BU=103,IU=104,LU=200,DU=201,FU=202,NU=203,Pw=204,kw=205,OU=206,UU=207,zU=208,HU=209,jU=210,GU=211,VU=212,WU=213,$U=214,Bw=0,Iw=1,Lw=2,cp=3,Dw=4,Fw=5,Nw=6,Ow=7,hv=0,XU=1,qU=2,Ic=0,YU=1,KU=2,JU=3,yR=4,ZU=5,QU=6,e5=7,nM="attached",t5="detached",of=300,Uc=301,af=302,up=303,Sx=304,Kg=306,zc=1e3,Ti=1001,vg=1002,Bs=1003,bA=1004,uQ=1004,Bd=1005,hQ=1005,Er=1006,rg=1007,fQ=1007,el=1008,rM=1008,sa=1009,AA=1010,SA=1011,_g=1012,fv=1013,Hc=1014,xi=1015,xs=1016,CA=1017,TA=1018,hp=1020,xR=35902,vR=1021,_R=1022,$i=1023,wR=1024,bR=1025,Yd=1026,fp=1027,dv=1028,pv=1029,AR=1030,EA=1031,dQ=1032,MA=1033,Y0=33776,K0=33777,J0=33778,Z0=33779,Uw=35840,zw=35841,Hw=35842,jw=35843,Gw=36196,Vw=37492,Ww=37496,$w=37808,Xw=37809,qw=37810,Yw=37811,Kw=37812,Jw=37813,Zw=37814,Qw=37815,eb=37816,tb=37817,nb=37818,rb=37819,ib=37820,sb=37821,Q0=36492,ob=36494,ab=36495,SR=36283,lb=36284,cb=36285,ub=36286,CR=2200,TR=2201,n5=2202,wg=2300,bg=2301,rw=2302,Id=2400,Ld=2401,Cx=2402,RA=2500,ER=2501,r5=0,MR=1,hb=2,i5=3200,s5=3201,pQ=3202,mQ=3203,yf=0,o5=1,Du="",Xr="srgb",jc="srgb-linear",Tx="linear",jr="srgb",gQ=0,Ad=7680,yQ=7681,xQ=7682,vQ=7683,_Q=34055,wQ=34056,bQ=5386,AQ=512,SQ=513,CQ=514,TQ=515,EQ=516,MQ=517,RQ=518,iM=519,a5=512,l5=513,c5=514,RR=515,u5=516,h5=517,f5=518,d5=519,Ex=35044,PQ=35048,kQ=35040,BQ=35045,IQ=35049,LQ=35041,DQ=35046,FQ=35050,NQ=35042,OQ="100",sM="300 es",Vl=2e3,Mx=2001;let Xc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const ao=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let NI=1234567;const Kd=Math.PI/180,Ag=180/Math.PI;function Aa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ao[n&255]+ao[n>>8&255]+ao[n>>16&255]+ao[n>>24&255]+"-"+ao[e&255]+ao[e>>8&255]+"-"+ao[e>>16&15|64]+ao[e>>24&255]+"-"+ao[t&63|128]+ao[t>>8&255]+"-"+ao[t>>16&255]+ao[t>>24&255]+ao[r&255]+ao[r>>8&255]+ao[r>>16&255]+ao[r>>24&255]).toLowerCase()}function Kn(n,e,t){return Math.max(e,Math.min(t,n))}function PR(n,e){return(n%e+e)%e}function UQ(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zQ(n,e,t){return n!==e?(t-n)/(e-n):0}function ex(n,e,t){return(1-t)*n+t*e}function HQ(n,e,t,r){return ex(n,e,1-Math.exp(-t*r))}function jQ(n,e=1){return e-Math.abs(PR(n,e*2)-e)}function GQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function VQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function WQ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function $Q(n,e){return n+Math.random()*(e-n)}function XQ(n){return n*(.5-Math.random())}function qQ(n){n!==void 0&&(NI=n);let e=NI+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function YQ(n){return n*Kd}function KQ(n){return n*Ag}function JQ(n){return(n&n-1)===0&&n!==0}function ZQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function QQ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function eee(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Po(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function tr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Ws={DEG2RAD:Kd,RAD2DEG:Ag,generateUUID:Aa,clamp:Kn,euclideanModulo:PR,mapLinear:UQ,inverseLerp:zQ,lerp:ex,damp:HQ,pingpong:jQ,smoothstep:GQ,smootherstep:VQ,randInt:WQ,randFloat:$Q,randFloatSpread:XQ,seededRandom:qQ,degToRad:YQ,radToDeg:KQ,isPowerOfTwo:JQ,ceilPowerOfTwo:ZQ,floorPowerOfTwo:QQ,setQuaternionFromProperEuler:eee,normalize:tr,denormalize:Po};class ht{constructor(e=0,t=0){ht.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Kn(this.x,e.x,t.x),this.y=Kn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Kn(this.x,e,t),this.y=Kn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Kn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Kn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yn{constructor(e,t,r,i,s,o,a,l,c){Yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],m=r[5],g=r[8],v=i[0],w=i[3],_=i[6],A=i[1],S=i[4],R=i[7],B=i[2],I=i[5],N=i[8];return s[0]=o*v+a*A+l*B,s[3]=o*w+a*S+l*I,s[6]=o*_+a*R+l*N,s[1]=c*v+u*A+h*B,s[4]=c*w+u*S+h*I,s[7]=c*_+u*R+h*N,s[2]=d*v+m*A+g*B,s[5]=d*w+m*S+g*I,s[8]=d*_+m*R+g*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,m=c*s-o*l,g=t*h+r*d+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*o)*v,e[3]=d*v,e[4]=(u*t-i*l)*v,e[5]=(i*s-a*t)*v,e[6]=m*v,e[7]=(r*l-c*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(IC.makeScale(e,t)),this}rotate(e){return this.premultiply(IC.makeRotation(-e)),this}translate(e,t){return this.premultiply(IC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const IC=new Yn;function p5(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const tee={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wm(n,e){return new tee[n](e)}function Rx(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function m5(){const n=Rx("canvas");return n.style.display="block",n}const OI={};function Hm(n){n in OI||(OI[n]=!0,console.warn(n))}function nee(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function ree(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function iee(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const UI=new Yn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),zI=new Yn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function see(){const n={enabled:!0,workingColorSpace:jc,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===jr&&(i.r=Uu(i.r),i.g=Uu(i.g),i.b=Uu(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===jr&&(i.r=ig(i.r),i.g=ig(i.g),i.b=ig(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Du?Tx:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[jc]:{primaries:e,whitePoint:r,transfer:Tx,toXYZ:UI,fromXYZ:zI,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Xr},outputColorSpaceConfig:{drawingBufferColorSpace:Xr}},[Xr]:{primaries:e,whitePoint:r,transfer:jr,toXYZ:UI,fromXYZ:zI,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Xr}}}),n}const nr=see();function Uu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ig(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ym;class g5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ym===void 0&&(ym=Rx("canvas")),ym.width=e.width,ym.height=e.height;const r=ym.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ym}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Rx("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Uu(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Uu(t[r]/255)*255):t[r]=Uu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let oee=0;class Dd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oee++}),this.uuid=Aa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(LC(i[o].image)):s.push(LC(i[o]))}else s=LC(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function LC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?g5.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aee=0;class Pr extends Xc{constructor(e=Pr.DEFAULT_IMAGE,t=Pr.DEFAULT_MAPPING,r=Ti,i=Ti,s=Er,o=el,a=$i,l=sa,c=Pr.DEFAULT_ANISOTROPY,u=Du){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aee++}),this.uuid=Aa(),this.name="",this.source=new Dd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ht(0,0),this.repeat=new ht(1,1),this.center=new ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==of)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zc:e.x=e.x-Math.floor(e.x);break;case Ti:e.x=e.x<0?0:1;break;case vg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zc:e.y=e.y-Math.floor(e.y);break;case Ti:e.y=e.y<0?0:1;break;case vg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Pr.DEFAULT_IMAGE=null;Pr.DEFAULT_MAPPING=of;Pr.DEFAULT_ANISOTROPY=1;class dr{constructor(e=0,t=0,r=0,i=1){dr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],m=l[5],g=l[9],v=l[2],w=l[6],_=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-v)<.01&&Math.abs(g-w)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+v)<.1&&Math.abs(g+w)<.1&&Math.abs(c+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,R=(m+1)/2,B=(_+1)/2,I=(u+d)/4,N=(h+v)/4,U=(g+w)/4;return S>R&&S>B?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=I/r,s=N/r):R>B?R<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),r=I/i,s=U/i):B<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(B),r=N/s,i=U/s),this.set(r,i,s,t),this}let A=Math.sqrt((w-g)*(w-g)+(h-v)*(h-v)+(d-u)*(d-u));return Math.abs(A)<.001&&(A=1),this.x=(w-g)/A,this.y=(h-v)/A,this.z=(d-u)/A,this.w=Math.acos((c+m+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Kn(this.x,e.x,t.x),this.y=Kn(this.y,e.y,t.y),this.z=Kn(this.z,e.z,t.z),this.w=Kn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Kn(this.x,e,t),this.y=Kn(this.y,e,t),this.z=Kn(this.z,e,t),this.w=Kn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Kn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class PA extends Xc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new dr(0,0,e,t),this.scissorTest=!1,this.viewport=new dr(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Er,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Pr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Dd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ca extends PA{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class mv extends Pr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bs,this.minFilter=Bs,this.wrapR=Ti,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class lee extends Ca{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new mv(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class kA extends Pr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bs,this.minFilter=Bs,this.wrapR=Ti,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cee extends Ca{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new kA(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class ri{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const d=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==d||c!==m||u!==g){let w=1-a;const _=l*d+c*m+u*g+h*v,A=_>=0?1:-1,S=1-_*_;if(S>Number.EPSILON){const B=Math.sqrt(S),I=Math.atan2(B,_*A);w=Math.sin(w*I)/B,a=Math.sin(a*I)/B}const R=a*A;if(l=l*w+d*R,c=c*w+m*R,u=u*w+g*R,h=h*w+v*R,w===1-a){const B=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=B,c*=B,u*=B,h*=B}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],d=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*h+l*m-c*d,e[t+1]=l*g+u*d+c*h-a*m,e[t+2]=c*g+u*m+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),d=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*m*g,this._y=c*m*h-d*u*g,this._z=c*u*g+d*m*h,this._w=c*u*h-d*m*g;break;case"YXZ":this._x=d*u*h+c*m*g,this._y=c*m*h-d*u*g,this._z=c*u*g-d*m*h,this._w=c*u*h+d*m*g;break;case"ZXY":this._x=d*u*h-c*m*g,this._y=c*m*h+d*u*g,this._z=c*u*g+d*m*h,this._w=c*u*h-d*m*g;break;case"ZYX":this._x=d*u*h-c*m*g,this._y=c*m*h+d*u*g,this._z=c*u*g-d*m*h,this._w=c*u*h+d*m*g;break;case"YZX":this._x=d*u*h+c*m*g,this._y=c*m*h+d*u*g,this._z=c*u*g-d*m*h,this._w=c*u*h-d*m*g;break;case"XZY":this._x=d*u*h-c*m*g,this._y=c*m*h-d*u*g,this._z=c*u*g+d*m*h,this._w=c*u*h+d*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>h){const m=2*Math.sqrt(1+r-a-h);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-r-h);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+h-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Kn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class fe{constructor(e=0,t=0,r=0){fe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(HI.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(HI.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Kn(this.x,e.x,t.x),this.y=Kn(this.y,e.y,t.y),this.z=Kn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Kn(this.x,e,t),this.y=Kn(this.y,e,t),this.z=Kn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Kn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return DC.copy(this).projectOnVector(e),this.sub(DC)}reflect(e){return this.sub(DC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Kn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const DC=new fe,HI=new ri;class po{constructor(e=new fe(1/0,1/0,1/0),t=new fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(kl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(kl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=kl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,kl):kl.fromBufferAttribute(s,o),kl.applyMatrix4(e.matrixWorld),this.expandByPoint(kl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),F1.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),F1.copy(r.boundingBox)),F1.applyMatrix4(e.matrixWorld),this.union(F1)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,kl),kl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(r0),N1.subVectors(this.max,r0),xm.subVectors(e.a,r0),vm.subVectors(e.b,r0),_m.subVectors(e.c,r0),Fh.subVectors(vm,xm),Nh.subVectors(_m,vm),sd.subVectors(xm,_m);let t=[0,-Fh.z,Fh.y,0,-Nh.z,Nh.y,0,-sd.z,sd.y,Fh.z,0,-Fh.x,Nh.z,0,-Nh.x,sd.z,0,-sd.x,-Fh.y,Fh.x,0,-Nh.y,Nh.x,0,-sd.y,sd.x,0];return!FC(t,xm,vm,_m,N1)||(t=[1,0,0,0,1,0,0,0,1],!FC(t,xm,vm,_m,N1))?!1:(O1.crossVectors(Fh,Nh),t=[O1.x,O1.y,O1.z],FC(t,xm,vm,_m,N1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(kl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Au[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Au[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Au[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Au[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Au[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Au[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Au[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Au[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Au),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Au=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe],kl=new fe,F1=new po,xm=new fe,vm=new fe,_m=new fe,Fh=new fe,Nh=new fe,sd=new fe,r0=new fe,N1=new fe,O1=new fe,od=new fe;function FC(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){od.fromArray(n,s);const a=i.x*Math.abs(od.x)+i.y*Math.abs(od.y)+i.z*Math.abs(od.z),l=e.dot(od),c=t.dot(od),u=r.dot(od);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const uee=new po,i0=new fe,NC=new fe;class Xs{constructor(e=new fe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):uee.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;i0.subVectors(e,this.center);const t=i0.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(i0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(i0.copy(e.center).add(NC)),this.expandByPoint(i0.copy(e.center).sub(NC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Su=new fe,OC=new fe,U1=new fe,Oh=new fe,UC=new fe,z1=new fe,zC=new fe;class bp{constructor(e=new fe,t=new fe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Su)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Su.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Su.copy(this.origin).addScaledVector(this.direction,t),Su.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){OC.copy(e).add(t).multiplyScalar(.5),U1.copy(t).sub(e).normalize(),Oh.copy(this.origin).sub(OC);const s=e.distanceTo(t)*.5,o=-this.direction.dot(U1),a=Oh.dot(this.direction),l=-Oh.dot(U1),c=Oh.lengthSq(),u=Math.abs(1-o*o);let h,d,m,g;if(u>0)if(h=o*l-a,d=o*a-l,g=s*u,h>=0)if(d>=-g)if(d<=g){const v=1/u;h*=v,d*=v,m=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),m=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),m=-h*h+d*(d+2*l)+c;else d<=-g?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+d*(d+2*l)+c):d<=g?(h=0,d=Math.min(Math.max(-s,-l),s),m=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),m=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(OC).addScaledVector(U1,d),m}intersectSphere(e,t){Su.subVectors(e.center,this.origin);const r=Su.dot(this.direction),i=Su.dot(Su)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Su)!==null}intersectTriangle(e,t,r,i,s){UC.subVectors(t,e),z1.subVectors(r,e),zC.crossVectors(UC,z1);let o=this.direction.dot(zC),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Oh.subVectors(this.origin,e);const l=a*this.direction.dot(z1.crossVectors(Oh,z1));if(l<0)return null;const c=a*this.direction.dot(UC.cross(Oh));if(c<0||l+c>o)return null;const u=-a*Oh.dot(zC);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Zt{constructor(e,t,r,i,s,o,a,l,c,u,h,d,m,g,v,w){Zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,h,d,m,g,v,w)}set(e,t,r,i,s,o,a,l,c,u,h,d,m,g,v,w){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=h,_[14]=d,_[3]=m,_[7]=g,_[11]=v,_[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Zt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/wm.setFromMatrixColumn(e,0).length(),s=1/wm.setFromMatrixColumn(e,1).length(),o=1/wm.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,m=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=m+g*c,t[5]=d-v*c,t[9]=-a*l,t[2]=v-d*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,m=l*h,g=c*u,v=c*h;t[0]=d+v*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,m=l*h,g=c*u,v=c*h;t[0]=d-v*a,t[4]=-o*h,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=v-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,m=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=g*c-m,t[8]=d*c+v,t[1]=l*h,t[5]=v*c+d,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-d*h,t[8]=g*h+m,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*h+g,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+v,t[5]=o*u,t[9]=m*h-g,t[2]=g*h-m,t[6]=a*u,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hee,e,fee)}lookAt(e,t,r){const i=this.elements;return ya.subVectors(e,t),ya.lengthSq()===0&&(ya.z=1),ya.normalize(),Uh.crossVectors(r,ya),Uh.lengthSq()===0&&(Math.abs(r.z)===1?ya.x+=1e-4:ya.z+=1e-4,ya.normalize(),Uh.crossVectors(r,ya)),Uh.normalize(),H1.crossVectors(ya,Uh),i[0]=Uh.x,i[4]=H1.x,i[8]=ya.x,i[1]=Uh.y,i[5]=H1.y,i[9]=ya.y,i[2]=Uh.z,i[6]=H1.z,i[10]=ya.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],m=r[13],g=r[2],v=r[6],w=r[10],_=r[14],A=r[3],S=r[7],R=r[11],B=r[15],I=i[0],N=i[4],U=i[8],O=i[12],P=i[1],F=i[5],K=i[9],Q=i[13],Y=i[2],ee=i[6],$=i[10],oe=i[14],G=i[3],te=i[7],re=i[11],Z=i[15];return s[0]=o*I+a*P+l*Y+c*G,s[4]=o*N+a*F+l*ee+c*te,s[8]=o*U+a*K+l*$+c*re,s[12]=o*O+a*Q+l*oe+c*Z,s[1]=u*I+h*P+d*Y+m*G,s[5]=u*N+h*F+d*ee+m*te,s[9]=u*U+h*K+d*$+m*re,s[13]=u*O+h*Q+d*oe+m*Z,s[2]=g*I+v*P+w*Y+_*G,s[6]=g*N+v*F+w*ee+_*te,s[10]=g*U+v*K+w*$+_*re,s[14]=g*O+v*Q+w*oe+_*Z,s[3]=A*I+S*P+R*Y+B*G,s[7]=A*N+S*F+R*ee+B*te,s[11]=A*U+S*K+R*$+B*re,s[15]=A*O+S*Q+R*oe+B*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],m=e[14],g=e[3],v=e[7],w=e[11],_=e[15];return g*(+s*l*h-i*c*h-s*a*d+r*c*d+i*a*m-r*l*m)+v*(+t*l*m-t*c*d+s*o*d-i*o*m+i*c*u-s*l*u)+w*(+t*c*h-t*a*m-s*o*h+r*o*m+s*a*u-r*c*u)+_*(-i*a*u-t*l*h+t*a*d+i*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],m=e[11],g=e[12],v=e[13],w=e[14],_=e[15],A=h*w*c-v*d*c+v*l*m-a*w*m-h*l*_+a*d*_,S=g*d*c-u*w*c-g*l*m+o*w*m+u*l*_-o*d*_,R=u*v*c-g*h*c+g*a*m-o*v*m-u*a*_+o*h*_,B=g*h*l-u*v*l-g*a*d+o*v*d+u*a*w-o*h*w,I=t*A+r*S+i*R+s*B;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/I;return e[0]=A*N,e[1]=(v*d*s-h*w*s-v*i*m+r*w*m+h*i*_-r*d*_)*N,e[2]=(a*w*s-v*l*s+v*i*c-r*w*c-a*i*_+r*l*_)*N,e[3]=(h*l*s-a*d*s-h*i*c+r*d*c+a*i*m-r*l*m)*N,e[4]=S*N,e[5]=(u*w*s-g*d*s+g*i*m-t*w*m-u*i*_+t*d*_)*N,e[6]=(g*l*s-o*w*s-g*i*c+t*w*c+o*i*_-t*l*_)*N,e[7]=(o*d*s-u*l*s+u*i*c-t*d*c-o*i*m+t*l*m)*N,e[8]=R*N,e[9]=(g*h*s-u*v*s-g*r*m+t*v*m+u*r*_-t*h*_)*N,e[10]=(o*v*s-g*a*s+g*r*c-t*v*c-o*r*_+t*a*_)*N,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*m-t*a*m)*N,e[12]=B*N,e[13]=(u*v*i-g*h*i+g*r*d-t*v*d-u*r*w+t*h*w)*N,e[14]=(g*a*i-o*v*i-g*r*l+t*v*l+o*r*w-t*a*w)*N,e[15]=(o*h*i-u*a*i+u*r*l-t*h*l-o*r*d+t*a*d)*N,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,m=s*u,g=s*h,v=o*u,w=o*h,_=a*h,A=l*c,S=l*u,R=l*h,B=r.x,I=r.y,N=r.z;return i[0]=(1-(v+_))*B,i[1]=(m+R)*B,i[2]=(g-S)*B,i[3]=0,i[4]=(m-R)*I,i[5]=(1-(d+_))*I,i[6]=(w+A)*I,i[7]=0,i[8]=(g+S)*N,i[9]=(w-A)*N,i[10]=(1-(d+v))*N,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=wm.set(i[0],i[1],i[2]).length();const o=wm.set(i[4],i[5],i[6]).length(),a=wm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Bl.copy(this);const c=1/s,u=1/o,h=1/a;return Bl.elements[0]*=c,Bl.elements[1]*=c,Bl.elements[2]*=c,Bl.elements[4]*=u,Bl.elements[5]*=u,Bl.elements[6]*=u,Bl.elements[8]*=h,Bl.elements[9]*=h,Bl.elements[10]*=h,t.setFromRotationMatrix(Bl),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Vl){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let m,g;if(a===Vl)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===Mx)m=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Vl){const l=this.elements,c=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*c,m=(r+i)*u;let g,v;if(a===Vl)g=(o+s)*h,v=-2*h;else if(a===Mx)g=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const wm=new fe,Bl=new Zt,hee=new fe(0,0,0),fee=new fe(1,1,1),Uh=new fe,H1=new fe,ya=new fe,jI=new Zt,GI=new ri;class rs{constructor(e=0,t=0,r=0,i=rs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Kn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Kn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Kn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Kn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Kn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return jI.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jI,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return GI.setFromEuler(this),this.setFromQuaternion(GI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}rs.DEFAULT_ORDER="XYZ";class Jd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let dee=0;const VI=new fe,bm=new ri,Cu=new Zt,j1=new fe,s0=new fe,pee=new fe,mee=new ri,WI=new fe(1,0,0),$I=new fe(0,1,0),XI=new fe(0,0,1),qI={type:"added"},gee={type:"removed"},Am={type:"childadded",child:null},HC={type:"childremoved",child:null};class cr extends Xc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:dee++}),this.uuid=Aa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new fe,t=new rs,r=new ri,i=new fe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Zt},normalMatrix:{value:new Yn}}),this.matrix=new Zt,this.matrixWorld=new Zt,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Jd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bm.setFromAxisAngle(e,t),this.quaternion.multiply(bm),this}rotateOnWorldAxis(e,t){return bm.setFromAxisAngle(e,t),this.quaternion.premultiply(bm),this}rotateX(e){return this.rotateOnAxis(WI,e)}rotateY(e){return this.rotateOnAxis($I,e)}rotateZ(e){return this.rotateOnAxis(XI,e)}translateOnAxis(e,t){return VI.copy(e).applyQuaternion(this.quaternion),this.position.add(VI.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(WI,e)}translateY(e){return this.translateOnAxis($I,e)}translateZ(e){return this.translateOnAxis(XI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Cu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?j1.copy(e):j1.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),s0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cu.lookAt(s0,j1,this.up):Cu.lookAt(j1,s0,this.up),this.quaternion.setFromRotationMatrix(Cu),i&&(Cu.extractRotation(i.matrixWorld),bm.setFromRotationMatrix(Cu),this.quaternion.premultiply(bm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(qI),Am.child=e,this.dispatchEvent(Am),Am.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(gee),HC.child=e,this.dispatchEvent(HC),HC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Cu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Cu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(qI),Am.child=e,this.dispatchEvent(Am),Am.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(s0,e,pee),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(s0,mee,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}cr.DEFAULT_UP=new fe(0,1,0);cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Il=new fe,Tu=new fe,jC=new fe,Eu=new fe,Sm=new fe,Cm=new fe,YI=new fe,GC=new fe,VC=new fe,WC=new fe,$C=new dr,XC=new dr,qC=new dr;class Qo{constructor(e=new fe,t=new fe,r=new fe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Il.subVectors(e,t),i.cross(Il);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Il.subVectors(i,t),Tu.subVectors(r,t),jC.subVectors(e,t);const o=Il.dot(Il),a=Il.dot(Tu),l=Il.dot(jC),c=Tu.dot(Tu),u=Tu.dot(jC),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const d=1/h,m=(c*l-a*u)*d,g=(o*u-a*l)*d;return s.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Eu)===null?!1:Eu.x>=0&&Eu.y>=0&&Eu.x+Eu.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Eu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Eu.x),l.addScaledVector(o,Eu.y),l.addScaledVector(a,Eu.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return $C.setScalar(0),XC.setScalar(0),qC.setScalar(0),$C.fromBufferAttribute(e,t),XC.fromBufferAttribute(e,r),qC.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector($C,s.x),o.addScaledVector(XC,s.y),o.addScaledVector(qC,s.z),o}static isFrontFacing(e,t,r,i){return Il.subVectors(r,t),Tu.subVectors(e,t),Il.cross(Tu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Il.subVectors(this.c,this.b),Tu.subVectors(this.a,this.b),Il.cross(Tu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Qo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Qo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Qo.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Qo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Qo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Sm.subVectors(i,r),Cm.subVectors(s,r),GC.subVectors(e,r);const l=Sm.dot(GC),c=Cm.dot(GC);if(l<=0&&c<=0)return t.copy(r);VC.subVectors(e,i);const u=Sm.dot(VC),h=Cm.dot(VC);if(u>=0&&h<=u)return t.copy(i);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Sm,o);WC.subVectors(e,s);const m=Sm.dot(WC),g=Cm.dot(WC);if(g>=0&&m<=g)return t.copy(s);const v=m*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(Cm,a);const w=u*g-m*h;if(w<=0&&h-u>=0&&m-g>=0)return YI.subVectors(s,i),a=(h-u)/(h-u+(m-g)),t.copy(i).addScaledVector(YI,a);const _=1/(w+v+d);return o=v*_,a=d*_,t.copy(r).addScaledVector(Sm,o).addScaledVector(Cm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const y5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zh={h:0,s:0,l:0},G1={h:0,s:0,l:0};function YC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ut=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,nr.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=nr.workingColorSpace){return this.r=e,this.g=t,this.b=r,nr.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=nr.workingColorSpace){if(e=PR(e,1),t=Kn(t,0,1),r=Kn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=YC(o,s,e+1/3),this.g=YC(o,s,e),this.b=YC(o,s,e-1/3)}return nr.toWorkingColorSpace(this,i),this}setStyle(e,t=Xr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xr){const r=y5[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Uu(e.r),this.g=Uu(e.g),this.b=Uu(e.b),this}copyLinearToSRGB(e){return this.r=ig(e.r),this.g=ig(e.g),this.b=ig(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xr){return nr.fromWorkingColorSpace(lo.copy(this),e),Math.round(Kn(lo.r*255,0,255))*65536+Math.round(Kn(lo.g*255,0,255))*256+Math.round(Kn(lo.b*255,0,255))}getHexString(e=Xr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=nr.workingColorSpace){nr.fromWorkingColorSpace(lo.copy(this),t);const r=lo.r,i=lo.g,s=lo.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=nr.workingColorSpace){return nr.fromWorkingColorSpace(lo.copy(this),t),e.r=lo.r,e.g=lo.g,e.b=lo.b,e}getStyle(e=Xr){nr.fromWorkingColorSpace(lo.copy(this),e);const t=lo.r,r=lo.g,i=lo.b;return e!==Xr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(zh),this.setHSL(zh.h+e,zh.s+t,zh.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(zh),e.getHSL(G1);const r=ex(zh.h,G1.h,t),i=ex(zh.s,G1.s,t),s=ex(zh.l,G1.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const lo=new Ut;Ut.NAMES=y5;let yee=0;class vs extends Xc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yee++}),this.uuid=Aa(),this.name="",this.type="Material",this.blending=qd,this.side=Oc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Pw,this.blendDst=kw,this.blendEquation=ef,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ut(0,0,0),this.blendAlpha=0,this.depthFunc=cp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ad,this.stencilZFail=Ad,this.stencilZPass=Ad,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==qd&&(r.blending=this.blending),this.side!==Oc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Pw&&(r.blendSrc=this.blendSrc),this.blendDst!==kw&&(r.blendDst=this.blendDst),this.blendEquation!==ef&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==cp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iM&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ad&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ad&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ad&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ta extends vs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rs,this.combine=hv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fu=xee();function xee(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Jo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Kn(n,-65504,65504),Fu.floatView[0]=n;const e=Fu.uint32View[0],t=e>>23&511;return Fu.baseTable[t]+((e&8388607)>>Fu.shiftTable[t])}function D0(n){const e=n>>10;return Fu.uint32View[0]=Fu.mantissaTable[Fu.offsetTable[e]+(n&1023)]+Fu.exponentTable[e],Fu.floatView[0]}const Fd={toHalfFloat:Jo,fromHalfFloat:D0},ts=new fe,V1=new ht;class Mr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Ex,this.updateRanges=[],this.gpuType=xi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)V1.fromBufferAttribute(this,t),V1.applyMatrix3(e),this.setXY(t,V1.x,V1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ts.fromBufferAttribute(this,t),ts.applyMatrix3(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ts.fromBufferAttribute(this,t),ts.applyMatrix4(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ts.fromBufferAttribute(this,t),ts.applyNormalMatrix(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ts.fromBufferAttribute(this,t),ts.transformDirection(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Po(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=tr(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Po(t,this.array)),t}setX(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Po(t,this.array)),t}setY(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Po(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Po(t,this.array)),t}setW(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array),i=tr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array),i=tr(i,this.array),s=tr(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ex&&(e.usage=this.usage),e}}class vee extends Mr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class _ee extends Mr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class wee extends Mr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class bee extends Mr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class BA extends Mr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Aee extends Mr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class kR extends Mr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class See extends Mr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=D0(this.array[e*this.itemSize]);return this.normalized&&(t=Po(t,this.array)),t}setX(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize]=Jo(t),this}getY(e){let t=D0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Po(t,this.array)),t}setY(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize+1]=Jo(t),this}getZ(e){let t=D0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Po(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize+2]=Jo(t),this}getW(e){let t=D0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Po(t,this.array)),t}setW(e,t){return this.normalized&&(t=tr(t,this.array)),this.array[e*this.itemSize+3]=Jo(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array)),this.array[e+0]=Jo(t),this.array[e+1]=Jo(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array),i=tr(i,this.array)),this.array[e+0]=Jo(t),this.array[e+1]=Jo(r),this.array[e+2]=Jo(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array),i=tr(i,this.array),s=tr(s,this.array)),this.array[e+0]=Jo(t),this.array[e+1]=Jo(r),this.array[e+2]=Jo(i),this.array[e+3]=Jo(s),this}}class rn extends Mr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Cee=0;const Wa=new Zt,KC=new cr,Tm=new fe,xa=new po,o0=new po,ks=new fe;class Vn extends Xc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Cee++}),this.uuid=Aa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(p5(e)?kR:BA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Yn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wa.makeRotationFromQuaternion(e),this.applyMatrix4(Wa),this}rotateX(e){return Wa.makeRotationX(e),this.applyMatrix4(Wa),this}rotateY(e){return Wa.makeRotationY(e),this.applyMatrix4(Wa),this}rotateZ(e){return Wa.makeRotationZ(e),this.applyMatrix4(Wa),this}translate(e,t,r){return Wa.makeTranslation(e,t,r),this.applyMatrix4(Wa),this}scale(e,t,r){return Wa.makeScale(e,t,r),this.applyMatrix4(Wa),this}lookAt(e){return KC.lookAt(e),KC.updateMatrix(),this.applyMatrix4(KC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tm).negate(),this.translate(Tm.x,Tm.y,Tm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new rn(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new po);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new fe(-1/0,-1/0,-1/0),new fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];xa.setFromBufferAttribute(s),this.morphTargetsRelative?(ks.addVectors(this.boundingBox.min,xa.min),this.boundingBox.expandByPoint(ks),ks.addVectors(this.boundingBox.max,xa.max),this.boundingBox.expandByPoint(ks)):(this.boundingBox.expandByPoint(xa.min),this.boundingBox.expandByPoint(xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new fe,1/0);return}if(e){const r=this.boundingSphere.center;if(xa.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];o0.setFromBufferAttribute(a),this.morphTargetsRelative?(ks.addVectors(xa.min,o0.min),xa.expandByPoint(ks),ks.addVectors(xa.max,o0.max),xa.expandByPoint(ks)):(xa.expandByPoint(o0.min),xa.expandByPoint(o0.max))}xa.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ks.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ks));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ks.fromBufferAttribute(a,c),l&&(Tm.fromBufferAttribute(e,c),ks.add(Tm)),i=Math.max(i,r.distanceToSquared(ks))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mr(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let U=0;U<r.count;U++)a[U]=new fe,l[U]=new fe;const c=new fe,u=new fe,h=new fe,d=new ht,m=new ht,g=new ht,v=new fe,w=new fe;function _(U,O,P){c.fromBufferAttribute(r,U),u.fromBufferAttribute(r,O),h.fromBufferAttribute(r,P),d.fromBufferAttribute(s,U),m.fromBufferAttribute(s,O),g.fromBufferAttribute(s,P),u.sub(c),h.sub(c),m.sub(d),g.sub(d);const F=1/(m.x*g.y-g.x*m.y);isFinite(F)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(h,-m.y).multiplyScalar(F),w.copy(h).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(F),a[U].add(v),a[O].add(v),a[P].add(v),l[U].add(w),l[O].add(w),l[P].add(w))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let U=0,O=A.length;U<O;++U){const P=A[U],F=P.start,K=P.count;for(let Q=F,Y=F+K;Q<Y;Q+=3)_(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const S=new fe,R=new fe,B=new fe,I=new fe;function N(U){B.fromBufferAttribute(i,U),I.copy(B);const O=a[U];S.copy(O),S.sub(B.multiplyScalar(B.dot(O))).normalize(),R.crossVectors(I,O);const F=R.dot(l[U])<0?-1:1;o.setXYZW(U,S.x,S.y,S.z,F)}for(let U=0,O=A.length;U<O;++U){const P=A[U],F=P.start,K=P.count;for(let Q=F,Y=F+K;Q<Y;Q+=3)N(e.getX(Q+0)),N(e.getX(Q+1)),N(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Mr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,m=r.count;d<m;d++)r.setXYZ(d,0,0,0);const i=new fe,s=new fe,o=new fe,a=new fe,l=new fe,c=new fe,u=new fe,h=new fe;if(e)for(let d=0,m=e.count;d<m;d+=3){const g=e.getX(d+0),v=e.getX(d+1),w=e.getX(d+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,w),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,w),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(w,c.x,c.y,c.z)}else for(let d=0,m=t.count;d<m;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ks.fromBufferAttribute(e,t),ks.normalize(),e.setXYZ(t,ks.x,ks.y,ks.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let m=0,g=0;for(let v=0,w=l.length;v<w;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*u;for(let _=0;_<u;_++)d[g++]=c[m++]}return new Mr(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],m=e(d,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const m=c[h];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,m=h.length;d<m;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const KI=new Zt,ad=new bp,W1=new Xs,JI=new fe,$1=new fe,X1=new fe,q1=new fe,JC=new fe,Y1=new fe,ZI=new fe,K1=new fe;class di extends cr{constructor(e=new Vn,t=new ta){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Y1.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(JC.fromBufferAttribute(h,e),o?Y1.addScaledVector(JC,u):Y1.addScaledVector(JC.sub(t),u))}t.add(Y1)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),W1.copy(r.boundingSphere),W1.applyMatrix4(s),ad.copy(e.ray).recast(e.near),!(W1.containsPoint(ad.origin)===!1&&(ad.intersectSphere(W1,JI)===null||ad.origin.distanceToSquared(JI)>(e.far-e.near)**2))&&(KI.copy(s).invert(),ad.copy(e.ray).applyMatrix4(KI),!(r.boundingBox!==null&&ad.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,ad)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=d.length;g<v;g++){const w=d[g],_=o[w.materialIndex],A=Math.max(w.start,m.start),S=Math.min(a.count,Math.min(w.start+w.count,m.start+m.count));for(let R=A,B=S;R<B;R+=3){const I=a.getX(R),N=a.getX(R+1),U=a.getX(R+2);i=J1(this,_,e,r,c,u,h,I,N,U),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);for(let w=g,_=v;w<_;w+=3){const A=a.getX(w),S=a.getX(w+1),R=a.getX(w+2);i=J1(this,o,e,r,c,u,h,A,S,R),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=d.length;g<v;g++){const w=d[g],_=o[w.materialIndex],A=Math.max(w.start,m.start),S=Math.min(l.count,Math.min(w.start+w.count,m.start+m.count));for(let R=A,B=S;R<B;R+=3){const I=R,N=R+1,U=R+2;i=J1(this,_,e,r,c,u,h,I,N,U),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let w=g,_=v;w<_;w+=3){const A=w,S=w+1,R=w+2;i=J1(this,o,e,r,c,u,h,A,S,R),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function Tee(n,e,t,r,i,s,o,a){let l;if(e.side===Lo?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Oc,a),l===null)return null;K1.copy(a),K1.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(K1);return c<t.near||c>t.far?null:{distance:c,point:K1.clone(),object:n}}function J1(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,$1),n.getVertexPosition(l,X1),n.getVertexPosition(c,q1);const u=Tee(n,e,t,r,$1,X1,q1,ZI);if(u){const h=new fe;Qo.getBarycoord(ZI,$1,X1,q1,h),i&&(u.uv=Qo.getInterpolatedAttribute(i,a,l,c,h,new ht)),s&&(u.uv1=Qo.getInterpolatedAttribute(s,a,l,c,h,new ht)),o&&(u.normal=Qo.getInterpolatedAttribute(o,a,l,c,h,new fe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new fe,materialIndex:0};Qo.getNormal($1,X1,q1,d.normal),u.face=d,u.barycoord=h}return u}class Ap extends Vn{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,m=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new rn(c,3)),this.setAttribute("normal",new rn(u,3)),this.setAttribute("uv",new rn(h,2));function g(v,w,_,A,S,R,B,I,N,U,O){const P=R/N,F=B/U,K=R/2,Q=B/2,Y=I/2,ee=N+1,$=U+1;let oe=0,G=0;const te=new fe;for(let re=0;re<$;re++){const Z=re*F-Q;for(let ne=0;ne<ee;ne++){const ce=ne*P-K;te[v]=ce*A,te[w]=Z*S,te[_]=Y,c.push(te.x,te.y,te.z),te[v]=0,te[w]=0,te[_]=I>0?1:-1,u.push(te.x,te.y,te.z),h.push(ne/N),h.push(1-re/U),oe+=1}}for(let re=0;re<U;re++)for(let Z=0;Z<N;Z++){const ne=d+Z+ee*re,ce=d+Z+ee*(re+1),ye=d+(Z+1)+ee*(re+1),he=d+(Z+1)+ee*re;l.push(ne,ce,he),l.push(ce,ye,he),G+=6}a.addGroup(m,G,O),m+=G,d+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ap(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sg(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Mo(n){const e={};for(let t=0;t<n.length;t++){const r=Sg(n[t]);for(const i in r)e[i]=r[i]}return e}function Eee(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function x5(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:nr.workingColorSpace}const v5={clone:Sg,merge:Mo};var Mee=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ree=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class oa extends vs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Mee,this.fragmentShader=Ree,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sg(e.uniforms),this.uniformsGroups=Eee(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class gv extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Zt,this.projectionMatrix=new Zt,this.projectionMatrixInverse=new Zt,this.coordinateSystem=Vl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Hh=new fe,QI=new ht,eL=new ht;let ui=class extends gv{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ag*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ag*2*Math.atan(Math.tan(Kd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Hh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Hh.x,Hh.y).multiplyScalar(-e/Hh.z),Hh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Hh.x,Hh.y).multiplyScalar(-e/Hh.z)}getViewSize(e,t){return this.getViewBounds(e,QI,eL),t.subVectors(eL,QI)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Kd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Em=-90,Mm=1;class _5 extends cr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ui(Em,Mm,e,t);i.layers=this.layers,this.add(i);const s=new ui(Em,Mm,e,t);s.layers=this.layers,this.add(s);const o=new ui(Em,Mm,e,t);o.layers=this.layers,this.add(o);const a=new ui(Em,Mm,e,t);a.layers=this.layers,this.add(a);const l=new ui(Em,Mm,e,t);l.layers=this.layers,this.add(l);const c=new ui(Em,Mm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Vl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Mx)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,d,m),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class yv extends Pr{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Uc,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class BR extends Ca{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new yv(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Er}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ap(5,5,5),s=new oa({name:"CubemapFromEquirect",uniforms:Sg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Lo,blending:Bc});s.uniforms.tEquirect.value=t;const o=new di(i,s),a=t.minFilter;return t.minFilter===el&&(t.minFilter=Er),new _5(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class IA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ut(e),this.density=t}clone(){return new IA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class LA{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ut(e),this.near=t,this.far=r}clone(){return new LA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let xv=class extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new rs,this.environmentIntensity=1,this.environmentRotation=new rs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class vv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ex,this.updateRanges=[],this.version=0,this.uuid=Aa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const To=new fe;class lf{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)To.fromBufferAttribute(this,t),To.applyMatrix4(e),this.setXYZ(t,To.x,To.y,To.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)To.fromBufferAttribute(this,t),To.applyNormalMatrix(e),this.setXYZ(t,To.x,To.y,To.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)To.fromBufferAttribute(this,t),To.transformDirection(e),this.setXYZ(t,To.x,To.y,To.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Po(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=tr(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=tr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=tr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=tr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=tr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Po(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Po(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Po(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Po(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array),i=tr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=tr(t,this.array),r=tr(r,this.array),i=tr(i,this.array),s=tr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Mr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class IR extends vs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Rm;const a0=new fe,Pm=new fe,km=new fe,Bm=new ht,l0=new ht,w5=new Zt,Z1=new fe,c0=new fe,Q1=new fe,tL=new ht,ZC=new ht,nL=new ht;class b5 extends cr{constructor(e=new IR){if(super(),this.isSprite=!0,this.type="Sprite",Rm===void 0){Rm=new Vn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new vv(t,5);Rm.setIndex([0,1,2,0,2,3]),Rm.setAttribute("position",new lf(r,3,0,!1)),Rm.setAttribute("uv",new lf(r,2,3,!1))}this.geometry=Rm,this.material=e,this.center=new ht(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pm.setFromMatrixScale(this.matrixWorld),w5.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),km.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Pm.multiplyScalar(-km.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;e_(Z1.set(-.5,-.5,0),km,o,Pm,i,s),e_(c0.set(.5,-.5,0),km,o,Pm,i,s),e_(Q1.set(.5,.5,0),km,o,Pm,i,s),tL.set(0,0),ZC.set(1,0),nL.set(1,1);let a=e.ray.intersectTriangle(Z1,c0,Q1,!1,a0);if(a===null&&(e_(c0.set(-.5,.5,0),km,o,Pm,i,s),ZC.set(0,1),a=e.ray.intersectTriangle(Z1,Q1,c0,!1,a0),a===null))return;const l=e.ray.origin.distanceTo(a0);l<e.near||l>e.far||t.push({distance:l,point:a0.clone(),uv:Qo.getInterpolation(a0,Z1,c0,Q1,tL,ZC,nL,new ht),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function e_(n,e,t,r,i,s){Bm.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(l0.x=s*Bm.x-i*Bm.y,l0.y=i*Bm.x+s*Bm.y):l0.copy(Bm),n.copy(e),n.x+=l0.x,n.y+=l0.y,n.applyMatrix4(w5)}const t_=new fe,rL=new fe;class A5 extends cr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){t_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(t_);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){t_.setFromMatrixPosition(e.matrixWorld),rL.setFromMatrixPosition(this.matrixWorld);const r=t_.distanceTo(rL)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const iL=new fe,sL=new dr,oL=new dr,Pee=new fe,aL=new Zt,n_=new fe,QC=new Xs,lL=new Zt,eT=new bp;class DA extends di{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=nM,this.bindMatrix=new Zt,this.bindMatrixInverse=new Zt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new po),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,n_),this.boundingBox.expandByPoint(n_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Xs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,n_),this.boundingSphere.expandByPoint(n_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),QC.copy(this.boundingSphere),QC.applyMatrix4(i),e.ray.intersectsSphere(QC)!==!1&&(lL.copy(i).invert(),eT.copy(e.ray).applyMatrix4(lL),!(this.boundingBox!==null&&eT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,eT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new dr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===nM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===t5?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;sL.fromBufferAttribute(i.attributes.skinIndex,e),oL.fromBufferAttribute(i.attributes.skinWeight,e),iL.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=oL.getComponent(s);if(o!==0){const a=sL.getComponent(s);aL.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Pee.copy(iL).applyMatrix4(aL),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Cg extends cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xl extends Pr{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Bs,u=Bs,h,d){super(null,o,a,l,c,u,i,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const cL=new Zt,kee=new Zt;class Jg{constructor(e=[],t=[]){this.uuid=Aa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Zt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:kee;cL.multiplyMatrices(a,t[s]),cL.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Jg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Xl(t,e,e,$i,xi);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Cg),this.bones.push(o),this.boneInverses.push(new Zt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class dp extends Mr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Im=new Zt,uL=new Zt,r_=[],hL=new po,Bee=new Zt,u0=new di,h0=new Xs;class LR extends di{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new dp(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Bee)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new po),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Im),hL.copy(e.boundingBox).applyMatrix4(Im),this.boundingBox.union(hL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Xs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Im),h0.copy(e.boundingSphere).applyMatrix4(Im),this.boundingSphere.union(h0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(u0.geometry=this.geometry,u0.material=this.material,u0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),h0.copy(this.boundingSphere),h0.applyMatrix4(r),e.ray.intersectsSphere(h0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Im),uL.multiplyMatrices(r,Im),u0.matrixWorld=uL,u0.raycast(e,r_);for(let o=0,a=r_.length;o<a;o++){const l=r_[o];l.instanceId=s,l.object=this,t.push(l)}r_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new dp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Xl(new Float32Array(i*this.count),i,this.count,dv,xi));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const tT=new fe,Iee=new fe,Lee=new Yn;class Lu{constructor(e=new fe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=tT.subVectors(r,t).cross(Iee.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(tT),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Lee.getNormalMatrix(e),i=this.coplanarPoint(tT).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ld=new Xs,i_=new fe;class _v{constructor(e=new Lu,t=new Lu,r=new Lu,i=new Lu,s=new Lu,o=new Lu){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Vl){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],m=i[8],g=i[9],v=i[10],w=i[11],_=i[12],A=i[13],S=i[14],R=i[15];if(r[0].setComponents(l-s,d-c,w-m,R-_).normalize(),r[1].setComponents(l+s,d+c,w+m,R+_).normalize(),r[2].setComponents(l+o,d+u,w+g,R+A).normalize(),r[3].setComponents(l-o,d-u,w-g,R-A).normalize(),r[4].setComponents(l-a,d-h,w-v,R-S).normalize(),t===Vl)r[5].setComponents(l+a,d+h,w+v,R+S).normalize();else if(t===Mx)r[5].setComponents(a,h,v,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ld.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ld.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ld)}intersectsSprite(e){return ld.center.set(0,0,0),ld.radius=.7071067811865476,ld.applyMatrix4(e.matrixWorld),this.intersectsSphere(ld)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(i_.x=i.normal.x>0?e.max.x:e.min.x,i_.y=i.normal.y>0?e.max.y:e.min.y,i_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(i_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function nT(n,e){return n-e}function Dee(n,e){return n.z-e.z}function Fee(n,e){return e.z-n.z}class Nee{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Yo=new Zt,Oee=new Ut(1,1,1),rT=new _v,s_=new po,cd=new Xs,f0=new fe,fL=new fe,Uee=new fe,iT=new Nee,co=new di,o_=[];function zee(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function ud(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class S5 extends di{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,r=t*2,i){super(new Vn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Xl(t,e,e,$i,xi);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Xl(t,e,e,pv,Hc);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Xl(t,e,e,$i,xi);r.colorSpace=nr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),h=new Mr(u,l,c);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Mr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new po);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Yo),this.getBoundingBoxAt(s,s_).applyMatrix4(Yo),e.union(s_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Yo),this.getBoundingSphereAt(s,cd).applyMatrix4(Yo),e.union(cd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(nT),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Yo.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Oee.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(nT),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in r.attributes){const h=t.getAttribute(u),d=r.getAttribute(u);zee(h,d,l);const m=h.itemSize;for(let g=h.count,v=c;g<v;g++){const w=l+g;for(let _=0;_<m;_++)d.setComponent(w,_,0)}d.needsUpdate=!0,d.addUpdateRange(l*m,c*m)}if(i){const u=a.indexStart,h=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let d=0;d<o.count;d++)s.setX(u+d,l+o.getX(d));for(let d=o.count,m=h;d<m;d++)s.setX(u+d,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],c=r[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:h,reservedIndexCount:d}=c,m=s.index,g=m.array,v=e-h;for(let w=u;w<u+d;w++)g[w]=g[w]+v;m.array.copyWithin(t,u,u+d),m.addUpdateRange(t,d),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:h}=c,d=s.attributes;for(const m in d){const g=d[m],{array:v,itemSize:w}=g;v.copyWithin(e*w,u*w,(u+h)*w),g.addUpdateRange(e*w,h*w)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new po,o=r.index,a=r.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(f0.fromBufferAttribute(a,u))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Xs;this.getBoundingBoxAt(e,s_),s_.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let h=c;o&&(h=o.getX(h)),f0.fromBufferAttribute(a,h),l=Math.max(l,s.center.distanceToSquared(f0))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(nT);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);ud(this._multiDrawCounts,i),ud(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ud(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),ud(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),ud(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Vn,this._initializeGeometry(s));const o=this.geometry;s.index&&ud(s.index.array,o.index.array);for(const a in s.attributes)ud(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;co.material=this.material,co.geometry.index=o.index,co.geometry.attributes=o.attributes,co.geometry.boundingBox===null&&(co.geometry.boundingBox=new po),co.geometry.boundingSphere===null&&(co.geometry.boundingSphere=new Xs);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];co.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,co.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,co.geometry.boundingBox),this.getBoundingSphereAt(c,co.geometry.boundingSphere),co.raycast(e,o_);for(let h=0,d=o_.length;h<d;h++){const m=o_[h];m.object=this,m.batchId=a,t.push(m)}o_.length=0}co.material=null,co.geometry.index=null,co.geometry.attributes={},co.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,h=this._geometryInfo,d=this.perObjectFrustumCulled,m=this._indirectTexture,g=m.image.data;d&&(Yo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),rT.setFromProjectionMatrix(Yo,e.coordinateSystem));let v=0;if(this.sortObjects){Yo.copy(this.matrixWorld).invert(),f0.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Yo),fL.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Yo);for(let A=0,S=l.length;A<S;A++)if(l[A].visible&&l[A].active){const R=l[A].geometryIndex;this.getMatrixAt(A,Yo),this.getBoundingSphereAt(R,cd).applyMatrix4(Yo);let B=!1;if(d&&(B=!rT.intersectsSphere(cd)),!B){const I=h[R],N=Uee.subVectors(cd.center,f0).dot(fL);iT.push(I.start,I.count,N,A)}}const w=iT.list,_=this.customSort;_===null?w.sort(s.transparent?Fee:Dee):_.call(this,w,r);for(let A=0,S=w.length;A<S;A++){const R=w[A];c[v]=R.start*a,u[v]=R.count,g[v]=R.index,v++}iT.reset()}else for(let w=0,_=l.length;w<_;w++)if(l[w].visible&&l[w].active){const A=l[w].geometryIndex;let S=!1;if(d&&(this.getMatrixAt(w,Yo),this.getBoundingSphereAt(A,cd).applyMatrix4(Yo),S=!rT.intersectsSphere(cd)),!S){const R=h[A];c[v]=R.start*a,u[v]=R.count,g[v]=w,v++}}m.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Ys extends vs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const fb=new fe,db=new fe,dL=new Zt,d0=new bp,a_=new Xs,sT=new fe,pL=new fe;class Gc extends cr{constructor(e=new Vn,t=new Ys){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)fb.fromBufferAttribute(t,i-1),db.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=fb.distanceTo(db);e.setAttribute("lineDistance",new rn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),a_.copy(r.boundingSphere),a_.applyMatrix4(i),a_.radius+=s,e.ray.intersectsSphere(a_)===!1)return;dL.copy(i).invert(),d0.copy(e.ray).applyMatrix4(dL);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,d=r.attributes.position;if(u!==null){const m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=m,w=g-1;v<w;v+=c){const _=u.getX(v),A=u.getX(v+1),S=l_(this,e,d0,l,_,A);S&&t.push(S)}if(this.isLineLoop){const v=u.getX(g-1),w=u.getX(m),_=l_(this,e,d0,l,v,w);_&&t.push(_)}}else{const m=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=m,w=g-1;v<w;v+=c){const _=l_(this,e,d0,l,v,v+1);_&&t.push(_)}if(this.isLineLoop){const v=l_(this,e,d0,l,g-1,m);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function l_(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(fb.fromBufferAttribute(o,i),db.fromBufferAttribute(o,s),t.distanceSqToSegment(fb,db,sT,pL)>r)return;sT.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(sT);if(!(l<e.near||l>e.far))return{distance:l,point:pL.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}const mL=new fe,gL=new fe;class tc extends Gc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)mL.fromBufferAttribute(t,i),gL.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+mL.distanceTo(gL);e.setAttribute("lineDistance",new rn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class DR extends Gc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class FA extends vs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const yL=new Zt,oM=new bp,c_=new Xs,u_=new fe;class FR extends cr{constructor(e=new Vn,t=new FA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),c_.copy(r.boundingSphere),c_.applyMatrix4(i),c_.radius+=s,e.ray.intersectsSphere(c_)===!1)return;yL.copy(i).invert(),oM.copy(e.ray).applyMatrix4(yL);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,h=r.attributes.position;if(c!==null){const d=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=d,v=m;g<v;g++){const w=c.getX(g);u_.fromBufferAttribute(h,w),xL(u_,w,l,i,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let g=d,v=m;g<v;g++)u_.fromBufferAttribute(h,g),xL(u_,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function xL(n,e,t,r,i,s,o){const a=oM.distanceSqToPoint(n);if(a<t){const l=new fe;oM.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Wl extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Hee extends Pr{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Er,this.magFilter=s!==void 0?s:Er,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class jee extends Pr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Bs,this.minFilter=Bs,this.generateMipmaps=!1,this.needsUpdate=!0}}class NA extends Pr{constructor(e,t,r,i,s,o,a,l,c,u,h,d){super(null,o,a,l,c,u,i,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Gee extends NA{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ti,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Vee extends NA{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Uc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Wee extends Pr{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class OA extends Pr{constructor(e,t,r,i,s,o,a,l,c,u=Yd){if(u!==Yd&&u!==fp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Yd&&(r=Hc),r===void 0&&u===fp&&(r=hp),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Bs,this.minFilter=l!==void 0?l:Bs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ll{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],d=r[i+1]-u,m=(o-u)/d;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new ht:new fe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new fe,i=[],s=[],o=[],a=new fe,l=new Zt;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new fe)}s[0]=new fe,o[0]=new fe;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),d<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Kn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Kn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class UA extends ll{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ht){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,m=c-this.aY;l=d*u-m*h+this.aX,c=d*h+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class C5 extends UA{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function NR(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,m*=u,i(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const h_=new fe,oT=new NR,aT=new NR,lT=new NR;class T5 extends ll{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new fe){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(h_.subVectors(i[0],i[1]).add(i[0]),c=h_);const h=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(h_.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=h_),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),v=Math.pow(h.distanceToSquared(d),m),w=Math.pow(d.distanceToSquared(u),m);v<1e-4&&(v=1),g<1e-4&&(g=v),w<1e-4&&(w=v),oT.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,g,v,w),aT.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,g,v,w),lT.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,g,v,w)}else this.curveType==="catmullrom"&&(oT.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),aT.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),lT.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return r.set(oT.calc(l),aT.calc(l),lT.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new fe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function vL(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function $ee(n,e){const t=1-n;return t*t*e}function Xee(n,e){return 2*(1-n)*n*e}function qee(n,e){return n*n*e}function tx(n,e,t,r){return $ee(n,e)+Xee(n,t)+qee(n,r)}function Yee(n,e){const t=1-n;return t*t*t*e}function Kee(n,e){const t=1-n;return 3*t*t*n*e}function Jee(n,e){return 3*(1-n)*n*n*e}function Zee(n,e){return n*n*n*e}function nx(n,e,t,r,i){return Yee(n,e)+Kee(n,t)+Jee(n,r)+Zee(n,i)}class OR extends ll{constructor(e=new ht,t=new ht,r=new ht,i=new ht){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ht){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(nx(e,i.x,s.x,o.x,a.x),nx(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class E5 extends ll{constructor(e=new fe,t=new fe,r=new fe,i=new fe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new fe){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(nx(e,i.x,s.x,o.x,a.x),nx(e,i.y,s.y,o.y,a.y),nx(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UR extends ll{constructor(e=new ht,t=new ht){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ht){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ht){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class M5 extends ll{constructor(e=new fe,t=new fe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new fe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new fe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zR extends ll{constructor(e=new ht,t=new ht,r=new ht){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ht){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(tx(e,i.x,s.x,o.x),tx(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HR extends ll{constructor(e=new fe,t=new fe,r=new fe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new fe){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(tx(e,i.x,s.x,o.x),tx(e,i.y,s.y,o.y),tx(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jR extends ll{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ht){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(vL(a,l.x,c.x,u.x,h.x),vL(a,l.y,c.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ht().fromArray(i))}return this}}var pb=Object.freeze({__proto__:null,ArcCurve:C5,CatmullRomCurve3:T5,CubicBezierCurve:OR,CubicBezierCurve3:E5,EllipseCurve:UA,LineCurve:UR,LineCurve3:M5,QuadraticBezierCurve:zR,QuadraticBezierCurve3:HR,SplineCurve:jR});class R5 extends ll{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new pb[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new pb[i.type]().fromJSON(i))}return this}}let Px=class extends R5{constructor(e){super(),this.type="Path",this.currentPoint=new ht,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new UR(this.currentPoint.clone(),new ht(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new zR(this.currentPoint.clone(),new ht(e,t),new ht(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new OR(this.currentPoint.clone(),new ht(e,t),new ht(r,i),new ht(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new jR(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new UA(e,t,r,i,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class wv extends Vn{constructor(e=[new ht(0,-.5),new ht(.5,0),new ht(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Kn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,h=new fe,d=new ht,m=new fe,g=new fe,v=new fe;let w=0,_=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:w=e[A+1].x-e[A].x,_=e[A+1].y-e[A].y,m.x=_*1,m.y=-w,m.z=_*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:w=e[A+1].x-e[A].x,_=e[A+1].y-e[A].y,m.x=_*1,m.y=-w,m.z=_*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let A=0;A<=t;A++){const S=r+A*u*i,R=Math.sin(S),B=Math.cos(S);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*R,h.y=e[I].y,h.z=e[I].x*B,o.push(h.x,h.y,h.z),d.x=A/t,d.y=I/(e.length-1),a.push(d.x,d.y);const N=l[3*I+0]*R,U=l[3*I+1],O=l[3*I+0]*B;c.push(N,U,O)}}for(let A=0;A<t;A++)for(let S=0;S<e.length-1;S++){const R=S+A*e.length,B=R,I=R+e.length,N=R+e.length+1,U=R+1;s.push(B,I,U),s.push(N,U,I)}this.setIndex(s),this.setAttribute("position",new rn(o,3)),this.setAttribute("uv",new rn(a,2)),this.setAttribute("normal",new rn(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wv(e.points,e.segments,e.phiStart,e.phiLength)}}class zA extends wv{constructor(e=1,t=1,r=4,i=8){const s=new Px;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new zA(e.radius,e.length,e.capSegments,e.radialSegments)}}class HA extends Vn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new fe,u=new ht;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const m=r+h/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new rn(o,3)),this.setAttribute("normal",new rn(a,3)),this.setAttribute("uv",new rn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Zg extends Vn{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],h=[],d=[],m=[];let g=0;const v=[],w=r/2;let _=0;A(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new rn(h,3)),this.setAttribute("normal",new rn(d,3)),this.setAttribute("uv",new rn(m,2));function A(){const R=new fe,B=new fe;let I=0;const N=(t-e)/r;for(let U=0;U<=s;U++){const O=[],P=U/s,F=P*(t-e)+e;for(let K=0;K<=i;K++){const Q=K/i,Y=Q*l+a,ee=Math.sin(Y),$=Math.cos(Y);B.x=F*ee,B.y=-P*r+w,B.z=F*$,h.push(B.x,B.y,B.z),R.set(ee,N,$).normalize(),d.push(R.x,R.y,R.z),m.push(Q,1-P),O.push(g++)}v.push(O)}for(let U=0;U<i;U++)for(let O=0;O<s;O++){const P=v[O][U],F=v[O+1][U],K=v[O+1][U+1],Q=v[O][U+1];(e>0||O!==0)&&(u.push(P,F,Q),I+=3),(t>0||O!==s-1)&&(u.push(F,K,Q),I+=3)}c.addGroup(_,I,0),_+=I}function S(R){const B=g,I=new ht,N=new fe;let U=0;const O=R===!0?e:t,P=R===!0?1:-1;for(let K=1;K<=i;K++)h.push(0,w*P,0),d.push(0,P,0),m.push(.5,.5),g++;const F=g;for(let K=0;K<=i;K++){const Y=K/i*l+a,ee=Math.cos(Y),$=Math.sin(Y);N.x=O*$,N.y=w*P,N.z=O*ee,h.push(N.x,N.y,N.z),d.push(0,P,0),I.x=ee*.5+.5,I.y=$*.5*P+.5,m.push(I.x,I.y),g++}for(let K=0;K<i;K++){const Q=B+K,Y=F+K;R===!0?u.push(Y,Y+1,Q):u.push(Y+1,Y,Q),U+=3}c.addGroup(_,U,R===!0?1:2),_+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jA extends Zg{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new jA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xf extends Vn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new rn(s,3)),this.setAttribute("normal",new rn(s.slice(),3)),this.setAttribute("uv",new rn(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const S=new fe,R=new fe,B=new fe;for(let I=0;I<t.length;I+=3)m(t[I+0],S),m(t[I+1],R),m(t[I+2],B),l(S,R,B,A)}function l(A,S,R,B){const I=B+1,N=[];for(let U=0;U<=I;U++){N[U]=[];const O=A.clone().lerp(R,U/I),P=S.clone().lerp(R,U/I),F=I-U;for(let K=0;K<=F;K++)K===0&&U===I?N[U][K]=O:N[U][K]=O.clone().lerp(P,K/F)}for(let U=0;U<I;U++)for(let O=0;O<2*(I-U)-1;O++){const P=Math.floor(O/2);O%2===0?(d(N[U][P+1]),d(N[U+1][P]),d(N[U][P])):(d(N[U][P+1]),d(N[U+1][P+1]),d(N[U+1][P]))}}function c(A){const S=new fe;for(let R=0;R<s.length;R+=3)S.x=s[R+0],S.y=s[R+1],S.z=s[R+2],S.normalize().multiplyScalar(A),s[R+0]=S.x,s[R+1]=S.y,s[R+2]=S.z}function u(){const A=new fe;for(let S=0;S<s.length;S+=3){A.x=s[S+0],A.y=s[S+1],A.z=s[S+2];const R=w(A)/2/Math.PI+.5,B=_(A)/Math.PI+.5;o.push(R,1-B)}g(),h()}function h(){for(let A=0;A<o.length;A+=6){const S=o[A+0],R=o[A+2],B=o[A+4],I=Math.max(S,R,B),N=Math.min(S,R,B);I>.9&&N<.1&&(S<.2&&(o[A+0]+=1),R<.2&&(o[A+2]+=1),B<.2&&(o[A+4]+=1))}}function d(A){s.push(A.x,A.y,A.z)}function m(A,S){const R=A*3;S.x=e[R+0],S.y=e[R+1],S.z=e[R+2]}function g(){const A=new fe,S=new fe,R=new fe,B=new fe,I=new ht,N=new ht,U=new ht;for(let O=0,P=0;O<s.length;O+=9,P+=6){A.set(s[O+0],s[O+1],s[O+2]),S.set(s[O+3],s[O+4],s[O+5]),R.set(s[O+6],s[O+7],s[O+8]),I.set(o[P+0],o[P+1]),N.set(o[P+2],o[P+3]),U.set(o[P+4],o[P+5]),B.copy(A).add(S).add(R).divideScalar(3);const F=w(B);v(I,P+0,A,F),v(N,P+2,S,F),v(U,P+4,R,F)}}function v(A,S,R,B){B<0&&A.x===1&&(o[S]=A.x-1),R.x===0&&R.z===0&&(o[S]=B/2/Math.PI+.5)}function w(A){return Math.atan2(A.z,-A.x)}function _(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xf(e.vertices,e.indices,e.radius,e.details)}}class GA extends xf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GA(e.radius,e.detail)}}const f_=new fe,d_=new fe,cT=new fe,p_=new Qo;class P5 extends Vn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Kd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),d={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:w,c:_}=p_;if(v.fromBufferAttribute(a,c[0]),w.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),p_.getNormal(cT),h[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,h[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,h[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let A=0;A<3;A++){const S=(A+1)%3,R=h[A],B=h[S],I=p_[u[A]],N=p_[u[S]],U=`${R}_${B}`,O=`${B}_${R}`;O in d&&d[O]?(cT.dot(d[O].normal)<=s&&(m.push(I.x,I.y,I.z),m.push(N.x,N.y,N.z)),d[O]=null):U in d||(d[U]={index0:c[A],index1:c[S],normal:cT.clone()})}}for(const g in d)if(d[g]){const{index0:v,index1:w}=d[g];f_.fromBufferAttribute(a,v),d_.fromBufferAttribute(a,w),m.push(f_.x,f_.y,f_.z),m.push(d_.x,d_.y,d_.z)}this.setAttribute("position",new rn(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Zd extends Px{constructor(e){super(e),this.uuid=Aa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Px().fromJSON(i))}return this}}const Qee={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=k5(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,d,m;if(r&&(s=ite(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<i;g+=t)h=n[g],d=n[g+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return kx(s,o,t,a,l,m,0),o}};function k5(n,e,t,r,i){let s,o;if(i===mte(n,e,t,r)>0)for(s=e;s<t;s+=r)o=_L(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=_L(s,n[s],n[s+1],o);return o&&VA(o,o.next)&&(Ix(o),o=o.next),o}function pp(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(VA(t,t.next)||Si(t.prev,t,t.next)===0)){if(Ix(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function kx(n,e,t,r,i,s,o){if(!n)return;!o&&s&&cte(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?tte(n,r,i,s):ete(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Ix(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=nte(pp(n),e,t),kx(n,e,t,r,i,s,2)):o===2&&rte(n,e,t,r,i,s):kx(pp(n),e,t,r,i,s,1);break}}}function ete(n){const e=n.prev,t=n,r=n.next;if(Si(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=h&&g.y<=m&&$m(i,a,s,l,o,c,g.x,g.y)&&Si(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function tte(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Si(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,d=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<h?u<d?u:d:h<d?h:d,v=a>l?a>c?a:c:l>c?l:c,w=u>h?u>d?u:d:h>d?h:d,_=aM(m,g,e,t,r),A=aM(v,w,e,t,r);let S=n.prevZ,R=n.nextZ;for(;S&&S.z>=_&&R&&R.z<=A;){if(S.x>=m&&S.x<=v&&S.y>=g&&S.y<=w&&S!==i&&S!==o&&$m(a,u,l,h,c,d,S.x,S.y)&&Si(S.prev,S,S.next)>=0||(S=S.prevZ,R.x>=m&&R.x<=v&&R.y>=g&&R.y<=w&&R!==i&&R!==o&&$m(a,u,l,h,c,d,R.x,R.y)&&Si(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;S&&S.z>=_;){if(S.x>=m&&S.x<=v&&S.y>=g&&S.y<=w&&S!==i&&S!==o&&$m(a,u,l,h,c,d,S.x,S.y)&&Si(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;R&&R.z<=A;){if(R.x>=m&&R.x<=v&&R.y>=g&&R.y<=w&&R!==i&&R!==o&&$m(a,u,l,h,c,d,R.x,R.y)&&Si(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function nte(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!VA(i,s)&&B5(i,r,r.next,s)&&Bx(i,s)&&Bx(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Ix(r),Ix(r.next),r=n=s),r=r.next}while(r!==n);return pp(r)}function rte(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&fte(o,a)){let l=I5(o,a);o=pp(o,o.next),l=pp(l,l.next),kx(o,e,t,r,i,s,0),kx(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function ite(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=k5(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(hte(c));for(i.sort(ste),s=0;s<i.length;s++)t=ote(i[s],t);return t}function ste(n,e){return n.x-e.x}function ote(n,e){const t=ate(n,e);if(!t)return e;const r=I5(t,n);return pp(r,r.next),pp(t,t.next)}function ate(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,h;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&$m(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),Bx(t,n)&&(h<u||h===u&&(t.x>i.x||t.x===i.x&&lte(i,t)))&&(i=t,u=h)),t=t.next;while(t!==a);return i}function lte(n,e){return Si(n.prev,n,e.prev)<0&&Si(e.next,n,n.next)<0}function cte(n,e,t,r){let i=n;do i.z===0&&(i.z=aM(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,ute(i)}function ute(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function aM(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function hte(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function $m(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function fte(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!dte(n,e)&&(Bx(n,e)&&Bx(e,n)&&pte(n,e)&&(Si(n.prev,n,e.prev)||Si(n,e.prev,e))||VA(n,e)&&Si(n.prev,n,n.next)>0&&Si(e.prev,e,e.next)>0)}function Si(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function VA(n,e){return n.x===e.x&&n.y===e.y}function B5(n,e,t,r){const i=g_(Si(n,e,t)),s=g_(Si(n,e,r)),o=g_(Si(t,r,n)),a=g_(Si(t,r,e));return!!(i!==s&&o!==a||i===0&&m_(n,t,e)||s===0&&m_(n,r,e)||o===0&&m_(t,n,r)||a===0&&m_(t,e,r))}function m_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function g_(n){return n>0?1:n<0?-1:0}function dte(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&B5(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Bx(n,e){return Si(n.prev,n,n.next)<0?Si(n,e,n.next)>=0&&Si(n,n.prev,e)>=0:Si(n,e,n.prev)<0||Si(n,n.next,e)<0}function pte(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function I5(n,e){const t=new lM(n.i,n.x,n.y),r=new lM(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function _L(n,e,t,r){const i=new lM(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ix(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function lM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mte(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ql{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ql.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];wL(e),bL(r,e);let o=e.length;t.forEach(wL);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,bL(r,t[l]);const a=Qee.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function wL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function bL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class WA extends Vn{constructor(e=new Zd([new ht(.5,.5),new ht(-.5,.5),new ht(-.5,-.5),new ht(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new rn(i,3)),this.setAttribute("uv",new rn(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:gte;let S,R=!1,B,I,N,U;_&&(S=_.getSpacedPoints(u),R=!0,d=!1,B=_.computeFrenetFrames(u,!1),I=new fe,N=new fe,U=new fe),d||(w=0,m=0,g=0,v=0);const O=a.extractPoints(c);let P=O.shape;const F=O.holes;if(!ql.isClockWise(P)){P=P.reverse();for(let Ee=0,Oe=F.length;Ee<Oe;Ee++){const le=F[Ee];ql.isClockWise(le)&&(F[Ee]=le.reverse())}}const Q=ql.triangulateShape(P,F),Y=P;for(let Ee=0,Oe=F.length;Ee<Oe;Ee++){const le=F[Ee];P=P.concat(le)}function ee(Ee,Oe,le){return Oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ee.clone().addScaledVector(Oe,le)}const $=P.length,oe=Q.length;function G(Ee,Oe,le){let vt,ft,_t;const mt=Ee.x-Oe.x,Vt=Ee.y-Oe.y,bt=le.x-Ee.x,de=le.y-Ee.y,ae=mt*mt+Vt*Vt,He=mt*de-Vt*bt;if(Math.abs(He)>Number.EPSILON){const Ze=Math.sqrt(ae),ut=Math.sqrt(bt*bt+de*de),st=Oe.x-Vt/Ze,It=Oe.y+mt/Ze,Et=le.x-de/ut,Lt=le.y+bt/ut,hn=((Et-st)*de-(Lt-It)*bt)/(mt*de-Vt*bt);vt=st+mt*hn-Ee.x,ft=It+Vt*hn-Ee.y;const gt=vt*vt+ft*ft;if(gt<=2)return new ht(vt,ft);_t=Math.sqrt(gt/2)}else{let Ze=!1;mt>Number.EPSILON?bt>Number.EPSILON&&(Ze=!0):mt<-Number.EPSILON?bt<-Number.EPSILON&&(Ze=!0):Math.sign(Vt)===Math.sign(de)&&(Ze=!0),Ze?(vt=-Vt,ft=mt,_t=Math.sqrt(ae)):(vt=mt,ft=Vt,_t=Math.sqrt(ae/2))}return new ht(vt/_t,ft/_t)}const te=[];for(let Ee=0,Oe=Y.length,le=Oe-1,vt=Ee+1;Ee<Oe;Ee++,le++,vt++)le===Oe&&(le=0),vt===Oe&&(vt=0),te[Ee]=G(Y[Ee],Y[le],Y[vt]);const re=[];let Z,ne=te.concat();for(let Ee=0,Oe=F.length;Ee<Oe;Ee++){const le=F[Ee];Z=[];for(let vt=0,ft=le.length,_t=ft-1,mt=vt+1;vt<ft;vt++,_t++,mt++)_t===ft&&(_t=0),mt===ft&&(mt=0),Z[vt]=G(le[vt],le[_t],le[mt]);re.push(Z),ne=ne.concat(Z)}for(let Ee=0;Ee<w;Ee++){const Oe=Ee/w,le=m*Math.cos(Oe*Math.PI/2),vt=g*Math.sin(Oe*Math.PI/2)+v;for(let ft=0,_t=Y.length;ft<_t;ft++){const mt=ee(Y[ft],te[ft],vt);ke(mt.x,mt.y,-le)}for(let ft=0,_t=F.length;ft<_t;ft++){const mt=F[ft];Z=re[ft];for(let Vt=0,bt=mt.length;Vt<bt;Vt++){const de=ee(mt[Vt],Z[Vt],vt);ke(de.x,de.y,-le)}}}const ce=g+v;for(let Ee=0;Ee<$;Ee++){const Oe=d?ee(P[Ee],ne[Ee],ce):P[Ee];R?(N.copy(B.normals[0]).multiplyScalar(Oe.x),I.copy(B.binormals[0]).multiplyScalar(Oe.y),U.copy(S[0]).add(N).add(I),ke(U.x,U.y,U.z)):ke(Oe.x,Oe.y,0)}for(let Ee=1;Ee<=u;Ee++)for(let Oe=0;Oe<$;Oe++){const le=d?ee(P[Oe],ne[Oe],ce):P[Oe];R?(N.copy(B.normals[Ee]).multiplyScalar(le.x),I.copy(B.binormals[Ee]).multiplyScalar(le.y),U.copy(S[Ee]).add(N).add(I),ke(U.x,U.y,U.z)):ke(le.x,le.y,h/u*Ee)}for(let Ee=w-1;Ee>=0;Ee--){const Oe=Ee/w,le=m*Math.cos(Oe*Math.PI/2),vt=g*Math.sin(Oe*Math.PI/2)+v;for(let ft=0,_t=Y.length;ft<_t;ft++){const mt=ee(Y[ft],te[ft],vt);ke(mt.x,mt.y,h+le)}for(let ft=0,_t=F.length;ft<_t;ft++){const mt=F[ft];Z=re[ft];for(let Vt=0,bt=mt.length;Vt<bt;Vt++){const de=ee(mt[Vt],Z[Vt],vt);R?ke(de.x,de.y+S[u-1].y,S[u-1].x+le):ke(de.x,de.y,h+le)}}}ye(),he();function ye(){const Ee=i.length/3;if(d){let Oe=0,le=$*Oe;for(let vt=0;vt<oe;vt++){const ft=Q[vt];Ue(ft[2]+le,ft[1]+le,ft[0]+le)}Oe=u+w*2,le=$*Oe;for(let vt=0;vt<oe;vt++){const ft=Q[vt];Ue(ft[0]+le,ft[1]+le,ft[2]+le)}}else{for(let Oe=0;Oe<oe;Oe++){const le=Q[Oe];Ue(le[2],le[1],le[0])}for(let Oe=0;Oe<oe;Oe++){const le=Q[Oe];Ue(le[0]+$*u,le[1]+$*u,le[2]+$*u)}}r.addGroup(Ee,i.length/3-Ee,0)}function he(){const Ee=i.length/3;let Oe=0;Ce(Y,Oe),Oe+=Y.length;for(let le=0,vt=F.length;le<vt;le++){const ft=F[le];Ce(ft,Oe),Oe+=ft.length}r.addGroup(Ee,i.length/3-Ee,1)}function Ce(Ee,Oe){let le=Ee.length;for(;--le>=0;){const vt=le;let ft=le-1;ft<0&&(ft=Ee.length-1);for(let _t=0,mt=u+w*2;_t<mt;_t++){const Vt=$*_t,bt=$*(_t+1),de=Oe+vt+Vt,ae=Oe+ft+Vt,He=Oe+ft+bt,Ze=Oe+vt+bt;Qe(de,ae,He,Ze)}}}function ke(Ee,Oe,le){l.push(Ee),l.push(Oe),l.push(le)}function Ue(Ee,Oe,le){Te(Ee),Te(Oe),Te(le);const vt=i.length/3,ft=A.generateTopUV(r,i,vt-3,vt-2,vt-1);$e(ft[0]),$e(ft[1]),$e(ft[2])}function Qe(Ee,Oe,le,vt){Te(Ee),Te(Oe),Te(vt),Te(Oe),Te(le),Te(vt);const ft=i.length/3,_t=A.generateSideWallUV(r,i,ft-6,ft-3,ft-2,ft-1);$e(_t[0]),$e(_t[1]),$e(_t[3]),$e(_t[1]),$e(_t[2]),$e(_t[3])}function Te(Ee){i.push(l[Ee*3+0]),i.push(l[Ee*3+1]),i.push(l[Ee*3+2])}function $e(Ee){s.push(Ee.x),s.push(Ee.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return yte(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new pb[i.type]().fromJSON(i)),new WA(r,e.options)}}const gte={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new ht(s,o),new ht(a,l),new ht(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],h=e[r*3+2],d=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[s*3],w=e[s*3+1],_=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new ht(o,1-l),new ht(c,1-h),new ht(d,1-g),new ht(v,1-_)]:[new ht(a,1-l),new ht(u,1-h),new ht(m,1-g),new ht(w,1-_)]}};function yte(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bv extends xf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bv(e.radius,e.detail)}}class Av extends xf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Av(e.radius,e.detail)}}class vf extends Vn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,h=e/a,d=t/l,m=[],g=[],v=[],w=[];for(let _=0;_<u;_++){const A=_*d-o;for(let S=0;S<c;S++){const R=S*h-s;g.push(R,-A,0),v.push(0,0,1),w.push(S/a),w.push(1-_/l)}}for(let _=0;_<l;_++)for(let A=0;A<a;A++){const S=A+c*_,R=A+c*(_+1),B=A+1+c*(_+1),I=A+1+c*_;m.push(S,R,I),m.push(R,B,I)}this.setIndex(m),this.setAttribute("position",new rn(g,3)),this.setAttribute("normal",new rn(v,3)),this.setAttribute("uv",new rn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vf(e.width,e.height,e.widthSegments,e.heightSegments)}}class $A extends Vn{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let h=e;const d=(t-e)/i,m=new fe,g=new ht;for(let v=0;v<=i;v++){for(let w=0;w<=r;w++){const _=s+w/r*o;m.x=h*Math.cos(_),m.y=h*Math.sin(_),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,u.push(g.x,g.y)}h+=d}for(let v=0;v<i;v++){const w=v*(r+1);for(let _=0;_<r;_++){const A=_+w,S=A,R=A+r+1,B=A+r+2,I=A+1;a.push(S,R,I),a.push(R,B,I)}}this.setIndex(a),this.setAttribute("position",new rn(l,3)),this.setAttribute("normal",new rn(c,3)),this.setAttribute("uv",new rn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $A(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class XA extends Vn{constructor(e=new Zd([new ht(0,.5),new ht(-.5,-.5),new ht(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new rn(i,3)),this.setAttribute("normal",new rn(s,3)),this.setAttribute("uv",new rn(o,2));function c(u){const h=i.length/3,d=u.extractPoints(t);let m=d.shape;const g=d.holes;ql.isClockWise(m)===!1&&(m=m.reverse());for(let w=0,_=g.length;w<_;w++){const A=g[w];ql.isClockWise(A)===!0&&(g[w]=A.reverse())}const v=ql.triangulateShape(m,g);for(let w=0,_=g.length;w<_;w++){const A=g[w];m=m.concat(A)}for(let w=0,_=m.length;w<_;w++){const A=m[w];i.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let w=0,_=v.length;w<_;w++){const A=v[w],S=A[0]+h,R=A[1]+h,B=A[2]+h;r.push(S,R,B),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return xte(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new XA(r,e.curveSegments)}}function xte(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Sv extends Vn{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new fe,d=new fe,m=[],g=[],v=[],w=[];for(let _=0;_<=r;_++){const A=[],S=_/r;let R=0;_===0&&o===0?R=.5/t:_===r&&l===Math.PI&&(R=-.5/t);for(let B=0;B<=t;B++){const I=B/t;h.x=-e*Math.cos(i+I*s)*Math.sin(o+S*a),h.y=e*Math.cos(o+S*a),h.z=e*Math.sin(i+I*s)*Math.sin(o+S*a),g.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),w.push(I+R,1-S),A.push(c++)}u.push(A)}for(let _=0;_<r;_++)for(let A=0;A<t;A++){const S=u[_][A+1],R=u[_][A],B=u[_+1][A],I=u[_+1][A+1];(_!==0||o>0)&&m.push(S,R,I),(_!==r-1||l<Math.PI)&&m.push(R,B,I)}this.setIndex(m),this.setAttribute("position",new rn(g,3)),this.setAttribute("normal",new rn(v,3)),this.setAttribute("uv",new rn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qA extends xf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qA(e.radius,e.detail)}}class YA extends Vn{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new fe,h=new fe,d=new fe;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const v=g/i*s,w=m/r*Math.PI*2;h.x=(e+t*Math.cos(w))*Math.cos(v),h.y=(e+t*Math.cos(w))*Math.sin(v),h.z=t*Math.sin(w),a.push(h.x,h.y,h.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(g/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const v=(i+1)*m+g-1,w=(i+1)*(m-1)+g-1,_=(i+1)*(m-1)+g,A=(i+1)*m+g;o.push(v,w,A),o.push(w,_,A)}this.setIndex(o),this.setAttribute("position",new rn(a,3)),this.setAttribute("normal",new rn(l,3)),this.setAttribute("uv",new rn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new YA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class KA extends Vn{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],h=new fe,d=new fe,m=new fe,g=new fe,v=new fe,w=new fe,_=new fe;for(let S=0;S<=r;++S){const R=S/r*s*Math.PI*2;A(R,s,o,e,m),A(R+.01,s,o,e,g),w.subVectors(g,m),_.addVectors(g,m),v.crossVectors(w,_),_.crossVectors(v,w),v.normalize(),_.normalize();for(let B=0;B<=i;++B){const I=B/i*Math.PI*2,N=-t*Math.cos(I),U=t*Math.sin(I);h.x=m.x+(N*_.x+U*v.x),h.y=m.y+(N*_.y+U*v.y),h.z=m.z+(N*_.z+U*v.z),l.push(h.x,h.y,h.z),d.subVectors(h,m).normalize(),c.push(d.x,d.y,d.z),u.push(S/r),u.push(B/i)}}for(let S=1;S<=r;S++)for(let R=1;R<=i;R++){const B=(i+1)*(S-1)+(R-1),I=(i+1)*S+(R-1),N=(i+1)*S+R,U=(i+1)*(S-1)+R;a.push(B,I,U),a.push(I,N,U)}this.setIndex(a),this.setAttribute("position",new rn(l,3)),this.setAttribute("normal",new rn(c,3)),this.setAttribute("uv",new rn(u,2));function A(S,R,B,I,N){const U=Math.cos(S),O=Math.sin(S),P=B/R*S,F=Math.cos(P);N.x=I*(2+F)*.5*U,N.y=I*(2+F)*O*.5,N.z=I*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class JA extends Vn{constructor(e=new HR(new fe(-1,-1,0),new fe(-1,1,0),new fe(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new fe,l=new fe,c=new ht;let u=new fe;const h=[],d=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new rn(h,3)),this.setAttribute("normal",new rn(d,3)),this.setAttribute("uv",new rn(m,2));function v(){for(let S=0;S<t;S++)w(S);w(s===!1?t:0),A(),_()}function w(S){u=e.getPointAt(S/t,u);const R=o.normals[S],B=o.binormals[S];for(let I=0;I<=i;I++){const N=I/i*Math.PI*2,U=Math.sin(N),O=-Math.cos(N);l.x=O*R.x+U*B.x,l.y=O*R.y+U*B.y,l.z=O*R.z+U*B.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,h.push(a.x,a.y,a.z)}}function _(){for(let S=1;S<=t;S++)for(let R=1;R<=i;R++){const B=(i+1)*(S-1)+(R-1),I=(i+1)*S+(R-1),N=(i+1)*S+R,U=(i+1)*(S-1)+R;g.push(B,I,U),g.push(I,N,U)}}function A(){for(let S=0;S<=t;S++)for(let R=0;R<=i;R++)c.x=S/t,c.y=R/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new JA(new pb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class L5 extends Vn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new fe,s=new fe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,m=h.count;for(let g=d,v=d+m;g<v;g+=3)for(let w=0;w<3;w++){const _=a.getX(g+w),A=a.getX(g+(w+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,A),AL(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),AL(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new rn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function AL(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var SL=Object.freeze({__proto__:null,BoxGeometry:Ap,CapsuleGeometry:zA,CircleGeometry:HA,ConeGeometry:jA,CylinderGeometry:Zg,DodecahedronGeometry:GA,EdgesGeometry:P5,ExtrudeGeometry:WA,IcosahedronGeometry:bv,LatheGeometry:wv,OctahedronGeometry:Av,PlaneGeometry:vf,PolyhedronGeometry:xf,RingGeometry:$A,ShapeGeometry:XA,SphereGeometry:Sv,TetrahedronGeometry:qA,TorusGeometry:YA,TorusKnotGeometry:KA,TubeGeometry:JA,WireframeGeometry:L5});class D5 extends vs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class F5 extends oa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Cv extends vs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cl extends Cv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ht(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class rx extends vs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ut(16777215),this.specular=new Ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rs,this.combine=hv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N5 extends vs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class O5 extends vs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GR extends vs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rs,this.combine=hv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VR extends vs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=i5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WR extends vs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class U5 extends vs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z5 extends Ys{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Nd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function H5(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function j5(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function cM(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function $R(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function vte(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],d=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<t||g>=r)){h.push(c.times[m]);for(let v=0;v<u;++v)d.push(c.values[m*u+v])}}h.length!==0&&(c.times=Nd(h,c.times.constructor),c.values=Nd(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function _te(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const _=u,A=h-u;v=a.values.slice(_,A)}else if(s>=a.times[g]){const _=g*h+u,A=_+h-u;v=a.values.slice(_,A)}else{const _=a.createInterpolant(),A=u,S=h-u;_.evaluate(s),v=_.resultBuffer.slice(A,S)}l==="quaternion"&&new ri().fromArray(v).normalize().conjugate().toArray(v);const w=c.times.length;for(let _=0;_<w;++_){const A=_*m+d;if(l==="quaternion")ri.multiplyQuaternionsFlat(c.values,A,v,0,c.values,A);else{const S=m-d*2;for(let R=0;R<S;++R)c.values[A+R]-=v[R]}}}return n.blendMode=ER,n}const wte={convertArray:Nd,isTypedArray:H5,getKeyframeOrder:j5,sortedArray:cM,flattenJSON:$R,subclip:vte,makeClipAdditive:_te};class Qg{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class G5 extends Qg{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Id,endingEnd:Id}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Ld:s=e,a=2*t-r;break;case Cx:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Ld:o=e,l=2*r-t;break;case Cx:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),v=g*g,w=v*g,_=-d*w+2*d*v-d*g,A=(1+d)*w+(-1.5-2*d)*v+(-.5+d)*g+1,S=(-1-m)*w+(1.5+m)*v+.5*g,R=m*w-m*v;for(let B=0;B!==a;++B)s[B]=_*o[u+B]+A*o[c+B]+S*o[l+B]+R*o[h+B];return s}}class XR extends Qg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*h+o[l+d]*u;return s}}class V5 extends Qg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class nc{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Nd(t,this.TimeBufferType),this.values=Nd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Nd(e.times,Array),values:Nd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new V5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new G5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wg:t=this.InterpolantFactoryMethodDiscrete;break;case bg:t=this.InterpolantFactoryMethodLinear;break;case rw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wg;case this.InterpolantFactoryMethodLinear:return bg;case this.InterpolantFactoryMethodSmooth:return rw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&H5(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===rw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const h=a*r,d=h-r,m=h+r;for(let g=0;g!==r;++g){const v=t[h+g];if(v!==t[d+g]||v!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,d=o*r;for(let m=0;m!==r;++m)t[d+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}nc.prototype.TimeBufferType=Float32Array;nc.prototype.ValueBufferType=Float32Array;nc.prototype.DefaultInterpolation=bg;class Sp extends nc{constructor(e,t,r){super(e,t,r)}}Sp.prototype.ValueTypeName="bool";Sp.prototype.ValueBufferType=Array;Sp.prototype.DefaultInterpolation=wg;Sp.prototype.InterpolantFactoryMethodLinear=void 0;Sp.prototype.InterpolantFactoryMethodSmooth=void 0;class qR extends nc{}qR.prototype.ValueTypeName="color";class cf extends nc{}cf.prototype.ValueTypeName="number";class W5 extends Qg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ri.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Vu extends nc{InterpolantFactoryMethodLinear(e){return new W5(this.times,this.values,this.getValueSize(),e)}}Vu.prototype.ValueTypeName="quaternion";Vu.prototype.InterpolantFactoryMethodSmooth=void 0;class Cp extends nc{constructor(e,t,r){super(e,t,r)}}Cp.prototype.ValueTypeName="string";Cp.prototype.ValueBufferType=Array;Cp.prototype.DefaultInterpolation=wg;Cp.prototype.InterpolantFactoryMethodLinear=void 0;Cp.prototype.InterpolantFactoryMethodSmooth=void 0;class uf extends nc{}uf.prototype.ValueTypeName="vector";class mp{constructor(e="",t=-1,r=[],i=RA){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Aa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Ate(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(nc.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=j5(l);l=cM(l,1,u),c=cM(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new cf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=i[h];d||(i[h]=d=[]),d.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,d,m,g,v){if(m.length!==0){const w=[],_=[];$R(m,w,_,g),w.length!==0&&v.push(new h(d,w,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let v=0;v<d[g].morphTargets.length;v++)m[d[g].morphTargets[v]]=-1;for(const v in m){const w=[],_=[];for(let A=0;A!==d[g].morphTargets.length;++A){const S=d[g];w.push(S.time),_.push(S.morphTarget===v?1:0)}i.push(new cf(".morphTargetInfluence["+v+"]",w,_))}l=m.length*o}else{const m=".bones["+t[h].name+"]";r(uf,m+".position",d,"pos",i),r(Vu,m+".quaternion",d,"rot",i),r(uf,m+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function bte(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cf;case"vector":case"vector2":case"vector3":case"vector4":return uf;case"color":return qR;case"quaternion":return Vu;case"bool":case"boolean":return Sp;case"string":return Cp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Ate(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=bte(n.type);if(n.times===void 0){const t=[],r=[];$R(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Nu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ZA{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const $5=new ZA;class ss{constructor(e){this.manager=e!==void 0?e:$5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ss.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mu={};class Ste extends Error{constructor(e,t){super(e),this.response=t}}class Is extends ss{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Nu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Mu[e]!==void 0){Mu[e].push({onLoad:t,onProgress:r,onError:i});return}Mu[e]=[],Mu[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Mu[e],h=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=d?parseInt(d):0,g=m!==0;let v=0;const w=new ReadableStream({start(_){A();function A(){h.read().then(({done:S,value:R})=>{if(S)_.close();else{v+=R.byteLength;const B=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let I=0,N=u.length;I<N;I++){const U=u[I];U.onProgress&&U.onProgress(B)}_.enqueue(R),A()}},S=>{_.error(S)})}}});return new Response(w)}else throw new Ste(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(d);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{Nu.add(e,c);const u=Mu[e];delete Mu[e];for(let h=0,d=u.length;h<d;h++){const m=u[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Mu[e];if(u===void 0)throw this.manager.itemError(e),c;delete Mu[e];for(let h=0,d=u.length;h<d;h++){const m=u[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Cte extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Is(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=mp.parse(e[r]);t.push(i)}return t}}class Tte extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new NA,l=new Is(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(d){const m=s.parse(d,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Er),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+v]),o[g].format=d.format,o[g].width=d.width,o[g].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Er),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Lx extends ss{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Nu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Rx("img");function l(){u(),Nu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class X5 extends ss{constructor(e){super(e)}load(e,t,r,i){const s=new yv;s.colorSpace=Xr;const o=new Lx(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class YR extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Xl,a=new Is(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ti,o.wrapT=c.wrapT!==void 0?c.wrapT:Ti,o.magFilter=c.magFilter!==void 0?c.magFilter:Er,o.minFilter=c.minFilter!==void 0?c.minFilter:Er,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=el),c.mipmapCount===1&&(o.minFilter=Er),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class KR extends ss{constructor(e){super(e)}load(e,t,r,i){const s=new Pr,o=new Lx(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class _f extends cr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ut(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class q5 extends _f{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ut(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const uT=new Zt,CL=new fe,TL=new fe;class JR{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ht(512,512),this.map=null,this.mapPass=null,this.matrix=new Zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _v,this._frameExtents=new ht(1,1),this._viewportCount=1,this._viewports=[new dr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;CL.setFromMatrixPosition(e.matrixWorld),t.position.copy(CL),TL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(TL),t.updateMatrixWorld(),uT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(uT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ete extends JR{constructor(){super(new ui(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Ag*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QA extends _f{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Ete}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const EL=new Zt,p0=new fe,hT=new fe;class Mte extends JR{constructor(){super(new ui(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ht(4,2),this._viewportCount=6,this._viewports=[new dr(2,1,1,1),new dr(0,1,1,1),new dr(3,1,1,1),new dr(1,1,1,1),new dr(3,0,1,1),new dr(1,0,1,1)],this._cubeDirections=[new fe(1,0,0),new fe(-1,0,0),new fe(0,0,1),new fe(0,0,-1),new fe(0,1,0),new fe(0,-1,0)],this._cubeUps=[new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,0,1),new fe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),p0.setFromMatrixPosition(e.matrixWorld),r.position.copy(p0),hT.copy(r.position),hT.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(hT),r.updateMatrixWorld(),i.makeTranslation(-p0.x,-p0.y,-p0.z),EL.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EL)}}class Dx extends _f{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Mte}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class tl extends gv{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Rte extends JR{constructor(){super(new tl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class eS extends _f{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new Rte}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ZR extends _f{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Y5 extends _f{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class K5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new fe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class J5 extends _f{constructor(e=new K5,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class tS extends ss{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Is(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ut().setHex(o.value);break;case"v2":i.uniforms[s].value=new ht().fromArray(o.value);break;case"v3":i.uniforms[s].value=new fe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new dr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Yn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Zt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ht().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ht().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return tS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:D5,SpriteMaterial:IR,RawShaderMaterial:F5,ShaderMaterial:oa,PointsMaterial:FA,MeshPhysicalMaterial:cl,MeshStandardMaterial:Cv,MeshPhongMaterial:rx,MeshToonMaterial:N5,MeshNormalMaterial:O5,MeshLambertMaterial:GR,MeshDepthMaterial:VR,MeshDistanceMaterial:WR,MeshBasicMaterial:ta,MeshMatcapMaterial:U5,LineDashedMaterial:z5,LineBasicMaterial:Ys,Material:vs};return new t[e]}}class zu{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Z5 extends Vn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Q5 extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Is(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,g){if(t[g]!==void 0)return t[g];const w=m.interleavedBuffers[g],_=s(m,w.buffer),A=Wm(w.type,_),S=new vv(A,w.stride);return S.uuid=w.uuid,t[g]=S,S}function s(m,g){if(r[g]!==void 0)return r[g];const w=m.arrayBuffers[g],_=new Uint32Array(w).buffer;return r[g]=_,_}const o=e.isInstancedBufferGeometry?new Z5:new Vn,a=e.data.index;if(a!==void 0){const m=Wm(a.type,a.array);o.setIndex(new Mr(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const w=i(e.data,g.data);v=new lf(w,g.itemSize,g.offset,g.normalized)}else{const w=Wm(g.type,g.array),_=g.isInstancedBufferAttribute?dp:Mr;v=new _(w,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),o.setAttribute(m,v)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],v=[];for(let w=0,_=g.length;w<_;w++){const A=g[w];let S;if(A.isInterleavedBufferAttribute){const R=i(e.data,A.data);S=new lf(R,A.itemSize,A.offset,A.normalized)}else{const R=Wm(A.type,A.array);S=new Mr(R,A.itemSize,A.normalized)}A.name!==void 0&&(S.name=A.name),v.push(S)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,g=h.length;m!==g;++m){const v=h[m];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new fe;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new Xs(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Pte extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?zu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Is(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?zu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Is(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Zd().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Jg().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new Q5;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in SL?a=SL[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new tS;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=mp.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:Wm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ZA(t);s=new Lx(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],d=h.url;if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const w=d[g],_=a(w);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new Xl(_.data,_.width,_.height)))}i[h.uuid]=new Dd(m)}else{const m=a(h.url);i[h.uuid]=new Dd(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Wm(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Lx(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,d=c.length;h<d;h++){const m=c[h],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Xl(g.data,g.width,g.height)))}r[l.uuid]=new Dd(u)}else{const u=await s(l.url);r[l.uuid]=new Dd(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new yv,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Xl:u=new Pr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,kte)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],ML),u.wrapT=r(a.wrap[1],ML)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,RL)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,RL)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const w=d[g];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),m.push(r[w])}return m}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function c(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let u,h;switch(e.type){case"Scene":o=new xv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ut(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new LA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new IA(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ui(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new tl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ZR(e.color,e.intensity);break;case"DirectionalLight":o=new eS(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Dx(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Y5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new QA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new q5(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new J5().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new DA(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new di(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const d=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new LR(u,h,d),o.instanceMatrix=new dp(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new dp(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),h=l(e.material),o=new S5(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const w=new po;w.min.fromArray(v.boxMin),w.max.fromArray(v.boxMax);const _=new Xs;return _.radius=v.sphereRadius,_.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:w,sphereInitialized:v.sphereInitialized,sphere:_}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new A5;break;case"Line":o=new Gc(a(e.geometry),l(e.material));break;case"LineLoop":o=new DR(a(e.geometry),l(e.material));break;case"LineSegments":o=new tc(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new FR(a(e.geometry),l(e.material));break;case"Sprite":o=new b5(l(e.material));break;case"Group":o=new Wl;break;case"Bone":o=new Cg;break;default:o=new cr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const g=d[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const g=d[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new cr}})}}const kte={UVMapping:of,CubeReflectionMapping:Uc,CubeRefractionMapping:af,EquirectangularReflectionMapping:up,EquirectangularRefractionMapping:Sx,CubeUVReflectionMapping:Kg},ML={RepeatWrapping:zc,ClampToEdgeWrapping:Ti,MirroredRepeatWrapping:vg},RL={NearestFilter:Bs,NearestMipmapNearestFilter:bA,NearestMipmapLinearFilter:Bd,LinearFilter:Er,LinearMipmapNearestFilter:rg,LinearMipmapLinearFilter:el};class ez extends ss{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Nu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Nu.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Nu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Nu.add(e,l),s.manager.itemStart(e)}}let y_;class QR{static getContext(){return y_===void 0&&(y_=new(window.AudioContext||window.webkitAudioContext)),y_}static setContext(e){y_=e}}class Bte extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Is(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);QR.getContext().decodeAudioData(c,function(h){t(h)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const PL=new Zt,kL=new Zt,hd=new Zt;class Ite{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ui,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ui,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hd.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Kd*t.fov*.5)/t.zoom;let a,l;kL.elements[12]=-i,PL.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,hd.elements[0]=2*t.near/(l-a),hd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(hd),a=-o*t.aspect-s,l=o*t.aspect-s,hd.elements[0]=2*t.near/(l-a),hd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(hd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(kL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PL)}}class tz extends ui{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class eP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=BL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=BL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function BL(){return performance.now()}const fd=new fe,IL=new ri,Lte=new fe,dd=new fe;class Dte extends cr{constructor(){super(),this.type="AudioListener",this.context=QR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fd,IL,Lte),dd.set(0,0,-1).applyQuaternion(IL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fd.x,i),t.positionY.linearRampToValueAtTime(fd.y,i),t.positionZ.linearRampToValueAtTime(fd.z,i),t.forwardX.linearRampToValueAtTime(dd.x,i),t.forwardY.linearRampToValueAtTime(dd.y,i),t.forwardZ.linearRampToValueAtTime(dd.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(fd.x,fd.y,fd.z),t.setOrientation(dd.x,dd.y,dd.z,r.x,r.y,r.z)}}let nz=class extends cr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const pd=new fe,LL=new ri,Fte=new fe,md=new fe;class Nte extends nz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(pd,LL,Fte),md.set(0,0,1).applyQuaternion(LL);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(pd.x,r),t.positionY.linearRampToValueAtTime(pd.y,r),t.positionZ.linearRampToValueAtTime(pd.z,r),t.orientationX.linearRampToValueAtTime(md.x,r),t.orientationY.linearRampToValueAtTime(md.y,r),t.orientationZ.linearRampToValueAtTime(md.z,r)}else t.setPosition(pd.x,pd.y,pd.z),t.setOrientation(md.x,md.y,md.z)}}class Ote{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class rz{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){ri.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;ri.multiplyQuaternionsFlat(e,o,e,t,e,r),ri.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const tP="\\[\\]\\.:\\/",Ute=new RegExp("["+tP+"]","g"),nP="[^"+tP+"]",zte="[^"+tP.replace("\\.","")+"]",Hte=/((?:WC+[\/:])*)/.source.replace("WC",nP),jte=/(WCOD+)?/.source.replace("WCOD",zte),Gte=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nP),Vte=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nP),Wte=new RegExp("^"+Hte+jte+Gte+Vte+"$"),$te=["material","materials","bones","map"];class Xte{constructor(e,t,r){const i=r||fr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class fr{constructor(e,t,r){this.path=t,this.parsedPath=r||fr.parseTrackName(t),this.node=fr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new fr.Composite(e,t,r):new fr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ute,"")}static parseTrackName(e){const t=Wte.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);$te.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=fr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fr.Composite=Xte;fr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fr.prototype.GetterByBindingType=[fr.prototype._getValue_direct,fr.prototype._getValue_array,fr.prototype._getValue_arrayElement,fr.prototype._getValue_toArray];fr.prototype.SetterByBindingTypeAndVersioning=[[fr.prototype._setValue_direct,fr.prototype._setValue_direct_setNeedsUpdate,fr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_array,fr.prototype._setValue_array_setNeedsUpdate,fr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_arrayElement,fr.prototype._setValue_arrayElement_setNeedsUpdate,fr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_fromArray,fr.prototype._setValue_fromArray_setNeedsUpdate,fr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qte{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Aa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],m=d.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(d);for(let v=0,w=o;v!==w;++v)s[v].push(new fr(d,r[v],i[v]))}else if(g<c){a=e[g];const v=--c,w=e[v];t[w.uuid]=g,e[g]=w,t[m]=v,e[v]=d;for(let _=0,A=o;_!==A;++_){const S=s[_],R=S[v];let B=S[g];S[g]=R,B===void 0&&(B=new fr(d,r[_],i[_])),S[v]=B}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,d=e[h];t[d.uuid]=u,e[u]=d,t[c]=h,e[h]=l;for(let m=0,g=i;m!==g;++m){const v=r[m],w=v[h],_=v[u];v[u]=w,v[h]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const d=--s,m=e[d],g=--o,v=e[g];t[m.uuid]=h,e[h]=m,t[v.uuid]=d,e[d]=v,e.pop();for(let w=0,_=i;w!==_;++w){const A=r[w],S=A[d],R=A[g];A[h]=S,A[d]=R,A.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let g=0,v=i;g!==v;++g){const w=r[g];w[h]=w[d],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let d=u,m=l.length;d!==m;++d){const g=l[d];h[d]=new fr(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class iz{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Id,endingEnd:Id};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=TR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case ER:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case RA:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===n5;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===CR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Ld,i.endingEnd=Ld):(e?i.endingStart=this.zeroSlopeAtStart?Ld:Id:i.endingStart=Cx,t?i.endingEnd=this.zeroSlopeAtEnd?Ld:Id:i.endingEnd=Cx)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Yte=new Float32Array(1);class sz extends Xc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const d=i[h],m=d.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;g=new rz(fr.create(r,m,v),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[h]=g}a[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new XR(new Float32Array(2),new Float32Array(2),1,Yte),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?mp.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=RA),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new iz(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?mp.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Kte extends PA{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new kA(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Jte extends PA{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new mv(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class rP{constructor(e){this.value=e}clone(){return new rP(this.value.clone===void 0?this.value:this.value.clone())}}let Zte=0;class Qte extends Xc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Zte++}),this.name="",this.usage=Ex,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class ene extends vv{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class tne{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const DL=new Zt;class iP{constructor(e,t,r=0,i=1/0){this.ray=new bp(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Jd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return DL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(DL),this}intersectObject(e,t=!0,r=[]){return uM(e,this,r,t),r.sort(FL),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)uM(e[i],this,r,t);return r.sort(FL),r}}function FL(n,e){return n.distance-e.distance}function uM(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)uM(s[o],e,t,!0)}}class hM{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Kn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Kn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class nne{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class sP{constructor(e,t,r,i){sP.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const NL=new ht;class rne{constructor(e=new ht(1/0,1/0),t=new ht(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=NL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,NL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const OL=new fe,x_=new fe;class ine{constructor(e=new fe,t=new fe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){OL.subVectors(e,this.start),x_.subVectors(this.end,this.start);const r=x_.dot(x_);let s=x_.dot(OL)/r;return t&&(s=Kn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const UL=new fe;class sne extends cr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Vn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new rn(i,3));const s=new Ys({fog:!1,toneMapped:!1});this.cone=new tc(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),UL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(UL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const jh=new fe,v_=new Zt,fT=new Zt;class one extends tc{constructor(e){const t=oz(e),r=new Vn,i=[],s=[],o=new Ut(0,0,1),a=new Ut(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new rn(i,3)),r.setAttribute("color",new rn(s,3));const l=new Ys({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");fT.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(v_.multiplyMatrices(fT,a.matrixWorld),jh.setFromMatrixPosition(v_),i.setXYZ(o,jh.x,jh.y,jh.z),v_.multiplyMatrices(fT,a.parent.matrixWorld),jh.setFromMatrixPosition(v_),i.setXYZ(o+1,jh.x,jh.y,jh.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function oz(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,oz(n.children[t]));return e}class ane extends di{constructor(e,t,r){const i=new Sv(t,4,2),s=new ta({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const lne=new fe,zL=new Ut,HL=new Ut;class cne extends cr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Av(t);i.rotateY(Math.PI*.5),this.material=new ta({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Mr(o,3)),this.add(new di(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");zL.copy(this.light.color),HL.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?zL:HL;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(lne.setFromMatrixPosition(this.light.matrixWorld).negate())}}class une extends tc{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ut(r),i=new Ut(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,m=0,g=-a;d<=t;d++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=d===s?r:i;v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3}const u=new Vn;u.setAttribute("position",new rn(l,3)),u.setAttribute("color",new rn(c,3));const h=new Ys({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class hne extends tc{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Ut(s),o=new Ut(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),m=Math.sin(d)*e,g=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,g);const v=h&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<r;h++){const d=h&1?s:o,m=e-e/r*h;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),w=Math.sin(v)*m,_=Math.cos(v)*m;a.push(w,0,_),l.push(d.r,d.g,d.b),v=(g+1)/i*(Math.PI*2),w=Math.sin(v)*m,_=Math.cos(v)*m,a.push(w,0,_),l.push(d.r,d.g,d.b)}}const c=new Vn;c.setAttribute("position",new rn(a,3)),c.setAttribute("color",new rn(l,3));const u=new Ys({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const jL=new fe,__=new fe,GL=new fe;class fne extends cr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Vn;i.setAttribute("position",new rn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ys({fog:!1,toneMapped:!1});this.lightPlane=new Gc(i,s),this.add(this.lightPlane),i=new Vn,i.setAttribute("position",new rn([0,0,0,0,0,1],3)),this.targetLine=new Gc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),jL.setFromMatrixPosition(this.light.matrixWorld),__.setFromMatrixPosition(this.light.target.matrixWorld),GL.subVectors(__,jL),this.lightPlane.lookAt(__),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(__),this.targetLine.scale.z=GL.length()}}const w_=new fe,Di=new gv;class dne extends tc{constructor(e){const t=new Vn,r=new Ys({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new rn(i,3)),t.setAttribute("color",new rn(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ut(16755200),u=new Ut(16711680),h=new Ut(43775),d=new Ut(16777215),m=new Ut(3355443);this.setColors(c,u,h,d,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Di.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Vl?-1:0;ji("c",t,e,Di,0,0,s),ji("t",t,e,Di,0,0,1),ji("n1",t,e,Di,-1,-1,s),ji("n2",t,e,Di,r,-1,s),ji("n3",t,e,Di,-1,i,s),ji("n4",t,e,Di,r,i,s),ji("f1",t,e,Di,-1,-1,1),ji("f2",t,e,Di,r,-1,1),ji("f3",t,e,Di,-1,i,1),ji("f4",t,e,Di,r,i,1),ji("u1",t,e,Di,r*.7,i*1.1,s),ji("u2",t,e,Di,-1*.7,i*1.1,s),ji("u3",t,e,Di,0,i*2,s),ji("cf1",t,e,Di,-1,0,1),ji("cf2",t,e,Di,r,0,1),ji("cf3",t,e,Di,0,-1,1),ji("cf4",t,e,Di,0,i,1),ji("cn1",t,e,Di,-1,0,s),ji("cn2",t,e,Di,r,0,s),ji("cn3",t,e,Di,0,-1,s),ji("cn4",t,e,Di,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ji(n,e,t,r,i,s,o){w_.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],w_.x,w_.y,w_.z)}}const b_=new po;class pne extends tc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Vn;s.setIndex(new Mr(r,1)),s.setAttribute("position",new Mr(i,3)),super(s,new Ys({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&b_.setFromObject(this.object),b_.isEmpty())return;const t=b_.min,r=b_.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mne extends tc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Vn;s.setIndex(new Mr(r,1)),s.setAttribute("position",new rn(i,3)),super(s,new Ys({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class gne extends Gc{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Vn;o.setAttribute("position",new rn(s,3)),o.computeBoundingSphere(),super(o,new Ys({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Vn;l.setAttribute("position",new rn(a,3)),l.computeBoundingSphere(),this.add(new di(l,new ta({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const VL=new fe;let A_,dT;class yne extends cr{constructor(e=new fe(0,0,1),t=new fe(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",A_===void 0&&(A_=new Vn,A_.setAttribute("position",new rn([0,0,0,0,1,0],3)),dT=new Zg(0,.5,1,5,1),dT.translate(0,-.5,0)),this.position.copy(t),this.line=new Gc(A_,new Ys({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new di(dT,new ta({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{VL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(VL,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class xne extends tc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Vn;i.setAttribute("position",new rn(t,3)),i.setAttribute("color",new rn(r,3));const s=new Ys({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Ut,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vne{constructor(){this.type="ShapePath",this.color=new Ut,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Px,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const A=[];for(let S=0,R=_.length;S<R;S++){const B=_[S],I=new Zd;I.curves=B.curves,A.push(I)}return A}function r(_,A){const S=A.length;let R=!1;for(let B=S-1,I=0;I<S;B=I++){let N=A[B],U=A[I],O=U.x-N.x,P=U.y-N.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(N=A[I],O=-O,U=A[B],P=-P),_.y<N.y||_.y>U.y)continue;if(_.y===N.y){if(_.x===N.x)return!0}else{const F=P*(_.x-N.x)-O*(_.y-N.y);if(F===0)return!0;if(F<0)continue;R=!R}}else{if(_.y!==N.y)continue;if(U.x<=_.x&&_.x<=N.x||N.x<=_.x&&_.x<=U.x)return!0}}return R}const i=ql.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Zd,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const h=[],d=[];let m=[],g=0,v;d[g]=void 0,m[g]=[];for(let _=0,A=s.length;_<A;_++)a=s[_],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Zd,p:v},d[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!d[0])return t(s);if(d.length>1){let _=!1,A=0;for(let S=0,R=d.length;S<R;S++)h[S]=[];for(let S=0,R=d.length;S<R;S++){const B=m[S];for(let I=0;I<B.length;I++){const N=B[I];let U=!0;for(let O=0;O<d.length;O++)r(N.p,d[O].p)&&(S!==O&&A++,U?(U=!1,h[O].push(N)):_=!0);U&&h[S].push(N)}}A>0&&_===!1&&(m=h)}let w;for(let _=0,A=d.length;_<A;_++){l=d[_].s,c.push(l),w=m[_];for(let S=0,R=w.length;S<R;S++)l.holes.push(w[S].h)}return c}}class _ne extends Xc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function wne(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function bne(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Ane(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function fM(n,e,t,r){const i=Sne(r);switch(t){case vR:return n*e;case wR:return n*e;case bR:return n*e*2;case dv:return n*e/i.components*i.byteLength;case pv:return n*e/i.components*i.byteLength;case AR:return n*e*2/i.components*i.byteLength;case EA:return n*e*2/i.components*i.byteLength;case _R:return n*e*3/i.components*i.byteLength;case $i:return n*e*4/i.components*i.byteLength;case MA:return n*e*4/i.components*i.byteLength;case Y0:case K0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case J0:case Z0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case zw:case jw:return Math.max(n,16)*Math.max(e,8)/4;case Uw:case Hw:return Math.max(n,8)*Math.max(e,8)/2;case Gw:case Vw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ww:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $w:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Xw:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case qw:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Yw:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Kw:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Jw:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Zw:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Qw:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case eb:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case tb:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case nb:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case rb:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ib:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case sb:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Q0:case ob:case ab:return Math.ceil(n/4)*Math.ceil(e/4)*16;case SR:case lb:return Math.ceil(n/4)*Math.ceil(e/4)*8;case cb:case ub:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Sne(n){switch(n){case sa:case AA:return{byteLength:1,components:1};case _g:case SA:case xs:return{byteLength:2,components:1};case CA:case TA:return{byteLength:2,components:4};case Hc:case fv:case xi:return{byteLength:4,components:1};case xR:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Cne={contain:wne,cover:bne,fill:Ane,getByteLength:fM};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uv);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function az(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Tne(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,u);else{h.sort((m,g)=>m.start-g.start);let d=0;for(let m=1;m<h.length;m++){const g=h[d],v=h[m];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++d,h[d]=v)}h.length=d+1;for(let m=0,g=h.length;m<g;m++){const v=h[m];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var Ene=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Mne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Rne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Pne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kne=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Bne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ine=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Lne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Dne=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Fne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Nne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,One=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Une=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Hne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Gne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Vne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Wne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$ne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Xne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Yne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Kne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Jne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Zne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ere=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,tre=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,nre=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,rre="gl_FragColor = linearToOutputTexel( gl_FragColor );",ire=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,sre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ore=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,are=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,cre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ure=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,hre=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fre=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,dre=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,pre=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,mre=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,gre=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,yre=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xre=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vre=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_re=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wre=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bre=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Are=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Sre=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Cre=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Tre=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Ere=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Mre=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Rre=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Pre=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kre=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Bre=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Ire=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Lre=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Dre=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Fre=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Nre=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ore=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ure=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,zre=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Hre=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,jre=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Gre=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Vre=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Wre=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$re=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Xre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qre=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Yre=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Kre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Jre=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Zre=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qre=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,eie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,tie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,nie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,rie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,iie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,oie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,aie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,lie=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,cie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,uie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,hie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,fie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,die=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,pie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,yie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,vie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_ie=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,wie=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Aie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Sie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Cie=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Tie=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Eie=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Mie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Rie=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Iie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Lie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Die=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Nie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Oie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Uie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Hie=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jie=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Wie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$ie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Xie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Jie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ese=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,tse=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nse=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rse=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ise=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sse=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ar={alphahash_fragment:Ene,alphahash_pars_fragment:Mne,alphamap_fragment:Rne,alphamap_pars_fragment:Pne,alphatest_fragment:kne,alphatest_pars_fragment:Bne,aomap_fragment:Ine,aomap_pars_fragment:Lne,batching_pars_vertex:Dne,batching_vertex:Fne,begin_vertex:Nne,beginnormal_vertex:One,bsdfs:Une,iridescence_fragment:zne,bumpmap_pars_fragment:Hne,clipping_planes_fragment:jne,clipping_planes_pars_fragment:Gne,clipping_planes_pars_vertex:Vne,clipping_planes_vertex:Wne,color_fragment:$ne,color_pars_fragment:Xne,color_pars_vertex:qne,color_vertex:Yne,common:Kne,cube_uv_reflection_fragment:Jne,defaultnormal_vertex:Zne,displacementmap_pars_vertex:Qne,displacementmap_vertex:ere,emissivemap_fragment:tre,emissivemap_pars_fragment:nre,colorspace_fragment:rre,colorspace_pars_fragment:ire,envmap_fragment:sre,envmap_common_pars_fragment:ore,envmap_pars_fragment:are,envmap_pars_vertex:lre,envmap_physical_pars_fragment:vre,envmap_vertex:cre,fog_vertex:ure,fog_pars_vertex:hre,fog_fragment:fre,fog_pars_fragment:dre,gradientmap_pars_fragment:pre,lightmap_pars_fragment:mre,lights_lambert_fragment:gre,lights_lambert_pars_fragment:yre,lights_pars_begin:xre,lights_toon_fragment:_re,lights_toon_pars_fragment:wre,lights_phong_fragment:bre,lights_phong_pars_fragment:Are,lights_physical_fragment:Sre,lights_physical_pars_fragment:Cre,lights_fragment_begin:Tre,lights_fragment_maps:Ere,lights_fragment_end:Mre,logdepthbuf_fragment:Rre,logdepthbuf_pars_fragment:Pre,logdepthbuf_pars_vertex:kre,logdepthbuf_vertex:Bre,map_fragment:Ire,map_pars_fragment:Lre,map_particle_fragment:Dre,map_particle_pars_fragment:Fre,metalnessmap_fragment:Nre,metalnessmap_pars_fragment:Ore,morphinstance_vertex:Ure,morphcolor_vertex:zre,morphnormal_vertex:Hre,morphtarget_pars_vertex:jre,morphtarget_vertex:Gre,normal_fragment_begin:Vre,normal_fragment_maps:Wre,normal_pars_fragment:$re,normal_pars_vertex:Xre,normal_vertex:qre,normalmap_pars_fragment:Yre,clearcoat_normal_fragment_begin:Kre,clearcoat_normal_fragment_maps:Jre,clearcoat_pars_fragment:Zre,iridescence_pars_fragment:Qre,opaque_fragment:eie,packing:tie,premultiplied_alpha_fragment:nie,project_vertex:rie,dithering_fragment:iie,dithering_pars_fragment:sie,roughnessmap_fragment:oie,roughnessmap_pars_fragment:aie,shadowmap_pars_fragment:lie,shadowmap_pars_vertex:cie,shadowmap_vertex:uie,shadowmask_pars_fragment:hie,skinbase_vertex:fie,skinning_pars_vertex:die,skinning_vertex:pie,skinnormal_vertex:mie,specularmap_fragment:gie,specularmap_pars_fragment:yie,tonemapping_fragment:xie,tonemapping_pars_fragment:vie,transmission_fragment:_ie,transmission_pars_fragment:wie,uv_pars_fragment:bie,uv_pars_vertex:Aie,uv_vertex:Sie,worldpos_vertex:Cie,background_vert:Tie,background_frag:Eie,backgroundCube_vert:Mie,backgroundCube_frag:Rie,cube_vert:Pie,cube_frag:kie,depth_vert:Bie,depth_frag:Iie,distanceRGBA_vert:Lie,distanceRGBA_frag:Die,equirect_vert:Fie,equirect_frag:Nie,linedashed_vert:Oie,linedashed_frag:Uie,meshbasic_vert:zie,meshbasic_frag:Hie,meshlambert_vert:jie,meshlambert_frag:Gie,meshmatcap_vert:Vie,meshmatcap_frag:Wie,meshnormal_vert:$ie,meshnormal_frag:Xie,meshphong_vert:qie,meshphong_frag:Yie,meshphysical_vert:Kie,meshphysical_frag:Jie,meshtoon_vert:Zie,meshtoon_frag:Qie,points_vert:ese,points_frag:tse,shadow_vert:nse,shadow_frag:rse,sprite_vert:ise,sprite_frag:sse},Kt={common:{diffuse:{value:new Ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yn},alphaMap:{value:null},alphaMapTransform:{value:new Yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yn}},envmap:{envMap:{value:null},envMapRotation:{value:new Yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yn},normalScale:{value:new ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yn},alphaTest:{value:0},uvTransform:{value:new Yn}},sprite:{diffuse:{value:new Ut(16777215)},opacity:{value:1},center:{value:new ht(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yn},alphaMap:{value:null},alphaMapTransform:{value:new Yn},alphaTest:{value:0}}},jl={basic:{uniforms:Mo([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.fog]),vertexShader:ar.meshbasic_vert,fragmentShader:ar.meshbasic_frag},lambert:{uniforms:Mo([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:ar.meshlambert_vert,fragmentShader:ar.meshlambert_frag},phong:{uniforms:Mo([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Ut(0)},specular:{value:new Ut(1118481)},shininess:{value:30}}]),vertexShader:ar.meshphong_vert,fragmentShader:ar.meshphong_frag},standard:{uniforms:Mo([Kt.common,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.roughnessmap,Kt.metalnessmap,Kt.fog,Kt.lights,{emissive:{value:new Ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ar.meshphysical_vert,fragmentShader:ar.meshphysical_frag},toon:{uniforms:Mo([Kt.common,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.gradientmap,Kt.fog,Kt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:ar.meshtoon_vert,fragmentShader:ar.meshtoon_frag},matcap:{uniforms:Mo([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,{matcap:{value:null}}]),vertexShader:ar.meshmatcap_vert,fragmentShader:ar.meshmatcap_frag},points:{uniforms:Mo([Kt.points,Kt.fog]),vertexShader:ar.points_vert,fragmentShader:ar.points_frag},dashed:{uniforms:Mo([Kt.common,Kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ar.linedashed_vert,fragmentShader:ar.linedashed_frag},depth:{uniforms:Mo([Kt.common,Kt.displacementmap]),vertexShader:ar.depth_vert,fragmentShader:ar.depth_frag},normal:{uniforms:Mo([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,{opacity:{value:1}}]),vertexShader:ar.meshnormal_vert,fragmentShader:ar.meshnormal_frag},sprite:{uniforms:Mo([Kt.sprite,Kt.fog]),vertexShader:ar.sprite_vert,fragmentShader:ar.sprite_frag},background:{uniforms:{uvTransform:{value:new Yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ar.background_vert,fragmentShader:ar.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Yn}},vertexShader:ar.backgroundCube_vert,fragmentShader:ar.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ar.cube_vert,fragmentShader:ar.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ar.equirect_vert,fragmentShader:ar.equirect_frag},distanceRGBA:{uniforms:Mo([Kt.common,Kt.displacementmap,{referencePosition:{value:new fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ar.distanceRGBA_vert,fragmentShader:ar.distanceRGBA_frag},shadow:{uniforms:Mo([Kt.lights,Kt.fog,{color:{value:new Ut(0)},opacity:{value:1}}]),vertexShader:ar.shadow_vert,fragmentShader:ar.shadow_frag}};jl.physical={uniforms:Mo([jl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yn},clearcoatNormalScale:{value:new ht(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yn},sheen:{value:0},sheenColor:{value:new Ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yn},transmissionSamplerSize:{value:new ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yn},attenuationDistance:{value:0},attenuationColor:{value:new Ut(0)},specularColor:{value:new Ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yn},anisotropyVector:{value:new ht},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yn}}]),vertexShader:ar.meshphysical_vert,fragmentShader:ar.meshphysical_frag};const S_={r:0,b:0,g:0},gd=new rs,ose=new Zt;function ase(n,e,t,r,i,s,o){const a=new Ut(0);let l=s===!0?0:1,c,u,h=null,d=0,m=null;function g(S){let R=S.isScene===!0?S.background:null;return R&&R.isTexture&&(R=(S.backgroundBlurriness>0?t:e).get(R)),R}function v(S){let R=!1;const B=g(S);B===null?_(a,l):B&&B.isColor&&(_(B,1),R=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?r.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||R)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(S,R){const B=g(R);B&&(B.isCubeTexture||B.mapping===Kg)?(u===void 0&&(u=new di(new Ap(1,1,1),new oa({name:"BackgroundCubeMaterial",uniforms:Sg(jl.backgroundCube.uniforms),vertexShader:jl.backgroundCube.vertexShader,fragmentShader:jl.backgroundCube.fragmentShader,side:Lo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,N,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),gd.copy(R.backgroundRotation),gd.x*=-1,gd.y*=-1,gd.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(gd.y*=-1,gd.z*=-1),u.material.uniforms.envMap.value=B,u.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(ose.makeRotationFromEuler(gd)),u.material.toneMapped=nr.getTransfer(B.colorSpace)!==jr,(h!==B||d!==B.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=B,d=B.version,m=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):B&&B.isTexture&&(c===void 0&&(c=new di(new vf(2,2),new oa({name:"BackgroundMaterial",uniforms:Sg(jl.background.uniforms),vertexShader:jl.background.vertexShader,fragmentShader:jl.background.fragmentShader,side:Oc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=B,c.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,c.material.toneMapped=nr.getTransfer(B.colorSpace)!==jr,B.matrixAutoUpdate===!0&&B.updateMatrix(),c.material.uniforms.uvTransform.value.copy(B.matrix),(h!==B||d!==B.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=B,d=B.version,m=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function _(S,R){S.getRGB(S_,x5(n)),r.buffers.color.setClear(S_.r,S_.g,S_.b,R,o)}function A(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(S,R=1){a.set(S),l=R,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,_(a,l)},render:v,addToRenderList:w,dispose:A}}function lse(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=d(null);let s=i,o=!1;function a(P,F,K,Q,Y){let ee=!1;const $=h(Q,K,F);s!==$&&(s=$,c(s.object)),ee=m(P,Q,K,Y),ee&&g(P,Q,K,Y),Y!==null&&e.update(Y,n.ELEMENT_ARRAY_BUFFER),(ee||o)&&(o=!1,R(P,F,K,Q),Y!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return n.createVertexArray()}function c(P){return n.bindVertexArray(P)}function u(P){return n.deleteVertexArray(P)}function h(P,F,K){const Q=K.wireframe===!0;let Y=r[P.id];Y===void 0&&(Y={},r[P.id]=Y);let ee=Y[F.id];ee===void 0&&(ee={},Y[F.id]=ee);let $=ee[Q];return $===void 0&&($=d(l()),ee[Q]=$),$}function d(P){const F=[],K=[],Q=[];for(let Y=0;Y<t;Y++)F[Y]=0,K[Y]=0,Q[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:K,attributeDivisors:Q,object:P,attributes:{},index:null}}function m(P,F,K,Q){const Y=s.attributes,ee=F.attributes;let $=0;const oe=K.getAttributes();for(const G in oe)if(oe[G].location>=0){const re=Y[G];let Z=ee[G];if(Z===void 0&&(G==="instanceMatrix"&&P.instanceMatrix&&(Z=P.instanceMatrix),G==="instanceColor"&&P.instanceColor&&(Z=P.instanceColor)),re===void 0||re.attribute!==Z||Z&&re.data!==Z.data)return!0;$++}return s.attributesNum!==$||s.index!==Q}function g(P,F,K,Q){const Y={},ee=F.attributes;let $=0;const oe=K.getAttributes();for(const G in oe)if(oe[G].location>=0){let re=ee[G];re===void 0&&(G==="instanceMatrix"&&P.instanceMatrix&&(re=P.instanceMatrix),G==="instanceColor"&&P.instanceColor&&(re=P.instanceColor));const Z={};Z.attribute=re,re&&re.data&&(Z.data=re.data),Y[G]=Z,$++}s.attributes=Y,s.attributesNum=$,s.index=Q}function v(){const P=s.newAttributes;for(let F=0,K=P.length;F<K;F++)P[F]=0}function w(P){_(P,0)}function _(P,F){const K=s.newAttributes,Q=s.enabledAttributes,Y=s.attributeDivisors;K[P]=1,Q[P]===0&&(n.enableVertexAttribArray(P),Q[P]=1),Y[P]!==F&&(n.vertexAttribDivisor(P,F),Y[P]=F)}function A(){const P=s.newAttributes,F=s.enabledAttributes;for(let K=0,Q=F.length;K<Q;K++)F[K]!==P[K]&&(n.disableVertexAttribArray(K),F[K]=0)}function S(P,F,K,Q,Y,ee,$){$===!0?n.vertexAttribIPointer(P,F,K,Y,ee):n.vertexAttribPointer(P,F,K,Q,Y,ee)}function R(P,F,K,Q){v();const Y=Q.attributes,ee=K.getAttributes(),$=F.defaultAttributeValues;for(const oe in ee){const G=ee[oe];if(G.location>=0){let te=Y[oe];if(te===void 0&&(oe==="instanceMatrix"&&P.instanceMatrix&&(te=P.instanceMatrix),oe==="instanceColor"&&P.instanceColor&&(te=P.instanceColor)),te!==void 0){const re=te.normalized,Z=te.itemSize,ne=e.get(te);if(ne===void 0)continue;const ce=ne.buffer,ye=ne.type,he=ne.bytesPerElement,Ce=ye===n.INT||ye===n.UNSIGNED_INT||te.gpuType===fv;if(te.isInterleavedBufferAttribute){const ke=te.data,Ue=ke.stride,Qe=te.offset;if(ke.isInstancedInterleavedBuffer){for(let Te=0;Te<G.locationSize;Te++)_(G.location+Te,ke.meshPerAttribute);P.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let Te=0;Te<G.locationSize;Te++)w(G.location+Te);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Te=0;Te<G.locationSize;Te++)S(G.location+Te,Z/G.locationSize,ye,re,Ue*he,(Qe+Z/G.locationSize*Te)*he,Ce)}else{if(te.isInstancedBufferAttribute){for(let ke=0;ke<G.locationSize;ke++)_(G.location+ke,te.meshPerAttribute);P.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let ke=0;ke<G.locationSize;ke++)w(G.location+ke);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let ke=0;ke<G.locationSize;ke++)S(G.location+ke,Z/G.locationSize,ye,re,Z*he,Z/G.locationSize*ke*he,Ce)}}else if($!==void 0){const re=$[oe];if(re!==void 0)switch(re.length){case 2:n.vertexAttrib2fv(G.location,re);break;case 3:n.vertexAttrib3fv(G.location,re);break;case 4:n.vertexAttrib4fv(G.location,re);break;default:n.vertexAttrib1fv(G.location,re)}}}}A()}function B(){U();for(const P in r){const F=r[P];for(const K in F){const Q=F[K];for(const Y in Q)u(Q[Y].object),delete Q[Y];delete F[K]}delete r[P]}}function I(P){if(r[P.id]===void 0)return;const F=r[P.id];for(const K in F){const Q=F[K];for(const Y in Q)u(Q[Y].object),delete Q[Y];delete F[K]}delete r[P.id]}function N(P){for(const F in r){const K=r[F];if(K[P.id]===void 0)continue;const Q=K[P.id];for(const Y in Q)u(Q[Y].object),delete Q[Y];delete K[P.id]}}function U(){O(),o=!0,s!==i&&(s=i,c(s.object))}function O(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:U,resetDefaultState:O,dispose:B,releaseStatesOfGeometry:I,releaseStatesOfProgram:N,initAttributes:v,enableAttribute:w,disableUnusedAttributes:A}}function cse(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(r,c,u,h),t.update(u,r,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,h);let m=0;for(let g=0;g<h;g++)m+=u[g];t.update(m,r,1)}function l(c,u,h,d){if(h===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)o(c[g],u[g],d[g]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,d,0,h);let g=0;for(let v=0;v<h;v++)g+=u[v]*d[v];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function use(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(N){return!(N!==$i&&r.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(N){const U=N===xs&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==sa&&r.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==xi&&!U)}function l(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),A=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),R=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),B=g>0,I=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:m,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:w,maxAttributes:_,maxVertexUniforms:A,maxVaryings:S,maxFragmentUniforms:R,vertexTextures:B,maxSamples:I}}function hse(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Lu,a=new Yn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const m=h.length!==0||d||r!==0||i;return i=d,r=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,m){const g=h.clippingPlanes,v=h.clipIntersection,w=h.clipShadows,_=n.get(h);if(!i||g===null||g.length===0||s&&!w)s?u(null):c();else{const A=s?0:r,S=A*4;let R=_.clippingState||null;l.value=R,R=u(g,d,S,m);for(let B=0;B!==S;++B)R[B]=t[B];_.clippingState=R,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,m,g){const v=h!==null?h.length:0;let w=null;if(v!==0){if(w=l.value,g!==!0||w===null){const _=m+v*4,A=d.matrixWorldInverse;a.getNormalMatrix(A),(w===null||w.length<_)&&(w=new Float32Array(_));for(let S=0,R=m;S!==v;++S,R+=4)o.copy(h[S]).applyMatrix4(A,a),o.normal.toArray(w,R),w[R+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,w}}function fse(n){let e=new WeakMap;function t(o,a){return a===up?o.mapping=Uc:a===Sx&&(o.mapping=af),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===up||a===Sx)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new BR(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Xm=4,WL=[.125,.215,.35,.446,.526,.582],Pd=20,pT=new tl,$L=new Ut;let mT=null,gT=0,yT=0,xT=!1;const Sd=(1+Math.sqrt(5))/2,Lm=1/Sd,XL=[new fe(-Sd,Lm,0),new fe(Sd,Lm,0),new fe(-Lm,0,Sd),new fe(Lm,0,Sd),new fe(0,Sd,-Lm),new fe(0,Sd,Lm),new fe(-1,1,-1),new fe(1,1,-1),new fe(-1,1,1),new fe(1,1,1)];class dM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){mT=this._renderer.getRenderTarget(),gT=this._renderer.getActiveCubeFace(),yT=this._renderer.getActiveMipmapLevel(),xT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=KL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=YL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mT,gT,yT),this._renderer.xr.enabled=xT,e.scissorTest=!1,C_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Uc||e.mapping===af?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mT=this._renderer.getRenderTarget(),gT=this._renderer.getActiveCubeFace(),yT=this._renderer.getActiveMipmapLevel(),xT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Er,minFilter:Er,generateMipmaps:!1,type:xs,format:$i,colorSpace:jc,depthBuffer:!1},i=qL(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qL(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dse(s)),this._blurMaterial=pse(s,e,t)}return i}_compileMaterial(e){const t=new di(this._lodPlanes[0],e);this._renderer.compile(t,pT)}_sceneToCubeUV(e,t,r,i){const a=new ui(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor($L),u.toneMapping=Ic,u.autoClear=!1;const m=new ta({name:"PMREM.Background",side:Lo,depthWrite:!1,depthTest:!1}),g=new di(new Ap,m);let v=!1;const w=e.background;w?w.isColor&&(m.color.copy(w),e.background=null,v=!0):(m.color.copy($L),v=!0);for(let _=0;_<6;_++){const A=_%3;A===0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):A===1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const S=this._cubeSize;C_(i,A*S,_>2?S:0,S,S),u.setRenderTarget(i),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=w}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Uc||e.mapping===af;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=KL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=YL());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new di(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;C_(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,pT)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=XL[(i-s-1)%XL.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new di(this._lodPlanes[i],c),d=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Pd-1),v=s/g,w=isFinite(s)?1+Math.floor(u*v):Pd;w>Pd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Pd}`);const _=[];let A=0;for(let N=0;N<Pd;++N){const U=N/v,O=Math.exp(-U*U/2);_.push(O),N===0?A+=O:N<w&&(A+=2*O)}for(let N=0;N<_.length;N++)_[N]=_[N]/A;d.envMap.value=e.texture,d.samples.value=w,d.weights.value=_,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:S}=this;d.dTheta.value=g,d.mipInt.value=S-r;const R=this._sizeLods[i],B=3*R*(i>S-Xm?i-S+Xm:0),I=4*(this._cubeSize-R);C_(t,B,I,3*R,2*R),l.setRenderTarget(t),l.render(h,pT)}}function dse(n){const e=[],t=[],r=[];let i=n;const s=n-Xm+1+WL.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Xm?l=WL[o-n+Xm-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,g=6,v=3,w=2,_=1,A=new Float32Array(v*g*m),S=new Float32Array(w*g*m),R=new Float32Array(_*g*m);for(let I=0;I<m;I++){const N=I%3*2/3-1,U=I>2?0:-1,O=[N,U,0,N+2/3,U,0,N+2/3,U+1,0,N,U,0,N+2/3,U+1,0,N,U+1,0];A.set(O,v*g*I),S.set(d,w*g*I);const P=[I,I,I,I,I,I];R.set(P,_*g*I)}const B=new Vn;B.setAttribute("position",new Mr(A,v)),B.setAttribute("uv",new Mr(S,w)),B.setAttribute("faceIndex",new Mr(R,_)),e.push(B),i>Xm&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function qL(n,e,t){const r=new Ca(n,e,t);return r.texture.mapping=Kg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function C_(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function pse(n,e,t){const r=new Float32Array(Pd),i=new fe(0,1,0);return new oa({name:"SphericalGaussianBlur",defines:{n:Pd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:oP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function YL(){return new oa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:oP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function KL(){return new oa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:oP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function oP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mse(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===up||l===Sx,u=l===Uc||l===af;if(c||u){let h=e.get(a);const d=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new dM(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(t===null&&(t=new dM(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function gse(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Hm("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function yse(n,e,t,r){const i={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",o),delete i[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const m in d)e.update(d[m],n.ARRAY_BUFFER)}function c(h){const d=[],m=h.index,g=h.attributes.position;let v=0;if(m!==null){const A=m.array;v=m.version;for(let S=0,R=A.length;S<R;S+=3){const B=A[S+0],I=A[S+1],N=A[S+2];d.push(B,I,I,N,N,B)}}else if(g!==void 0){const A=g.array;v=g.version;for(let S=0,R=A.length/3-1;S<R;S+=3){const B=S+0,I=S+1,N=S+2;d.push(B,I,I,N,N,B)}}else return;const w=new(p5(d)?kR:BA)(d,1);w.version=v;const _=s.get(h);_&&e.remove(_),s.set(h,w)}function u(h){const d=s.get(h);if(d){const m=h.index;m!==null&&d.version<m.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function xse(n,e,t){let r;function i(d){r=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function l(d,m){n.drawElements(r,m,s,d*o),t.update(m,r,1)}function c(d,m,g){g!==0&&(n.drawElementsInstanced(r,m,s,d*o,g),t.update(m,r,g))}function u(d,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,d,0,g);let w=0;for(let _=0;_<g;_++)w+=m[_];t.update(w,r,1)}function h(d,m,g,v){if(g===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let _=0;_<d.length;_++)c(d[_]/o,m[_],v[_]);else{w.multiDrawElementsInstancedWEBGL(r,m,0,s,d,0,v,0,g);let _=0;for(let A=0;A<g;A++)_+=m[A]*v[A];t.update(_,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function vse(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function _se(n,e,t){const r=new WeakMap,i=new dr;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let d=r.get(a);if(d===void 0||d.count!==h){let O=function(){N.dispose(),r.delete(a),a.removeEventListener("dispose",O)};d!==void 0&&d.texture.dispose();const m=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,w=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let S=0;m===!0&&(S=1),g===!0&&(S=2),v===!0&&(S=3);let R=a.attributes.position.count*S,B=1;R>e.maxTextureSize&&(B=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const I=new Float32Array(R*B*4*h),N=new mv(I,R,B,h);N.type=xi,N.needsUpdate=!0;const U=S*4;for(let P=0;P<h;P++){const F=w[P],K=_[P],Q=A[P],Y=R*B*4*P;for(let ee=0;ee<F.count;ee++){const $=ee*U;m===!0&&(i.fromBufferAttribute(F,ee),I[Y+$+0]=i.x,I[Y+$+1]=i.y,I[Y+$+2]=i.z,I[Y+$+3]=0),g===!0&&(i.fromBufferAttribute(K,ee),I[Y+$+4]=i.x,I[Y+$+5]=i.y,I[Y+$+6]=i.z,I[Y+$+7]=0),v===!0&&(i.fromBufferAttribute(Q,ee),I[Y+$+8]=i.x,I[Y+$+9]=i.y,I[Y+$+10]=i.z,I[Y+$+11]=Q.itemSize===4?i.w:1)}}d={count:h,texture:N,size:new ht(R,B)},r.set(a,d),a.addEventListener("dispose",O)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let v=0;v<c.length;v++)m+=c[v];const g=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",g),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function wse(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==c&&(d.update(),i.set(d,c))}return h}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const lz=new Pr,JL=new OA(1,1),cz=new mv,uz=new kA,hz=new yv,ZL=[],QL=[],eD=new Float32Array(16),tD=new Float32Array(9),nD=new Float32Array(4);function ey(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=ZL[i];if(s===void 0&&(s=new Float32Array(i),ZL[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function _s(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ws(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function nS(n,e){let t=QL[e];t===void 0&&(t=new Int32Array(e),QL[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function bse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Ase(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_s(t,e))return;n.uniform2fv(this.addr,e),ws(t,e)}}function Sse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(_s(t,e))return;n.uniform3fv(this.addr,e),ws(t,e)}}function Cse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_s(t,e))return;n.uniform4fv(this.addr,e),ws(t,e)}}function Tse(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_s(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ws(t,e)}else{if(_s(t,r))return;nD.set(r),n.uniformMatrix2fv(this.addr,!1,nD),ws(t,r)}}function Ese(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_s(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ws(t,e)}else{if(_s(t,r))return;tD.set(r),n.uniformMatrix3fv(this.addr,!1,tD),ws(t,r)}}function Mse(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_s(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ws(t,e)}else{if(_s(t,r))return;eD.set(r),n.uniformMatrix4fv(this.addr,!1,eD),ws(t,r)}}function Rse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Pse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_s(t,e))return;n.uniform2iv(this.addr,e),ws(t,e)}}function kse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_s(t,e))return;n.uniform3iv(this.addr,e),ws(t,e)}}function Bse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_s(t,e))return;n.uniform4iv(this.addr,e),ws(t,e)}}function Ise(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Lse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_s(t,e))return;n.uniform2uiv(this.addr,e),ws(t,e)}}function Dse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_s(t,e))return;n.uniform3uiv(this.addr,e),ws(t,e)}}function Fse(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_s(t,e))return;n.uniform4uiv(this.addr,e),ws(t,e)}}function Nse(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(JL.compareFunction=RR,s=JL):s=lz,t.setTexture2D(e||s,i)}function Ose(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||uz,i)}function Use(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||hz,i)}function zse(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||cz,i)}function Hse(n){switch(n){case 5126:return bse;case 35664:return Ase;case 35665:return Sse;case 35666:return Cse;case 35674:return Tse;case 35675:return Ese;case 35676:return Mse;case 5124:case 35670:return Rse;case 35667:case 35671:return Pse;case 35668:case 35672:return kse;case 35669:case 35673:return Bse;case 5125:return Ise;case 36294:return Lse;case 36295:return Dse;case 36296:return Fse;case 35678:case 36198:case 36298:case 36306:case 35682:return Nse;case 35679:case 36299:case 36307:return Ose;case 35680:case 36300:case 36308:case 36293:return Use;case 36289:case 36303:case 36311:case 36292:return zse}}function jse(n,e){n.uniform1fv(this.addr,e)}function Gse(n,e){const t=ey(e,this.size,2);n.uniform2fv(this.addr,t)}function Vse(n,e){const t=ey(e,this.size,3);n.uniform3fv(this.addr,t)}function Wse(n,e){const t=ey(e,this.size,4);n.uniform4fv(this.addr,t)}function $se(n,e){const t=ey(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Xse(n,e){const t=ey(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function qse(n,e){const t=ey(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Yse(n,e){n.uniform1iv(this.addr,e)}function Kse(n,e){n.uniform2iv(this.addr,e)}function Jse(n,e){n.uniform3iv(this.addr,e)}function Zse(n,e){n.uniform4iv(this.addr,e)}function Qse(n,e){n.uniform1uiv(this.addr,e)}function eoe(n,e){n.uniform2uiv(this.addr,e)}function toe(n,e){n.uniform3uiv(this.addr,e)}function noe(n,e){n.uniform4uiv(this.addr,e)}function roe(n,e,t){const r=this.cache,i=e.length,s=nS(t,i);_s(r,s)||(n.uniform1iv(this.addr,s),ws(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||lz,s[o])}function ioe(n,e,t){const r=this.cache,i=e.length,s=nS(t,i);_s(r,s)||(n.uniform1iv(this.addr,s),ws(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||uz,s[o])}function soe(n,e,t){const r=this.cache,i=e.length,s=nS(t,i);_s(r,s)||(n.uniform1iv(this.addr,s),ws(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||hz,s[o])}function ooe(n,e,t){const r=this.cache,i=e.length,s=nS(t,i);_s(r,s)||(n.uniform1iv(this.addr,s),ws(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||cz,s[o])}function aoe(n){switch(n){case 5126:return jse;case 35664:return Gse;case 35665:return Vse;case 35666:return Wse;case 35674:return $se;case 35675:return Xse;case 35676:return qse;case 5124:case 35670:return Yse;case 35667:case 35671:return Kse;case 35668:case 35672:return Jse;case 35669:case 35673:return Zse;case 5125:return Qse;case 36294:return eoe;case 36295:return toe;case 36296:return noe;case 35678:case 36198:case 36298:case 36306:case 35682:return roe;case 35679:case 36299:case 36307:return ioe;case 35680:case 36300:case 36308:case 36293:return soe;case 36289:case 36303:case 36311:case 36292:return ooe}}class loe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Hse(t.type)}}class coe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=aoe(t.type)}}class uoe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const vT=/(\w+)(\])?(\[|\.)?/g;function rD(n,e){n.seq.push(e),n.map[e.id]=e}function hoe(n,e,t){const r=n.name,i=r.length;for(vT.lastIndex=0;;){const s=vT.exec(r),o=vT.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){rD(t,c===void 0?new loe(a,n,e):new coe(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new uoe(a),rD(t,h)),t=h}}}class iw{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);hoe(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function iD(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const foe=37297;let doe=0;function poe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const sD=new Yn;function moe(n){nr._getMatrix(sD,nr.workingColorSpace,n);const e=`mat3( ${sD.elements.map(t=>t.toFixed(4))} )`;switch(nr.getTransfer(n)){case Tx:return[e,"LinearTransferOETF"];case jr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function oD(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+poe(n.getShaderSource(e),o)}else return i}function goe(n,e){const t=moe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function yoe(n,e){let t;switch(e){case YU:t="Linear";break;case KU:t="Reinhard";break;case JU:t="Cineon";break;case yR:t="ACESFilmic";break;case QU:t="AgX";break;case e5:t="Neutral";break;case ZU:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const T_=new fe;function xoe(){nr.getLuminanceCoefficients(T_);const n=T_.x.toFixed(4),e=T_.y.toFixed(4),t=T_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function voe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(F0).join(`
`)}function _oe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function woe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function F0(n){return n!==""}function aD(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function lD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const boe=/^[ \t]*#include +<([\w\d./]+)>/gm;function pM(n){return n.replace(boe,Soe)}const Aoe=new Map;function Soe(n,e){let t=ar[e];if(t===void 0){const r=Aoe.get(e);if(r!==void 0)t=ar[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return pM(t)}const Coe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cD(n){return n.replace(Coe,Toe)}function Toe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function uD(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Eoe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===wA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===q0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ul&&(e="SHADOWMAP_TYPE_VSM"),e}function Moe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Uc:case af:e="ENVMAP_TYPE_CUBE";break;case Kg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Roe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case af:e="ENVMAP_MODE_REFRACTION";break}return e}function Poe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case hv:e="ENVMAP_BLENDING_MULTIPLY";break;case XU:e="ENVMAP_BLENDING_MIX";break;case qU:e="ENVMAP_BLENDING_ADD";break}return e}function koe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Boe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Eoe(t),c=Moe(t),u=Roe(t),h=Poe(t),d=koe(t),m=voe(t),g=_oe(s),v=i.createProgram();let w,_,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(F0).join(`
`),w.length>0&&(w+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(F0).join(`
`),_.length>0&&(_+=`
`)):(w=[uD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(F0).join(`
`),_=[uD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ic?"#define TONE_MAPPING":"",t.toneMapping!==Ic?ar.tonemapping_pars_fragment:"",t.toneMapping!==Ic?yoe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ar.colorspace_pars_fragment,goe("linearToOutputTexel",t.outputColorSpace),xoe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(F0).join(`
`)),o=pM(o),o=aD(o,t),o=lD(o,t),a=pM(a),a=aD(a,t),a=lD(a,t),o=cD(o),a=cD(a),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,w=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,_=["#define varying in",t.glslVersion===sM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===sM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const S=A+w+o,R=A+_+a,B=iD(i,i.VERTEX_SHADER,S),I=iD(i,i.FRAGMENT_SHADER,R);i.attachShader(v,B),i.attachShader(v,I),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function N(F){if(n.debug.checkShaderErrors){const K=i.getProgramInfoLog(v).trim(),Q=i.getShaderInfoLog(B).trim(),Y=i.getShaderInfoLog(I).trim();let ee=!0,$=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,v,B,I);else{const oe=oD(i,B,"vertex"),G=oD(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+K+`
`+oe+`
`+G)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(Q===""||Y==="")&&($=!1);$&&(F.diagnostics={runnable:ee,programLog:K,vertexShader:{log:Q,prefix:w},fragmentShader:{log:Y,prefix:_}})}i.deleteShader(B),i.deleteShader(I),U=new iw(i,v),O=woe(i,v)}let U;this.getUniforms=function(){return U===void 0&&N(this),U};let O;this.getAttributes=function(){return O===void 0&&N(this),O};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(v,foe)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=doe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=B,this.fragmentShader=I,this}let Ioe=0;class Loe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Doe(e),t.set(e,r)),r}}class Doe{constructor(e){this.id=Ioe++,this.code=e,this.usedTimes=0}}function Foe(n,e,t,r,i,s,o){const a=new Jd,l=new Loe,c=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(O){return c.add(O),O===0?"uv":`uv${O}`}function w(O,P,F,K,Q){const Y=K.fog,ee=Q.geometry,$=O.isMeshStandardMaterial?K.environment:null,oe=(O.isMeshStandardMaterial?t:e).get(O.envMap||$),G=oe&&oe.mapping===Kg?oe.image.height:null,te=g[O.type];O.precision!==null&&(m=i.getMaxPrecision(O.precision),m!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",m,"instead."));const re=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Z=re!==void 0?re.length:0;let ne=0;ee.morphAttributes.position!==void 0&&(ne=1),ee.morphAttributes.normal!==void 0&&(ne=2),ee.morphAttributes.color!==void 0&&(ne=3);let ce,ye,he,Ce;if(te){const Mn=jl[te];ce=Mn.vertexShader,ye=Mn.fragmentShader}else ce=O.vertexShader,ye=O.fragmentShader,l.update(O),he=l.getVertexShaderID(O),Ce=l.getFragmentShaderID(O);const ke=n.getRenderTarget(),Ue=n.state.buffers.depth.getReversed(),Qe=Q.isInstancedMesh===!0,Te=Q.isBatchedMesh===!0,$e=!!O.map,Ee=!!O.matcap,Oe=!!oe,le=!!O.aoMap,vt=!!O.lightMap,ft=!!O.bumpMap,_t=!!O.normalMap,mt=!!O.displacementMap,Vt=!!O.emissiveMap,bt=!!O.metalnessMap,de=!!O.roughnessMap,ae=O.anisotropy>0,He=O.clearcoat>0,Ze=O.dispersion>0,ut=O.iridescence>0,st=O.sheen>0,It=O.transmission>0,Et=ae&&!!O.anisotropyMap,Lt=He&&!!O.clearcoatMap,hn=He&&!!O.clearcoatNormalMap,gt=He&&!!O.clearcoatRoughnessMap,jt=ut&&!!O.iridescenceMap,$t=ut&&!!O.iridescenceThicknessMap,zt=st&&!!O.sheenColorMap,Ft=st&&!!O.sheenRoughnessMap,Me=!!O.specularMap,et=!!O.specularColorMap,wt=!!O.specularIntensityMap,Se=It&&!!O.transmissionMap,je=It&&!!O.thicknessMap,qe=!!O.gradientMap,at=!!O.alphaMap,Nt=O.alphaTest>0,Dt=!!O.alphaHash,kt=!!O.extensions;let En=Ic;O.toneMapped&&(ke===null||ke.isXRRenderTarget===!0)&&(En=n.toneMapping);const xr={shaderID:te,shaderType:O.type,shaderName:O.name,vertexShader:ce,fragmentShader:ye,defines:O.defines,customVertexShaderID:he,customFragmentShaderID:Ce,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:m,batching:Te,batchingColor:Te&&Q._colorsTexture!==null,instancing:Qe,instancingColor:Qe&&Q.instanceColor!==null,instancingMorph:Qe&&Q.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:ke===null?n.outputColorSpace:ke.isXRRenderTarget===!0?ke.texture.colorSpace:jc,alphaToCoverage:!!O.alphaToCoverage,map:$e,matcap:Ee,envMap:Oe,envMapMode:Oe&&oe.mapping,envMapCubeUVHeight:G,aoMap:le,lightMap:vt,bumpMap:ft,normalMap:_t,displacementMap:d&&mt,emissiveMap:Vt,normalMapObjectSpace:_t&&O.normalMapType===o5,normalMapTangentSpace:_t&&O.normalMapType===yf,metalnessMap:bt,roughnessMap:de,anisotropy:ae,anisotropyMap:Et,clearcoat:He,clearcoatMap:Lt,clearcoatNormalMap:hn,clearcoatRoughnessMap:gt,dispersion:Ze,iridescence:ut,iridescenceMap:jt,iridescenceThicknessMap:$t,sheen:st,sheenColorMap:zt,sheenRoughnessMap:Ft,specularMap:Me,specularColorMap:et,specularIntensityMap:wt,transmission:It,transmissionMap:Se,thicknessMap:je,gradientMap:qe,opaque:O.transparent===!1&&O.blending===qd&&O.alphaToCoverage===!1,alphaMap:at,alphaTest:Nt,alphaHash:Dt,combine:O.combine,mapUv:$e&&v(O.map.channel),aoMapUv:le&&v(O.aoMap.channel),lightMapUv:vt&&v(O.lightMap.channel),bumpMapUv:ft&&v(O.bumpMap.channel),normalMapUv:_t&&v(O.normalMap.channel),displacementMapUv:mt&&v(O.displacementMap.channel),emissiveMapUv:Vt&&v(O.emissiveMap.channel),metalnessMapUv:bt&&v(O.metalnessMap.channel),roughnessMapUv:de&&v(O.roughnessMap.channel),anisotropyMapUv:Et&&v(O.anisotropyMap.channel),clearcoatMapUv:Lt&&v(O.clearcoatMap.channel),clearcoatNormalMapUv:hn&&v(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:gt&&v(O.clearcoatRoughnessMap.channel),iridescenceMapUv:jt&&v(O.iridescenceMap.channel),iridescenceThicknessMapUv:$t&&v(O.iridescenceThicknessMap.channel),sheenColorMapUv:zt&&v(O.sheenColorMap.channel),sheenRoughnessMapUv:Ft&&v(O.sheenRoughnessMap.channel),specularMapUv:Me&&v(O.specularMap.channel),specularColorMapUv:et&&v(O.specularColorMap.channel),specularIntensityMapUv:wt&&v(O.specularIntensityMap.channel),transmissionMapUv:Se&&v(O.transmissionMap.channel),thicknessMapUv:je&&v(O.thicknessMap.channel),alphaMapUv:at&&v(O.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(_t||ae),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!ee.attributes.uv&&($e||at),fog:!!Y,useFog:O.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:Ue,skinning:Q.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:ne,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:En,decodeVideoTexture:$e&&O.map.isVideoTexture===!0&&nr.getTransfer(O.map.colorSpace)===jr,decodeVideoTextureEmissive:Vt&&O.emissiveMap.isVideoTexture===!0&&nr.getTransfer(O.emissiveMap.colorSpace)===jr,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===wa,flipSided:O.side===Lo,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:kt&&O.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(kt&&O.extensions.multiDraw===!0||Te)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return xr.vertexUv1s=c.has(1),xr.vertexUv2s=c.has(2),xr.vertexUv3s=c.has(3),c.clear(),xr}function _(O){const P=[];if(O.shaderID?P.push(O.shaderID):(P.push(O.customVertexShaderID),P.push(O.customFragmentShaderID)),O.defines!==void 0)for(const F in O.defines)P.push(F),P.push(O.defines[F]);return O.isRawShaderMaterial===!1&&(A(P,O),S(P,O),P.push(n.outputColorSpace)),P.push(O.customProgramCacheKey),P.join()}function A(O,P){O.push(P.precision),O.push(P.outputColorSpace),O.push(P.envMapMode),O.push(P.envMapCubeUVHeight),O.push(P.mapUv),O.push(P.alphaMapUv),O.push(P.lightMapUv),O.push(P.aoMapUv),O.push(P.bumpMapUv),O.push(P.normalMapUv),O.push(P.displacementMapUv),O.push(P.emissiveMapUv),O.push(P.metalnessMapUv),O.push(P.roughnessMapUv),O.push(P.anisotropyMapUv),O.push(P.clearcoatMapUv),O.push(P.clearcoatNormalMapUv),O.push(P.clearcoatRoughnessMapUv),O.push(P.iridescenceMapUv),O.push(P.iridescenceThicknessMapUv),O.push(P.sheenColorMapUv),O.push(P.sheenRoughnessMapUv),O.push(P.specularMapUv),O.push(P.specularColorMapUv),O.push(P.specularIntensityMapUv),O.push(P.transmissionMapUv),O.push(P.thicknessMapUv),O.push(P.combine),O.push(P.fogExp2),O.push(P.sizeAttenuation),O.push(P.morphTargetsCount),O.push(P.morphAttributeCount),O.push(P.numDirLights),O.push(P.numPointLights),O.push(P.numSpotLights),O.push(P.numSpotLightMaps),O.push(P.numHemiLights),O.push(P.numRectAreaLights),O.push(P.numDirLightShadows),O.push(P.numPointLightShadows),O.push(P.numSpotLightShadows),O.push(P.numSpotLightShadowsWithMaps),O.push(P.numLightProbes),O.push(P.shadowMapType),O.push(P.toneMapping),O.push(P.numClippingPlanes),O.push(P.numClipIntersection),O.push(P.depthPacking)}function S(O,P){a.disableAll(),P.supportsVertexTextures&&a.enable(0),P.instancing&&a.enable(1),P.instancingColor&&a.enable(2),P.instancingMorph&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),P.dispersion&&a.enable(20),P.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.reverseDepthBuffer&&a.enable(4),P.skinning&&a.enable(5),P.morphTargets&&a.enable(6),P.morphNormals&&a.enable(7),P.morphColors&&a.enable(8),P.premultipliedAlpha&&a.enable(9),P.shadowMapEnabled&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),P.decodeVideoTextureEmissive&&a.enable(20),P.alphaToCoverage&&a.enable(21),O.push(a.mask)}function R(O){const P=g[O.type];let F;if(P){const K=jl[P];F=v5.clone(K.uniforms)}else F=O.uniforms;return F}function B(O,P){let F;for(let K=0,Q=u.length;K<Q;K++){const Y=u[K];if(Y.cacheKey===P){F=Y,++F.usedTimes;break}}return F===void 0&&(F=new Boe(n,P,O,s),u.push(F)),F}function I(O){if(--O.usedTimes===0){const P=u.indexOf(O);u[P]=u[u.length-1],u.pop(),O.destroy()}}function N(O){l.remove(O)}function U(){l.dispose()}return{getParameters:w,getProgramCacheKey:_,getUniforms:R,acquireProgram:B,releaseProgram:I,releaseShaderCache:N,programs:u,dispose:U}}function Noe(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Ooe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function fD(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,d,m,g,v,w){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:d,material:m,groupOrder:g,renderOrder:h.renderOrder,z:v,group:w},n[e]=_):(_.id=h.id,_.object=h,_.geometry=d,_.material=m,_.groupOrder=g,_.renderOrder=h.renderOrder,_.z=v,_.group=w),e++,_}function a(h,d,m,g,v,w){const _=o(h,d,m,g,v,w);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):t.push(_)}function l(h,d,m,g,v,w){const _=o(h,d,m,g,v,w);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):t.unshift(_)}function c(h,d){t.length>1&&t.sort(h||Ooe),r.length>1&&r.sort(d||hD),i.length>1&&i.sort(d||hD)}function u(){for(let h=e,d=n.length;h<d;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Uoe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new fD,n.set(r,[o])):i>=s.length?(o=new fD,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function zoe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new fe,color:new Ut};break;case"SpotLight":t={position:new fe,direction:new fe,color:new Ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new fe,color:new Ut,distance:0,decay:0};break;case"HemisphereLight":t={direction:new fe,skyColor:new Ut,groundColor:new Ut};break;case"RectAreaLight":t={color:new Ut,position:new fe,halfWidth:new fe,halfHeight:new fe};break}return n[e.id]=t,t}}}function Hoe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let joe=0;function Goe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Voe(n){const e=new zoe,t=Hoe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new fe);const i=new fe,s=new Zt,o=new Zt;function a(c){let u=0,h=0,d=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let m=0,g=0,v=0,w=0,_=0,A=0,S=0,R=0,B=0,I=0,N=0;c.sort(Goe);for(let O=0,P=c.length;O<P;O++){const F=c[O],K=F.color,Q=F.intensity,Y=F.distance,ee=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)u+=K.r*Q,h+=K.g*Q,d+=K.b*Q;else if(F.isLightProbe){for(let $=0;$<9;$++)r.probe[$].addScaledVector(F.sh.coefficients[$],Q);N++}else if(F.isDirectionalLight){const $=e.get(F);if($.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const oe=F.shadow,G=t.get(F);G.shadowIntensity=oe.intensity,G.shadowBias=oe.bias,G.shadowNormalBias=oe.normalBias,G.shadowRadius=oe.radius,G.shadowMapSize=oe.mapSize,r.directionalShadow[m]=G,r.directionalShadowMap[m]=ee,r.directionalShadowMatrix[m]=F.shadow.matrix,A++}r.directional[m]=$,m++}else if(F.isSpotLight){const $=e.get(F);$.position.setFromMatrixPosition(F.matrixWorld),$.color.copy(K).multiplyScalar(Q),$.distance=Y,$.coneCos=Math.cos(F.angle),$.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),$.decay=F.decay,r.spot[v]=$;const oe=F.shadow;if(F.map&&(r.spotLightMap[B]=F.map,B++,oe.updateMatrices(F),F.castShadow&&I++),r.spotLightMatrix[v]=oe.matrix,F.castShadow){const G=t.get(F);G.shadowIntensity=oe.intensity,G.shadowBias=oe.bias,G.shadowNormalBias=oe.normalBias,G.shadowRadius=oe.radius,G.shadowMapSize=oe.mapSize,r.spotShadow[v]=G,r.spotShadowMap[v]=ee,R++}v++}else if(F.isRectAreaLight){const $=e.get(F);$.color.copy(K).multiplyScalar(Q),$.halfWidth.set(F.width*.5,0,0),$.halfHeight.set(0,F.height*.5,0),r.rectArea[w]=$,w++}else if(F.isPointLight){const $=e.get(F);if($.color.copy(F.color).multiplyScalar(F.intensity),$.distance=F.distance,$.decay=F.decay,F.castShadow){const oe=F.shadow,G=t.get(F);G.shadowIntensity=oe.intensity,G.shadowBias=oe.bias,G.shadowNormalBias=oe.normalBias,G.shadowRadius=oe.radius,G.shadowMapSize=oe.mapSize,G.shadowCameraNear=oe.camera.near,G.shadowCameraFar=oe.camera.far,r.pointShadow[g]=G,r.pointShadowMap[g]=ee,r.pointShadowMatrix[g]=F.shadow.matrix,S++}r.point[g]=$,g++}else if(F.isHemisphereLight){const $=e.get(F);$.skyColor.copy(F.color).multiplyScalar(Q),$.groundColor.copy(F.groundColor).multiplyScalar(Q),r.hemi[_]=$,_++}}w>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Kt.LTC_FLOAT_1,r.rectAreaLTC2=Kt.LTC_FLOAT_2):(r.rectAreaLTC1=Kt.LTC_HALF_1,r.rectAreaLTC2=Kt.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=d;const U=r.hash;(U.directionalLength!==m||U.pointLength!==g||U.spotLength!==v||U.rectAreaLength!==w||U.hemiLength!==_||U.numDirectionalShadows!==A||U.numPointShadows!==S||U.numSpotShadows!==R||U.numSpotMaps!==B||U.numLightProbes!==N)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=w,r.point.length=g,r.hemi.length=_,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=R,r.spotShadowMap.length=R,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=R+B-I,r.spotLightMap.length=B,r.numSpotLightShadowsWithMaps=I,r.numLightProbes=N,U.directionalLength=m,U.pointLength=g,U.spotLength=v,U.rectAreaLength=w,U.hemiLength=_,U.numDirectionalShadows=A,U.numPointShadows=S,U.numSpotShadows=R,U.numSpotMaps=B,U.numLightProbes=N,r.version=joe++)}function l(c,u){let h=0,d=0,m=0,g=0,v=0;const w=u.matrixWorldInverse;for(let _=0,A=c.length;_<A;_++){const S=c[_];if(S.isDirectionalLight){const R=r.directional[h];R.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),R.direction.sub(i),R.direction.transformDirection(w),h++}else if(S.isSpotLight){const R=r.spot[m];R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(w),R.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),R.direction.sub(i),R.direction.transformDirection(w),m++}else if(S.isRectAreaLight){const R=r.rectArea[g];R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(w),o.identity(),s.copy(S.matrixWorld),s.premultiply(w),o.extractRotation(s),R.halfWidth.set(S.width*.5,0,0),R.halfHeight.set(0,S.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),g++}else if(S.isPointLight){const R=r.point[d];R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(w),d++}else if(S.isHemisphereLight){const R=r.hemi[v];R.direction.setFromMatrixPosition(S.matrixWorld),R.direction.transformDirection(w),v++}}}return{setup:a,setupView:l,state:r}}function dD(n){const e=new Voe(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Woe(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new dD(n),e.set(i,[a])):s>=o.length?(a=new dD(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const $oe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Xoe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function qoe(n,e,t){let r=new _v;const i=new ht,s=new ht,o=new dr,a=new VR({depthPacking:s5}),l=new WR,c={},u=t.maxTextureSize,h={[Oc]:Lo,[Lo]:Oc,[wa]:wa},d=new oa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ht},radius:{value:4}},vertexShader:$oe,fragmentShader:Xoe}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const g=new Vn;g.setAttribute("position",new Mr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new di(g,d),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wA;let _=this.type;this.render=function(I,N,U){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||I.length===0)return;const O=n.getRenderTarget(),P=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),K=n.state;K.setBlending(Bc),K.buffers.color.setClear(1,1,1,1),K.buffers.depth.setTest(!0),K.setScissorTest(!1);const Q=_!==Ul&&this.type===Ul,Y=_===Ul&&this.type!==Ul;for(let ee=0,$=I.length;ee<$;ee++){const oe=I[ee],G=oe.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const te=G.getFrameExtents();if(i.multiply(te),s.copy(G.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/te.x),i.x=s.x*te.x,G.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/te.y),i.y=s.y*te.y,G.mapSize.y=s.y)),G.map===null||Q===!0||Y===!0){const Z=this.type!==Ul?{minFilter:Bs,magFilter:Bs}:{};G.map!==null&&G.map.dispose(),G.map=new Ca(i.x,i.y,Z),G.map.texture.name=oe.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const re=G.getViewportCount();for(let Z=0;Z<re;Z++){const ne=G.getViewport(Z);o.set(s.x*ne.x,s.y*ne.y,s.x*ne.z,s.y*ne.w),K.viewport(o),G.updateMatrices(oe,Z),r=G.getFrustum(),R(N,U,G.camera,oe,this.type)}G.isPointLightShadow!==!0&&this.type===Ul&&A(G,U),G.needsUpdate=!1}_=this.type,w.needsUpdate=!1,n.setRenderTarget(O,P,F)};function A(I,N){const U=e.update(v);d.defines.VSM_SAMPLES!==I.blurSamples&&(d.defines.VSM_SAMPLES=I.blurSamples,m.defines.VSM_SAMPLES=I.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Ca(i.x,i.y)),d.uniforms.shadow_pass.value=I.map.texture,d.uniforms.resolution.value=I.mapSize,d.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(N,null,U,d,v,null),m.uniforms.shadow_pass.value=I.mapPass.texture,m.uniforms.resolution.value=I.mapSize,m.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(N,null,U,m,v,null)}function S(I,N,U,O){let P=null;const F=U.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(F!==void 0)P=F;else if(P=U.isPointLight===!0?l:a,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const K=P.uuid,Q=N.uuid;let Y=c[K];Y===void 0&&(Y={},c[K]=Y);let ee=Y[Q];ee===void 0&&(ee=P.clone(),Y[Q]=ee,N.addEventListener("dispose",B)),P=ee}if(P.visible=N.visible,P.wireframe=N.wireframe,O===Ul?P.side=N.shadowSide!==null?N.shadowSide:N.side:P.side=N.shadowSide!==null?N.shadowSide:h[N.side],P.alphaMap=N.alphaMap,P.alphaTest=N.alphaTest,P.map=N.map,P.clipShadows=N.clipShadows,P.clippingPlanes=N.clippingPlanes,P.clipIntersection=N.clipIntersection,P.displacementMap=N.displacementMap,P.displacementScale=N.displacementScale,P.displacementBias=N.displacementBias,P.wireframeLinewidth=N.wireframeLinewidth,P.linewidth=N.linewidth,U.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const K=n.properties.get(P);K.light=U}return P}function R(I,N,U,O,P){if(I.visible===!1)return;if(I.layers.test(N.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===Ul)&&(!I.frustumCulled||r.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,I.matrixWorld);const Q=e.update(I),Y=I.material;if(Array.isArray(Y)){const ee=Q.groups;for(let $=0,oe=ee.length;$<oe;$++){const G=ee[$],te=Y[G.materialIndex];if(te&&te.visible){const re=S(I,te,O,P);I.onBeforeShadow(n,I,N,U,Q,re,G),n.renderBufferDirect(U,null,Q,re,I,G),I.onAfterShadow(n,I,N,U,Q,re,G)}}}else if(Y.visible){const ee=S(I,Y,O,P);I.onBeforeShadow(n,I,N,U,Q,ee,null),n.renderBufferDirect(U,null,Q,ee,I,null),I.onAfterShadow(n,I,N,U,Q,ee,null)}}const K=I.children;for(let Q=0,Y=K.length;Q<Y;Q++)R(K[Q],N,U,O,P)}function B(I){I.target.removeEventListener("dispose",B);for(const U in c){const O=c[U],P=I.target.uuid;P in O&&(O[P].dispose(),delete O[P])}}}const Yoe={[Bw]:Iw,[Lw]:Nw,[Dw]:Ow,[cp]:Fw,[Iw]:Bw,[Nw]:Lw,[Ow]:Dw,[Fw]:cp};function Koe(n,e){function t(){let Se=!1;const je=new dr;let qe=null;const at=new dr(0,0,0,0);return{setMask:function(Nt){qe!==Nt&&!Se&&(n.colorMask(Nt,Nt,Nt,Nt),qe=Nt)},setLocked:function(Nt){Se=Nt},setClear:function(Nt,Dt,kt,En,xr){xr===!0&&(Nt*=En,Dt*=En,kt*=En),je.set(Nt,Dt,kt,En),at.equals(je)===!1&&(n.clearColor(Nt,Dt,kt,En),at.copy(je))},reset:function(){Se=!1,qe=null,at.set(-1,0,0,0)}}}function r(){let Se=!1,je=!1,qe=null,at=null,Nt=null;return{setReversed:function(Dt){if(je!==Dt){const kt=e.get("EXT_clip_control");je?kt.clipControlEXT(kt.LOWER_LEFT_EXT,kt.ZERO_TO_ONE_EXT):kt.clipControlEXT(kt.LOWER_LEFT_EXT,kt.NEGATIVE_ONE_TO_ONE_EXT);const En=Nt;Nt=null,this.setClear(En)}je=Dt},getReversed:function(){return je},setTest:function(Dt){Dt?ke(n.DEPTH_TEST):Ue(n.DEPTH_TEST)},setMask:function(Dt){qe!==Dt&&!Se&&(n.depthMask(Dt),qe=Dt)},setFunc:function(Dt){if(je&&(Dt=Yoe[Dt]),at!==Dt){switch(Dt){case Bw:n.depthFunc(n.NEVER);break;case Iw:n.depthFunc(n.ALWAYS);break;case Lw:n.depthFunc(n.LESS);break;case cp:n.depthFunc(n.LEQUAL);break;case Dw:n.depthFunc(n.EQUAL);break;case Fw:n.depthFunc(n.GEQUAL);break;case Nw:n.depthFunc(n.GREATER);break;case Ow:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}at=Dt}},setLocked:function(Dt){Se=Dt},setClear:function(Dt){Nt!==Dt&&(je&&(Dt=1-Dt),n.clearDepth(Dt),Nt=Dt)},reset:function(){Se=!1,qe=null,at=null,Nt=null,je=!1}}}function i(){let Se=!1,je=null,qe=null,at=null,Nt=null,Dt=null,kt=null,En=null,xr=null;return{setTest:function(Mn){Se||(Mn?ke(n.STENCIL_TEST):Ue(n.STENCIL_TEST))},setMask:function(Mn){je!==Mn&&!Se&&(n.stencilMask(Mn),je=Mn)},setFunc:function(Mn,_r,Or){(qe!==Mn||at!==_r||Nt!==Or)&&(n.stencilFunc(Mn,_r,Or),qe=Mn,at=_r,Nt=Or)},setOp:function(Mn,_r,Or){(Dt!==Mn||kt!==_r||En!==Or)&&(n.stencilOp(Mn,_r,Or),Dt=Mn,kt=_r,En=Or)},setLocked:function(Mn){Se=Mn},setClear:function(Mn){xr!==Mn&&(n.clearStencil(Mn),xr=Mn)},reset:function(){Se=!1,je=null,qe=null,at=null,Nt=null,Dt=null,kt=null,En=null,xr=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},h={},d=new WeakMap,m=[],g=null,v=!1,w=null,_=null,A=null,S=null,R=null,B=null,I=null,N=new Ut(0,0,0),U=0,O=!1,P=null,F=null,K=null,Q=null,Y=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,oe=0;const G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(G)[1]),$=oe>=1):G.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),$=oe>=2);let te=null,re={};const Z=n.getParameter(n.SCISSOR_BOX),ne=n.getParameter(n.VIEWPORT),ce=new dr().fromArray(Z),ye=new dr().fromArray(ne);function he(Se,je,qe,at){const Nt=new Uint8Array(4),Dt=n.createTexture();n.bindTexture(Se,Dt),n.texParameteri(Se,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Se,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let kt=0;kt<qe;kt++)Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?n.texImage3D(je,0,n.RGBA,1,1,at,0,n.RGBA,n.UNSIGNED_BYTE,Nt):n.texImage2D(je+kt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Nt);return Dt}const Ce={};Ce[n.TEXTURE_2D]=he(n.TEXTURE_2D,n.TEXTURE_2D,1),Ce[n.TEXTURE_CUBE_MAP]=he(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ce[n.TEXTURE_2D_ARRAY]=he(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ce[n.TEXTURE_3D]=he(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ke(n.DEPTH_TEST),o.setFunc(cp),ft(!1),_t(ZE),ke(n.CULL_FACE),le(Bc);function ke(Se){u[Se]!==!0&&(n.enable(Se),u[Se]=!0)}function Ue(Se){u[Se]!==!1&&(n.disable(Se),u[Se]=!1)}function Qe(Se,je){return h[Se]!==je?(n.bindFramebuffer(Se,je),h[Se]=je,Se===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=je),Se===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=je),!0):!1}function Te(Se,je){let qe=m,at=!1;if(Se){qe=d.get(je),qe===void 0&&(qe=[],d.set(je,qe));const Nt=Se.textures;if(qe.length!==Nt.length||qe[0]!==n.COLOR_ATTACHMENT0){for(let Dt=0,kt=Nt.length;Dt<kt;Dt++)qe[Dt]=n.COLOR_ATTACHMENT0+Dt;qe.length=Nt.length,at=!0}}else qe[0]!==n.BACK&&(qe[0]=n.BACK,at=!0);at&&n.drawBuffers(qe)}function $e(Se){return g!==Se?(n.useProgram(Se),g=Se,!0):!1}const Ee={[ef]:n.FUNC_ADD,[PU]:n.FUNC_SUBTRACT,[kU]:n.FUNC_REVERSE_SUBTRACT};Ee[BU]=n.MIN,Ee[IU]=n.MAX;const Oe={[LU]:n.ZERO,[DU]:n.ONE,[FU]:n.SRC_COLOR,[Pw]:n.SRC_ALPHA,[jU]:n.SRC_ALPHA_SATURATE,[zU]:n.DST_COLOR,[OU]:n.DST_ALPHA,[NU]:n.ONE_MINUS_SRC_COLOR,[kw]:n.ONE_MINUS_SRC_ALPHA,[HU]:n.ONE_MINUS_DST_COLOR,[UU]:n.ONE_MINUS_DST_ALPHA,[GU]:n.CONSTANT_COLOR,[VU]:n.ONE_MINUS_CONSTANT_COLOR,[WU]:n.CONSTANT_ALPHA,[$U]:n.ONE_MINUS_CONSTANT_ALPHA};function le(Se,je,qe,at,Nt,Dt,kt,En,xr,Mn){if(Se===Bc){v===!0&&(Ue(n.BLEND),v=!1);return}if(v===!1&&(ke(n.BLEND),v=!0),Se!==RU){if(Se!==w||Mn!==O){if((_!==ef||R!==ef)&&(n.blendEquation(n.FUNC_ADD),_=ef,R=ef),Mn)switch(Se){case qd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case QE:n.blendFunc(n.ONE,n.ONE);break;case eM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case tM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}else switch(Se){case qd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case QE:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case eM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case tM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}A=null,S=null,B=null,I=null,N.set(0,0,0),U=0,w=Se,O=Mn}return}Nt=Nt||je,Dt=Dt||qe,kt=kt||at,(je!==_||Nt!==R)&&(n.blendEquationSeparate(Ee[je],Ee[Nt]),_=je,R=Nt),(qe!==A||at!==S||Dt!==B||kt!==I)&&(n.blendFuncSeparate(Oe[qe],Oe[at],Oe[Dt],Oe[kt]),A=qe,S=at,B=Dt,I=kt),(En.equals(N)===!1||xr!==U)&&(n.blendColor(En.r,En.g,En.b,xr),N.copy(En),U=xr),w=Se,O=!1}function vt(Se,je){Se.side===wa?Ue(n.CULL_FACE):ke(n.CULL_FACE);let qe=Se.side===Lo;je&&(qe=!qe),ft(qe),Se.blending===qd&&Se.transparent===!1?le(Bc):le(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.blendColor,Se.blendAlpha,Se.premultipliedAlpha),o.setFunc(Se.depthFunc),o.setTest(Se.depthTest),o.setMask(Se.depthWrite),s.setMask(Se.colorWrite);const at=Se.stencilWrite;a.setTest(at),at&&(a.setMask(Se.stencilWriteMask),a.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),a.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),Vt(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),Se.alphaToCoverage===!0?ke(n.SAMPLE_ALPHA_TO_COVERAGE):Ue(n.SAMPLE_ALPHA_TO_COVERAGE)}function ft(Se){P!==Se&&(Se?n.frontFace(n.CW):n.frontFace(n.CCW),P=Se)}function _t(Se){Se!==TU?(ke(n.CULL_FACE),Se!==F&&(Se===ZE?n.cullFace(n.BACK):Se===EU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ue(n.CULL_FACE),F=Se}function mt(Se){Se!==K&&($&&n.lineWidth(Se),K=Se)}function Vt(Se,je,qe){Se?(ke(n.POLYGON_OFFSET_FILL),(Q!==je||Y!==qe)&&(n.polygonOffset(je,qe),Q=je,Y=qe)):Ue(n.POLYGON_OFFSET_FILL)}function bt(Se){Se?ke(n.SCISSOR_TEST):Ue(n.SCISSOR_TEST)}function de(Se){Se===void 0&&(Se=n.TEXTURE0+ee-1),te!==Se&&(n.activeTexture(Se),te=Se)}function ae(Se,je,qe){qe===void 0&&(te===null?qe=n.TEXTURE0+ee-1:qe=te);let at=re[qe];at===void 0&&(at={type:void 0,texture:void 0},re[qe]=at),(at.type!==Se||at.texture!==je)&&(te!==qe&&(n.activeTexture(qe),te=qe),n.bindTexture(Se,je||Ce[Se]),at.type=Se,at.texture=je)}function He(){const Se=re[te];Se!==void 0&&Se.type!==void 0&&(n.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)}function Ze(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function ut(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function st(){try{n.texSubImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function It(){try{n.texSubImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Lt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function hn(){try{n.texStorage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function gt(){try{n.texStorage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function jt(){try{n.texImage2D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function $t(){try{n.texImage3D.apply(n,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function zt(Se){ce.equals(Se)===!1&&(n.scissor(Se.x,Se.y,Se.z,Se.w),ce.copy(Se))}function Ft(Se){ye.equals(Se)===!1&&(n.viewport(Se.x,Se.y,Se.z,Se.w),ye.copy(Se))}function Me(Se,je){let qe=c.get(je);qe===void 0&&(qe=new WeakMap,c.set(je,qe));let at=qe.get(Se);at===void 0&&(at=n.getUniformBlockIndex(je,Se.name),qe.set(Se,at))}function et(Se,je){const at=c.get(je).get(Se);l.get(je)!==at&&(n.uniformBlockBinding(je,at,Se.__bindingPointIndex),l.set(je,at))}function wt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},te=null,re={},h={},d=new WeakMap,m=[],g=null,v=!1,w=null,_=null,A=null,S=null,R=null,B=null,I=null,N=new Ut(0,0,0),U=0,O=!1,P=null,F=null,K=null,Q=null,Y=null,ce.set(0,0,n.canvas.width,n.canvas.height),ye.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ke,disable:Ue,bindFramebuffer:Qe,drawBuffers:Te,useProgram:$e,setBlending:le,setMaterial:vt,setFlipSided:ft,setCullFace:_t,setLineWidth:mt,setPolygonOffset:Vt,setScissorTest:bt,activeTexture:de,bindTexture:ae,unbindTexture:He,compressedTexImage2D:Ze,compressedTexImage3D:ut,texImage2D:jt,texImage3D:$t,updateUBOMapping:Me,uniformBlockBinding:et,texStorage2D:hn,texStorage3D:gt,texSubImage2D:st,texSubImage3D:It,compressedTexSubImage2D:Et,compressedTexSubImage3D:Lt,scissor:zt,viewport:Ft,reset:wt}}function Joe(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ht,u=new WeakMap;let h;const d=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(de,ae){return m?new OffscreenCanvas(de,ae):Rx("canvas")}function v(de,ae,He){let Ze=1;const ut=bt(de);if((ut.width>He||ut.height>He)&&(Ze=He/Math.max(ut.width,ut.height)),Ze<1)if(typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&de instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&de instanceof ImageBitmap||typeof VideoFrame<"u"&&de instanceof VideoFrame){const st=Math.floor(Ze*ut.width),It=Math.floor(Ze*ut.height);h===void 0&&(h=g(st,It));const Et=ae?g(st,It):h;return Et.width=st,Et.height=It,Et.getContext("2d").drawImage(de,0,0,st,It),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ut.width+"x"+ut.height+") to ("+st+"x"+It+")."),Et}else return"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ut.width+"x"+ut.height+")."),de;return de}function w(de){return de.generateMipmaps}function _(de){n.generateMipmap(de)}function A(de){return de.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:de.isWebGL3DRenderTarget?n.TEXTURE_3D:de.isWebGLArrayRenderTarget||de.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(de,ae,He,Ze,ut=!1){if(de!==null){if(n[de]!==void 0)return n[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let st=ae;if(ae===n.RED&&(He===n.FLOAT&&(st=n.R32F),He===n.HALF_FLOAT&&(st=n.R16F),He===n.UNSIGNED_BYTE&&(st=n.R8)),ae===n.RED_INTEGER&&(He===n.UNSIGNED_BYTE&&(st=n.R8UI),He===n.UNSIGNED_SHORT&&(st=n.R16UI),He===n.UNSIGNED_INT&&(st=n.R32UI),He===n.BYTE&&(st=n.R8I),He===n.SHORT&&(st=n.R16I),He===n.INT&&(st=n.R32I)),ae===n.RG&&(He===n.FLOAT&&(st=n.RG32F),He===n.HALF_FLOAT&&(st=n.RG16F),He===n.UNSIGNED_BYTE&&(st=n.RG8)),ae===n.RG_INTEGER&&(He===n.UNSIGNED_BYTE&&(st=n.RG8UI),He===n.UNSIGNED_SHORT&&(st=n.RG16UI),He===n.UNSIGNED_INT&&(st=n.RG32UI),He===n.BYTE&&(st=n.RG8I),He===n.SHORT&&(st=n.RG16I),He===n.INT&&(st=n.RG32I)),ae===n.RGB_INTEGER&&(He===n.UNSIGNED_BYTE&&(st=n.RGB8UI),He===n.UNSIGNED_SHORT&&(st=n.RGB16UI),He===n.UNSIGNED_INT&&(st=n.RGB32UI),He===n.BYTE&&(st=n.RGB8I),He===n.SHORT&&(st=n.RGB16I),He===n.INT&&(st=n.RGB32I)),ae===n.RGBA_INTEGER&&(He===n.UNSIGNED_BYTE&&(st=n.RGBA8UI),He===n.UNSIGNED_SHORT&&(st=n.RGBA16UI),He===n.UNSIGNED_INT&&(st=n.RGBA32UI),He===n.BYTE&&(st=n.RGBA8I),He===n.SHORT&&(st=n.RGBA16I),He===n.INT&&(st=n.RGBA32I)),ae===n.RGB&&He===n.UNSIGNED_INT_5_9_9_9_REV&&(st=n.RGB9_E5),ae===n.RGBA){const It=ut?Tx:nr.getTransfer(Ze);He===n.FLOAT&&(st=n.RGBA32F),He===n.HALF_FLOAT&&(st=n.RGBA16F),He===n.UNSIGNED_BYTE&&(st=It===jr?n.SRGB8_ALPHA8:n.RGBA8),He===n.UNSIGNED_SHORT_4_4_4_4&&(st=n.RGBA4),He===n.UNSIGNED_SHORT_5_5_5_1&&(st=n.RGB5_A1)}return(st===n.R16F||st===n.R32F||st===n.RG16F||st===n.RG32F||st===n.RGBA16F||st===n.RGBA32F)&&e.get("EXT_color_buffer_float"),st}function R(de,ae){let He;return de?ae===null||ae===Hc||ae===hp?He=n.DEPTH24_STENCIL8:ae===xi?He=n.DEPTH32F_STENCIL8:ae===_g&&(He=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ae===null||ae===Hc||ae===hp?He=n.DEPTH_COMPONENT24:ae===xi?He=n.DEPTH_COMPONENT32F:ae===_g&&(He=n.DEPTH_COMPONENT16),He}function B(de,ae){return w(de)===!0||de.isFramebufferTexture&&de.minFilter!==Bs&&de.minFilter!==Er?Math.log2(Math.max(ae.width,ae.height))+1:de.mipmaps!==void 0&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?ae.mipmaps.length:1}function I(de){const ae=de.target;ae.removeEventListener("dispose",I),U(ae),ae.isVideoTexture&&u.delete(ae)}function N(de){const ae=de.target;ae.removeEventListener("dispose",N),P(ae)}function U(de){const ae=r.get(de);if(ae.__webglInit===void 0)return;const He=de.source,Ze=d.get(He);if(Ze){const ut=Ze[ae.__cacheKey];ut.usedTimes--,ut.usedTimes===0&&O(de),Object.keys(Ze).length===0&&d.delete(He)}r.remove(de)}function O(de){const ae=r.get(de);n.deleteTexture(ae.__webglTexture);const He=de.source,Ze=d.get(He);delete Ze[ae.__cacheKey],o.memory.textures--}function P(de){const ae=r.get(de);if(de.depthTexture&&(de.depthTexture.dispose(),r.remove(de.depthTexture)),de.isWebGLCubeRenderTarget)for(let Ze=0;Ze<6;Ze++){if(Array.isArray(ae.__webglFramebuffer[Ze]))for(let ut=0;ut<ae.__webglFramebuffer[Ze].length;ut++)n.deleteFramebuffer(ae.__webglFramebuffer[Ze][ut]);else n.deleteFramebuffer(ae.__webglFramebuffer[Ze]);ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer[Ze])}else{if(Array.isArray(ae.__webglFramebuffer))for(let Ze=0;Ze<ae.__webglFramebuffer.length;Ze++)n.deleteFramebuffer(ae.__webglFramebuffer[Ze]);else n.deleteFramebuffer(ae.__webglFramebuffer);if(ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let Ze=0;Ze<ae.__webglColorRenderbuffer.length;Ze++)ae.__webglColorRenderbuffer[Ze]&&n.deleteRenderbuffer(ae.__webglColorRenderbuffer[Ze]);ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}const He=de.textures;for(let Ze=0,ut=He.length;Ze<ut;Ze++){const st=r.get(He[Ze]);st.__webglTexture&&(n.deleteTexture(st.__webglTexture),o.memory.textures--),r.remove(He[Ze])}r.remove(de)}let F=0;function K(){F=0}function Q(){const de=F;return de>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+i.maxTextures),F+=1,de}function Y(de){const ae=[];return ae.push(de.wrapS),ae.push(de.wrapT),ae.push(de.wrapR||0),ae.push(de.magFilter),ae.push(de.minFilter),ae.push(de.anisotropy),ae.push(de.internalFormat),ae.push(de.format),ae.push(de.type),ae.push(de.generateMipmaps),ae.push(de.premultiplyAlpha),ae.push(de.flipY),ae.push(de.unpackAlignment),ae.push(de.colorSpace),ae.join()}function ee(de,ae){const He=r.get(de);if(de.isVideoTexture&&mt(de),de.isRenderTargetTexture===!1&&de.version>0&&He.__version!==de.version){const Ze=de.image;if(Ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(He,de,ae);return}}t.bindTexture(n.TEXTURE_2D,He.__webglTexture,n.TEXTURE0+ae)}function $(de,ae){const He=r.get(de);if(de.version>0&&He.__version!==de.version){ye(He,de,ae);return}t.bindTexture(n.TEXTURE_2D_ARRAY,He.__webglTexture,n.TEXTURE0+ae)}function oe(de,ae){const He=r.get(de);if(de.version>0&&He.__version!==de.version){ye(He,de,ae);return}t.bindTexture(n.TEXTURE_3D,He.__webglTexture,n.TEXTURE0+ae)}function G(de,ae){const He=r.get(de);if(de.version>0&&He.__version!==de.version){he(He,de,ae);return}t.bindTexture(n.TEXTURE_CUBE_MAP,He.__webglTexture,n.TEXTURE0+ae)}const te={[zc]:n.REPEAT,[Ti]:n.CLAMP_TO_EDGE,[vg]:n.MIRRORED_REPEAT},re={[Bs]:n.NEAREST,[bA]:n.NEAREST_MIPMAP_NEAREST,[Bd]:n.NEAREST_MIPMAP_LINEAR,[Er]:n.LINEAR,[rg]:n.LINEAR_MIPMAP_NEAREST,[el]:n.LINEAR_MIPMAP_LINEAR},Z={[a5]:n.NEVER,[d5]:n.ALWAYS,[l5]:n.LESS,[RR]:n.LEQUAL,[c5]:n.EQUAL,[f5]:n.GEQUAL,[u5]:n.GREATER,[h5]:n.NOTEQUAL};function ne(de,ae){if(ae.type===xi&&e.has("OES_texture_float_linear")===!1&&(ae.magFilter===Er||ae.magFilter===rg||ae.magFilter===Bd||ae.magFilter===el||ae.minFilter===Er||ae.minFilter===rg||ae.minFilter===Bd||ae.minFilter===el)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(de,n.TEXTURE_WRAP_S,te[ae.wrapS]),n.texParameteri(de,n.TEXTURE_WRAP_T,te[ae.wrapT]),(de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY)&&n.texParameteri(de,n.TEXTURE_WRAP_R,te[ae.wrapR]),n.texParameteri(de,n.TEXTURE_MAG_FILTER,re[ae.magFilter]),n.texParameteri(de,n.TEXTURE_MIN_FILTER,re[ae.minFilter]),ae.compareFunction&&(n.texParameteri(de,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(de,n.TEXTURE_COMPARE_FUNC,Z[ae.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ae.magFilter===Bs||ae.minFilter!==Bd&&ae.minFilter!==el||ae.type===xi&&e.has("OES_texture_float_linear")===!1)return;if(ae.anisotropy>1||r.get(ae).__currentAnisotropy){const He=e.get("EXT_texture_filter_anisotropic");n.texParameterf(de,He.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ae.anisotropy,i.getMaxAnisotropy())),r.get(ae).__currentAnisotropy=ae.anisotropy}}}function ce(de,ae){let He=!1;de.__webglInit===void 0&&(de.__webglInit=!0,ae.addEventListener("dispose",I));const Ze=ae.source;let ut=d.get(Ze);ut===void 0&&(ut={},d.set(Ze,ut));const st=Y(ae);if(st!==de.__cacheKey){ut[st]===void 0&&(ut[st]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,He=!0),ut[st].usedTimes++;const It=ut[de.__cacheKey];It!==void 0&&(ut[de.__cacheKey].usedTimes--,It.usedTimes===0&&O(ae)),de.__cacheKey=st,de.__webglTexture=ut[st].texture}return He}function ye(de,ae,He){let Ze=n.TEXTURE_2D;(ae.isDataArrayTexture||ae.isCompressedArrayTexture)&&(Ze=n.TEXTURE_2D_ARRAY),ae.isData3DTexture&&(Ze=n.TEXTURE_3D);const ut=ce(de,ae),st=ae.source;t.bindTexture(Ze,de.__webglTexture,n.TEXTURE0+He);const It=r.get(st);if(st.version!==It.__version||ut===!0){t.activeTexture(n.TEXTURE0+He);const Et=nr.getPrimaries(nr.workingColorSpace),Lt=ae.colorSpace===Du?null:nr.getPrimaries(ae.colorSpace),hn=ae.colorSpace===Du||Et===Lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ae.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ae.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,hn);let gt=v(ae.image,!1,i.maxTextureSize);gt=Vt(ae,gt);const jt=s.convert(ae.format,ae.colorSpace),$t=s.convert(ae.type);let zt=S(ae.internalFormat,jt,$t,ae.colorSpace,ae.isVideoTexture);ne(Ze,ae);let Ft;const Me=ae.mipmaps,et=ae.isVideoTexture!==!0,wt=It.__version===void 0||ut===!0,Se=st.dataReady,je=B(ae,gt);if(ae.isDepthTexture)zt=R(ae.format===fp,ae.type),wt&&(et?t.texStorage2D(n.TEXTURE_2D,1,zt,gt.width,gt.height):t.texImage2D(n.TEXTURE_2D,0,zt,gt.width,gt.height,0,jt,$t,null));else if(ae.isDataTexture)if(Me.length>0){et&&wt&&t.texStorage2D(n.TEXTURE_2D,je,zt,Me[0].width,Me[0].height);for(let qe=0,at=Me.length;qe<at;qe++)Ft=Me[qe],et?Se&&t.texSubImage2D(n.TEXTURE_2D,qe,0,0,Ft.width,Ft.height,jt,$t,Ft.data):t.texImage2D(n.TEXTURE_2D,qe,zt,Ft.width,Ft.height,0,jt,$t,Ft.data);ae.generateMipmaps=!1}else et?(wt&&t.texStorage2D(n.TEXTURE_2D,je,zt,gt.width,gt.height),Se&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,gt.width,gt.height,jt,$t,gt.data)):t.texImage2D(n.TEXTURE_2D,0,zt,gt.width,gt.height,0,jt,$t,gt.data);else if(ae.isCompressedTexture)if(ae.isCompressedArrayTexture){et&&wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,je,zt,Me[0].width,Me[0].height,gt.depth);for(let qe=0,at=Me.length;qe<at;qe++)if(Ft=Me[qe],ae.format!==$i)if(jt!==null)if(et){if(Se)if(ae.layerUpdates.size>0){const Nt=fM(Ft.width,Ft.height,ae.format,ae.type);for(const Dt of ae.layerUpdates){const kt=Ft.data.subarray(Dt*Nt/Ft.data.BYTES_PER_ELEMENT,(Dt+1)*Nt/Ft.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,qe,0,0,Dt,Ft.width,Ft.height,1,jt,kt)}ae.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,qe,0,0,0,Ft.width,Ft.height,gt.depth,jt,Ft.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,qe,zt,Ft.width,Ft.height,gt.depth,0,Ft.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else et?Se&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,qe,0,0,0,Ft.width,Ft.height,gt.depth,jt,$t,Ft.data):t.texImage3D(n.TEXTURE_2D_ARRAY,qe,zt,Ft.width,Ft.height,gt.depth,0,jt,$t,Ft.data)}else{et&&wt&&t.texStorage2D(n.TEXTURE_2D,je,zt,Me[0].width,Me[0].height);for(let qe=0,at=Me.length;qe<at;qe++)Ft=Me[qe],ae.format!==$i?jt!==null?et?Se&&t.compressedTexSubImage2D(n.TEXTURE_2D,qe,0,0,Ft.width,Ft.height,jt,Ft.data):t.compressedTexImage2D(n.TEXTURE_2D,qe,zt,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):et?Se&&t.texSubImage2D(n.TEXTURE_2D,qe,0,0,Ft.width,Ft.height,jt,$t,Ft.data):t.texImage2D(n.TEXTURE_2D,qe,zt,Ft.width,Ft.height,0,jt,$t,Ft.data)}else if(ae.isDataArrayTexture)if(et){if(wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,je,zt,gt.width,gt.height,gt.depth),Se)if(ae.layerUpdates.size>0){const qe=fM(gt.width,gt.height,ae.format,ae.type);for(const at of ae.layerUpdates){const Nt=gt.data.subarray(at*qe/gt.data.BYTES_PER_ELEMENT,(at+1)*qe/gt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,at,gt.width,gt.height,1,jt,$t,Nt)}ae.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,gt.width,gt.height,gt.depth,jt,$t,gt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,zt,gt.width,gt.height,gt.depth,0,jt,$t,gt.data);else if(ae.isData3DTexture)et?(wt&&t.texStorage3D(n.TEXTURE_3D,je,zt,gt.width,gt.height,gt.depth),Se&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,gt.width,gt.height,gt.depth,jt,$t,gt.data)):t.texImage3D(n.TEXTURE_3D,0,zt,gt.width,gt.height,gt.depth,0,jt,$t,gt.data);else if(ae.isFramebufferTexture){if(wt)if(et)t.texStorage2D(n.TEXTURE_2D,je,zt,gt.width,gt.height);else{let qe=gt.width,at=gt.height;for(let Nt=0;Nt<je;Nt++)t.texImage2D(n.TEXTURE_2D,Nt,zt,qe,at,0,jt,$t,null),qe>>=1,at>>=1}}else if(Me.length>0){if(et&&wt){const qe=bt(Me[0]);t.texStorage2D(n.TEXTURE_2D,je,zt,qe.width,qe.height)}for(let qe=0,at=Me.length;qe<at;qe++)Ft=Me[qe],et?Se&&t.texSubImage2D(n.TEXTURE_2D,qe,0,0,jt,$t,Ft):t.texImage2D(n.TEXTURE_2D,qe,zt,jt,$t,Ft);ae.generateMipmaps=!1}else if(et){if(wt){const qe=bt(gt);t.texStorage2D(n.TEXTURE_2D,je,zt,qe.width,qe.height)}Se&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,jt,$t,gt)}else t.texImage2D(n.TEXTURE_2D,0,zt,jt,$t,gt);w(ae)&&_(Ze),It.__version=st.version,ae.onUpdate&&ae.onUpdate(ae)}de.__version=ae.version}function he(de,ae,He){if(ae.image.length!==6)return;const Ze=ce(de,ae),ut=ae.source;t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+He);const st=r.get(ut);if(ut.version!==st.__version||Ze===!0){t.activeTexture(n.TEXTURE0+He);const It=nr.getPrimaries(nr.workingColorSpace),Et=ae.colorSpace===Du?null:nr.getPrimaries(ae.colorSpace),Lt=ae.colorSpace===Du||It===Et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ae.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ae.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Lt);const hn=ae.isCompressedTexture||ae.image[0].isCompressedTexture,gt=ae.image[0]&&ae.image[0].isDataTexture,jt=[];for(let at=0;at<6;at++)!hn&&!gt?jt[at]=v(ae.image[at],!0,i.maxCubemapSize):jt[at]=gt?ae.image[at].image:ae.image[at],jt[at]=Vt(ae,jt[at]);const $t=jt[0],zt=s.convert(ae.format,ae.colorSpace),Ft=s.convert(ae.type),Me=S(ae.internalFormat,zt,Ft,ae.colorSpace),et=ae.isVideoTexture!==!0,wt=st.__version===void 0||Ze===!0,Se=ut.dataReady;let je=B(ae,$t);ne(n.TEXTURE_CUBE_MAP,ae);let qe;if(hn){et&&wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,je,Me,$t.width,$t.height);for(let at=0;at<6;at++){qe=jt[at].mipmaps;for(let Nt=0;Nt<qe.length;Nt++){const Dt=qe[Nt];ae.format!==$i?zt!==null?et?Se&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt,0,0,Dt.width,Dt.height,zt,Dt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt,Me,Dt.width,Dt.height,0,Dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):et?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt,0,0,Dt.width,Dt.height,zt,Ft,Dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt,Me,Dt.width,Dt.height,0,zt,Ft,Dt.data)}}}else{if(qe=ae.mipmaps,et&&wt){qe.length>0&&je++;const at=bt(jt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,je,Me,at.width,at.height)}for(let at=0;at<6;at++)if(gt){et?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,jt[at].width,jt[at].height,zt,Ft,jt[at].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Me,jt[at].width,jt[at].height,0,zt,Ft,jt[at].data);for(let Nt=0;Nt<qe.length;Nt++){const kt=qe[Nt].image[at].image;et?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt+1,0,0,kt.width,kt.height,zt,Ft,kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt+1,Me,kt.width,kt.height,0,zt,Ft,kt.data)}}else{et?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,zt,Ft,jt[at]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Me,zt,Ft,jt[at]);for(let Nt=0;Nt<qe.length;Nt++){const Dt=qe[Nt];et?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt+1,0,0,zt,Ft,Dt.image[at]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+at,Nt+1,Me,zt,Ft,Dt.image[at])}}}w(ae)&&_(n.TEXTURE_CUBE_MAP),st.__version=ut.version,ae.onUpdate&&ae.onUpdate(ae)}de.__version=ae.version}function Ce(de,ae,He,Ze,ut,st){const It=s.convert(He.format,He.colorSpace),Et=s.convert(He.type),Lt=S(He.internalFormat,It,Et,He.colorSpace),hn=r.get(ae),gt=r.get(He);if(gt.__renderTarget=ae,!hn.__hasExternalTextures){const jt=Math.max(1,ae.width>>st),$t=Math.max(1,ae.height>>st);ut===n.TEXTURE_3D||ut===n.TEXTURE_2D_ARRAY?t.texImage3D(ut,st,Lt,jt,$t,ae.depth,0,It,Et,null):t.texImage2D(ut,st,Lt,jt,$t,0,It,Et,null)}t.bindFramebuffer(n.FRAMEBUFFER,de),_t(ae)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ze,ut,gt.__webglTexture,0,ft(ae)):(ut===n.TEXTURE_2D||ut>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ut<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ze,ut,gt.__webglTexture,st),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ke(de,ae,He){if(n.bindRenderbuffer(n.RENDERBUFFER,de),ae.depthBuffer){const Ze=ae.depthTexture,ut=Ze&&Ze.isDepthTexture?Ze.type:null,st=R(ae.stencilBuffer,ut),It=ae.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Et=ft(ae);_t(ae)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Et,st,ae.width,ae.height):He?n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,st,ae.width,ae.height):n.renderbufferStorage(n.RENDERBUFFER,st,ae.width,ae.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,It,n.RENDERBUFFER,de)}else{const Ze=ae.textures;for(let ut=0;ut<Ze.length;ut++){const st=Ze[ut],It=s.convert(st.format,st.colorSpace),Et=s.convert(st.type),Lt=S(st.internalFormat,It,Et,st.colorSpace),hn=ft(ae);He&&_t(ae)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,hn,Lt,ae.width,ae.height):_t(ae)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,hn,Lt,ae.width,ae.height):n.renderbufferStorage(n.RENDERBUFFER,Lt,ae.width,ae.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ue(de,ae){if(ae&&ae.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,de),!(ae.depthTexture&&ae.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ze=r.get(ae.depthTexture);Ze.__renderTarget=ae,(!Ze.__webglTexture||ae.depthTexture.image.width!==ae.width||ae.depthTexture.image.height!==ae.height)&&(ae.depthTexture.image.width=ae.width,ae.depthTexture.image.height=ae.height,ae.depthTexture.needsUpdate=!0),ee(ae.depthTexture,0);const ut=Ze.__webglTexture,st=ft(ae);if(ae.depthTexture.format===Yd)_t(ae)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ut,0,st):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ut,0);else if(ae.depthTexture.format===fp)_t(ae)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ut,0,st):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ut,0);else throw new Error("Unknown depthTexture format")}function Qe(de){const ae=r.get(de),He=de.isWebGLCubeRenderTarget===!0;if(ae.__boundDepthTexture!==de.depthTexture){const Ze=de.depthTexture;if(ae.__depthDisposeCallback&&ae.__depthDisposeCallback(),Ze){const ut=()=>{delete ae.__boundDepthTexture,delete ae.__depthDisposeCallback,Ze.removeEventListener("dispose",ut)};Ze.addEventListener("dispose",ut),ae.__depthDisposeCallback=ut}ae.__boundDepthTexture=Ze}if(de.depthTexture&&!ae.__autoAllocateDepthBuffer){if(He)throw new Error("target.depthTexture not supported in Cube render targets");Ue(ae.__webglFramebuffer,de)}else if(He){ae.__webglDepthbuffer=[];for(let Ze=0;Ze<6;Ze++)if(t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglFramebuffer[Ze]),ae.__webglDepthbuffer[Ze]===void 0)ae.__webglDepthbuffer[Ze]=n.createRenderbuffer(),ke(ae.__webglDepthbuffer[Ze],de,!1);else{const ut=de.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,st=ae.__webglDepthbuffer[Ze];n.bindRenderbuffer(n.RENDERBUFFER,st),n.framebufferRenderbuffer(n.FRAMEBUFFER,ut,n.RENDERBUFFER,st)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglFramebuffer),ae.__webglDepthbuffer===void 0)ae.__webglDepthbuffer=n.createRenderbuffer(),ke(ae.__webglDepthbuffer,de,!1);else{const Ze=de.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ut=ae.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ut),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,ut)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(de,ae,He){const Ze=r.get(de);ae!==void 0&&Ce(Ze.__webglFramebuffer,de,de.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),He!==void 0&&Qe(de)}function $e(de){const ae=de.texture,He=r.get(de),Ze=r.get(ae);de.addEventListener("dispose",N);const ut=de.textures,st=de.isWebGLCubeRenderTarget===!0,It=ut.length>1;if(It||(Ze.__webglTexture===void 0&&(Ze.__webglTexture=n.createTexture()),Ze.__version=ae.version,o.memory.textures++),st){He.__webglFramebuffer=[];for(let Et=0;Et<6;Et++)if(ae.mipmaps&&ae.mipmaps.length>0){He.__webglFramebuffer[Et]=[];for(let Lt=0;Lt<ae.mipmaps.length;Lt++)He.__webglFramebuffer[Et][Lt]=n.createFramebuffer()}else He.__webglFramebuffer[Et]=n.createFramebuffer()}else{if(ae.mipmaps&&ae.mipmaps.length>0){He.__webglFramebuffer=[];for(let Et=0;Et<ae.mipmaps.length;Et++)He.__webglFramebuffer[Et]=n.createFramebuffer()}else He.__webglFramebuffer=n.createFramebuffer();if(It)for(let Et=0,Lt=ut.length;Et<Lt;Et++){const hn=r.get(ut[Et]);hn.__webglTexture===void 0&&(hn.__webglTexture=n.createTexture(),o.memory.textures++)}if(de.samples>0&&_t(de)===!1){He.__webglMultisampledFramebuffer=n.createFramebuffer(),He.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer);for(let Et=0;Et<ut.length;Et++){const Lt=ut[Et];He.__webglColorRenderbuffer[Et]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,He.__webglColorRenderbuffer[Et]);const hn=s.convert(Lt.format,Lt.colorSpace),gt=s.convert(Lt.type),jt=S(Lt.internalFormat,hn,gt,Lt.colorSpace,de.isXRRenderTarget===!0),$t=ft(de);n.renderbufferStorageMultisample(n.RENDERBUFFER,$t,jt,de.width,de.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Et,n.RENDERBUFFER,He.__webglColorRenderbuffer[Et])}n.bindRenderbuffer(n.RENDERBUFFER,null),de.depthBuffer&&(He.__webglDepthRenderbuffer=n.createRenderbuffer(),ke(He.__webglDepthRenderbuffer,de,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(st){t.bindTexture(n.TEXTURE_CUBE_MAP,Ze.__webglTexture),ne(n.TEXTURE_CUBE_MAP,ae);for(let Et=0;Et<6;Et++)if(ae.mipmaps&&ae.mipmaps.length>0)for(let Lt=0;Lt<ae.mipmaps.length;Lt++)Ce(He.__webglFramebuffer[Et][Lt],de,ae,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Lt);else Ce(He.__webglFramebuffer[Et],de,ae,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0);w(ae)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(It){for(let Et=0,Lt=ut.length;Et<Lt;Et++){const hn=ut[Et],gt=r.get(hn);t.bindTexture(n.TEXTURE_2D,gt.__webglTexture),ne(n.TEXTURE_2D,hn),Ce(He.__webglFramebuffer,de,hn,n.COLOR_ATTACHMENT0+Et,n.TEXTURE_2D,0),w(hn)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Et=n.TEXTURE_2D;if((de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(Et=de.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Et,Ze.__webglTexture),ne(Et,ae),ae.mipmaps&&ae.mipmaps.length>0)for(let Lt=0;Lt<ae.mipmaps.length;Lt++)Ce(He.__webglFramebuffer[Lt],de,ae,n.COLOR_ATTACHMENT0,Et,Lt);else Ce(He.__webglFramebuffer,de,ae,n.COLOR_ATTACHMENT0,Et,0);w(ae)&&_(Et),t.unbindTexture()}de.depthBuffer&&Qe(de)}function Ee(de){const ae=de.textures;for(let He=0,Ze=ae.length;He<Ze;He++){const ut=ae[He];if(w(ut)){const st=A(de),It=r.get(ut).__webglTexture;t.bindTexture(st,It),_(st),t.unbindTexture()}}}const Oe=[],le=[];function vt(de){if(de.samples>0){if(_t(de)===!1){const ae=de.textures,He=de.width,Ze=de.height;let ut=n.COLOR_BUFFER_BIT;const st=de.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,It=r.get(de),Et=ae.length>1;if(Et)for(let Lt=0;Lt<ae.length;Lt++)t.bindFramebuffer(n.FRAMEBUFFER,It.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Lt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,It.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Lt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,It.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglFramebuffer);for(let Lt=0;Lt<ae.length;Lt++){if(de.resolveDepthBuffer&&(de.depthBuffer&&(ut|=n.DEPTH_BUFFER_BIT),de.stencilBuffer&&de.resolveStencilBuffer&&(ut|=n.STENCIL_BUFFER_BIT)),Et){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,It.__webglColorRenderbuffer[Lt]);const hn=r.get(ae[Lt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,hn,0)}n.blitFramebuffer(0,0,He,Ze,0,0,He,Ze,ut,n.NEAREST),l===!0&&(Oe.length=0,le.length=0,Oe.push(n.COLOR_ATTACHMENT0+Lt),de.depthBuffer&&de.resolveDepthBuffer===!1&&(Oe.push(st),le.push(st),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,le)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Oe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Et)for(let Lt=0;Lt<ae.length;Lt++){t.bindFramebuffer(n.FRAMEBUFFER,It.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Lt,n.RENDERBUFFER,It.__webglColorRenderbuffer[Lt]);const hn=r.get(ae[Lt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,It.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Lt,n.TEXTURE_2D,hn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglMultisampledFramebuffer)}else if(de.depthBuffer&&de.resolveDepthBuffer===!1&&l){const ae=de.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ae])}}}function ft(de){return Math.min(i.maxSamples,de.samples)}function _t(de){const ae=r.get(de);return de.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ae.__useRenderToTexture!==!1}function mt(de){const ae=o.render.frame;u.get(de)!==ae&&(u.set(de,ae),de.update())}function Vt(de,ae){const He=de.colorSpace,Ze=de.format,ut=de.type;return de.isCompressedTexture===!0||de.isVideoTexture===!0||He!==jc&&He!==Du&&(nr.getTransfer(He)===jr?(Ze!==$i||ut!==sa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",He)),ae}function bt(de){return typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement?(c.width=de.naturalWidth||de.width,c.height=de.naturalHeight||de.height):typeof VideoFrame<"u"&&de instanceof VideoFrame?(c.width=de.displayWidth,c.height=de.displayHeight):(c.width=de.width,c.height=de.height),c}this.allocateTextureUnit=Q,this.resetTextureUnits=K,this.setTexture2D=ee,this.setTexture2DArray=$,this.setTexture3D=oe,this.setTextureCube=G,this.rebindTextures=Te,this.setupRenderTarget=$e,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=vt,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=Ce,this.useMultisampledRTT=_t}function fz(n,e){function t(r,i=Du){let s;const o=nr.getTransfer(i);if(r===sa)return n.UNSIGNED_BYTE;if(r===CA)return n.UNSIGNED_SHORT_4_4_4_4;if(r===TA)return n.UNSIGNED_SHORT_5_5_5_1;if(r===xR)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===AA)return n.BYTE;if(r===SA)return n.SHORT;if(r===_g)return n.UNSIGNED_SHORT;if(r===fv)return n.INT;if(r===Hc)return n.UNSIGNED_INT;if(r===xi)return n.FLOAT;if(r===xs)return n.HALF_FLOAT;if(r===vR)return n.ALPHA;if(r===_R)return n.RGB;if(r===$i)return n.RGBA;if(r===wR)return n.LUMINANCE;if(r===bR)return n.LUMINANCE_ALPHA;if(r===Yd)return n.DEPTH_COMPONENT;if(r===fp)return n.DEPTH_STENCIL;if(r===dv)return n.RED;if(r===pv)return n.RED_INTEGER;if(r===AR)return n.RG;if(r===EA)return n.RG_INTEGER;if(r===MA)return n.RGBA_INTEGER;if(r===Y0||r===K0||r===J0||r===Z0)if(o===jr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Y0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===K0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===J0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Z0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Y0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===K0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===J0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Z0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Uw||r===zw||r===Hw||r===jw)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Uw)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===zw)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Hw)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===jw)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Gw||r===Vw||r===Ww)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===Gw||r===Vw)return o===jr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Ww)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===$w||r===Xw||r===qw||r===Yw||r===Kw||r===Jw||r===Zw||r===Qw||r===eb||r===tb||r===nb||r===rb||r===ib||r===sb)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===$w)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Xw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===qw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Yw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Kw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Jw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Zw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Qw)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===eb)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===tb)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===nb)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===rb)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===ib)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===sb)return o===jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Q0||r===ob||r===ab)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Q0)return o===jr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===ob)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===ab)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===SR||r===lb||r===cb||r===ub)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Q0)return s.COMPRESSED_RED_RGTC1_EXT;if(r===lb)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===cb)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===ub)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===hp?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const Zoe={type:"move"};class _T{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const w=t.getJointPose(v,r),_=this._getHandJoint(c,v);w!==null&&(_.matrix.fromArray(w.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=w.radius),_.visible=w!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),m=.02,g=.005;c.inputState.pinching&&d>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zoe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Wl;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const Qoe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,eae=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class tae{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Pr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==r.depthNear||t.depthFar!==r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new oa({vertexShader:Qoe,fragmentShader:eae,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new di(new vf(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class nae extends Xc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,m=null,g=null;const v=new tae,w=t.getContextAttributes();let _=null,A=null;const S=[],R=[],B=new ht;let I=null;const N=new ui;N.viewport=new dr;const U=new ui;U.viewport=new dr;const O=[N,U],P=new tz;let F=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ye){let he=S[ye];return he===void 0&&(he=new _T,S[ye]=he),he.getTargetRaySpace()},this.getControllerGrip=function(ye){let he=S[ye];return he===void 0&&(he=new _T,S[ye]=he),he.getGripSpace()},this.getHand=function(ye){let he=S[ye];return he===void 0&&(he=new _T,S[ye]=he),he.getHandSpace()};function Q(ye){const he=R.indexOf(ye.inputSource);if(he===-1)return;const Ce=S[he];Ce!==void 0&&(Ce.update(ye.inputSource,ye.frame,c||o),Ce.dispatchEvent({type:ye.type,data:ye.inputSource}))}function Y(){i.removeEventListener("select",Q),i.removeEventListener("selectstart",Q),i.removeEventListener("selectend",Q),i.removeEventListener("squeeze",Q),i.removeEventListener("squeezestart",Q),i.removeEventListener("squeezeend",Q),i.removeEventListener("end",Y),i.removeEventListener("inputsourceschange",ee);for(let ye=0;ye<S.length;ye++){const he=R[ye];he!==null&&(R[ye]=null,S[ye].disconnect(he))}F=null,K=null,v.reset(),e.setRenderTarget(_),m=null,d=null,h=null,i=null,A=null,ce.stop(),r.isPresenting=!1,e.setPixelRatio(I),e.setSize(B.width,B.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ye){s=ye,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ye){a=ye,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ye){c=ye},this.getBaseLayer=function(){return d!==null?d:m},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ye){if(i=ye,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",Q),i.addEventListener("selectstart",Q),i.addEventListener("selectend",Q),i.addEventListener("squeeze",Q),i.addEventListener("squeezestart",Q),i.addEventListener("squeezeend",Q),i.addEventListener("end",Y),i.addEventListener("inputsourceschange",ee),w.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(B),i.enabledFeatures!==void 0&&i.enabledFeatures.includes("layers")){let Ce=null,ke=null,Ue=null;w.depth&&(Ue=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ce=w.stencil?fp:Yd,ke=w.stencil?hp:Hc);const Qe={colorFormat:t.RGBA8,depthFormat:Ue,scaleFactor:s};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(Qe),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),A=new Ca(d.textureWidth,d.textureHeight,{format:$i,type:sa,depthTexture:new OA(d.textureWidth,d.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}else{const Ce={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,Ce),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),A=new Ca(m.framebufferWidth,m.framebufferHeight,{format:$i,type:sa,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}A.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),ce.setContext(i),ce.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function ee(ye){for(let he=0;he<ye.removed.length;he++){const Ce=ye.removed[he],ke=R.indexOf(Ce);ke>=0&&(R[ke]=null,S[ke].disconnect(Ce))}for(let he=0;he<ye.added.length;he++){const Ce=ye.added[he];let ke=R.indexOf(Ce);if(ke===-1){for(let Qe=0;Qe<S.length;Qe++)if(Qe>=R.length){R.push(Ce),ke=Qe;break}else if(R[Qe]===null){R[Qe]=Ce,ke=Qe;break}if(ke===-1)break}const Ue=S[ke];Ue&&Ue.connect(Ce)}}const $=new fe,oe=new fe;function G(ye,he,Ce){$.setFromMatrixPosition(he.matrixWorld),oe.setFromMatrixPosition(Ce.matrixWorld);const ke=$.distanceTo(oe),Ue=he.projectionMatrix.elements,Qe=Ce.projectionMatrix.elements,Te=Ue[14]/(Ue[10]-1),$e=Ue[14]/(Ue[10]+1),Ee=(Ue[9]+1)/Ue[5],Oe=(Ue[9]-1)/Ue[5],le=(Ue[8]-1)/Ue[0],vt=(Qe[8]+1)/Qe[0],ft=Te*le,_t=Te*vt,mt=ke/(-le+vt),Vt=mt*-le;if(he.matrixWorld.decompose(ye.position,ye.quaternion,ye.scale),ye.translateX(Vt),ye.translateZ(mt),ye.matrixWorld.compose(ye.position,ye.quaternion,ye.scale),ye.matrixWorldInverse.copy(ye.matrixWorld).invert(),Ue[10]===-1)ye.projectionMatrix.copy(he.projectionMatrix),ye.projectionMatrixInverse.copy(he.projectionMatrixInverse);else{const bt=Te+mt,de=$e+mt,ae=ft-Vt,He=_t+(ke-Vt),Ze=Ee*$e/de*bt,ut=Oe*$e/de*bt;ye.projectionMatrix.makePerspective(ae,He,Ze,ut,bt,de),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert()}}function te(ye,he){he===null?ye.matrixWorld.copy(ye.matrix):ye.matrixWorld.multiplyMatrices(he.matrixWorld,ye.matrix),ye.matrixWorldInverse.copy(ye.matrixWorld).invert()}this.updateCamera=function(ye){if(i===null)return;let he=ye.near,Ce=ye.far;v.texture!==null&&(v.depthNear>0&&(he=v.depthNear),v.depthFar>0&&(Ce=v.depthFar)),P.near=U.near=N.near=he,P.far=U.far=N.far=Ce,(F!==P.near||K!==P.far)&&(i.updateRenderState({depthNear:P.near,depthFar:P.far}),F=P.near,K=P.far),N.layers.mask=ye.layers.mask|2,U.layers.mask=ye.layers.mask|4,P.layers.mask=N.layers.mask|U.layers.mask;const ke=ye.parent,Ue=P.cameras;te(P,ke);for(let Qe=0;Qe<Ue.length;Qe++)te(Ue[Qe],ke);Ue.length===2?G(P,N,U):P.projectionMatrix.copy(N.projectionMatrix),re(ye,P,ke)};function re(ye,he,Ce){Ce===null?ye.matrix.copy(he.matrixWorld):(ye.matrix.copy(Ce.matrixWorld),ye.matrix.invert(),ye.matrix.multiply(he.matrixWorld)),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.updateMatrixWorld(!0),ye.projectionMatrix.copy(he.projectionMatrix),ye.projectionMatrixInverse.copy(he.projectionMatrixInverse),ye.isPerspectiveCamera&&(ye.fov=Ag*2*Math.atan(1/ye.projectionMatrix.elements[5]),ye.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(d===null&&m===null))return l},this.setFoveation=function(ye){l=ye,d!==null&&(d.fixedFoveation=ye),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ye)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(P)};let Z=null;function ne(ye,he){if(u=he.getViewerPose(c||o),g=he,u!==null){const Ce=u.views;m!==null&&(e.setRenderTargetFramebuffer(A,m.framebuffer),e.setRenderTarget(A));let ke=!1;Ce.length!==P.cameras.length&&(P.cameras.length=0,ke=!0);for(let Qe=0;Qe<Ce.length;Qe++){const Te=Ce[Qe];let $e=null;if(m!==null)$e=m.getViewport(Te);else{const Oe=h.getViewSubImage(d,Te);$e=Oe.viewport,Qe===0&&(e.setRenderTargetTextures(A,Oe.colorTexture,d.ignoreDepthValues?void 0:Oe.depthStencilTexture),e.setRenderTarget(A))}let Ee=O[Qe];Ee===void 0&&(Ee=new ui,Ee.layers.enable(Qe),Ee.viewport=new dr,O[Qe]=Ee),Ee.matrix.fromArray(Te.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(Te.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set($e.x,$e.y,$e.width,$e.height),Qe===0&&(P.matrix.copy(Ee.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),ke===!0&&P.cameras.push(Ee)}const Ue=i.enabledFeatures;if(Ue&&Ue.includes("depth-sensing")){const Qe=h.getDepthInformation(Ce[0]);Qe&&Qe.isValid&&Qe.texture&&v.init(e,Qe,i.renderState)}}for(let Ce=0;Ce<S.length;Ce++){const ke=R[Ce],Ue=S[Ce];ke!==null&&Ue!==void 0&&Ue.update(ke,he,c||o)}Z&&Z(ye,he),he.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:he}),g=null}const ce=new az;ce.setAnimationLoop(ne),this.setAnimationLoop=function(ye){Z=ye},this.dispose=function(){}}}const yd=new rs,rae=new Zt;function iae(n,e){function t(w,_){w.matrixAutoUpdate===!0&&w.updateMatrix(),_.value.copy(w.matrix)}function r(w,_){_.color.getRGB(w.fogColor.value,x5(n)),_.isFog?(w.fogNear.value=_.near,w.fogFar.value=_.far):_.isFogExp2&&(w.fogDensity.value=_.density)}function i(w,_,A,S,R){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(w,_):_.isMeshToonMaterial?(s(w,_),h(w,_)):_.isMeshPhongMaterial?(s(w,_),u(w,_)):_.isMeshStandardMaterial?(s(w,_),d(w,_),_.isMeshPhysicalMaterial&&m(w,_,R)):_.isMeshMatcapMaterial?(s(w,_),g(w,_)):_.isMeshDepthMaterial?s(w,_):_.isMeshDistanceMaterial?(s(w,_),v(w,_)):_.isMeshNormalMaterial?s(w,_):_.isLineBasicMaterial?(o(w,_),_.isLineDashedMaterial&&a(w,_)):_.isPointsMaterial?l(w,_,A,S):_.isSpriteMaterial?c(w,_):_.isShadowMaterial?(w.color.value.copy(_.color),w.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(w,_){w.opacity.value=_.opacity,_.color&&w.diffuse.value.copy(_.color),_.emissive&&w.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.bumpMap&&(w.bumpMap.value=_.bumpMap,t(_.bumpMap,w.bumpMapTransform),w.bumpScale.value=_.bumpScale,_.side===Lo&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,t(_.normalMap,w.normalMapTransform),w.normalScale.value.copy(_.normalScale),_.side===Lo&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,t(_.displacementMap,w.displacementMapTransform),w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,w.emissiveMapTransform)),_.specularMap&&(w.specularMap.value=_.specularMap,t(_.specularMap,w.specularMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest);const A=e.get(_),S=A.envMap,R=A.envMapRotation;S&&(w.envMap.value=S,yd.copy(R),yd.x*=-1,yd.y*=-1,yd.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(yd.y*=-1,yd.z*=-1),w.envMapRotation.value.setFromMatrix4(rae.makeRotationFromEuler(yd)),w.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=_.reflectivity,w.ior.value=_.ior,w.refractionRatio.value=_.refractionRatio),_.lightMap&&(w.lightMap.value=_.lightMap,w.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,w.lightMapTransform)),_.aoMap&&(w.aoMap.value=_.aoMap,w.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,w.aoMapTransform))}function o(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform))}function a(w,_){w.dashSize.value=_.dashSize,w.totalSize.value=_.dashSize+_.gapSize,w.scale.value=_.scale}function l(w,_,A,S){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.size.value=_.size*A,w.scale.value=S*.5,_.map&&(w.map.value=_.map,t(_.map,w.uvTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function c(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.rotation.value=_.rotation,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function u(w,_){w.specular.value.copy(_.specular),w.shininess.value=Math.max(_.shininess,1e-4)}function h(w,_){_.gradientMap&&(w.gradientMap.value=_.gradientMap)}function d(w,_){w.metalness.value=_.metalness,_.metalnessMap&&(w.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,w.metalnessMapTransform)),w.roughness.value=_.roughness,_.roughnessMap&&(w.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,w.roughnessMapTransform)),_.envMap&&(w.envMapIntensity.value=_.envMapIntensity)}function m(w,_,A){w.ior.value=_.ior,_.sheen>0&&(w.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),w.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(w.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,w.sheenColorMapTransform)),_.sheenRoughnessMap&&(w.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,w.sheenRoughnessMapTransform))),_.clearcoat>0&&(w.clearcoat.value=_.clearcoat,w.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(w.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,w.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(w.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Lo&&w.clearcoatNormalScale.value.negate())),_.dispersion>0&&(w.dispersion.value=_.dispersion),_.iridescence>0&&(w.iridescence.value=_.iridescence,w.iridescenceIOR.value=_.iridescenceIOR,w.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(w.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,w.iridescenceMapTransform)),_.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),_.transmission>0&&(w.transmission.value=_.transmission,w.transmissionSamplerMap.value=A.texture,w.transmissionSamplerSize.value.set(A.width,A.height),_.transmissionMap&&(w.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,w.transmissionMapTransform)),w.thickness.value=_.thickness,_.thicknessMap&&(w.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=_.attenuationDistance,w.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(w.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(w.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=_.specularIntensity,w.specularColor.value.copy(_.specularColor),_.specularColorMap&&(w.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,w.specularColorMapTransform)),_.specularIntensityMap&&(w.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,w.specularIntensityMapTransform))}function g(w,_){_.matcap&&(w.matcap.value=_.matcap)}function v(w,_){const A=e.get(_).light;w.referencePosition.value.setFromMatrixPosition(A.matrixWorld),w.nearDistance.value=A.shadow.camera.near,w.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function sae(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,S){const R=S.program;r.uniformBlockBinding(A,R)}function c(A,S){let R=i[A.id];R===void 0&&(g(A),R=u(A),i[A.id]=R,A.addEventListener("dispose",w));const B=S.program;r.updateUBOMapping(A,B);const I=e.render.frame;s[A.id]!==I&&(d(A),s[A.id]=I)}function u(A){const S=h();A.__bindingPointIndex=S;const R=n.createBuffer(),B=A.__size,I=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,R),n.bufferData(n.UNIFORM_BUFFER,B,I),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,R),R}function h(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(A){const S=i[A.id],R=A.uniforms,B=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let I=0,N=R.length;I<N;I++){const U=Array.isArray(R[I])?R[I]:[R[I]];for(let O=0,P=U.length;O<P;O++){const F=U[O];if(m(F,I,O,B)===!0){const K=F.__offset,Q=Array.isArray(F.value)?F.value:[F.value];let Y=0;for(let ee=0;ee<Q.length;ee++){const $=Q[ee],oe=v($);typeof $=="number"||typeof $=="boolean"?(F.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,K+Y,F.__data)):$.isMatrix3?(F.__data[0]=$.elements[0],F.__data[1]=$.elements[1],F.__data[2]=$.elements[2],F.__data[3]=0,F.__data[4]=$.elements[3],F.__data[5]=$.elements[4],F.__data[6]=$.elements[5],F.__data[7]=0,F.__data[8]=$.elements[6],F.__data[9]=$.elements[7],F.__data[10]=$.elements[8],F.__data[11]=0):($.toArray(F.__data,Y),Y+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,K,F.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(A,S,R,B){const I=A.value,N=S+"_"+R;if(B[N]===void 0)return typeof I=="number"||typeof I=="boolean"?B[N]=I:B[N]=I.clone(),!0;{const U=B[N];if(typeof I=="number"||typeof I=="boolean"){if(U!==I)return B[N]=I,!0}else if(U.equals(I)===!1)return U.copy(I),!0}return!1}function g(A){const S=A.uniforms;let R=0;const B=16;for(let N=0,U=S.length;N<U;N++){const O=Array.isArray(S[N])?S[N]:[S[N]];for(let P=0,F=O.length;P<F;P++){const K=O[P],Q=Array.isArray(K.value)?K.value:[K.value];for(let Y=0,ee=Q.length;Y<ee;Y++){const $=Q[Y],oe=v($),G=R%B,te=G%oe.boundary,re=G+te;R+=te,re!==0&&B-re<oe.storage&&(R+=B-re),K.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),K.__offset=R,R+=oe.storage}}}const I=R%B;return I>0&&(R+=B-I),A.__size=R,A.__cache={},this}function v(A){const S={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(S.boundary=4,S.storage=4):A.isVector2?(S.boundary=8,S.storage=8):A.isVector3||A.isColor?(S.boundary=16,S.storage=12):A.isVector4?(S.boundary=16,S.storage=16):A.isMatrix3?(S.boundary=48,S.storage=48):A.isMatrix4?(S.boundary=64,S.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),S}function w(A){const S=A.target;S.removeEventListener("dispose",w);const R=o.indexOf(S.__bindingPointIndex);o.splice(R,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function _(){for(const A in i)n.deleteBuffer(i[A]);o=[],i={},s={}}return{bind:l,update:c,dispose:_}}class aP{constructor(e={}){const{canvas:t=m5(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=o;const g=new Uint32Array(4),v=new Int32Array(4);let w=null,_=null;const A=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xr,this.toneMapping=Ic,this.toneMappingExposure=1;const R=this;let B=!1,I=0,N=0,U=null,O=-1,P=null;const F=new dr,K=new dr;let Q=null;const Y=new Ut(0);let ee=0,$=t.width,oe=t.height,G=1,te=null,re=null;const Z=new dr(0,0,$,oe),ne=new dr(0,0,$,oe);let ce=!1;const ye=new _v;let he=!1,Ce=!1;this.transmissionResolutionScale=1;const ke=new Zt,Ue=new Zt,Qe=new fe,Te=new dr,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ee=!1;function Oe(){return U===null?G:1}let le=r;function vt(q,pe){return t.getContext(q,pe)}try{const q={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${uv}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",Nt,!1),t.addEventListener("webglcontextcreationerror",Dt,!1),le===null){const pe="webgl2";if(le=vt(pe,q),le===null)throw vt(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let ft,_t,mt,Vt,bt,de,ae,He,Ze,ut,st,It,Et,Lt,hn,gt,jt,$t,zt,Ft,Me,et,wt,Se;function je(){ft=new gse(le),ft.init(),et=new fz(le,ft),_t=new use(le,ft,e,et),mt=new Koe(le,ft),_t.reverseDepthBuffer&&d&&mt.buffers.depth.setReversed(!0),Vt=new vse(le),bt=new Noe,de=new Joe(le,ft,mt,bt,_t,et,Vt),ae=new fse(R),He=new mse(R),Ze=new Tne(le),wt=new lse(le,Ze),ut=new yse(le,Ze,Vt,wt),st=new wse(le,ut,Ze,Vt),zt=new _se(le,_t,de),gt=new hse(bt),It=new Foe(R,ae,He,ft,_t,wt,gt),Et=new iae(R,bt),Lt=new Uoe,hn=new Woe(ft),$t=new ase(R,ae,He,mt,st,m,l),jt=new qoe(R,st,_t),Se=new sae(le,Vt,_t,mt),Ft=new cse(le,ft,Vt),Me=new xse(le,ft,Vt),Vt.programs=It.programs,R.capabilities=_t,R.extensions=ft,R.properties=bt,R.renderLists=Lt,R.shadowMap=jt,R.state=mt,R.info=Vt}je();const qe=new nae(R,le);this.xr=qe,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const q=ft.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=ft.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(q){q!==void 0&&(G=q,this.setSize($,oe,!1))},this.getSize=function(q){return q.set($,oe)},this.setSize=function(q,pe,be=!0){if(qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=q,oe=pe,t.width=Math.floor(q*G),t.height=Math.floor(pe*G),be===!0&&(t.style.width=q+"px",t.style.height=pe+"px"),this.setViewport(0,0,q,pe)},this.getDrawingBufferSize=function(q){return q.set($*G,oe*G).floor()},this.setDrawingBufferSize=function(q,pe,be){$=q,oe=pe,G=be,t.width=Math.floor(q*be),t.height=Math.floor(pe*be),this.setViewport(0,0,q,pe)},this.getCurrentViewport=function(q){return q.copy(F)},this.getViewport=function(q){return q.copy(Z)},this.setViewport=function(q,pe,be,xe){q.isVector4?Z.set(q.x,q.y,q.z,q.w):Z.set(q,pe,be,xe),mt.viewport(F.copy(Z).multiplyScalar(G).round())},this.getScissor=function(q){return q.copy(ne)},this.setScissor=function(q,pe,be,xe){q.isVector4?ne.set(q.x,q.y,q.z,q.w):ne.set(q,pe,be,xe),mt.scissor(K.copy(ne).multiplyScalar(G).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(q){mt.setScissorTest(ce=q)},this.setOpaqueSort=function(q){te=q},this.setTransparentSort=function(q){re=q},this.getClearColor=function(q){return q.copy($t.getClearColor())},this.setClearColor=function(){$t.setClearColor.apply($t,arguments)},this.getClearAlpha=function(){return $t.getClearAlpha()},this.setClearAlpha=function(){$t.setClearAlpha.apply($t,arguments)},this.clear=function(q=!0,pe=!0,be=!0){let xe=0;if(q){let Pe=!1;if(U!==null){const Ge=U.texture.format;Pe=Ge===MA||Ge===EA||Ge===pv}if(Pe){const Ge=U.texture.type,nt=Ge===sa||Ge===Hc||Ge===_g||Ge===hp||Ge===CA||Ge===TA,rt=$t.getClearColor(),dt=$t.getClearAlpha(),Mt=rt.r,Ct=rt.g,pt=rt.b;nt?(g[0]=Mt,g[1]=Ct,g[2]=pt,g[3]=dt,le.clearBufferuiv(le.COLOR,0,g)):(v[0]=Mt,v[1]=Ct,v[2]=pt,v[3]=dt,le.clearBufferiv(le.COLOR,0,v))}else xe|=le.COLOR_BUFFER_BIT}pe&&(xe|=le.DEPTH_BUFFER_BIT),be&&(xe|=le.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),le.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",Nt,!1),t.removeEventListener("webglcontextcreationerror",Dt,!1),$t.dispose(),Lt.dispose(),hn.dispose(),bt.dispose(),ae.dispose(),He.dispose(),st.dispose(),wt.dispose(),Se.dispose(),It.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",Xi),qe.removeEventListener("sessionend",Ks),ur.stop()};function at(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function Nt(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1;const q=Vt.autoReset,pe=jt.enabled,be=jt.autoUpdate,xe=jt.needsUpdate,Pe=jt.type;je(),Vt.autoReset=q,jt.enabled=pe,jt.autoUpdate=be,jt.needsUpdate=xe,jt.type=Pe}function Dt(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function kt(q){const pe=q.target;pe.removeEventListener("dispose",kt),En(pe)}function En(q){xr(q),bt.remove(q)}function xr(q){const pe=bt.get(q).programs;pe!==void 0&&(pe.forEach(function(be){It.releaseProgram(be)}),q.isShaderMaterial&&It.releaseShaderCache(q))}this.renderBufferDirect=function(q,pe,be,xe,Pe,Ge){pe===null&&(pe=$e);const nt=Pe.isMesh&&Pe.matrixWorld.determinant()<0,rt=Re(q,pe,be,xe,Pe);mt.setMaterial(xe,nt);let dt=be.index,Mt=1;if(xe.wireframe===!0){if(dt=ut.getWireframeAttribute(be),dt===void 0)return;Mt=2}const Ct=be.drawRange,pt=be.attributes.position;let Wt=Ct.start*Mt,Gt=(Ct.start+Ct.count)*Mt;Ge!==null&&(Wt=Math.max(Wt,Ge.start*Mt),Gt=Math.min(Gt,(Ge.start+Ge.count)*Mt)),dt!==null?(Wt=Math.max(Wt,0),Gt=Math.min(Gt,dt.count)):pt!=null&&(Wt=Math.max(Wt,0),Gt=Math.min(Gt,pt.count));const Sn=Gt-Wt;if(Sn<0||Sn===1/0)return;wt.setup(Pe,xe,rt,be,dt);let nn,ln=Ft;if(dt!==null&&(nn=Ze.get(dt),ln=Me,ln.setIndex(nn)),Pe.isMesh)xe.wireframe===!0?(mt.setLineWidth(xe.wireframeLinewidth*Oe()),ln.setMode(le.LINES)):ln.setMode(le.TRIANGLES);else if(Pe.isLine){let qt=xe.linewidth;qt===void 0&&(qt=1),mt.setLineWidth(qt*Oe()),Pe.isLineSegments?ln.setMode(le.LINES):Pe.isLineLoop?ln.setMode(le.LINE_LOOP):ln.setMode(le.LINE_STRIP)}else Pe.isPoints?ln.setMode(le.POINTS):Pe.isSprite&&ln.setMode(le.TRIANGLES);if(Pe.isBatchedMesh)if(Pe._multiDrawInstances!==null)ln.renderMultiDrawInstances(Pe._multiDrawStarts,Pe._multiDrawCounts,Pe._multiDrawCount,Pe._multiDrawInstances);else if(ft.get("WEBGL_multi_draw"))ln.renderMultiDraw(Pe._multiDrawStarts,Pe._multiDrawCounts,Pe._multiDrawCount);else{const qt=Pe._multiDrawStarts,Hn=Pe._multiDrawCounts,xn=Pe._multiDrawCount,In=dt?Ze.get(dt).bytesPerElement:1,Jn=bt.get(xe).currentProgram.getUniforms();for(let Dn=0;Dn<xn;Dn++)Jn.setValue(le,"_gl_DrawID",Dn),ln.render(qt[Dn]/In,Hn[Dn])}else if(Pe.isInstancedMesh)ln.renderInstances(Wt,Sn,Pe.count);else if(be.isInstancedBufferGeometry){const qt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Hn=Math.min(be.instanceCount,qt);ln.renderInstances(Wt,Sn,Hn)}else ln.render(Wt,Sn)};function Mn(q,pe,be){q.transparent===!0&&q.side===wa&&q.forceSinglePass===!1?(q.side=Lo,q.needsUpdate=!0,Pi(q,pe,be),q.side=Oc,q.needsUpdate=!0,Pi(q,pe,be),q.side=wa):Pi(q,pe,be)}this.compile=function(q,pe,be=null){be===null&&(be=q),_=hn.get(be),_.init(pe),S.push(_),be.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(pe.layers)&&(_.pushLight(Pe),Pe.castShadow&&_.pushShadow(Pe))}),q!==be&&q.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(pe.layers)&&(_.pushLight(Pe),Pe.castShadow&&_.pushShadow(Pe))}),_.setupLights();const xe=new Set;return q.traverse(function(Pe){if(!(Pe.isMesh||Pe.isPoints||Pe.isLine||Pe.isSprite))return;const Ge=Pe.material;if(Ge)if(Array.isArray(Ge))for(let nt=0;nt<Ge.length;nt++){const rt=Ge[nt];Mn(rt,be,Pe),xe.add(rt)}else Mn(Ge,be,Pe),xe.add(Ge)}),S.pop(),_=null,xe},this.compileAsync=function(q,pe,be=null){const xe=this.compile(q,pe,be);return new Promise(Pe=>{function Ge(){if(xe.forEach(function(nt){bt.get(nt).currentProgram.isReady()&&xe.delete(nt)}),xe.size===0){Pe(q);return}setTimeout(Ge,10)}ft.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let _r=null;function Or(q){_r&&_r(q)}function Xi(){ur.stop()}function Ks(){ur.start()}const ur=new az;ur.setAnimationLoop(Or),typeof self<"u"&&ur.setContext(self),this.setAnimationLoop=function(q){_r=q,qe.setAnimationLoop(q),q===null?ur.stop():ur.start()},qe.addEventListener("sessionstart",Xi),qe.addEventListener("sessionend",Ks),this.render=function(q,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(B===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),qe.enabled===!0&&qe.isPresenting===!0&&(qe.cameraAutoUpdate===!0&&qe.updateCamera(pe),pe=qe.getCamera()),q.isScene===!0&&q.onBeforeRender(R,q,pe,U),_=hn.get(q,S.length),_.init(pe),S.push(_),Ue.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),ye.setFromProjectionMatrix(Ue),Ce=this.localClippingEnabled,he=gt.init(this.clippingPlanes,Ce),w=Lt.get(q,A.length),w.init(),A.push(w),qe.enabled===!0&&qe.isPresenting===!0){const Ge=R.xr.getDepthSensingMesh();Ge!==null&&Gr(Ge,pe,-1/0,R.sortObjects)}Gr(q,pe,0,R.sortObjects),w.finish(),R.sortObjects===!0&&w.sort(te,re),Ee=qe.enabled===!1||qe.isPresenting===!1||qe.hasDepthSensing()===!1,Ee&&$t.addToRenderList(w,q),this.info.render.frame++,he===!0&&gt.beginShadows();const be=_.state.shadowsArray;jt.render(be,q,pe),he===!0&&gt.endShadows(),this.info.autoReset===!0&&this.info.reset();const xe=w.opaque,Pe=w.transmissive;if(_.setupLights(),pe.isArrayCamera){const Ge=pe.cameras;if(Pe.length>0)for(let nt=0,rt=Ge.length;nt<rt;nt++){const dt=Ge[nt];Xn(xe,Pe,q,dt)}Ee&&$t.render(q);for(let nt=0,rt=Ge.length;nt<rt;nt++){const dt=Ge[nt];Ni(w,q,dt,dt.viewport)}}else Pe.length>0&&Xn(xe,Pe,q,pe),Ee&&$t.render(q),Ni(w,q,pe);U!==null&&N===0&&(de.updateMultisampleRenderTarget(U),de.updateRenderTargetMipmap(U)),q.isScene===!0&&q.onAfterRender(R,q,pe),wt.resetDefaultState(),O=-1,P=null,S.pop(),S.length>0?(_=S[S.length-1],he===!0&&gt.setGlobalState(R.clippingPlanes,_.state.camera)):_=null,A.pop(),A.length>0?w=A[A.length-1]:w=null};function Gr(q,pe,be,xe){if(q.visible===!1)return;if(q.layers.test(pe.layers)){if(q.isGroup)be=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(pe);else if(q.isLight)_.pushLight(q),q.castShadow&&_.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||ye.intersectsSprite(q)){xe&&Te.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Ue);const nt=st.update(q),rt=q.material;rt.visible&&w.push(q,nt,rt,be,Te.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||ye.intersectsObject(q))){const nt=st.update(q),rt=q.material;if(xe&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),Te.copy(q.boundingSphere.center)):(nt.boundingSphere===null&&nt.computeBoundingSphere(),Te.copy(nt.boundingSphere.center)),Te.applyMatrix4(q.matrixWorld).applyMatrix4(Ue)),Array.isArray(rt)){const dt=nt.groups;for(let Mt=0,Ct=dt.length;Mt<Ct;Mt++){const pt=dt[Mt],Wt=rt[pt.materialIndex];Wt&&Wt.visible&&w.push(q,nt,Wt,be,Te.z,pt)}}else rt.visible&&w.push(q,nt,rt,be,Te.z,null)}}const Ge=q.children;for(let nt=0,rt=Ge.length;nt<rt;nt++)Gr(Ge[nt],pe,be,xe)}function Ni(q,pe,be,xe){const Pe=q.opaque,Ge=q.transmissive,nt=q.transparent;_.setupLightsView(be),he===!0&&gt.setGlobalState(R.clippingPlanes,be),xe&&mt.viewport(F.copy(xe)),Pe.length>0&&fn(Pe,pe,be),Ge.length>0&&fn(Ge,pe,be),nt.length>0&&fn(nt,pe,be),mt.buffers.depth.setTest(!0),mt.buffers.depth.setMask(!0),mt.buffers.color.setMask(!0),mt.setPolygonOffset(!1)}function Xn(q,pe,be,xe){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[xe.id]===void 0&&(_.state.transmissionRenderTarget[xe.id]=new Ca(1,1,{generateMipmaps:!0,type:ft.has("EXT_color_buffer_half_float")||ft.has("EXT_color_buffer_float")?xs:sa,minFilter:el,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:nr.workingColorSpace}));const Ge=_.state.transmissionRenderTarget[xe.id],nt=xe.viewport||F;Ge.setSize(nt.z*R.transmissionResolutionScale,nt.w*R.transmissionResolutionScale);const rt=R.getRenderTarget();R.setRenderTarget(Ge),R.getClearColor(Y),ee=R.getClearAlpha(),ee<1&&R.setClearColor(16777215,.5),R.clear(),Ee&&$t.render(be);const dt=R.toneMapping;R.toneMapping=Ic;const Mt=xe.viewport;if(xe.viewport!==void 0&&(xe.viewport=void 0),_.setupLightsView(xe),he===!0&&gt.setGlobalState(R.clippingPlanes,xe),fn(q,be,xe),de.updateMultisampleRenderTarget(Ge),de.updateRenderTargetMipmap(Ge),ft.has("WEBGL_multisampled_render_to_texture")===!1){let Ct=!1;for(let pt=0,Wt=pe.length;pt<Wt;pt++){const Gt=pe[pt],Sn=Gt.object,nn=Gt.geometry,ln=Gt.material,qt=Gt.group;if(ln.side===wa&&Sn.layers.test(xe.layers)){const Hn=ln.side;ln.side=Lo,ln.needsUpdate=!0,Js(Sn,be,xe,nn,ln,qt),ln.side=Hn,ln.needsUpdate=!0,Ct=!0}}Ct===!0&&(de.updateMultisampleRenderTarget(Ge),de.updateRenderTargetMipmap(Ge))}R.setRenderTarget(rt),R.setClearColor(Y,ee),Mt!==void 0&&(xe.viewport=Mt),R.toneMapping=dt}function fn(q,pe,be){const xe=pe.isScene===!0?pe.overrideMaterial:null;for(let Pe=0,Ge=q.length;Pe<Ge;Pe++){const nt=q[Pe],rt=nt.object,dt=nt.geometry,Mt=xe===null?nt.material:xe,Ct=nt.group;rt.layers.test(be.layers)&&Js(rt,pe,be,dt,Mt,Ct)}}function Js(q,pe,be,xe,Pe,Ge){q.onBeforeRender(R,pe,be,xe,Pe,Ge),q.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),Pe.onBeforeRender(R,pe,be,xe,q,Ge),Pe.transparent===!0&&Pe.side===wa&&Pe.forceSinglePass===!1?(Pe.side=Lo,Pe.needsUpdate=!0,R.renderBufferDirect(be,pe,xe,Pe,q,Ge),Pe.side=Oc,Pe.needsUpdate=!0,R.renderBufferDirect(be,pe,xe,Pe,q,Ge),Pe.side=wa):R.renderBufferDirect(be,pe,xe,Pe,q,Ge),q.onAfterRender(R,pe,be,xe,Pe,Ge)}function Pi(q,pe,be){pe.isScene!==!0&&(pe=$e);const xe=bt.get(q),Pe=_.state.lights,Ge=_.state.shadowsArray,nt=Pe.state.version,rt=It.getParameters(q,Pe.state,Ge,pe,be),dt=It.getProgramCacheKey(rt);let Mt=xe.programs;xe.environment=q.isMeshStandardMaterial?pe.environment:null,xe.fog=pe.fog,xe.envMap=(q.isMeshStandardMaterial?He:ae).get(q.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&q.envMap===null?pe.environmentRotation:q.envMapRotation,Mt===void 0&&(q.addEventListener("dispose",kt),Mt=new Map,xe.programs=Mt);let Ct=Mt.get(dt);if(Ct!==void 0){if(xe.currentProgram===Ct&&xe.lightsStateVersion===nt)return ue(q,rt),Ct}else rt.uniforms=It.getUniforms(q),q.onBeforeCompile(rt,R),Ct=It.acquireProgram(rt,dt),Mt.set(dt,Ct),xe.uniforms=rt.uniforms;const pt=xe.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(pt.clippingPlanes=gt.uniform),ue(q,rt),xe.needsLights=it(q),xe.lightsStateVersion=nt,xe.needsLights&&(pt.ambientLightColor.value=Pe.state.ambient,pt.lightProbe.value=Pe.state.probe,pt.directionalLights.value=Pe.state.directional,pt.directionalLightShadows.value=Pe.state.directionalShadow,pt.spotLights.value=Pe.state.spot,pt.spotLightShadows.value=Pe.state.spotShadow,pt.rectAreaLights.value=Pe.state.rectArea,pt.ltc_1.value=Pe.state.rectAreaLTC1,pt.ltc_2.value=Pe.state.rectAreaLTC2,pt.pointLights.value=Pe.state.point,pt.pointLightShadows.value=Pe.state.pointShadow,pt.hemisphereLights.value=Pe.state.hemi,pt.directionalShadowMap.value=Pe.state.directionalShadowMap,pt.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,pt.spotShadowMap.value=Pe.state.spotShadowMap,pt.spotLightMatrix.value=Pe.state.spotLightMatrix,pt.spotLightMap.value=Pe.state.spotLightMap,pt.pointShadowMap.value=Pe.state.pointShadowMap,pt.pointShadowMatrix.value=Pe.state.pointShadowMatrix),xe.currentProgram=Ct,xe.uniformsList=null,Ct}function J(q){if(q.uniformsList===null){const pe=q.currentProgram.getUniforms();q.uniformsList=iw.seqWithValue(pe.seq,q.uniforms)}return q.uniformsList}function ue(q,pe){const be=bt.get(q);be.outputColorSpace=pe.outputColorSpace,be.batching=pe.batching,be.batchingColor=pe.batchingColor,be.instancing=pe.instancing,be.instancingColor=pe.instancingColor,be.instancingMorph=pe.instancingMorph,be.skinning=pe.skinning,be.morphTargets=pe.morphTargets,be.morphNormals=pe.morphNormals,be.morphColors=pe.morphColors,be.morphTargetsCount=pe.morphTargetsCount,be.numClippingPlanes=pe.numClippingPlanes,be.numIntersection=pe.numClipIntersection,be.vertexAlphas=pe.vertexAlphas,be.vertexTangents=pe.vertexTangents,be.toneMapping=pe.toneMapping}function Re(q,pe,be,xe,Pe){pe.isScene!==!0&&(pe=$e),de.resetTextureUnits();const Ge=pe.fog,nt=xe.isMeshStandardMaterial?pe.environment:null,rt=U===null?R.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:jc,dt=(xe.isMeshStandardMaterial?He:ae).get(xe.envMap||nt),Mt=xe.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,Ct=!!be.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),pt=!!be.morphAttributes.position,Wt=!!be.morphAttributes.normal,Gt=!!be.morphAttributes.color;let Sn=Ic;xe.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(Sn=R.toneMapping);const nn=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,ln=nn!==void 0?nn.length:0,qt=bt.get(xe),Hn=_.state.lights;if(he===!0&&(Ce===!0||q!==P)){const Br=q===P&&xe.id===O;gt.setState(xe,q,Br)}let xn=!1;xe.version===qt.__version?(qt.needsLights&&qt.lightsStateVersion!==Hn.state.version||qt.outputColorSpace!==rt||Pe.isBatchedMesh&&qt.batching===!1||!Pe.isBatchedMesh&&qt.batching===!0||Pe.isBatchedMesh&&qt.batchingColor===!0&&Pe.colorTexture===null||Pe.isBatchedMesh&&qt.batchingColor===!1&&Pe.colorTexture!==null||Pe.isInstancedMesh&&qt.instancing===!1||!Pe.isInstancedMesh&&qt.instancing===!0||Pe.isSkinnedMesh&&qt.skinning===!1||!Pe.isSkinnedMesh&&qt.skinning===!0||Pe.isInstancedMesh&&qt.instancingColor===!0&&Pe.instanceColor===null||Pe.isInstancedMesh&&qt.instancingColor===!1&&Pe.instanceColor!==null||Pe.isInstancedMesh&&qt.instancingMorph===!0&&Pe.morphTexture===null||Pe.isInstancedMesh&&qt.instancingMorph===!1&&Pe.morphTexture!==null||qt.envMap!==dt||xe.fog===!0&&qt.fog!==Ge||qt.numClippingPlanes!==void 0&&(qt.numClippingPlanes!==gt.numPlanes||qt.numIntersection!==gt.numIntersection)||qt.vertexAlphas!==Mt||qt.vertexTangents!==Ct||qt.morphTargets!==pt||qt.morphNormals!==Wt||qt.morphColors!==Gt||qt.toneMapping!==Sn||qt.morphTargetsCount!==ln)&&(xn=!0):(xn=!0,qt.__version=xe.version);let In=qt.currentProgram;xn===!0&&(In=Pi(xe,pe,Pe));let Jn=!1,Dn=!1,Wn=!1;const vn=In.getUniforms(),Ur=qt.uniforms;if(mt.useProgram(In.program)&&(Jn=!0,Dn=!0,Wn=!0),xe.id!==O&&(O=xe.id,Dn=!0),Jn||P!==q){mt.buffers.depth.getReversed()?(ke.copy(q.projectionMatrix),ree(ke),iee(ke),vn.setValue(le,"projectionMatrix",ke)):vn.setValue(le,"projectionMatrix",q.projectionMatrix),vn.setValue(le,"viewMatrix",q.matrixWorldInverse);const ii=vn.map.cameraPosition;ii!==void 0&&ii.setValue(le,Qe.setFromMatrixPosition(q.matrixWorld)),_t.logarithmicDepthBuffer&&vn.setValue(le,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&vn.setValue(le,"isOrthographic",q.isOrthographicCamera===!0),P!==q&&(P=q,Dn=!0,Wn=!0)}if(Pe.isSkinnedMesh){vn.setOptional(le,Pe,"bindMatrix"),vn.setOptional(le,Pe,"bindMatrixInverse");const Br=Pe.skeleton;Br&&(Br.boneTexture===null&&Br.computeBoneTexture(),vn.setValue(le,"boneTexture",Br.boneTexture,de))}Pe.isBatchedMesh&&(vn.setOptional(le,Pe,"batchingTexture"),vn.setValue(le,"batchingTexture",Pe._matricesTexture,de),vn.setOptional(le,Pe,"batchingIdTexture"),vn.setValue(le,"batchingIdTexture",Pe._indirectTexture,de),vn.setOptional(le,Pe,"batchingColorTexture"),Pe._colorsTexture!==null&&vn.setValue(le,"batchingColorTexture",Pe._colorsTexture,de));const pr=be.morphAttributes;if((pr.position!==void 0||pr.normal!==void 0||pr.color!==void 0)&&zt.update(Pe,be,In),(Dn||qt.receiveShadow!==Pe.receiveShadow)&&(qt.receiveShadow=Pe.receiveShadow,vn.setValue(le,"receiveShadow",Pe.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(Ur.envMap.value=dt,Ur.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1),xe.isMeshStandardMaterial&&xe.envMap===null&&pe.environment!==null&&(Ur.envMapIntensity.value=pe.environmentIntensity),Dn&&(vn.setValue(le,"toneMappingExposure",R.toneMappingExposure),qt.needsLights&&Xe(Ur,Wn),Ge&&xe.fog===!0&&Et.refreshFogUniforms(Ur,Ge),Et.refreshMaterialUniforms(Ur,xe,G,oe,_.state.transmissionRenderTarget[q.id]),iw.upload(le,J(qt),Ur,de)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(iw.upload(le,J(qt),Ur,de),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&vn.setValue(le,"center",Pe.center),vn.setValue(le,"modelViewMatrix",Pe.modelViewMatrix),vn.setValue(le,"normalMatrix",Pe.normalMatrix),vn.setValue(le,"modelMatrix",Pe.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const Br=xe.uniformsGroups;for(let ii=0,ir=Br.length;ii<ir;ii++){const as=Br[ii];Se.update(as,In),Se.bind(as,In)}}return In}function Xe(q,pe){q.ambientLightColor.needsUpdate=pe,q.lightProbe.needsUpdate=pe,q.directionalLights.needsUpdate=pe,q.directionalLightShadows.needsUpdate=pe,q.pointLights.needsUpdate=pe,q.pointLightShadows.needsUpdate=pe,q.spotLights.needsUpdate=pe,q.spotLightShadows.needsUpdate=pe,q.rectAreaLights.needsUpdate=pe,q.hemisphereLights.needsUpdate=pe}function it(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(q,pe,be){bt.get(q.texture).__webglTexture=pe,bt.get(q.depthTexture).__webglTexture=be;const xe=bt.get(q);xe.__hasExternalTextures=!0,xe.__autoAllocateDepthBuffer=be===void 0,xe.__autoAllocateDepthBuffer||ft.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(q,pe){const be=bt.get(q);be.__webglFramebuffer=pe,be.__useDefaultFramebuffer=pe===void 0};const Le=le.createFramebuffer();this.setRenderTarget=function(q,pe=0,be=0){U=q,I=pe,N=be;let xe=!0,Pe=null,Ge=!1,nt=!1;if(q){const dt=bt.get(q);if(dt.__useDefaultFramebuffer!==void 0)mt.bindFramebuffer(le.FRAMEBUFFER,null),xe=!1;else if(dt.__webglFramebuffer===void 0)de.setupRenderTarget(q);else if(dt.__hasExternalTextures)de.rebindTextures(q,bt.get(q.texture).__webglTexture,bt.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const pt=q.depthTexture;if(dt.__boundDepthTexture!==pt){if(pt!==null&&bt.has(pt)&&(q.width!==pt.image.width||q.height!==pt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");de.setupDepthRenderbuffer(q)}}const Mt=q.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(nt=!0);const Ct=bt.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Ct[pe])?Pe=Ct[pe][be]:Pe=Ct[pe],Ge=!0):q.samples>0&&de.useMultisampledRTT(q)===!1?Pe=bt.get(q).__webglMultisampledFramebuffer:Array.isArray(Ct)?Pe=Ct[be]:Pe=Ct,F.copy(q.viewport),K.copy(q.scissor),Q=q.scissorTest}else F.copy(Z).multiplyScalar(G).floor(),K.copy(ne).multiplyScalar(G).floor(),Q=ce;if(be!==0&&(Pe=Le),mt.bindFramebuffer(le.FRAMEBUFFER,Pe)&&xe&&mt.drawBuffers(q,Pe),mt.viewport(F),mt.scissor(K),mt.setScissorTest(Q),Ge){const dt=bt.get(q.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_CUBE_MAP_POSITIVE_X+pe,dt.__webglTexture,be)}else if(nt){const dt=bt.get(q.texture),Mt=pe;le.framebufferTextureLayer(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,dt.__webglTexture,be,Mt)}else if(q!==null&&be!==0){const dt=bt.get(q.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,dt.__webglTexture,be)}O=-1},this.readRenderTargetPixels=function(q,pe,be,xe,Pe,Ge,nt){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let rt=bt.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&nt!==void 0&&(rt=rt[nt]),rt){mt.bindFramebuffer(le.FRAMEBUFFER,rt);try{const dt=q.texture,Mt=dt.format,Ct=dt.type;if(!_t.textureFormatReadable(Mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!_t.textureTypeReadable(Ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=q.width-xe&&be>=0&&be<=q.height-Pe&&le.readPixels(pe,be,xe,Pe,et.convert(Mt),et.convert(Ct),Ge)}finally{const dt=U!==null?bt.get(U).__webglFramebuffer:null;mt.bindFramebuffer(le.FRAMEBUFFER,dt)}}},this.readRenderTargetPixelsAsync=async function(q,pe,be,xe,Pe,Ge,nt){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let rt=bt.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&nt!==void 0&&(rt=rt[nt]),rt){const dt=q.texture,Mt=dt.format,Ct=dt.type;if(!_t.textureFormatReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!_t.textureTypeReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(pe>=0&&pe<=q.width-xe&&be>=0&&be<=q.height-Pe){mt.bindFramebuffer(le.FRAMEBUFFER,rt);const pt=le.createBuffer();le.bindBuffer(le.PIXEL_PACK_BUFFER,pt),le.bufferData(le.PIXEL_PACK_BUFFER,Ge.byteLength,le.STREAM_READ),le.readPixels(pe,be,xe,Pe,et.convert(Mt),et.convert(Ct),0);const Wt=U!==null?bt.get(U).__webglFramebuffer:null;mt.bindFramebuffer(le.FRAMEBUFFER,Wt);const Gt=le.fenceSync(le.SYNC_GPU_COMMANDS_COMPLETE,0);return le.flush(),await nee(le,Gt,4),le.bindBuffer(le.PIXEL_PACK_BUFFER,pt),le.getBufferSubData(le.PIXEL_PACK_BUFFER,0,Ge),le.deleteBuffer(pt),le.deleteSync(Gt),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(q,pe=null,be=0){q.isTexture!==!0&&(Hm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),pe=arguments[0]||null,q=arguments[1]);const xe=Math.pow(2,-be),Pe=Math.floor(q.image.width*xe),Ge=Math.floor(q.image.height*xe),nt=pe!==null?pe.x:0,rt=pe!==null?pe.y:0;de.setTexture2D(q,0),le.copyTexSubImage2D(le.TEXTURE_2D,be,0,0,nt,rt,Pe,Ge),mt.unbindTexture()};const me=le.createFramebuffer(),De=le.createFramebuffer();this.copyTextureToTexture=function(q,pe,be=null,xe=null,Pe=0,Ge=null){q.isTexture!==!0&&(Hm("WebGLRenderer: copyTextureToTexture function signature has changed."),xe=arguments[0]||null,q=arguments[1],pe=arguments[2],Ge=arguments[3]||0,be=null),Ge===null&&(Pe!==0?(Hm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=Pe,Pe=0):Ge=0);let nt,rt,dt,Mt,Ct,pt,Wt,Gt,Sn;const nn=q.isCompressedTexture?q.mipmaps[Ge]:q.image;if(be!==null)nt=be.max.x-be.min.x,rt=be.max.y-be.min.y,dt=be.isBox3?be.max.z-be.min.z:1,Mt=be.min.x,Ct=be.min.y,pt=be.isBox3?be.min.z:0;else{const pr=Math.pow(2,-Pe);nt=Math.floor(nn.width*pr),rt=Math.floor(nn.height*pr),q.isDataArrayTexture?dt=nn.depth:q.isData3DTexture?dt=Math.floor(nn.depth*pr):dt=1,Mt=0,Ct=0,pt=0}xe!==null?(Wt=xe.x,Gt=xe.y,Sn=xe.z):(Wt=0,Gt=0,Sn=0);const ln=et.convert(pe.format),qt=et.convert(pe.type);let Hn;pe.isData3DTexture?(de.setTexture3D(pe,0),Hn=le.TEXTURE_3D):pe.isDataArrayTexture||pe.isCompressedArrayTexture?(de.setTexture2DArray(pe,0),Hn=le.TEXTURE_2D_ARRAY):(de.setTexture2D(pe,0),Hn=le.TEXTURE_2D),le.pixelStorei(le.UNPACK_FLIP_Y_WEBGL,pe.flipY),le.pixelStorei(le.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),le.pixelStorei(le.UNPACK_ALIGNMENT,pe.unpackAlignment);const xn=le.getParameter(le.UNPACK_ROW_LENGTH),In=le.getParameter(le.UNPACK_IMAGE_HEIGHT),Jn=le.getParameter(le.UNPACK_SKIP_PIXELS),Dn=le.getParameter(le.UNPACK_SKIP_ROWS),Wn=le.getParameter(le.UNPACK_SKIP_IMAGES);le.pixelStorei(le.UNPACK_ROW_LENGTH,nn.width),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,nn.height),le.pixelStorei(le.UNPACK_SKIP_PIXELS,Mt),le.pixelStorei(le.UNPACK_SKIP_ROWS,Ct),le.pixelStorei(le.UNPACK_SKIP_IMAGES,pt);const vn=q.isDataArrayTexture||q.isData3DTexture,Ur=pe.isDataArrayTexture||pe.isData3DTexture;if(q.isDepthTexture){const pr=bt.get(q),Br=bt.get(pe),ii=bt.get(pr.__renderTarget),ir=bt.get(Br.__renderTarget);mt.bindFramebuffer(le.READ_FRAMEBUFFER,ii.__webglFramebuffer),mt.bindFramebuffer(le.DRAW_FRAMEBUFFER,ir.__webglFramebuffer);for(let as=0;as<dt;as++)vn&&(le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,bt.get(q).__webglTexture,Pe,pt+as),le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,bt.get(pe).__webglTexture,Ge,Sn+as)),le.blitFramebuffer(Mt,Ct,nt,rt,Wt,Gt,nt,rt,le.DEPTH_BUFFER_BIT,le.NEAREST);mt.bindFramebuffer(le.READ_FRAMEBUFFER,null),mt.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else if(Pe!==0||q.isRenderTargetTexture||bt.has(q)){const pr=bt.get(q),Br=bt.get(pe);mt.bindFramebuffer(le.READ_FRAMEBUFFER,me),mt.bindFramebuffer(le.DRAW_FRAMEBUFFER,De);for(let ii=0;ii<dt;ii++)vn?le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,pr.__webglTexture,Pe,pt+ii):le.framebufferTexture2D(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,pr.__webglTexture,Pe),Ur?le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Br.__webglTexture,Ge,Sn+ii):le.framebufferTexture2D(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Br.__webglTexture,Ge),Pe!==0?le.blitFramebuffer(Mt,Ct,nt,rt,Wt,Gt,nt,rt,le.COLOR_BUFFER_BIT,le.NEAREST):Ur?le.copyTexSubImage3D(Hn,Ge,Wt,Gt,Sn+ii,Mt,Ct,nt,rt):le.copyTexSubImage2D(Hn,Ge,Wt,Gt,Mt,Ct,nt,rt);mt.bindFramebuffer(le.READ_FRAMEBUFFER,null),mt.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else Ur?q.isDataTexture||q.isData3DTexture?le.texSubImage3D(Hn,Ge,Wt,Gt,Sn,nt,rt,dt,ln,qt,nn.data):pe.isCompressedArrayTexture?le.compressedTexSubImage3D(Hn,Ge,Wt,Gt,Sn,nt,rt,dt,ln,nn.data):le.texSubImage3D(Hn,Ge,Wt,Gt,Sn,nt,rt,dt,ln,qt,nn):q.isDataTexture?le.texSubImage2D(le.TEXTURE_2D,Ge,Wt,Gt,nt,rt,ln,qt,nn.data):q.isCompressedTexture?le.compressedTexSubImage2D(le.TEXTURE_2D,Ge,Wt,Gt,nn.width,nn.height,ln,nn.data):le.texSubImage2D(le.TEXTURE_2D,Ge,Wt,Gt,nt,rt,ln,qt,nn);le.pixelStorei(le.UNPACK_ROW_LENGTH,xn),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,In),le.pixelStorei(le.UNPACK_SKIP_PIXELS,Jn),le.pixelStorei(le.UNPACK_SKIP_ROWS,Dn),le.pixelStorei(le.UNPACK_SKIP_IMAGES,Wn),Ge===0&&pe.generateMipmaps&&le.generateMipmap(Hn),mt.unbindTexture()},this.copyTextureToTexture3D=function(q,pe,be=null,xe=null,Pe=0){return q.isTexture!==!0&&(Hm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),be=arguments[0]||null,xe=arguments[1]||null,q=arguments[2],pe=arguments[3],Pe=arguments[4]||0),Hm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(q,pe,be,xe,Pe)},this.initRenderTarget=function(q){bt.get(q).__webglFramebuffer===void 0&&de.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?de.setTextureCube(q,0):q.isData3DTexture?de.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?de.setTexture2DArray(q,0):de.setTexture2D(q,0),mt.unbindTexture()},this.resetState=function(){I=0,N=0,U=null,mt.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Vl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=nr._getDrawingBufferColorSpace(e),t.unpackColorSpace=nr._getUnpackColorSpace()}}const oae=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:yR,AddEquation:ef,AddOperation:qU,AdditiveAnimationBlendMode:ER,AdditiveBlending:QE,AgXToneMapping:QU,AlphaFormat:vR,AlwaysCompare:d5,AlwaysDepth:Iw,AlwaysStencilFunc:iM,AmbientLight:ZR,AnimationAction:iz,AnimationClip:mp,AnimationLoader:Cte,AnimationMixer:sz,AnimationObjectGroup:qte,AnimationUtils:wte,ArcCurve:C5,ArrayCamera:tz,ArrowHelper:yne,AttachedBindMode:nM,Audio:nz,AudioAnalyser:Ote,AudioContext:QR,AudioListener:Dte,AudioLoader:Bte,AxesHelper:xne,BackSide:Lo,BasicDepthPacking:i5,BasicShadowMap:MU,BatchedMesh:S5,Bone:Cg,BooleanKeyframeTrack:Sp,Box2:rne,Box3:po,Box3Helper:mne,BoxGeometry:Ap,BoxHelper:pne,BufferAttribute:Mr,BufferGeometry:Vn,BufferGeometryLoader:Q5,ByteType:AA,Cache:Nu,Camera:gv,CameraHelper:dne,CanvasTexture:Wee,CapsuleGeometry:zA,CatmullRomCurve3:T5,CineonToneMapping:JU,CircleGeometry:HA,ClampToEdgeWrapping:Ti,Clock:eP,Color:Ut,ColorKeyframeTrack:qR,ColorManagement:nr,CompressedArrayTexture:Gee,CompressedCubeTexture:Vee,CompressedTexture:NA,CompressedTextureLoader:Tte,ConeGeometry:jA,ConstantAlphaFactor:WU,ConstantColorFactor:GU,Controls:_ne,CubeCamera:_5,CubeReflectionMapping:Uc,CubeRefractionMapping:af,CubeTexture:yv,CubeTextureLoader:X5,CubeUVReflectionMapping:Kg,CubicBezierCurve:OR,CubicBezierCurve3:E5,CubicInterpolant:G5,CullFaceBack:ZE,CullFaceFront:EU,CullFaceFrontBack:cQ,CullFaceNone:TU,Curve:ll,CurvePath:R5,CustomBlending:RU,CustomToneMapping:ZU,CylinderGeometry:Zg,Cylindrical:nne,Data3DTexture:kA,DataArrayTexture:mv,DataTexture:Xl,DataTextureLoader:YR,DataUtils:Fd,DecrementStencilOp:vQ,DecrementWrapStencilOp:wQ,DefaultLoadingManager:$5,DepthFormat:Yd,DepthStencilFormat:fp,DepthTexture:OA,DetachedBindMode:t5,DirectionalLight:eS,DirectionalLightHelper:fne,DiscreteInterpolant:V5,DodecahedronGeometry:GA,DoubleSide:wa,DstAlphaFactor:OU,DstColorFactor:zU,DynamicCopyUsage:FQ,DynamicDrawUsage:PQ,DynamicReadUsage:IQ,EdgesGeometry:P5,EllipseCurve:UA,EqualCompare:c5,EqualDepth:Dw,EqualStencilFunc:CQ,EquirectangularReflectionMapping:up,EquirectangularRefractionMapping:Sx,Euler:rs,EventDispatcher:Xc,ExtrudeGeometry:WA,FileLoader:Is,Float16BufferAttribute:See,Float32BufferAttribute:rn,FloatType:xi,Fog:LA,FogExp2:IA,FramebufferTexture:jee,FrontSide:Oc,Frustum:_v,GLBufferAttribute:tne,GLSL1:OQ,GLSL3:sM,GreaterCompare:u5,GreaterDepth:Nw,GreaterEqualCompare:f5,GreaterEqualDepth:Fw,GreaterEqualStencilFunc:RQ,GreaterStencilFunc:EQ,GridHelper:une,Group:Wl,HalfFloatType:xs,HemisphereLight:q5,HemisphereLightHelper:cne,IcosahedronGeometry:bv,ImageBitmapLoader:ez,ImageLoader:Lx,ImageUtils:g5,IncrementStencilOp:xQ,IncrementWrapStencilOp:_Q,InstancedBufferAttribute:dp,InstancedBufferGeometry:Z5,InstancedInterleavedBuffer:ene,InstancedMesh:LR,Int16BufferAttribute:bee,Int32BufferAttribute:Aee,Int8BufferAttribute:vee,IntType:fv,InterleavedBuffer:vv,InterleavedBufferAttribute:lf,Interpolant:Qg,InterpolateDiscrete:wg,InterpolateLinear:bg,InterpolateSmooth:rw,InvertStencilOp:bQ,KeepStencilOp:Ad,KeyframeTrack:nc,LOD:A5,LatheGeometry:wv,Layers:Jd,LessCompare:l5,LessDepth:Lw,LessEqualCompare:RR,LessEqualDepth:cp,LessEqualStencilFunc:TQ,LessStencilFunc:SQ,Light:_f,LightProbe:J5,Line:Gc,Line3:ine,LineBasicMaterial:Ys,LineCurve:UR,LineCurve3:M5,LineDashedMaterial:z5,LineLoop:DR,LineSegments:tc,LinearFilter:Er,LinearInterpolant:XR,LinearMipMapLinearFilter:rM,LinearMipMapNearestFilter:fQ,LinearMipmapLinearFilter:el,LinearMipmapNearestFilter:rg,LinearSRGBColorSpace:jc,LinearToneMapping:YU,LinearTransfer:Tx,Loader:ss,LoaderUtils:zu,LoadingManager:ZA,LoopOnce:CR,LoopPingPong:n5,LoopRepeat:TR,LuminanceAlphaFormat:bR,LuminanceFormat:wR,MOUSE:wd,Material:vs,MaterialLoader:tS,MathUtils:Ws,Matrix2:sP,Matrix3:Yn,Matrix4:Zt,MaxEquation:IU,Mesh:di,MeshBasicMaterial:ta,MeshDepthMaterial:VR,MeshDistanceMaterial:WR,MeshLambertMaterial:GR,MeshMatcapMaterial:U5,MeshNormalMaterial:O5,MeshPhongMaterial:rx,MeshPhysicalMaterial:cl,MeshStandardMaterial:Cv,MeshToonMaterial:N5,MinEquation:BU,MirroredRepeatWrapping:vg,MixOperation:XU,MultiplyBlending:tM,MultiplyOperation:hv,NearestFilter:Bs,NearestMipMapLinearFilter:hQ,NearestMipMapNearestFilter:uQ,NearestMipmapLinearFilter:Bd,NearestMipmapNearestFilter:bA,NeutralToneMapping:e5,NeverCompare:a5,NeverDepth:Bw,NeverStencilFunc:AQ,NoBlending:Bc,NoColorSpace:Du,NoToneMapping:Ic,NormalAnimationBlendMode:RA,NormalBlending:qd,NotEqualCompare:h5,NotEqualDepth:Ow,NotEqualStencilFunc:MQ,NumberKeyframeTrack:cf,Object3D:cr,ObjectLoader:Pte,ObjectSpaceNormalMap:o5,OctahedronGeometry:Av,OneFactor:DU,OneMinusConstantAlphaFactor:$U,OneMinusConstantColorFactor:VU,OneMinusDstAlphaFactor:UU,OneMinusDstColorFactor:HU,OneMinusSrcAlphaFactor:kw,OneMinusSrcColorFactor:NU,OrthographicCamera:tl,PCFShadowMap:wA,PCFSoftShadowMap:q0,PMREMGenerator:dM,Path:Px,PerspectiveCamera:ui,Plane:Lu,PlaneGeometry:vf,PlaneHelper:gne,PointLight:Dx,PointLightHelper:ane,Points:FR,PointsMaterial:FA,PolarGridHelper:hne,PolyhedronGeometry:xf,PositionalAudio:Nte,PropertyBinding:fr,PropertyMixer:rz,QuadraticBezierCurve:zR,QuadraticBezierCurve3:HR,Quaternion:ri,QuaternionKeyframeTrack:Vu,QuaternionLinearInterpolant:W5,RED_GREEN_RGTC2_Format:cb,RED_RGTC1_Format:SR,REVISION:uv,RGBADepthPacking:s5,RGBAFormat:$i,RGBAIntegerFormat:MA,RGBA_ASTC_10x10_Format:rb,RGBA_ASTC_10x5_Format:eb,RGBA_ASTC_10x6_Format:tb,RGBA_ASTC_10x8_Format:nb,RGBA_ASTC_12x10_Format:ib,RGBA_ASTC_12x12_Format:sb,RGBA_ASTC_4x4_Format:$w,RGBA_ASTC_5x4_Format:Xw,RGBA_ASTC_5x5_Format:qw,RGBA_ASTC_6x5_Format:Yw,RGBA_ASTC_6x6_Format:Kw,RGBA_ASTC_8x5_Format:Jw,RGBA_ASTC_8x6_Format:Zw,RGBA_ASTC_8x8_Format:Qw,RGBA_BPTC_Format:Q0,RGBA_ETC2_EAC_Format:Ww,RGBA_PVRTC_2BPPV1_Format:jw,RGBA_PVRTC_4BPPV1_Format:Hw,RGBA_S3TC_DXT1_Format:K0,RGBA_S3TC_DXT3_Format:J0,RGBA_S3TC_DXT5_Format:Z0,RGBDepthPacking:pQ,RGBFormat:_R,RGBIntegerFormat:dQ,RGB_BPTC_SIGNED_Format:ob,RGB_BPTC_UNSIGNED_Format:ab,RGB_ETC1_Format:Gw,RGB_ETC2_Format:Vw,RGB_PVRTC_2BPPV1_Format:zw,RGB_PVRTC_4BPPV1_Format:Uw,RGB_S3TC_DXT1_Format:Y0,RGDepthPacking:mQ,RGFormat:AR,RGIntegerFormat:EA,RawShaderMaterial:F5,Ray:bp,Raycaster:iP,RectAreaLight:Y5,RedFormat:dv,RedIntegerFormat:pv,ReinhardToneMapping:KU,RenderTarget:PA,RenderTarget3D:Kte,RenderTargetArray:Jte,RepeatWrapping:zc,ReplaceStencilOp:yQ,ReverseSubtractEquation:kU,RingGeometry:$A,SIGNED_RED_GREEN_RGTC2_Format:ub,SIGNED_RED_RGTC1_Format:lb,SRGBColorSpace:Xr,SRGBTransfer:jr,Scene:xv,ShaderChunk:ar,ShaderLib:jl,ShaderMaterial:oa,ShadowMaterial:D5,Shape:Zd,ShapeGeometry:XA,ShapePath:vne,ShapeUtils:ql,ShortType:SA,Skeleton:Jg,SkeletonHelper:one,SkinnedMesh:DA,Source:Dd,Sphere:Xs,SphereGeometry:Sv,Spherical:hM,SphericalHarmonics3:K5,SplineCurve:jR,SpotLight:QA,SpotLightHelper:sne,Sprite:b5,SpriteMaterial:IR,SrcAlphaFactor:Pw,SrcAlphaSaturateFactor:jU,SrcColorFactor:FU,StaticCopyUsage:DQ,StaticDrawUsage:Ex,StaticReadUsage:BQ,StereoCamera:Ite,StreamCopyUsage:NQ,StreamDrawUsage:kQ,StreamReadUsage:LQ,StringKeyframeTrack:Cp,SubtractEquation:PU,SubtractiveBlending:eM,TOUCH:bd,TangentSpaceNormalMap:yf,TetrahedronGeometry:qA,Texture:Pr,TextureLoader:KR,TextureUtils:Cne,TorusGeometry:YA,TorusKnotGeometry:KA,Triangle:Qo,TriangleFanDrawMode:hb,TriangleStripDrawMode:MR,TrianglesDrawMode:r5,TubeGeometry:JA,UVMapping:of,Uint16BufferAttribute:BA,Uint32BufferAttribute:kR,Uint8BufferAttribute:_ee,Uint8ClampedBufferAttribute:wee,Uniform:rP,UniformsGroup:Qte,UniformsLib:Kt,UniformsUtils:v5,UnsignedByteType:sa,UnsignedInt248Type:hp,UnsignedInt5999Type:xR,UnsignedIntType:Hc,UnsignedShort4444Type:CA,UnsignedShort5551Type:TA,UnsignedShortType:_g,VSMShadowMap:Ul,Vector2:ht,Vector3:fe,Vector4:dr,VectorKeyframeTrack:uf,VideoTexture:Hee,WebGL3DRenderTarget:cee,WebGLArrayRenderTarget:lee,WebGLCoordinateSystem:Vl,WebGLCubeRenderTarget:BR,WebGLRenderTarget:Ca,WebGLRenderer:aP,WebGLUtils:fz,WebGPUCoordinateSystem:Mx,WireframeGeometry:L5,WrapAroundEnding:Cx,ZeroCurvatureEnding:Id,ZeroFactor:LU,ZeroSlopeEnding:Ld,ZeroStencilOp:gQ,createCanvasElement:m5},Symbol.toStringTag,{value:"Module"}));var wT={exports:{}},Gh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pD;function aae(){return pD||(pD=1,Gh.ConcurrentRoot=1,Gh.ContinuousEventPriority=4,Gh.DefaultEventPriority=16,Gh.DiscreteEventPriority=1,Gh.IdleEventPriority=536870912,Gh.LegacyRoot=0),Gh}var mD;function lae(){return mD||(mD=1,wT.exports=aae()),wT.exports}var N0=lae();function cae(n){let e;const t=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const d=e;e=u?h:Object.assign({},e,h),t.forEach(m=>m(e,d))}},i=()=>e,s=(c,u=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function m(){const g=u(e);if(!h(d,g)){const v=d;c(d=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,h)=>u||h?s(c,u,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const uae=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gD=uae?L.useEffect:L.useLayoutEffect;function dz(n){const e=typeof n=="function"?cae(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=L.useReducer(w=>w+1,0),o=e.getState(),a=L.useRef(o),l=L.useRef(r),c=L.useRef(i),u=L.useRef(!1),h=L.useRef();h.current===void 0&&(h.current=r(o));let d,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(d=r(o),m=!i(h.current,d)),gD(()=>{m&&(h.current=d),a.current=o,l.current=r,c.current=i,u.current=!1});const g=L.useRef(o);gD(()=>{const w=()=>{try{const A=e.getState(),S=l.current(A);c.current(h.current,S)||(a.current=A,h.current=S,s())}catch{u.current=!0,s()}},_=e.subscribe(w);return e.getState()!==g.current&&w(),_},[]);const v=m?d:h.current;return L.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const hae=n=>typeof n=="object"&&typeof n.then=="function",Od=[];function pz(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function mz(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Od)if(pz(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Od.indexOf(i);s!==-1&&Od.splice(s,1)},promise:(hae(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Od.push(i),!t)throw i.promise}const fae=(n,e,t)=>mz(n,e,!1,t),dae=(n,e,t)=>void mz(n,e,!0,t),pae=n=>{if(n===void 0||n.length===0)Od.splice(0,Od.length);else{const e=Od.find(t=>pz(n,t.keys,t.equal));e&&e.remove()}};var bT={exports:{}},AT={exports:{}},ST={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yD;function mae(){return yD||(yD=1,function(n){function e(G,te){var re=G.length;G.push(te);e:for(;0<re;){var Z=re-1>>>1,ne=G[Z];if(0<i(ne,te))G[Z]=te,G[re]=ne,re=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],re=G.pop();if(re!==te){G[0]=re;e:for(var Z=0,ne=G.length,ce=ne>>>1;Z<ce;){var ye=2*(Z+1)-1,he=G[ye],Ce=ye+1,ke=G[Ce];if(0>i(he,re))Ce<ne&&0>i(ke,he)?(G[Z]=ke,G[Ce]=re,Z=Ce):(G[Z]=he,G[ye]=re,Z=ye);else if(Ce<ne&&0>i(ke,re))G[Z]=ke,G[Ce]=re,Z=Ce;else break e}}return te}function i(G,te){var re=G.sortIndex-te.sortIndex;return re!==0?re:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,m=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var te=t(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=G)r(c),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(c)}}function R(G){if(v=!1,S(G),!g)if(t(l)!==null)g=!0,$(B);else{var te=t(c);te!==null&&oe(R,te.startTime-G)}}function B(G,te){g=!1,v&&(v=!1,_(U),U=-1),m=!0;var re=d;try{for(S(te),h=t(l);h!==null&&(!(h.expirationTime>te)||G&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,d=h.priorityLevel;var ne=Z(h.expirationTime<=te);te=n.unstable_now(),typeof ne=="function"?h.callback=ne:h===t(l)&&r(l),S(te)}else r(l);h=t(l)}if(h!==null)var ce=!0;else{var ye=t(c);ye!==null&&oe(R,ye.startTime-te),ce=!1}return ce}finally{h=null,d=re,m=!1}}var I=!1,N=null,U=-1,O=5,P=-1;function F(){return!(n.unstable_now()-P<O)}function K(){if(N!==null){var G=n.unstable_now();P=G;var te=!0;try{te=N(!0,G)}finally{te?Q():(I=!1,N=null)}}else I=!1}var Q;if(typeof A=="function")Q=function(){A(K)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ee=Y.port2;Y.port1.onmessage=K,Q=function(){ee.postMessage(null)}}else Q=function(){w(K,0)};function $(G){N=G,I||(I=!0,Q())}function oe(G,te){U=w(function(){G(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(B))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(d){case 1:case 2:case 3:var te=3;break;default:te=d}var re=d;d=te;try{return G()}finally{d=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=d;d=G;try{return te()}finally{d=re}},n.unstable_scheduleCallback=function(G,te,re){var Z=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Z+re:Z):re=Z,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=re+ne,G={id:u++,callback:te,priorityLevel:G,startTime:re,expirationTime:ne,sortIndex:-1},re>Z?(G.sortIndex=re,e(c,G),t(l)===null&&G===t(c)&&(v?(_(U),U=-1):v=!0,oe(R,re-Z))):(G.sortIndex=ne,e(l,G),g||m||(g=!0,$(B))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var te=d;return function(){var re=d;d=te;try{return G.apply(this,arguments)}finally{d=re}}}}(ST)),ST}var xD;function gae(){return xD||(xD=1,AT.exports=mae()),AT.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT,vD;function yae(){return vD||(vD=1,CT=function(e){var t={},r=nA(),i=gae(),s=Object.assign;function o(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,T=1;T<arguments.length;T++)x+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),B=Symbol.iterator;function I(y){return y===null||typeof y!="object"?null:(y=B&&y[B]||y["@@iterator"],typeof y=="function"?y:null)}function N(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case g:return(y.displayName||"Context")+".Consumer";case m:return(y._context.displayName||"Context")+".Provider";case v:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case A:return x=y.displayName||null,x!==null?x:N(y.type)||"Memo";case S:x=y._payload,y=y._init;try{return N(y(x))}catch{}}return null}function U(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(x);case 8:return x===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function O(y){var x=y,T=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(T=x.return),y=x.return;while(y)}return x.tag===3?T:null}function P(y){if(O(y)!==y)throw Error(o(188))}function F(y){var x=y.alternate;if(!x){if(x=O(y),x===null)throw Error(o(188));return x!==y?null:y}for(var T=y,k=x;;){var H=T.return;if(H===null)break;var X=H.alternate;if(X===null){if(k=H.return,k!==null){T=k;continue}break}if(H.child===X.child){for(X=H.child;X;){if(X===T)return P(H),y;if(X===k)return P(H),x;X=X.sibling}throw Error(o(188))}if(T.return!==k.return)T=H,k=X;else{for(var we=!1,Ne=H.child;Ne;){if(Ne===T){we=!0,T=H,k=X;break}if(Ne===k){we=!0,k=H,T=X;break}Ne=Ne.sibling}if(!we){for(Ne=X.child;Ne;){if(Ne===T){we=!0,T=X,k=H;break}if(Ne===k){we=!0,k=X,T=H;break}Ne=Ne.sibling}if(!we)throw Error(o(189))}}if(T.alternate!==k)throw Error(o(190))}if(T.tag!==3)throw Error(o(188));return T.stateNode.current===T?y:x}function K(y){return y=F(y),y!==null?Q(y):null}function Q(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=Q(y);if(x!==null)return x;y=y.sibling}return null}function Y(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var x=Y(y);if(x!==null)return x}y=y.sibling}return null}var ee=Array.isArray,$=e.getPublicInstance,oe=e.getRootHostContext,G=e.getChildHostContext,te=e.prepareForCommit,re=e.resetAfterCommit,Z=e.createInstance,ne=e.appendInitialChild,ce=e.finalizeInitialChildren,ye=e.prepareUpdate,he=e.shouldSetTextContent,Ce=e.createTextInstance,ke=e.scheduleTimeout,Ue=e.cancelTimeout,Qe=e.noTimeout,Te=e.isPrimaryRenderer,$e=e.supportsMutation,Ee=e.supportsPersistence,Oe=e.supportsHydration,le=e.getInstanceFromNode,vt=e.preparePortalMount,ft=e.getCurrentEventPriority,_t=e.detachDeletedInstance,mt=e.supportsMicrotasks,Vt=e.scheduleMicrotask,bt=e.supportsTestSelectors,de=e.findFiberRoot,ae=e.getBoundingRect,He=e.getTextContent,Ze=e.isHiddenSubtree,ut=e.matchAccessibilityRole,st=e.setFocusIfFocusable,It=e.setupIntersectionObserver,Et=e.appendChild,Lt=e.appendChildToContainer,hn=e.commitTextUpdate,gt=e.commitMount,jt=e.commitUpdate,$t=e.insertBefore,zt=e.insertInContainerBefore,Ft=e.removeChild,Me=e.removeChildFromContainer,et=e.resetTextContent,wt=e.hideInstance,Se=e.hideTextInstance,je=e.unhideInstance,qe=e.unhideTextInstance,at=e.clearContainer,Nt=e.cloneInstance,Dt=e.createContainerChildSet,kt=e.appendChildToContainerChildSet,En=e.finalizeContainerChildren,xr=e.replaceContainerChildren,Mn=e.cloneHiddenInstance,_r=e.cloneHiddenTextInstance,Or=e.canHydrateInstance,Xi=e.canHydrateTextInstance,Ks=e.canHydrateSuspenseInstance,ur=e.isSuspenseInstancePending,Gr=e.isSuspenseInstanceFallback,Ni=e.registerSuspenseInstanceRetry,Xn=e.getNextHydratableSibling,fn=e.getFirstHydratableChild,Js=e.getFirstHydratableChildWithinContainer,Pi=e.getFirstHydratableChildWithinSuspenseInstance,J=e.hydrateInstance,ue=e.hydrateTextInstance,Re=e.hydrateSuspenseInstance,Xe=e.getNextHydratableInstanceAfterSuspenseInstance,it=e.commitHydratedContainer,Le=e.commitHydratedSuspenseInstance,me=e.clearSuspenseBoundary,De=e.clearSuspenseBoundaryFromContainer,q=e.shouldDeleteUnhydratedTailInstances,pe=e.didNotMatchHydratedContainerTextInstance,be=e.didNotMatchHydratedTextInstance,xe;function Pe(y){if(xe===void 0)try{throw Error()}catch(T){var x=T.stack.trim().match(/\n( *(at )?)/);xe=x&&x[1]||""}return`
`+xe+y}var Ge=!1;function nt(y,x){if(!y||Ge)return"";Ge=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Rt){var k=Rt}Reflect.construct(y,[],x)}else{try{x.call()}catch(Rt){k=Rt}y.call(x.prototype)}else{try{throw Error()}catch(Rt){k=Rt}y()}}catch(Rt){if(Rt&&k&&typeof Rt.stack=="string"){for(var H=Rt.stack.split(`
`),X=k.stack.split(`
`),we=H.length-1,Ne=X.length-1;1<=we&&0<=Ne&&H[we]!==X[Ne];)Ne--;for(;1<=we&&0<=Ne;we--,Ne--)if(H[we]!==X[Ne]){if(we!==1||Ne!==1)do if(we--,Ne--,0>Ne||H[we]!==X[Ne]){var ct=`
`+H[we].replace(" at new "," at ");return y.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",y.displayName)),ct}while(1<=we&&0<=Ne);break}}}finally{Ge=!1,Error.prepareStackTrace=T}return(y=y?y.displayName||y.name:"")?Pe(y):""}var rt=Object.prototype.hasOwnProperty,dt=[],Mt=-1;function Ct(y){return{current:y}}function pt(y){0>Mt||(y.current=dt[Mt],dt[Mt]=null,Mt--)}function Wt(y,x){Mt++,dt[Mt]=y.current,y.current=x}var Gt={},Sn=Ct(Gt),nn=Ct(!1),ln=Gt;function qt(y,x){var T=y.type.contextTypes;if(!T)return Gt;var k=y.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===x)return k.__reactInternalMemoizedMaskedChildContext;var H={},X;for(X in T)H[X]=x[X];return k&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=H),H}function Hn(y){return y=y.childContextTypes,y!=null}function xn(){pt(nn),pt(Sn)}function In(y,x,T){if(Sn.current!==Gt)throw Error(o(168));Wt(Sn,x),Wt(nn,T)}function Jn(y,x,T){var k=y.stateNode;if(x=x.childContextTypes,typeof k.getChildContext!="function")return T;k=k.getChildContext();for(var H in k)if(!(H in x))throw Error(o(108,U(y)||"Unknown",H));return s({},T,k)}function Dn(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||Gt,ln=Sn.current,Wt(Sn,y),Wt(nn,nn.current),!0}function Wn(y,x,T){var k=y.stateNode;if(!k)throw Error(o(169));T?(y=Jn(y,x,ln),k.__reactInternalMemoizedMergedChildContext=y,pt(nn),pt(Sn),Wt(Sn,y)):pt(nn),Wt(nn,T)}var vn=Math.clz32?Math.clz32:Br,Ur=Math.log,pr=Math.LN2;function Br(y){return y>>>=0,y===0?32:31-(Ur(y)/pr|0)|0}var ii=64,ir=4194304;function as(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Ea(y,x){var T=y.pendingLanes;if(T===0)return 0;var k=0,H=y.suspendedLanes,X=y.pingedLanes,we=T&268435455;if(we!==0){var Ne=we&~H;Ne!==0?k=as(Ne):(X&=we,X!==0&&(k=as(X)))}else we=T&~H,we!==0?k=as(we):X!==0&&(k=as(X));if(k===0)return 0;if(x!==0&&x!==k&&!(x&H)&&(H=k&-k,X=x&-x,H>=X||H===16&&(X&4194240)!==0))return x;if(k&4&&(k|=T&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=k;0<x;)T=31-vn(x),H=1<<T,k|=y[T],x&=~H;return k}function eh(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Af(y,x){for(var T=y.suspendedLanes,k=y.pingedLanes,H=y.expirationTimes,X=y.pendingLanes;0<X;){var we=31-vn(X),Ne=1<<we,ct=H[we];ct===-1?(!(Ne&T)||Ne&k)&&(H[we]=eh(Ne,x)):ct<=x&&(y.expiredLanes|=Ne),X&=~Ne}}function Ma(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function th(y){for(var x=[],T=0;31>T;T++)x.push(y);return x}function ul(y,x,T){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-vn(x),y[x]=T}function nh(y,x){var T=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var k=y.eventTimes;for(y=y.expirationTimes;0<T;){var H=31-vn(T),X=1<<H;x[H]=0,k[H]=-1,y[H]=-1,T&=~X}}function Oo(y,x){var T=y.entangledLanes|=x;for(y=y.entanglements;T;){var k=31-vn(T),H=1<<k;H&x|y[k]&x&&(y[k]|=x),T&=~H}}var $n=0;function Ls(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var hl=i.unstable_scheduleCallback,sc=i.unstable_cancelCallback,Ra=i.unstable_shouldYield,fy=i.unstable_requestPaint,si=i.unstable_now,Pa=i.unstable_ImmediatePriority,Pp=i.unstable_UserBlockingPriority,ka=i.unstable_NormalPriority,bs=i.unstable_IdlePriority,Kc=null,Uo=null;function oc(y){if(Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(Kc,y,void 0,(y.current.flags&128)===128)}catch{}}function ac(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Oi=typeof Object.is=="function"?Object.is:ac,As=null,aa=!1,rh=!1;function lc(y){As===null?As=[y]:As.push(y)}function ih(y){aa=!0,lc(y)}function Ds(){if(!rh&&As!==null){rh=!0;var y=0,x=$n;try{var T=As;for($n=1;y<T.length;y++){var k=T[y];do k=k(!0);while(k!==null)}As=null,aa=!1}catch(H){throw As!==null&&(As=As.slice(y+1)),hl(Pa,Ds),H}finally{$n=x,rh=!1}}return null}var fl=a.ReactCurrentBatchConfig;function Zs(y,x){if(Oi(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var T=Object.keys(y),k=Object.keys(x);if(T.length!==k.length)return!1;for(k=0;k<T.length;k++){var H=T[k];if(!rt.call(x,H)||!Oi(y[H],x[H]))return!1}return!0}function sh(y){switch(y.tag){case 5:return Pe(y.type);case 16:return Pe("Lazy");case 13:return Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 2:case 15:return y=nt(y.type,!1),y;case 11:return y=nt(y.type.render,!1),y;case 1:return y=nt(y.type,!0),y;default:return""}}function Ss(y,x){if(y&&y.defaultProps){x=s({},x),y=y.defaultProps;for(var T in y)x[T]===void 0&&(x[T]=y[T]);return x}return x}var cc=Ct(null),zo=null,Ho=null,oh=null;function qi(){oh=Ho=zo=null}function Ba(y,x,T){Te?(Wt(cc,x._currentValue),x._currentValue=T):(Wt(cc,x._currentValue2),x._currentValue2=T)}function uc(y){var x=cc.current;pt(cc),Te?y._currentValue=x:y._currentValue2=x}function Ia(y,x,T){for(;y!==null;){var k=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,k!==null&&(k.childLanes|=x)):k!==null&&(k.childLanes&x)!==x&&(k.childLanes|=x),y===T)break;y=y.return}}function La(y,x){zo=y,oh=Ho=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(Zi=!0),y.firstContext=null)}function ls(y){var x=Te?y._currentValue:y._currentValue2;if(oh!==y)if(y={context:y,memoizedValue:x,next:null},Ho===null){if(zo===null)throw Error(o(308));Ho=y,zo.dependencies={lanes:0,firstContext:y}}else Ho=Ho.next=y;return x}var Qs=null,eo=!1;function hc(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function jo(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function Da(y,x){var T=y.updateQueue;T!==null&&(T=T.shared,bi!==null&&y.mode&1&&!(Qn&2)?(y=T.interleaved,y===null?(x.next=x,Qs===null?Qs=[T]:Qs.push(T)):(x.next=y.next,y.next=x),T.interleaved=x):(y=T.pending,y===null?x.next=x:(x.next=y.next,y.next=x),T.pending=x))}function ah(y,x,T){if(x=x.updateQueue,x!==null&&(x=x.shared,(T&4194240)!==0)){var k=x.lanes;k&=y.pendingLanes,T|=k,x.lanes=T,Oo(y,T)}}function fc(y,x){var T=y.updateQueue,k=y.alternate;if(k!==null&&(k=k.updateQueue,T===k)){var H=null,X=null;if(T=T.firstBaseUpdate,T!==null){do{var we={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};X===null?H=X=we:X=X.next=we,T=T.next}while(T!==null);X===null?H=X=x:X=X.next=x}else H=X=x;T={baseState:k.baseState,firstBaseUpdate:H,lastBaseUpdate:X,shared:k.shared,effects:k.effects},y.updateQueue=T;return}y=T.lastBaseUpdate,y===null?T.firstBaseUpdate=x:y.next=x,T.lastBaseUpdate=x}function lh(y,x,T,k){var H=y.updateQueue;eo=!1;var X=H.firstBaseUpdate,we=H.lastBaseUpdate,Ne=H.shared.pending;if(Ne!==null){H.shared.pending=null;var ct=Ne,Rt=ct.next;ct.next=null,we===null?X=Rt:we.next=Rt,we=ct;var tn=y.alternate;tn!==null&&(tn=tn.updateQueue,Ne=tn.lastBaseUpdate,Ne!==we&&(Ne===null?tn.firstBaseUpdate=Rt:Ne.next=Rt,tn.lastBaseUpdate=ct))}if(X!==null){var jn=H.baseState;we=0,tn=Rt=ct=null,Ne=X;do{var Tn=Ne.lane,er=Ne.eventTime;if((k&Tn)===Tn){tn!==null&&(tn=tn.next={eventTime:er,lane:0,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null});e:{var Jt=y,ds=Ne;switch(Tn=x,er=T,ds.tag){case 1:if(Jt=ds.payload,typeof Jt=="function"){jn=Jt.call(er,jn,Tn);break e}jn=Jt;break e;case 3:Jt.flags=Jt.flags&-65537|128;case 0:if(Jt=ds.payload,Tn=typeof Jt=="function"?Jt.call(er,jn,Tn):Jt,Tn==null)break e;jn=s({},jn,Tn);break e;case 2:eo=!0}}Ne.callback!==null&&Ne.lane!==0&&(y.flags|=64,Tn=H.effects,Tn===null?H.effects=[Ne]:Tn.push(Ne))}else er={eventTime:er,lane:Tn,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null},tn===null?(Rt=tn=er,ct=jn):tn=tn.next=er,we|=Tn;if(Ne=Ne.next,Ne===null){if(Ne=H.shared.pending,Ne===null)break;Tn=Ne,Ne=Tn.next,Tn.next=null,H.lastBaseUpdate=Tn,H.shared.pending=null}}while(!0);if(tn===null&&(ct=jn),H.baseState=ct,H.firstBaseUpdate=Rt,H.lastBaseUpdate=tn,x=H.shared.interleaved,x!==null){H=x;do we|=H.lane,H=H.next;while(H!==x)}else X===null&&(H.shared.lanes=0);za|=we,y.lanes=we,y.memoizedState=jn}}function kp(y,x,T){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var k=y[x],H=k.callback;if(H!==null){if(k.callback=null,k=T,typeof H!="function")throw Error(o(191,H));H.call(k)}}}var Bp=new r.Component().refs;function dc(y,x,T,k){x=y.memoizedState,T=T(k,x),T=T==null?x:s({},x,T),y.memoizedState=T,y.lanes===0&&(y.updateQueue.baseState=T)}var ch={isMounted:function(y){return(y=y._reactInternals)?O(y)===y:!1},enqueueSetState:function(y,x,T){y=y._reactInternals;var k=br(),H=pa(y),X=jo(k,H);X.payload=x,T!=null&&(X.callback=T),Da(y,X),x=Ms(y,H,k),x!==null&&ah(x,y,H)},enqueueReplaceState:function(y,x,T){y=y._reactInternals;var k=br(),H=pa(y),X=jo(k,H);X.tag=1,X.payload=x,T!=null&&(X.callback=T),Da(y,X),x=Ms(y,H,k),x!==null&&ah(x,y,H)},enqueueForceUpdate:function(y,x){y=y._reactInternals;var T=br(),k=pa(y),H=jo(T,k);H.tag=2,x!=null&&(H.callback=x),Da(y,H),x=Ms(y,k,T),x!==null&&ah(x,y,k)}};function Cf(y,x,T,k,H,X,we){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(k,X,we):x.prototype&&x.prototype.isPureReactComponent?!Zs(T,k)||!Zs(H,X):!0}function Ip(y,x,T){var k=!1,H=Gt,X=x.contextType;return typeof X=="object"&&X!==null?X=ls(X):(H=Hn(x)?ln:Sn.current,k=x.contextTypes,X=(k=k!=null)?qt(y,H):Gt),x=new x(T,X),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=ch,y.stateNode=x,x._reactInternals=y,k&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=H,y.__reactInternalMemoizedMaskedChildContext=X),x}function Tf(y,x,T,k){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(T,k),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(T,k),x.state!==y&&ch.enqueueReplaceState(x,x.state,null)}function uh(y,x,T,k){var H=y.stateNode;H.props=T,H.state=y.memoizedState,H.refs=Bp,hc(y);var X=x.contextType;typeof X=="object"&&X!==null?H.context=ls(X):(X=Hn(x)?ln:Sn.current,H.context=qt(y,X)),H.state=y.memoizedState,X=x.getDerivedStateFromProps,typeof X=="function"&&(dc(y,x,X,T),H.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(x=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),x!==H.state&&ch.enqueueReplaceState(H,H.state,null),lh(y,T,H,k),H.state=y.memoizedState),typeof H.componentDidMount=="function"&&(y.flags|=4194308)}var E=[],z=0,W=null,ie=0,ge=[],_e=0,ve=null,Be=1,Ye="";function xt(y,x){E[z++]=ie,E[z++]=W,W=y,ie=x}function Ot(y,x,T){ge[_e++]=Be,ge[_e++]=Ye,ge[_e++]=ve,ve=y;var k=Be;y=Ye;var H=32-vn(k)-1;k&=~(1<<H),T+=1;var X=32-vn(x)+H;if(30<X){var we=H-H%5;X=(k&(1<<we)-1).toString(32),k>>=we,H-=we,Be=1<<32-vn(x)+H|T<<H|k,Ye=X+y}else Be=1<<X|T<<H|k,Ye=y}function Cn(y){y.return!==null&&(xt(y,1),Ot(y,1,0))}function cn(y){for(;y===W;)W=E[--z],E[z]=null,ie=E[--z],E[z]=null;for(;y===ve;)ve=ge[--_e],ge[_e]=null,Ye=ge[--_e],ge[_e]=null,Be=ge[--_e],ge[_e]=null}var Pt=null,en=null,sn=!1,wr=!1,sr=null;function _i(y,x){var T=Ao(5,null,null,0);T.elementType="DELETED",T.stateNode=x,T.return=y,x=y.deletions,x===null?(y.deletions=[T],y.flags|=16):x.push(T)}function Cs(y,x){switch(y.tag){case 5:return x=Or(x,y.type,y.pendingProps),x!==null?(y.stateNode=x,Pt=y,en=fn(x),!0):!1;case 6:return x=Xi(x,y.pendingProps),x!==null?(y.stateNode=x,Pt=y,en=null,!0):!1;case 13:if(x=Ks(x),x!==null){var T=ve!==null?{id:Be,overflow:Ye}:null;return y.memoizedState={dehydrated:x,treeContext:T,retryLane:1073741824},T=Ao(18,null,null,0),T.stateNode=x,T.return=y,y.child=T,Pt=y,en=null,!0}return!1;default:return!1}}function Ui(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Zn(y){if(sn){var x=en;if(x){var T=x;if(!Cs(y,x)){if(Ui(y))throw Error(o(418));x=Xn(T);var k=Pt;x&&Cs(y,x)?_i(k,T):(y.flags=y.flags&-4097|2,sn=!1,Pt=y)}}else{if(Ui(y))throw Error(o(418));y.flags=y.flags&-4097|2,sn=!1,Pt=y}}}function ki(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Pt=y}function to(y){if(!Oe||y!==Pt)return!1;if(!sn)return ki(y),sn=!0,!1;if(y.tag!==3&&(y.tag!==5||q(y.type)&&!he(y.type,y.memoizedProps))){var x=en;if(x){if(Ui(y)){for(y=en;y;)y=Xn(y);throw Error(o(418))}for(;x;)_i(y,x),x=Xn(x)}}if(ki(y),y.tag===13){if(!Oe)throw Error(o(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));en=Xe(y)}else en=Pt?Xn(y.stateNode):null;return!0}function pc(){Oe&&(en=Pt=null,wr=sn=!1)}function hh(y){sr===null?sr=[y]:sr.push(y)}function mc(y,x,T){if(y=T.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(o(309));var k=T.stateNode}if(!k)throw Error(o(147,y));var H=k,X=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===X?x.ref:(x=function(we){var Ne=H.refs;Ne===Bp&&(Ne=H.refs={}),we===null?delete Ne[X]:Ne[X]=we},x._stringRef=X,x)}if(typeof y!="string")throw Error(o(284));if(!T._owner)throw Error(o(290,y))}return y}function Fa(y,x){throw y=Object.prototype.toString.call(x),Error(o(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function gc(y){var x=y._init;return x(y._payload)}function Jc(y){function x(Je,ze){if(y){var ot=Je.deletions;ot===null?(Je.deletions=[ze],Je.flags|=16):ot.push(ze)}}function T(Je,ze){if(!y)return null;for(;ze!==null;)x(Je,ze),ze=ze.sibling;return null}function k(Je,ze){for(Je=new Map;ze!==null;)ze.key!==null?Je.set(ze.key,ze):Je.set(ze.index,ze),ze=ze.sibling;return Je}function H(Je,ze){return Je=Tl(Je,ze),Je.index=0,Je.sibling=null,Je}function X(Je,ze,ot){return Je.index=ot,y?(ot=Je.alternate,ot!==null?(ot=ot.index,ot<ze?(Je.flags|=2,ze):ot):(Je.flags|=2,ze)):(Je.flags|=1048576,ze)}function we(Je){return y&&Je.alternate===null&&(Je.flags|=2),Je}function Ne(Je,ze,ot,Yt){return ze===null||ze.tag!==6?(ze=om(ot,Je.mode,Yt),ze.return=Je,ze):(ze=H(ze,ot),ze.return=Je,ze)}function ct(Je,ze,ot,Yt){var dn=ot.type;return dn===u?tn(Je,ze,ot.props.children,Yt,ot.key):ze!==null&&(ze.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===S&&gc(dn)===ze.type)?(Yt=H(ze,ot.props),Yt.ref=mc(Je,ze,ot),Yt.return=Je,Yt):(Yt=sm(ot.type,ot.key,ot.props,null,Je.mode,Yt),Yt.ref=mc(Je,ze,ot),Yt.return=Je,Yt)}function Rt(Je,ze,ot,Yt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==ot.containerInfo||ze.stateNode.implementation!==ot.implementation?(ze=am(ot,Je.mode,Yt),ze.return=Je,ze):(ze=H(ze,ot.children||[]),ze.return=Je,ze)}function tn(Je,ze,ot,Yt,dn){return ze===null||ze.tag!==7?(ze=vu(ot,Je.mode,Yt,dn),ze.return=Je,ze):(ze=H(ze,ot),ze.return=Je,ze)}function jn(Je,ze,ot){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=om(""+ze,Je.mode,ot),ze.return=Je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return ot=sm(ze.type,ze.key,ze.props,null,Je.mode,ot),ot.ref=mc(Je,null,ze),ot.return=Je,ot;case c:return ze=am(ze,Je.mode,ot),ze.return=Je,ze;case S:var Yt=ze._init;return jn(Je,Yt(ze._payload),ot)}if(ee(ze)||I(ze))return ze=vu(ze,Je.mode,ot,null),ze.return=Je,ze;Fa(Je,ze)}return null}function Tn(Je,ze,ot,Yt){var dn=ze!==null?ze.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return dn!==null?null:Ne(Je,ze,""+ot,Yt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case l:return ot.key===dn?ct(Je,ze,ot,Yt):null;case c:return ot.key===dn?Rt(Je,ze,ot,Yt):null;case S:return dn=ot._init,Tn(Je,ze,dn(ot._payload),Yt)}if(ee(ot)||I(ot))return dn!==null?null:tn(Je,ze,ot,Yt,null);Fa(Je,ot)}return null}function er(Je,ze,ot,Yt,dn){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Je=Je.get(ot)||null,Ne(ze,Je,""+Yt,dn);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case l:return Je=Je.get(Yt.key===null?ot:Yt.key)||null,ct(ze,Je,Yt,dn);case c:return Je=Je.get(Yt.key===null?ot:Yt.key)||null,Rt(ze,Je,Yt,dn);case S:var qn=Yt._init;return er(Je,ze,ot,qn(Yt._payload),dn)}if(ee(Yt)||I(Yt))return Je=Je.get(ot)||null,tn(ze,Je,Yt,dn,null);Fa(ze,Yt)}return null}function Jt(Je,ze,ot,Yt){for(var dn=null,qn=null,Gn=ze,vr=ze=0,Ii=null;Gn!==null&&vr<ot.length;vr++){Gn.index>vr?(Ii=Gn,Gn=null):Ii=Gn.sibling;var yr=Tn(Je,Gn,ot[vr],Yt);if(yr===null){Gn===null&&(Gn=Ii);break}y&&Gn&&yr.alternate===null&&x(Je,Gn),ze=X(yr,ze,vr),qn===null?dn=yr:qn.sibling=yr,qn=yr,Gn=Ii}if(vr===ot.length)return T(Je,Gn),sn&&xt(Je,vr),dn;if(Gn===null){for(;vr<ot.length;vr++)Gn=jn(Je,ot[vr],Yt),Gn!==null&&(ze=X(Gn,ze,vr),qn===null?dn=Gn:qn.sibling=Gn,qn=Gn);return sn&&xt(Je,vr),dn}for(Gn=k(Je,Gn);vr<ot.length;vr++)Ii=er(Gn,Je,vr,ot[vr],Yt),Ii!==null&&(y&&Ii.alternate!==null&&Gn.delete(Ii.key===null?vr:Ii.key),ze=X(Ii,ze,vr),qn===null?dn=Ii:qn.sibling=Ii,qn=Ii);return y&&Gn.forEach(function(El){return x(Je,El)}),sn&&xt(Je,vr),dn}function ds(Je,ze,ot,Yt){var dn=I(ot);if(typeof dn!="function")throw Error(o(150));if(ot=dn.call(ot),ot==null)throw Error(o(151));for(var qn=dn=null,Gn=ze,vr=ze=0,Ii=null,yr=ot.next();Gn!==null&&!yr.done;vr++,yr=ot.next()){Gn.index>vr?(Ii=Gn,Gn=null):Ii=Gn.sibling;var El=Tn(Je,Gn,yr.value,Yt);if(El===null){Gn===null&&(Gn=Ii);break}y&&Gn&&El.alternate===null&&x(Je,Gn),ze=X(El,ze,vr),qn===null?dn=El:qn.sibling=El,qn=El,Gn=Ii}if(yr.done)return T(Je,Gn),sn&&xt(Je,vr),dn;if(Gn===null){for(;!yr.done;vr++,yr=ot.next())yr=jn(Je,yr.value,Yt),yr!==null&&(ze=X(yr,ze,vr),qn===null?dn=yr:qn.sibling=yr,qn=yr);return sn&&xt(Je,vr),dn}for(Gn=k(Je,Gn);!yr.done;vr++,yr=ot.next())yr=er(Gn,Je,vr,yr.value,Yt),yr!==null&&(y&&yr.alternate!==null&&Gn.delete(yr.key===null?vr:yr.key),ze=X(yr,ze,vr),qn===null?dn=yr:qn.sibling=yr,qn=yr);return y&&Gn.forEach(function(Gy){return x(Je,Gy)}),sn&&xt(Je,vr),dn}function So(Je,ze,ot,Yt){if(typeof ot=="object"&&ot!==null&&ot.type===u&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case l:e:{for(var dn=ot.key,qn=ze;qn!==null;){if(qn.key===dn){if(dn=ot.type,dn===u){if(qn.tag===7){T(Je,qn.sibling),ze=H(qn,ot.props.children),ze.return=Je,Je=ze;break e}}else if(qn.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===S&&gc(dn)===qn.type){T(Je,qn.sibling),ze=H(qn,ot.props),ze.ref=mc(Je,qn,ot),ze.return=Je,Je=ze;break e}T(Je,qn);break}else x(Je,qn);qn=qn.sibling}ot.type===u?(ze=vu(ot.props.children,Je.mode,Yt,ot.key),ze.return=Je,Je=ze):(Yt=sm(ot.type,ot.key,ot.props,null,Je.mode,Yt),Yt.ref=mc(Je,ze,ot),Yt.return=Je,Je=Yt)}return we(Je);case c:e:{for(qn=ot.key;ze!==null;){if(ze.key===qn)if(ze.tag===4&&ze.stateNode.containerInfo===ot.containerInfo&&ze.stateNode.implementation===ot.implementation){T(Je,ze.sibling),ze=H(ze,ot.children||[]),ze.return=Je,Je=ze;break e}else{T(Je,ze);break}else x(Je,ze);ze=ze.sibling}ze=am(ot,Je.mode,Yt),ze.return=Je,Je=ze}return we(Je);case S:return qn=ot._init,So(Je,ze,qn(ot._payload),Yt)}if(ee(ot))return Jt(Je,ze,ot,Yt);if(I(ot))return ds(Je,ze,ot,Yt);Fa(Je,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"?(ot=""+ot,ze!==null&&ze.tag===6?(T(Je,ze.sibling),ze=H(ze,ot),ze.return=Je,Je=ze):(T(Je,ze),ze=om(ot,Je.mode,Yt),ze.return=Je,Je=ze),we(Je)):T(Je,ze)}return So}var dl=Jc(!0),Wv=Jc(!1),fh={},no=Ct(fh),Zc=Ct(fh),Qc=Ct(fh);function la(y){if(y===fh)throw Error(o(174));return y}function Lp(y,x){Wt(Qc,x),Wt(Zc,y),Wt(no,fh),y=oe(x),pt(no),Wt(no,y)}function dh(){pt(no),pt(Zc),pt(Qc)}function $v(y){var x=la(Qc.current),T=la(no.current);x=G(T,y.type,x),T!==x&&(Wt(Zc,y),Wt(no,x))}function dy(y){Zc.current===y&&(pt(no),pt(Zc))}var oi=Ct(0);function Dp(y){for(var x=y;x!==null;){if(x.tag===13){var T=x.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||ur(T)||Gr(T)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var yo=[];function eu(){for(var y=0;y<yo.length;y++){var x=yo[y];Te?x._workInProgressVersionPrimary=null:x._workInProgressVersionSecondary=null}yo.length=0}var Ef=a.ReactCurrentDispatcher,xo=a.ReactCurrentBatchConfig,tu=0,ai=null,Yi=null,Ki=null,Fp=!1,Na=!1,nu=0,Mf=0;function Ji(){throw Error(o(321))}function Np(y,x){if(x===null)return!1;for(var T=0;T<x.length&&T<y.length;T++)if(!Oi(y[T],x[T]))return!1;return!0}function ph(y,x,T,k,H,X){if(tu=X,ai=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Ef.current=y===null||y.memoizedState===null?vy:_y,y=T(k,H),Na){X=0;do{if(Na=!1,nu=0,25<=X)throw Error(o(301));X+=1,Ki=Yi=null,x.updateQueue=null,Ef.current=wy,y=T(k,H)}while(Na)}if(Ef.current=xh,x=Yi!==null&&Yi.next!==null,tu=0,Ki=Yi=ai=null,Fp=!1,x)throw Error(o(300));return y}function yc(){var y=nu!==0;return nu=0,y}function ca(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ki===null?ai.memoizedState=Ki=y:Ki=Ki.next=y,Ki}function ua(){if(Yi===null){var y=ai.alternate;y=y!==null?y.memoizedState:null}else y=Yi.next;var x=Ki===null?ai.memoizedState:Ki.next;if(x!==null)Ki=x,Yi=y;else{if(y===null)throw Error(o(310));Yi=y,y={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Ki===null?ai.memoizedState=Ki=y:Ki=Ki.next=y}return Ki}function Oa(y,x){return typeof x=="function"?x(y):x}function Rf(y){var x=ua(),T=x.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=y;var k=Yi,H=k.baseQueue,X=T.pending;if(X!==null){if(H!==null){var we=H.next;H.next=X.next,X.next=we}k.baseQueue=H=X,T.pending=null}if(H!==null){X=H.next,k=k.baseState;var Ne=we=null,ct=null,Rt=X;do{var tn=Rt.lane;if((tu&tn)===tn)ct!==null&&(ct=ct.next={lane:0,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null}),k=Rt.hasEagerState?Rt.eagerState:y(k,Rt.action);else{var jn={lane:tn,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null};ct===null?(Ne=ct=jn,we=k):ct=ct.next=jn,ai.lanes|=tn,za|=tn}Rt=Rt.next}while(Rt!==null&&Rt!==X);ct===null?we=k:ct.next=Ne,Oi(k,x.memoizedState)||(Zi=!0),x.memoizedState=k,x.baseState=we,x.baseQueue=ct,T.lastRenderedState=k}if(y=T.interleaved,y!==null){H=y;do X=H.lane,ai.lanes|=X,za|=X,H=H.next;while(H!==y)}else H===null&&(T.lanes=0);return[x.memoizedState,T.dispatch]}function Pf(y){var x=ua(),T=x.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=y;var k=T.dispatch,H=T.pending,X=x.memoizedState;if(H!==null){T.pending=null;var we=H=H.next;do X=y(X,we.action),we=we.next;while(we!==H);Oi(X,x.memoizedState)||(Zi=!0),x.memoizedState=X,x.baseQueue===null&&(x.baseState=X),T.lastRenderedState=X}return[X,k]}function py(){}function my(y,x){var T=ai,k=ua(),H=x(),X=!Oi(k.memoizedState,H);if(X&&(k.memoizedState=H,Zi=!0),k=k.queue,mh(pl.bind(null,T,k,y),[y]),k.getSnapshot!==x||X||Ki!==null&&Ki.memoizedState.tag&1){if(T.flags|=2048,Bf(9,yy.bind(null,T,k,H,x),void 0,null),bi===null)throw Error(o(349));tu&30||gy(T,x,H)}return H}function gy(y,x,T){y.flags|=16384,y={getSnapshot:x,value:T},x=ai.updateQueue,x===null?(x={lastEffect:null,stores:null},ai.updateQueue=x,x.stores=[y]):(T=x.stores,T===null?x.stores=[y]:T.push(y))}function yy(y,x,T,k){x.value=T,x.getSnapshot=k,Op(x)&&Ms(y,1,-1)}function pl(y,x,T){return T(function(){Op(x)&&Ms(y,1,-1)})}function Op(y){var x=y.getSnapshot;y=y.value;try{var T=x();return!Oi(y,T)}catch{return!0}}function kf(y){var x=ca();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:y},x.queue=y,y=y.dispatch=FS.bind(null,ai,y),[x.memoizedState,y]}function Bf(y,x,T,k){return y={tag:y,create:x,destroy:T,deps:k,next:null},x=ai.updateQueue,x===null?(x={lastEffect:null,stores:null},ai.updateQueue=x,x.lastEffect=y.next=y):(T=x.lastEffect,T===null?x.lastEffect=y.next=y:(k=T.next,T.next=y,y.next=k,x.lastEffect=y)),y}function Xv(){return ua().memoizedState}function xc(y,x,T,k){var H=ca();ai.flags|=y,H.memoizedState=Bf(1|x,T,void 0,k===void 0?null:k)}function Up(y,x,T,k){var H=ua();k=k===void 0?null:k;var X=void 0;if(Yi!==null){var we=Yi.memoizedState;if(X=we.destroy,k!==null&&Np(k,we.deps)){H.memoizedState=Bf(x,T,X,k);return}}ai.flags|=y,H.memoizedState=Bf(1|x,T,X,k)}function zp(y,x){return xc(8390656,8,y,x)}function mh(y,x){return Up(2048,8,y,x)}function Vr(y,x){return Up(4,2,y,x)}function Hp(y,x){return Up(4,4,y,x)}function If(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function gh(y,x,T){return T=T!=null?T.concat([y]):null,Up(4,4,If.bind(null,x,y),T)}function jp(){}function Gp(y,x){var T=ua();x=x===void 0?null:x;var k=T.memoizedState;return k!==null&&x!==null&&Np(x,k[1])?k[0]:(T.memoizedState=[y,x],y)}function yh(y,x){var T=ua();x=x===void 0?null:x;var k=T.memoizedState;return k!==null&&x!==null&&Np(x,k[1])?k[0]:(y=y(),T.memoizedState=[y,x],y)}function Vp(y,x){var T=$n;$n=T!==0&&4>T?T:4,y(!0);var k=xo.transition;xo.transition={};try{y(!1),x()}finally{$n=T,xo.transition=k}}function ru(){return ua().memoizedState}function qv(y,x,T){var k=pa(y);T={lane:k,action:T,hasEagerState:!1,eagerState:null,next:null},Yv(y)?xy(x,T):(Lf(y,x,T),T=br(),y=Ms(y,k,T),y!==null&&Df(y,x,k))}function FS(y,x,T){var k=pa(y),H={lane:k,action:T,hasEagerState:!1,eagerState:null,next:null};if(Yv(y))xy(x,H);else{Lf(y,x,H);var X=y.alternate;if(y.lanes===0&&(X===null||X.lanes===0)&&(X=x.lastRenderedReducer,X!==null))try{var we=x.lastRenderedState,Ne=X(we,T);if(H.hasEagerState=!0,H.eagerState=Ne,Oi(Ne,we))return}catch{}finally{}T=br(),y=Ms(y,k,T),y!==null&&Df(y,x,k)}}function Yv(y){var x=y.alternate;return y===ai||x!==null&&x===ai}function xy(y,x){Na=Fp=!0;var T=y.pending;T===null?x.next=x:(x.next=T.next,T.next=x),y.pending=x}function Lf(y,x,T){bi!==null&&y.mode&1&&!(Qn&2)?(y=x.interleaved,y===null?(T.next=T,Qs===null?Qs=[x]:Qs.push(x)):(T.next=y.next,y.next=T),x.interleaved=T):(y=x.pending,y===null?T.next=T:(T.next=y.next,y.next=T),x.pending=T)}function Df(y,x,T){if(T&4194240){var k=x.lanes;k&=y.pendingLanes,T|=k,x.lanes=T,Oo(y,T)}}var xh={readContext:ls,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useInsertionEffect:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useMutableSource:Ji,useSyncExternalStore:Ji,useId:Ji,unstable_isNewReconciler:!1},vy={readContext:ls,useCallback:function(y,x){return ca().memoizedState=[y,x===void 0?null:x],y},useContext:ls,useEffect:zp,useImperativeHandle:function(y,x,T){return T=T!=null?T.concat([y]):null,xc(4194308,4,If.bind(null,x,y),T)},useLayoutEffect:function(y,x){return xc(4194308,4,y,x)},useInsertionEffect:function(y,x){return xc(4,2,y,x)},useMemo:function(y,x){var T=ca();return x=x===void 0?null:x,y=y(),T.memoizedState=[y,x],y},useReducer:function(y,x,T){var k=ca();return x=T!==void 0?T(x):x,k.memoizedState=k.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},k.queue=y,y=y.dispatch=qv.bind(null,ai,y),[k.memoizedState,y]},useRef:function(y){var x=ca();return y={current:y},x.memoizedState=y},useState:kf,useDebugValue:jp,useDeferredValue:function(y){var x=kf(y),T=x[0],k=x[1];return zp(function(){var H=xo.transition;xo.transition={};try{k(y)}finally{xo.transition=H}},[y]),T},useTransition:function(){var y=kf(!1),x=y[0];return y=Vp.bind(null,y[1]),ca().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,T){var k=ai,H=ca();if(sn){if(T===void 0)throw Error(o(407));T=T()}else{if(T=x(),bi===null)throw Error(o(349));tu&30||gy(k,x,T)}H.memoizedState=T;var X={value:T,getSnapshot:x};return H.queue=X,zp(pl.bind(null,k,X,y),[y]),k.flags|=2048,Bf(9,yy.bind(null,k,X,T,x),void 0,null),T},useId:function(){var y=ca(),x=bi.identifierPrefix;if(sn){var T=Ye,k=Be;T=(k&~(1<<32-vn(k)-1)).toString(32)+T,x=":"+x+"R"+T,T=nu++,0<T&&(x+="H"+T.toString(32)),x+=":"}else T=Mf++,x=":"+x+"r"+T.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},_y={readContext:ls,useCallback:Gp,useContext:ls,useEffect:mh,useImperativeHandle:gh,useInsertionEffect:Vr,useLayoutEffect:Hp,useMemo:yh,useReducer:Rf,useRef:Xv,useState:function(){return Rf(Oa)},useDebugValue:jp,useDeferredValue:function(y){var x=Rf(Oa),T=x[0],k=x[1];return mh(function(){var H=xo.transition;xo.transition={};try{k(y)}finally{xo.transition=H}},[y]),T},useTransition:function(){var y=Rf(Oa)[0],x=ua().memoizedState;return[y,x]},useMutableSource:py,useSyncExternalStore:my,useId:ru,unstable_isNewReconciler:!1},wy={readContext:ls,useCallback:Gp,useContext:ls,useEffect:mh,useImperativeHandle:gh,useInsertionEffect:Vr,useLayoutEffect:Hp,useMemo:yh,useReducer:Pf,useRef:Xv,useState:function(){return Pf(Oa)},useDebugValue:jp,useDeferredValue:function(y){var x=Pf(Oa),T=x[0],k=x[1];return mh(function(){var H=xo.transition;xo.transition={};try{k(y)}finally{xo.transition=H}},[y]),T},useTransition:function(){var y=Pf(Oa)[0],x=ua().memoizedState;return[y,x]},useMutableSource:py,useSyncExternalStore:my,useId:ru,unstable_isNewReconciler:!1};function by(y,x){try{var T="",k=x;do T+=sh(k),k=k.return;while(k);var H=T}catch(X){H=`
Error generating stack: `+X.message+`
`+X.stack}return{value:y,source:x,stack:H}}function Wp(y,x){try{console.error(x.value)}catch(T){setTimeout(function(){throw T})}}var NS=typeof WeakMap=="function"?WeakMap:Map;function Kv(y,x,T){T=jo(-1,T),T.tag=3,T.payload={element:null};var k=x.value;return T.callback=function(){Sh||(Sh=!0,Jr=k),Wp(y,x)},T}function $p(y,x,T){T=jo(-1,T),T.tag=3;var k=y.type.getDerivedStateFromError;if(typeof k=="function"){var H=x.value;T.payload=function(){return k(H)},T.callback=function(){Wp(y,x)}}var X=y.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(T.callback=function(){Wp(y,x),typeof k!="function"&&(da===null?da=new Set([this]):da.add(this));var we=x.stack;this.componentDidCatch(x.value,{componentStack:we!==null?we:""})}),T}function ml(y,x,T){var k=y.pingCache;if(k===null){k=y.pingCache=new NS;var H=new Set;k.set(x,H)}else H=k.get(x),H===void 0&&(H=new Set,k.set(x,H));H.has(T)||(H.add(T),y=zy.bind(null,y,x,T),x.then(y,y))}function Ay(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function iu(y,x,T,k,H){return y.mode&1?(y.flags|=65536,y.lanes=H,y):(y===x?y.flags|=65536:(y.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(x=jo(-1,1),x.tag=2,Da(T,x))),T.lanes|=1),y)}function zi(y){y.flags|=4}function vh(y,x){if(y!==null&&y.child===x.child)return!0;if(x.flags&16)return!1;for(y=x.child;y!==null;){if(y.flags&12854||y.subtreeFlags&12854)return!1;y=y.sibling}return!0}var vo,su,Xp,qp;if($e)vo=function(y,x){for(var T=x.child;T!==null;){if(T.tag===5||T.tag===6)ne(y,T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===x)break;for(;T.sibling===null;){if(T.return===null||T.return===x)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},su=function(){},Xp=function(y,x,T,k,H){if(y=y.memoizedProps,y!==k){var X=x.stateNode,we=la(no.current);T=ye(X,T,y,k,H,we),(x.updateQueue=T)&&zi(x)}},qp=function(y,x,T,k){T!==k&&zi(x)};else if(Ee){vo=function(y,x,T,k){for(var H=x.child;H!==null;){if(H.tag===5){var X=H.stateNode;T&&k&&(X=Mn(X,H.type,H.memoizedProps,H)),ne(y,X)}else if(H.tag===6)X=H.stateNode,T&&k&&(X=_r(X,H.memoizedProps,H)),ne(y,X);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)X=H.child,X!==null&&(X.return=H),vo(y,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===x)break;for(;H.sibling===null;){if(H.return===null||H.return===x)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};var vc=function(y,x,T,k){for(var H=x.child;H!==null;){if(H.tag===5){var X=H.stateNode;T&&k&&(X=Mn(X,H.type,H.memoizedProps,H)),kt(y,X)}else if(H.tag===6)X=H.stateNode,T&&k&&(X=_r(X,H.memoizedProps,H)),kt(y,X);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)X=H.child,X!==null&&(X.return=H),vc(y,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===x)break;for(;H.sibling===null;){if(H.return===null||H.return===x)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};su=function(y,x){var T=x.stateNode;if(!vh(y,x)){y=T.containerInfo;var k=Dt(y);vc(k,x,!1,!1),T.pendingChildren=k,zi(x),En(y,k)}},Xp=function(y,x,T,k,H){var X=y.stateNode,we=y.memoizedProps;if((y=vh(y,x))&&we===k)x.stateNode=X;else{var Ne=x.stateNode,ct=la(no.current),Rt=null;we!==k&&(Rt=ye(Ne,T,we,k,H,ct)),y&&Rt===null?x.stateNode=X:(X=Nt(X,Rt,T,we,k,x,y,Ne),ce(X,T,k,H,ct)&&zi(x),x.stateNode=X,y?zi(x):vo(X,x,!1,!1))}},qp=function(y,x,T,k){T!==k?(y=la(Qc.current),T=la(no.current),x.stateNode=Ce(k,y,T,x),zi(x)):x.stateNode=y.stateNode}}else su=function(){},Xp=function(){},qp=function(){};function gl(y,x){if(!sn)switch(y.tailMode){case"hidden":x=y.tail;for(var T=null;x!==null;)x.alternate!==null&&(T=x),x=x.sibling;T===null?y.tail=null:T.sibling=null;break;case"collapsed":T=y.tail;for(var k=null;T!==null;)T.alternate!==null&&(k=T),T=T.sibling;k===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:k.sibling=null}}function wi(y){var x=y.alternate!==null&&y.alternate.child===y.child,T=0,k=0;if(x)for(var H=y.child;H!==null;)T|=H.lanes|H.childLanes,k|=H.subtreeFlags&14680064,k|=H.flags&14680064,H.return=y,H=H.sibling;else for(H=y.child;H!==null;)T|=H.lanes|H.childLanes,k|=H.subtreeFlags,k|=H.flags,H.return=y,H=H.sibling;return y.subtreeFlags|=k,y.childLanes=T,x}function Yp(y,x,T){var k=x.pendingProps;switch(cn(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(x),null;case 1:return Hn(x.type)&&xn(),wi(x),null;case 3:return k=x.stateNode,dh(),pt(nn),pt(Sn),eu(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(y===null||y.child===null)&&(to(x)?zi(x):y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,sr!==null&&(qf(sr),sr=null))),su(y,x),wi(x),null;case 5:dy(x),T=la(Qc.current);var H=x.type;if(y!==null&&x.stateNode!=null)Xp(y,x,H,k,T),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!k){if(x.stateNode===null)throw Error(o(166));return wi(x),null}if(y=la(no.current),to(x)){if(!Oe)throw Error(o(175));y=J(x.stateNode,x.type,x.memoizedProps,T,y,x,!wr),x.updateQueue=y,y!==null&&zi(x)}else{var X=Z(H,k,T,y,x);vo(X,x,!1,!1),x.stateNode=X,ce(X,H,k,T,y)&&zi(x)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return wi(x),null;case 6:if(y&&x.stateNode!=null)qp(y,x,y.memoizedProps,k);else{if(typeof k!="string"&&x.stateNode===null)throw Error(o(166));if(y=la(Qc.current),T=la(no.current),to(x)){if(!Oe)throw Error(o(176));if(y=x.stateNode,k=x.memoizedProps,(T=ue(y,k,x,!wr))&&(H=Pt,H!==null))switch(X=(H.mode&1)!==0,H.tag){case 3:pe(H.stateNode.containerInfo,y,k,X);break;case 5:be(H.type,H.memoizedProps,H.stateNode,y,k,X)}T&&zi(x)}else x.stateNode=Ce(k,y,T,x)}return wi(x),null;case 13:if(pt(oi),k=x.memoizedState,sn&&en!==null&&x.mode&1&&!(x.flags&128)){for(y=en;y;)y=Xn(y);return pc(),x.flags|=98560,x}if(k!==null&&k.dehydrated!==null){if(k=to(x),y===null){if(!k)throw Error(o(318));if(!Oe)throw Error(o(344));if(y=x.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));Re(y,x)}else pc(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;return wi(x),null}return sr!==null&&(qf(sr),sr=null),x.flags&128?(x.lanes=T,x):(k=k!==null,T=!1,y===null?to(x):T=y.memoizedState!==null,k&&!T&&(x.child.flags|=8192,x.mode&1&&(y===null||oi.current&1?mi===0&&(mi=3):nm())),x.updateQueue!==null&&(x.flags|=4),wi(x),null);case 4:return dh(),su(y,x),y===null&&vt(x.stateNode.containerInfo),wi(x),null;case 10:return uc(x.type._context),wi(x),null;case 17:return Hn(x.type)&&xn(),wi(x),null;case 19:if(pt(oi),H=x.memoizedState,H===null)return wi(x),null;if(k=(x.flags&128)!==0,X=H.rendering,X===null)if(k)gl(H,!1);else{if(mi!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(X=Dp(y),X!==null){for(x.flags|=128,gl(H,!1),y=X.updateQueue,y!==null&&(x.updateQueue=y,x.flags|=4),x.subtreeFlags=0,y=T,k=x.child;k!==null;)T=k,H=y,T.flags&=14680066,X=T.alternate,X===null?(T.childLanes=0,T.lanes=H,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=X.childLanes,T.lanes=X.lanes,T.child=X.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=X.memoizedProps,T.memoizedState=X.memoizedState,T.updateQueue=X.updateQueue,T.type=X.type,H=X.dependencies,T.dependencies=H===null?null:{lanes:H.lanes,firstContext:H.firstContext}),k=k.sibling;return Wt(oi,oi.current&1|2),x.child}y=y.sibling}H.tail!==null&&si()>bc&&(x.flags|=128,k=!0,gl(H,!1),x.lanes=4194304)}else{if(!k)if(y=Dp(X),y!==null){if(x.flags|=128,k=!0,y=y.updateQueue,y!==null&&(x.updateQueue=y,x.flags|=4),gl(H,!0),H.tail===null&&H.tailMode==="hidden"&&!X.alternate&&!sn)return wi(x),null}else 2*si()-H.renderingStartTime>bc&&T!==1073741824&&(x.flags|=128,k=!0,gl(H,!1),x.lanes=4194304);H.isBackwards?(X.sibling=x.child,x.child=X):(y=H.last,y!==null?y.sibling=X:x.child=X,H.last=X)}return H.tail!==null?(x=H.tail,H.rendering=x,H.tail=x.sibling,H.renderingStartTime=si(),x.sibling=null,y=oi.current,Wt(oi,k?y&1|2:y&1),x):(wi(x),null);case 22:case 23:return Yf(),k=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==k&&(x.flags|=8192),k&&x.mode&1?Es&1073741824&&(wi(x),$e&&x.subtreeFlags&6&&(x.flags|=8192)):wi(x),null;case 24:return null;case 25:return null}throw Error(o(156,x.tag))}var Sy=a.ReactCurrentOwner,Zi=!1;function pi(y,x,T,k){x.child=y===null?Wv(x,null,T,k):dl(x,y.child,T,k)}function Wr(y,x,T,k,H){T=T.render;var X=x.ref;return La(x,H),k=ph(y,x,T,k,X,H),T=yc(),y!==null&&!Zi?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~H,ro(y,x,H)):(sn&&T&&Cn(x),x.flags|=1,pi(y,x,k,H),x.child)}function zr(y,x,T,k,H){if(y===null){var X=T.type;return typeof X=="function"&&!im(X)&&X.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(x.tag=15,x.type=X,yl(y,x,X,k,H)):(y=sm(T.type,null,k,x,x.mode,H),y.ref=x.ref,y.return=x,x.child=y)}if(X=y.child,!(y.lanes&H)){var we=X.memoizedProps;if(T=T.compare,T=T!==null?T:Zs,T(we,k)&&y.ref===x.ref)return ro(y,x,H)}return x.flags|=1,y=Tl(X,k),y.ref=x.ref,y.return=x,x.child=y}function yl(y,x,T,k,H){if(y!==null&&Zs(y.memoizedProps,k)&&y.ref===x.ref)if(Zi=!1,(y.lanes&H)!==0)y.flags&131072&&(Zi=!0);else return x.lanes=y.lanes,ro(y,x,H);return xl(y,x,T,k,H)}function cs(y,x,T){var k=x.pendingProps,H=k.children,X=y!==null?y.memoizedState:null;if(k.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null},Wt(pu,Es),Es|=T;else if(T&1073741824)x.memoizedState={baseLanes:0,cachePool:null},k=X!==null?X.baseLanes:T,Wt(pu,Es),Es|=k;else return y=X!==null?X.baseLanes|T:T,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null},x.updateQueue=null,Wt(pu,Es),Es|=y,null;else X!==null?(k=X.baseLanes|T,x.memoizedState=null):k=T,Wt(pu,Es),Es|=k;return pi(y,x,H,T),x.child}function Fs(y,x){var T=x.ref;(y===null&&T!==null||y!==null&&y.ref!==T)&&(x.flags|=512,x.flags|=2097152)}function xl(y,x,T,k,H){var X=Hn(T)?ln:Sn.current;return X=qt(x,X),La(x,H),T=ph(y,x,T,k,X,H),k=yc(),y!==null&&!Zi?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~H,ro(y,x,H)):(sn&&k&&Cn(x),x.flags|=1,pi(y,x,T,H),x.child)}function ou(y,x,T,k,H){if(Hn(T)){var X=!0;Dn(x)}else X=!1;if(La(x,H),x.stateNode===null)y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),Ip(x,T,k),uh(x,T,k,H),k=!0;else if(y===null){var we=x.stateNode,Ne=x.memoizedProps;we.props=Ne;var ct=we.context,Rt=T.contextType;typeof Rt=="object"&&Rt!==null?Rt=ls(Rt):(Rt=Hn(T)?ln:Sn.current,Rt=qt(x,Rt));var tn=T.getDerivedStateFromProps,jn=typeof tn=="function"||typeof we.getSnapshotBeforeUpdate=="function";jn||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Ne!==k||ct!==Rt)&&Tf(x,we,k,Rt),eo=!1;var Tn=x.memoizedState;we.state=Tn,lh(x,k,we,H),ct=x.memoizedState,Ne!==k||Tn!==ct||nn.current||eo?(typeof tn=="function"&&(dc(x,T,tn,k),ct=x.memoizedState),(Ne=eo||Cf(x,T,Ne,k,Tn,ct,Rt))?(jn||typeof we.UNSAFE_componentWillMount!="function"&&typeof we.componentWillMount!="function"||(typeof we.componentWillMount=="function"&&we.componentWillMount(),typeof we.UNSAFE_componentWillMount=="function"&&we.UNSAFE_componentWillMount()),typeof we.componentDidMount=="function"&&(x.flags|=4194308)):(typeof we.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=k,x.memoizedState=ct),we.props=k,we.state=ct,we.context=Rt,k=Ne):(typeof we.componentDidMount=="function"&&(x.flags|=4194308),k=!1)}else{we=x.stateNode,Sf(y,x),Ne=x.memoizedProps,Rt=x.type===x.elementType?Ne:Ss(x.type,Ne),we.props=Rt,jn=x.pendingProps,Tn=we.context,ct=T.contextType,typeof ct=="object"&&ct!==null?ct=ls(ct):(ct=Hn(T)?ln:Sn.current,ct=qt(x,ct));var er=T.getDerivedStateFromProps;(tn=typeof er=="function"||typeof we.getSnapshotBeforeUpdate=="function")||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Ne!==jn||Tn!==ct)&&Tf(x,we,k,ct),eo=!1,Tn=x.memoizedState,we.state=Tn,lh(x,k,we,H);var Jt=x.memoizedState;Ne!==jn||Tn!==Jt||nn.current||eo?(typeof er=="function"&&(dc(x,T,er,k),Jt=x.memoizedState),(Rt=eo||Cf(x,T,Rt,k,Tn,Jt,ct)||!1)?(tn||typeof we.UNSAFE_componentWillUpdate!="function"&&typeof we.componentWillUpdate!="function"||(typeof we.componentWillUpdate=="function"&&we.componentWillUpdate(k,Jt,ct),typeof we.UNSAFE_componentWillUpdate=="function"&&we.UNSAFE_componentWillUpdate(k,Jt,ct)),typeof we.componentDidUpdate=="function"&&(x.flags|=4),typeof we.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof we.componentDidUpdate!="function"||Ne===y.memoizedProps&&Tn===y.memoizedState||(x.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Ne===y.memoizedProps&&Tn===y.memoizedState||(x.flags|=1024),x.memoizedProps=k,x.memoizedState=Jt),we.props=k,we.state=Jt,we.context=ct,k=Rt):(typeof we.componentDidUpdate!="function"||Ne===y.memoizedProps&&Tn===y.memoizedState||(x.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Ne===y.memoizedProps&&Tn===y.memoizedState||(x.flags|=1024),k=!1)}return Ts(y,x,T,k,X,H)}function Ts(y,x,T,k,H,X){Fs(y,x);var we=(x.flags&128)!==0;if(!k&&!we)return H&&Wn(x,T,!1),ro(y,x,X);k=x.stateNode,Sy.current=x;var Ne=we&&typeof T.getDerivedStateFromError!="function"?null:k.render();return x.flags|=1,y!==null&&we?(x.child=dl(x,y.child,null,X),x.child=dl(x,null,Ne,X)):pi(y,x,Ne,X),x.memoizedState=k.state,H&&Wn(x,T,!0),x.child}function Ff(y){var x=y.stateNode;x.pendingContext?In(y,x.pendingContext,x.pendingContext!==x.context):x.context&&In(y,x.context,!1),Lp(y,x.containerInfo)}function Cy(y,x,T,k,H){return pc(),hh(H),x.flags|=256,pi(y,x,T,k),x.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function au(y){return{baseLanes:y,cachePool:null}}function Ty(y,x,T){var k=x.pendingProps,H=oi.current,X=!1,we=(x.flags&128)!==0,Ne;if((Ne=we)||(Ne=y!==null&&y.memoizedState===null?!1:(H&2)!==0),Ne?(X=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(H|=1),Wt(oi,H&1),y===null)return Zn(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?Gr(y)?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(H=k.children,y=k.fallback,X?(k=x.mode,X=x.child,H={mode:"hidden",children:H},!(k&1)&&X!==null?(X.childLanes=0,X.pendingProps=H):X=Zf(H,k,0,null),y=vu(y,k,T,null),X.return=x,y.return=x,X.sibling=y,x.child=X,x.child.memoizedState=au(T),x.memoizedState=Nf,y):ha(x,H));if(H=y.memoizedState,H!==null){if(Ne=H.dehydrated,Ne!==null){if(we)return x.flags&256?(x.flags&=-257,Uf(y,x,T,Error(o(422)))):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(X=k.fallback,H=x.mode,k=Zf({mode:"visible",children:k.children},H,0,null),X=vu(X,H,T,null),X.flags|=2,k.return=x,X.return=x,k.sibling=X,x.child=k,x.mode&1&&dl(x,y.child,null,T),x.child.memoizedState=au(T),x.memoizedState=Nf,X);if(!(x.mode&1))x=Uf(y,x,T,null);else if(Gr(Ne))x=Uf(y,x,T,Error(o(419)));else if(k=(T&y.childLanes)!==0,Zi||k){if(k=bi,k!==null){switch(T&-T){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}k=X&(k.suspendedLanes|T)?0:X,k!==0&&k!==H.retryLane&&(H.retryLane=k,Ms(y,k,-1))}nm(),x=Uf(y,x,T,Error(o(421)))}else ur(Ne)?(x.flags|=128,x.child=y.child,x=t1.bind(null,y),Ni(Ne,x),x=null):(T=H.treeContext,Oe&&(en=Pi(Ne),Pt=x,sn=!0,sr=null,wr=!1,T!==null&&(ge[_e++]=Be,ge[_e++]=Ye,ge[_e++]=ve,Be=T.id,Ye=T.overflow,ve=x)),x=ha(x,x.pendingProps.children),x.flags|=4096);return x}return X?(k=Kp(y,x,k.children,k.fallback,T),X=x.child,H=y.child.memoizedState,X.memoizedState=H===null?au(T):{baseLanes:H.baseLanes|T,cachePool:null},X.childLanes=y.childLanes&~T,x.memoizedState=Nf,k):(T=Of(y,x,k.children,T),x.memoizedState=null,T)}return X?(k=Kp(y,x,k.children,k.fallback,T),X=x.child,H=y.child.memoizedState,X.memoizedState=H===null?au(T):{baseLanes:H.baseLanes|T,cachePool:null},X.childLanes=y.childLanes&~T,x.memoizedState=Nf,k):(T=Of(y,x,k.children,T),x.memoizedState=null,T)}function ha(y,x){return x=Zf({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function Of(y,x,T,k){var H=y.child;return y=H.sibling,T=Tl(H,{mode:"visible",children:T}),!(x.mode&1)&&(T.lanes=k),T.return=x,T.sibling=null,y!==null&&(k=x.deletions,k===null?(x.deletions=[y],x.flags|=16):k.push(y)),x.child=T}function Kp(y,x,T,k,H){var X=x.mode;y=y.child;var we=y.sibling,Ne={mode:"hidden",children:T};return!(X&1)&&x.child!==y?(T=x.child,T.childLanes=0,T.pendingProps=Ne,x.deletions=null):(T=Tl(y,Ne),T.subtreeFlags=y.subtreeFlags&14680064),we!==null?k=Tl(we,k):(k=vu(k,X,H,null),k.flags|=2),k.return=x,T.return=x,T.sibling=k,x.child=T,k}function Uf(y,x,T,k){return k!==null&&hh(k),dl(x,y.child,null,T),y=ha(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function Jv(y,x,T){y.lanes|=x;var k=y.alternate;k!==null&&(k.lanes|=x),Ia(y.return,x,T)}function Ua(y,x,T,k,H){var X=y.memoizedState;X===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:k,tail:T,tailMode:H}:(X.isBackwards=x,X.rendering=null,X.renderingStartTime=0,X.last=k,X.tail=T,X.tailMode=H)}function lu(y,x,T){var k=x.pendingProps,H=k.revealOrder,X=k.tail;if(pi(y,x,k.children,T),k=oi.current,k&2)k=k&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Jv(y,T,x);else if(y.tag===19)Jv(y,T,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}k&=1}if(Wt(oi,k),!(x.mode&1))x.memoizedState=null;else switch(H){case"forwards":for(T=x.child,H=null;T!==null;)y=T.alternate,y!==null&&Dp(y)===null&&(H=T),T=T.sibling;T=H,T===null?(H=x.child,x.child=null):(H=T.sibling,T.sibling=null),Ua(x,!1,H,T,X);break;case"backwards":for(T=null,H=x.child,x.child=null;H!==null;){if(y=H.alternate,y!==null&&Dp(y)===null){x.child=H;break}y=H.sibling,H.sibling=T,T=H,H=y}Ua(x,!0,T,null,X);break;case"together":Ua(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function ro(y,x,T){if(y!==null&&(x.dependencies=y.dependencies),za|=x.lanes,!(T&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(o(153));if(x.child!==null){for(y=x.child,T=Tl(y,y.pendingProps),x.child=T,T.return=x;y.sibling!==null;)y=y.sibling,T=T.sibling=Tl(y,y.pendingProps),T.return=x;T.sibling=null}return x.child}function Jp(y,x,T){switch(x.tag){case 3:Ff(x),pc();break;case 5:$v(x);break;case 1:Hn(x.type)&&Dn(x);break;case 4:Lp(x,x.stateNode.containerInfo);break;case 10:Ba(x,x.type._context,x.memoizedProps.value);break;case 13:var k=x.memoizedState;if(k!==null)return k.dehydrated!==null?(Wt(oi,oi.current&1),x.flags|=128,null):T&x.child.childLanes?Ty(y,x,T):(Wt(oi,oi.current&1),y=ro(y,x,T),y!==null?y.sibling:null);Wt(oi,oi.current&1);break;case 19:if(k=(T&x.childLanes)!==0,y.flags&128){if(k)return lu(y,x,T);x.flags|=128}var H=x.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Wt(oi,oi.current),k)break;return null;case 22:case 23:return x.lanes=0,cs(y,x,T)}return ro(y,x,T)}function Zp(y,x){switch(cn(x),x.tag){case 1:return Hn(x.type)&&xn(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return dh(),pt(nn),pt(Sn),eu(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return dy(x),null;case 13:if(pt(oi),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(o(340));pc()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return pt(oi),null;case 4:return dh(),null;case 10:return uc(x.type._context),null;case 22:case 23:return Yf(),null;case 24:return null;default:return null}}var Ns=!1,Qi=!1,cu=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Go(y,x){var T=y.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(k){Us(y,x,k)}else T.current=null}function vl(y,x,T){try{T()}catch(k){Us(y,x,k)}}var Ey=!1;function My(y,x){for(te(y.containerInfo),Ht=x;Ht!==null;)if(y=Ht,x=y.child,(y.subtreeFlags&1028)!==0&&x!==null)x.return=y,Ht=x;else for(;Ht!==null;){y=Ht;try{var T=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var k=T.memoizedProps,H=T.memoizedState,X=y.stateNode,we=X.getSnapshotBeforeUpdate(y.elementType===y.type?k:Ss(y.type,k),H);X.__reactInternalSnapshotBeforeUpdate=we}break;case 3:$e&&at(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ne){Us(y,y.return,Ne)}if(x=y.sibling,x!==null){x.return=y.return,Ht=x;break}Ht=y.return}return T=Ey,Ey=!1,T}function _l(y,x,T){var k=x.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var H=k=k.next;do{if((H.tag&y)===y){var X=H.destroy;H.destroy=void 0,X!==void 0&&vl(x,T,X)}H=H.next}while(H!==k)}}function us(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var T=x=x.next;do{if((T.tag&y)===y){var k=T.create;T.destroy=k()}T=T.next}while(T!==x)}}function Os(y){var x=y.ref;if(x!==null){var T=y.stateNode;switch(y.tag){case 5:y=$(T);break;default:y=T}typeof x=="function"?x(y):x.current=y}}function Kr(y,x,T){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(Kc,x)}catch{}switch(x.tag){case 0:case 11:case 14:case 15:if(y=x.updateQueue,y!==null&&(y=y.lastEffect,y!==null)){var k=y=y.next;do{var H=k,X=H.destroy;H=H.tag,X!==void 0&&(H&2||H&4)&&vl(x,T,X),k=k.next}while(k!==y)}break;case 1:if(Go(x,T),y=x.stateNode,typeof y.componentWillUnmount=="function")try{y.props=x.memoizedProps,y.state=x.memoizedState,y.componentWillUnmount()}catch(we){Us(x,T,we)}break;case 5:Go(x,T);break;case 4:$e?ky(y,x,T):Ee&&Ee&&(x=x.stateNode.containerInfo,T=Dt(x),xr(x,T))}}function Vo(y,x,T){for(var k=x;;)if(Kr(y,k,T),k.child===null||$e&&k.tag===4){if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}else k.child.return=k,k=k.child}function Ry(y){var x=y.alternate;x!==null&&(y.alternate=null,Ry(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&_t(x)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Py(y){return y.tag===5||y.tag===3||y.tag===4}function Qp(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Py(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function em(y){if($e){e:{for(var x=y.return;x!==null;){if(Py(x))break e;x=x.return}throw Error(o(160))}var T=x;switch(T.tag){case 5:x=T.stateNode,T.flags&32&&(et(x),T.flags&=-33),T=Qp(y),_h(y,T,x);break;case 3:case 4:x=T.stateNode.containerInfo,T=Qp(y),tm(y,T,x);break;default:throw Error(o(161))}}}function tm(y,x,T){var k=y.tag;if(k===5||k===6)y=y.stateNode,x?zt(T,y,x):Lt(T,y);else if(k!==4&&(y=y.child,y!==null))for(tm(y,x,T),y=y.sibling;y!==null;)tm(y,x,T),y=y.sibling}function _h(y,x,T){var k=y.tag;if(k===5||k===6)y=y.stateNode,x?$t(T,y,x):Et(T,y);else if(k!==4&&(y=y.child,y!==null))for(_h(y,x,T),y=y.sibling;y!==null;)_h(y,x,T),y=y.sibling}function ky(y,x,T){for(var k=x,H=!1,X,we;;){if(!H){H=k.return;e:for(;;){if(H===null)throw Error(o(160));switch(X=H.stateNode,H.tag){case 5:we=!1;break e;case 3:X=X.containerInfo,we=!0;break e;case 4:X=X.containerInfo,we=!0;break e}H=H.return}H=!0}if(k.tag===5||k.tag===6)Vo(y,k,T),we?Me(X,k.stateNode):Ft(X,k.stateNode);else if(k.tag===18)we?De(X,k.stateNode):me(X,k.stateNode);else if(k.tag===4){if(k.child!==null){X=k.stateNode.containerInfo,we=!0,k.child.return=k,k=k.child;continue}}else if(Kr(y,k,T),k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return,k.tag===4&&(H=!1)}k.sibling.return=k.return,k=k.sibling}}function _c(y,x){if($e){switch(x.tag){case 0:case 11:case 14:case 15:_l(3,x,x.return),us(3,x),_l(5,x,x.return);return;case 1:return;case 5:var T=x.stateNode;if(T!=null){var k=x.memoizedProps;y=y!==null?y.memoizedProps:k;var H=x.type,X=x.updateQueue;x.updateQueue=null,X!==null&&jt(T,X,H,y,k,x)}return;case 6:if(x.stateNode===null)throw Error(o(162));T=x.memoizedProps,hn(x.stateNode,y!==null?y.memoizedProps:T,T);return;case 3:Oe&&y!==null&&y.memoizedState.isDehydrated&&it(x.stateNode.containerInfo);return;case 12:return;case 13:wh(x);return;case 19:wh(x);return;case 17:return}throw Error(o(163))}switch(x.tag){case 0:case 11:case 14:case 15:_l(3,x,x.return),us(3,x),_l(5,x,x.return);return;case 12:return;case 13:wh(x);return;case 19:wh(x);return;case 3:Oe&&y!==null&&y.memoizedState.isDehydrated&&it(x.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ee){switch(x.tag){case 1:case 5:case 6:break e;case 3:case 4:x=x.stateNode,xr(x.containerInfo,x.pendingChildren);break e}throw Error(o(163))}}function wh(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var T=y.stateNode;T===null&&(T=y.stateNode=new cu),x.forEach(function(k){var H=n1.bind(null,y,k);T.has(k)||(T.add(k),k.then(H,H))})}}function OS(y,x){for(Ht=x;Ht!==null;){x=Ht;var T=x.deletions;if(T!==null)for(var k=0;k<T.length;k++){var H=T[k];try{var X=y;$e?ky(X,H,x):Vo(X,H,x);var we=H.alternate;we!==null&&(we.return=null),H.return=null}catch(dn){Us(H,x,dn)}}if(T=x.child,x.subtreeFlags&12854&&T!==null)T.return=x,Ht=T;else for(;Ht!==null;){x=Ht;try{var Ne=x.flags;if(Ne&32&&$e&&et(x.stateNode),Ne&512){var ct=x.alternate;if(ct!==null){var Rt=ct.ref;Rt!==null&&(typeof Rt=="function"?Rt(null):Rt.current=null)}}if(Ne&8192)switch(x.tag){case 13:if(x.memoizedState!==null){var tn=x.alternate;(tn===null||tn.memoizedState===null)&&($f=si())}break;case 22:var jn=x.memoizedState!==null,Tn=x.alternate,er=Tn!==null&&Tn.memoizedState!==null;if(T=x,$e){e:if(k=T,H=jn,X=null,$e)for(var Jt=k;;){if(Jt.tag===5){if(X===null){X=Jt;var ds=Jt.stateNode;H?wt(ds):je(Jt.stateNode,Jt.memoizedProps)}}else if(Jt.tag===6){if(X===null){var So=Jt.stateNode;H?Se(So):qe(So,Jt.memoizedProps)}}else if((Jt.tag!==22&&Jt.tag!==23||Jt.memoizedState===null||Jt===k)&&Jt.child!==null){Jt.child.return=Jt,Jt=Jt.child;continue}if(Jt===k)break;for(;Jt.sibling===null;){if(Jt.return===null||Jt.return===k)break e;X===Jt&&(X=null),Jt=Jt.return}X===Jt&&(X=null),Jt.sibling.return=Jt.return,Jt=Jt.sibling}}if(jn&&!er&&T.mode&1){Ht=T;for(var Je=T.child;Je!==null;){for(T=Ht=Je;Ht!==null;){k=Ht;var ze=k.child;switch(k.tag){case 0:case 11:case 14:case 15:_l(4,k,k.return);break;case 1:Go(k,k.return);var ot=k.stateNode;if(typeof ot.componentWillUnmount=="function"){var Yt=k.return;try{ot.props=k.memoizedProps,ot.state=k.memoizedState,ot.componentWillUnmount()}catch(dn){Us(k,Yt,dn)}}break;case 5:Go(k,k.return);break;case 22:if(k.memoizedState!==null){Iy(T);continue}}ze!==null?(ze.return=k,Ht=ze):Iy(T)}Je=Je.sibling}}}switch(Ne&4102){case 2:em(x),x.flags&=-3;break;case 6:em(x),x.flags&=-3,_c(x.alternate,x);break;case 4096:x.flags&=-4097;break;case 4100:x.flags&=-4097,_c(x.alternate,x);break;case 4:_c(x.alternate,x)}}catch(dn){Us(x,x.return,dn)}if(T=x.sibling,T!==null){T.return=x.return,Ht=T;break}Ht=x.return}}}function zf(y,x,T){Ht=y,Hf(y)}function Hf(y,x,T){for(var k=(y.mode&1)!==0;Ht!==null;){var H=Ht,X=H.child;if(H.tag===22&&k){var we=H.memoizedState!==null||Ns;if(!we){var Ne=H.alternate,ct=Ne!==null&&Ne.memoizedState!==null||Qi;Ne=Ns;var Rt=Qi;if(Ns=we,(Qi=ct)&&!Rt)for(Ht=H;Ht!==null;)we=Ht,ct=we.child,we.tag===22&&we.memoizedState!==null?uu(H):ct!==null?(ct.return=we,Ht=ct):uu(H);for(;X!==null;)Ht=X,Hf(X),X=X.sibling;Ht=H,Ns=Ne,Qi=Rt}By(y)}else H.subtreeFlags&8772&&X!==null?(X.return=H,Ht=X):By(y)}}function By(y){for(;Ht!==null;){var x=Ht;if(x.flags&8772){var T=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:Qi||us(5,x);break;case 1:var k=x.stateNode;if(x.flags&4&&!Qi)if(T===null)k.componentDidMount();else{var H=x.elementType===x.type?T.memoizedProps:Ss(x.type,T.memoizedProps);k.componentDidUpdate(H,T.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var X=x.updateQueue;X!==null&&kp(x,X,k);break;case 3:var we=x.updateQueue;if(we!==null){if(T=null,x.child!==null)switch(x.child.tag){case 5:T=$(x.child.stateNode);break;case 1:T=x.child.stateNode}kp(x,we,T)}break;case 5:var Ne=x.stateNode;T===null&&x.flags&4&&gt(Ne,x.type,x.memoizedProps,x);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&x.memoizedState===null){var ct=x.alternate;if(ct!==null){var Rt=ct.memoizedState;if(Rt!==null){var tn=Rt.dehydrated;tn!==null&&Le(tn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Qi||x.flags&512&&Os(x)}catch(jn){Us(x,x.return,jn)}}if(x===y){Ht=null;break}if(T=x.sibling,T!==null){T.return=x.return,Ht=T;break}Ht=x.return}}function Iy(y){for(;Ht!==null;){var x=Ht;if(x===y){Ht=null;break}var T=x.sibling;if(T!==null){T.return=x.return,Ht=T;break}Ht=x.return}}function uu(y){for(;Ht!==null;){var x=Ht;try{switch(x.tag){case 0:case 11:case 15:var T=x.return;try{us(4,x)}catch(ct){Us(x,T,ct)}break;case 1:var k=x.stateNode;if(typeof k.componentDidMount=="function"){var H=x.return;try{k.componentDidMount()}catch(ct){Us(x,H,ct)}}var X=x.return;try{Os(x)}catch(ct){Us(x,X,ct)}break;case 5:var we=x.return;try{Os(x)}catch(ct){Us(x,we,ct)}}}catch(ct){Us(x,x.return,ct)}if(x===y){Ht=null;break}var Ne=x.sibling;if(Ne!==null){Ne.return=x.return,Ht=Ne;break}Ht=x.return}}var jf=0,hu=1,fu=2,wl=3,bh=4;if(typeof Symbol=="function"&&Symbol.for){var du=Symbol.for;jf=du("selector.component"),hu=du("selector.has_pseudo_class"),fu=du("selector.role"),wl=du("selector.test_id"),bh=du("selector.text")}function Gf(y){var x=le(y);if(x!=null){if(typeof x.memoizedProps["data-testname"]!="string")throw Error(o(364));return x}if(y=de(y),y===null)throw Error(o(362));return y.stateNode.current}function Vf(y,x){switch(x.$$typeof){case jf:if(y.type===x.value)return!0;break;case hu:e:{x=x.value,y=[y,0];for(var T=0;T<y.length;){var k=y[T++],H=y[T++],X=x[H];if(k.tag!==5||!Ze(k)){for(;X!=null&&Vf(k,X);)H++,X=x[H];if(H===x.length){x=!0;break e}else for(k=k.child;k!==null;)y.push(k,H),k=k.sibling}}x=!1}return x;case fu:if(y.tag===5&&ut(y.stateNode,x.value))return!0;break;case bh:if((y.tag===5||y.tag===6)&&(y=He(y),y!==null&&0<=y.indexOf(x.value)))return!0;break;case wl:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===x.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function wc(y){switch(y.$$typeof){case jf:return"<"+(N(y.value)||"Unknown")+">";case hu:return":has("+(wc(y)||"")+")";case fu:return'[role="'+y.value+'"]';case bh:return'"'+y.value+'"';case wl:return'[data-testname="'+y.value+'"]';default:throw Error(o(365))}}function _o(y,x){var T=[];y=[y,0];for(var k=0;k<y.length;){var H=y[k++],X=y[k++],we=x[X];if(H.tag!==5||!Ze(H)){for(;we!=null&&Vf(H,we);)X++,we=x[X];if(X===x.length)T.push(H);else for(H=H.child;H!==null;)y.push(H,X),H=H.sibling}}return T}function bl(y,x){if(!bt)throw Error(o(363));y=Gf(y),y=_o(y,x),x=[],y=Array.from(y);for(var T=0;T<y.length;){var k=y[T++];if(k.tag===5)Ze(k)||x.push(k.stateNode);else for(k=k.child;k!==null;)y.push(k),k=k.sibling}return x}var Ly=Math.ceil,Wf=a.ReactCurrentDispatcher,fa=a.ReactCurrentOwner,Ir=a.ReactCurrentBatchConfig,Qn=0,bi=null,Lr=null,Qr=0,Es=0,pu=Ct(0),mi=0,Ah=null,za=0,wo=0,mu=0,Al=null,Bi=null,$f=0,bc=1/0;function gu(){bc=si()+500}var Sh=!1,Jr=null,da=null,Ch=!1,Ha=null,yu=0,xu=0,Sl=null,$r=-1,gi=0;function br(){return Qn&6?si():$r!==-1?$r:$r=si()}function pa(y){return y.mode&1?Qn&2&&Qr!==0?Qr&-Qr:fl.transition!==null?(gi===0&&(y=ii,ii<<=1,!(ii&4194240)&&(ii=64),gi=y),gi):(y=$n,y!==0?y:ft()):1}function Ms(y,x,T){if(50<xu)throw xu=0,Sl=null,Error(o(185));var k=Ac(y,x);return k===null?null:(ul(k,x,T),(!(Qn&2)||k!==bi)&&(k===bi&&(!(Qn&2)&&(wo|=x),mi===4&&fs(k,Qr)),io(k,T),x===1&&Qn===0&&!(y.mode&1)&&(gu(),aa&&Ds())),k)}function Ac(y,x){y.lanes|=x;var T=y.alternate;for(T!==null&&(T.lanes|=x),T=y,y=y.return;y!==null;)y.childLanes|=x,T=y.alternate,T!==null&&(T.childLanes|=x),T=y,y=y.return;return T.tag===3?T.stateNode:null}function io(y,x){var T=y.callbackNode;Af(y,x);var k=Ea(y,y===bi?Qr:0);if(k===0)T!==null&&sc(T),y.callbackNode=null,y.callbackPriority=0;else if(x=k&-k,y.callbackPriority!==x){if(T!=null&&sc(T),x===1)y.tag===0?ih(bo.bind(null,y)):lc(bo.bind(null,y)),mt?Vt(function(){Qn===0&&Ds()}):hl(Pa,Ds),T=null;else{switch(Ls(k)){case 1:T=Pa;break;case 4:T=Pp;break;case 16:T=ka;break;case 536870912:T=bs;break;default:T=ka}T=rm(T,hs.bind(null,y))}y.callbackPriority=x,y.callbackNode=T}}function hs(y,x){if($r=-1,gi=0,Qn&6)throw Error(o(327));var T=y.callbackNode;if(ja()&&y.callbackNode!==T)return null;var k=Ea(y,y===bi?Qr:0);if(k===0)return null;if(k&30||k&y.expiredLanes||x)x=Kf(y,k);else{x=k;var H=Qn;Qn|=2;var X=Ny();(bi!==y||Qr!==x)&&(gu(),Cl(y,x));do try{Qv();break}catch(Ne){Fy(y,Ne)}while(!0);qi(),Wf.current=X,Qn=H,Lr!==null?x=0:(bi=null,Qr=0,x=mi)}if(x!==0){if(x===2&&(H=Ma(y),H!==0&&(k=H,x=Xf(y,H))),x===1)throw T=Ah,Cl(y,0),fs(y,k),io(y,si()),T;if(x===6)fs(y,k);else{if(H=y.current.alternate,!(k&30)&&!Dy(H)&&(x=Kf(y,k),x===2&&(X=Ma(y),X!==0&&(k=X,x=Xf(y,X))),x===1))throw T=Ah,Cl(y,0),fs(y,k),io(y,si()),T;switch(y.finishedWork=H,y.finishedLanes=k,x){case 0:case 1:throw Error(o(345));case 2:ma(y,Bi);break;case 3:if(fs(y,k),(k&130023424)===k&&(x=$f+500-si(),10<x)){if(Ea(y,0)!==0)break;if(H=y.suspendedLanes,(H&k)!==k){br(),y.pingedLanes|=y.suspendedLanes&H;break}y.timeoutHandle=ke(ma.bind(null,y,Bi),x);break}ma(y,Bi);break;case 4:if(fs(y,k),(k&4194240)===k)break;for(x=y.eventTimes,H=-1;0<k;){var we=31-vn(k);X=1<<we,we=x[we],we>H&&(H=we),k&=~X}if(k=H,k=si()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*Ly(k/1960))-k,10<k){y.timeoutHandle=ke(ma.bind(null,y,Bi),k);break}ma(y,Bi);break;case 5:ma(y,Bi);break;default:throw Error(o(329))}}}return io(y,si()),y.callbackNode===T?hs.bind(null,y):null}function Xf(y,x){var T=Al;return y.current.memoizedState.isDehydrated&&(Cl(y,x).flags|=256),y=Kf(y,x),y!==2&&(x=Bi,Bi=T,x!==null&&qf(x)),y}function qf(y){Bi===null?Bi=y:Bi.push.apply(Bi,y)}function Dy(y){for(var x=y;;){if(x.flags&16384){var T=x.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var k=0;k<T.length;k++){var H=T[k],X=H.getSnapshot;H=H.value;try{if(!Oi(X(),H))return!1}catch{return!1}}}if(T=x.child,x.subtreeFlags&16384&&T!==null)T.return=x,x=T;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function fs(y,x){for(x&=~mu,x&=~wo,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var T=31-vn(x),k=1<<T;y[T]=-1,x&=~k}}function bo(y){if(Qn&6)throw Error(o(327));ja();var x=Ea(y,0);if(!(x&1))return io(y,si()),null;var T=Kf(y,x);if(y.tag!==0&&T===2){var k=Ma(y);k!==0&&(x=k,T=Xf(y,k))}if(T===1)throw T=Ah,Cl(y,0),fs(y,x),io(y,si()),T;if(T===6)throw Error(o(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,ma(y,Bi),io(y,si()),null}function Th(y){Ha!==null&&Ha.tag===0&&!(Qn&6)&&ja();var x=Qn;Qn|=1;var T=Ir.transition,k=$n;try{if(Ir.transition=null,$n=1,y)return y()}finally{$n=k,Ir.transition=T,Qn=x,!(Qn&6)&&Ds()}}function Yf(){Es=pu.current,pt(pu)}function Cl(y,x){y.finishedWork=null,y.finishedLanes=0;var T=y.timeoutHandle;if(T!==Qe&&(y.timeoutHandle=Qe,Ue(T)),Lr!==null)for(T=Lr.return;T!==null;){var k=T;switch(cn(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&xn();break;case 3:dh(),pt(nn),pt(Sn),eu();break;case 5:dy(k);break;case 4:dh();break;case 13:pt(oi);break;case 19:pt(oi);break;case 10:uc(k.type._context);break;case 22:case 23:Yf()}T=T.return}if(bi=y,Lr=y=Tl(y.current,null),Qr=Es=x,mi=0,Ah=null,mu=wo=za=0,Bi=Al=null,Qs!==null){for(x=0;x<Qs.length;x++)if(T=Qs[x],k=T.interleaved,k!==null){T.interleaved=null;var H=k.next,X=T.pending;if(X!==null){var we=X.next;X.next=H,k.next=we}T.pending=k}Qs=null}return y}function Fy(y,x){do{var T=Lr;try{if(qi(),Ef.current=xh,Fp){for(var k=ai.memoizedState;k!==null;){var H=k.queue;H!==null&&(H.pending=null),k=k.next}Fp=!1}if(tu=0,Ki=Yi=ai=null,Na=!1,nu=0,fa.current=null,T===null||T.return===null){mi=1,Ah=x,Lr=null;break}e:{var X=y,we=T.return,Ne=T,ct=x;if(x=Qr,Ne.flags|=32768,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var Rt=ct,tn=Ne,jn=tn.tag;if(!(tn.mode&1)&&(jn===0||jn===11||jn===15)){var Tn=tn.alternate;Tn?(tn.updateQueue=Tn.updateQueue,tn.memoizedState=Tn.memoizedState,tn.lanes=Tn.lanes):(tn.updateQueue=null,tn.memoizedState=null)}var er=Ay(we);if(er!==null){er.flags&=-257,iu(er,we,Ne,X,x),er.mode&1&&ml(X,Rt,x),x=er,ct=Rt;var Jt=x.updateQueue;if(Jt===null){var ds=new Set;ds.add(ct),x.updateQueue=ds}else Jt.add(ct);break e}else{if(!(x&1)){ml(X,Rt,x),nm();break e}ct=Error(o(426))}}else if(sn&&Ne.mode&1){var So=Ay(we);if(So!==null){!(So.flags&65536)&&(So.flags|=256),iu(So,we,Ne,X,x),hh(ct);break e}}X=ct,mi!==4&&(mi=2),Al===null?Al=[X]:Al.push(X),ct=by(ct,Ne),Ne=we;do{switch(Ne.tag){case 3:Ne.flags|=65536,x&=-x,Ne.lanes|=x;var Je=Kv(Ne,ct,x);fc(Ne,Je);break e;case 1:X=ct;var ze=Ne.type,ot=Ne.stateNode;if(!(Ne.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(da===null||!da.has(ot)))){Ne.flags|=65536,x&=-x,Ne.lanes|=x;var Yt=$p(Ne,X,x);fc(Ne,Yt);break e}}Ne=Ne.return}while(Ne!==null)}Uy(T)}catch(dn){x=dn,Lr===T&&T!==null&&(Lr=T=T.return);continue}break}while(!0)}function Ny(){var y=Wf.current;return Wf.current=xh,y===null?xh:y}function nm(){(mi===0||mi===3||mi===2)&&(mi=4),bi===null||!(za&268435455)&&!(wo&268435455)||fs(bi,Qr)}function Kf(y,x){var T=Qn;Qn|=2;var k=Ny();bi===y&&Qr===x||Cl(y,x);do try{Zv();break}catch(H){Fy(y,H)}while(!0);if(qi(),Qn=T,Wf.current=k,Lr!==null)throw Error(o(261));return bi=null,Qr=0,mi}function Zv(){for(;Lr!==null;)Oy(Lr)}function Qv(){for(;Lr!==null&&!Ra();)Oy(Lr)}function Oy(y){var x=jy(y.alternate,y,Es);y.memoizedProps=y.pendingProps,x===null?Uy(y):Lr=x,fa.current=null}function Uy(y){var x=y;do{var T=x.alternate;if(y=x.return,x.flags&32768){if(T=Zp(T,x),T!==null){T.flags&=32767,Lr=T;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{mi=6,Lr=null;return}}else if(T=Yp(T,x,Es),T!==null){Lr=T;return}if(x=x.sibling,x!==null){Lr=x;return}Lr=x=y}while(x!==null);mi===0&&(mi=5)}function ma(y,x){var T=$n,k=Ir.transition;try{Ir.transition=null,$n=1,e1(y,x,T)}finally{Ir.transition=k,$n=T}return null}function e1(y,x,T){do ja();while(Ha!==null);if(Qn&6)throw Error(o(327));var k=y.finishedWork,H=y.finishedLanes;if(k===null)return null;if(y.finishedWork=null,y.finishedLanes=0,k===y.current)throw Error(o(177));y.callbackNode=null,y.callbackPriority=0;var X=k.lanes|k.childLanes;if(nh(y,X),y===bi&&(Lr=bi=null,Qr=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||Ch||(Ch=!0,rm(ka,function(){return ja(),null})),X=(k.flags&15990)!==0,k.subtreeFlags&15990||X){X=Ir.transition,Ir.transition=null;var we=$n;$n=1;var Ne=Qn;Qn|=4,fa.current=null,My(y,k),OS(y,k),re(y.containerInfo),y.current=k,zf(k),fy(),Qn=Ne,$n=we,Ir.transition=X}else y.current=k;if(Ch&&(Ch=!1,Ha=y,yu=H),X=y.pendingLanes,X===0&&(da=null),oc(k.stateNode),io(y,si()),x!==null)for(T=y.onRecoverableError,k=0;k<x.length;k++)T(x[k]);if(Sh)throw Sh=!1,y=Jr,Jr=null,y;return yu&1&&y.tag!==0&&ja(),X=y.pendingLanes,X&1?y===Sl?xu++:(xu=0,Sl=y):xu=0,Ds(),null}function ja(){if(Ha!==null){var y=Ls(yu),x=Ir.transition,T=$n;try{if(Ir.transition=null,$n=16>y?16:y,Ha===null)var k=!1;else{if(y=Ha,Ha=null,yu=0,Qn&6)throw Error(o(331));var H=Qn;for(Qn|=4,Ht=y.current;Ht!==null;){var X=Ht,we=X.child;if(Ht.flags&16){var Ne=X.deletions;if(Ne!==null){for(var ct=0;ct<Ne.length;ct++){var Rt=Ne[ct];for(Ht=Rt;Ht!==null;){var tn=Ht;switch(tn.tag){case 0:case 11:case 15:_l(8,tn,X)}var jn=tn.child;if(jn!==null)jn.return=tn,Ht=jn;else for(;Ht!==null;){tn=Ht;var Tn=tn.sibling,er=tn.return;if(Ry(tn),tn===Rt){Ht=null;break}if(Tn!==null){Tn.return=er,Ht=Tn;break}Ht=er}}}var Jt=X.alternate;if(Jt!==null){var ds=Jt.child;if(ds!==null){Jt.child=null;do{var So=ds.sibling;ds.sibling=null,ds=So}while(ds!==null)}}Ht=X}}if(X.subtreeFlags&2064&&we!==null)we.return=X,Ht=we;else e:for(;Ht!==null;){if(X=Ht,X.flags&2048)switch(X.tag){case 0:case 11:case 15:_l(9,X,X.return)}var Je=X.sibling;if(Je!==null){Je.return=X.return,Ht=Je;break e}Ht=X.return}}var ze=y.current;for(Ht=ze;Ht!==null;){we=Ht;var ot=we.child;if(we.subtreeFlags&2064&&ot!==null)ot.return=we,Ht=ot;else e:for(we=ze;Ht!==null;){if(Ne=Ht,Ne.flags&2048)try{switch(Ne.tag){case 0:case 11:case 15:us(9,Ne)}}catch(dn){Us(Ne,Ne.return,dn)}if(Ne===we){Ht=null;break e}var Yt=Ne.sibling;if(Yt!==null){Yt.return=Ne.return,Ht=Yt;break e}Ht=Ne.return}}if(Qn=H,Ds(),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(Kc,y)}catch{}k=!0}return k}finally{$n=T,Ir.transition=x}}return!1}function Jf(y,x,T){x=by(T,x),x=Kv(y,x,1),Da(y,x),x=br(),y=Ac(y,1),y!==null&&(ul(y,1,x),io(y,x))}function Us(y,x,T){if(y.tag===3)Jf(y,y,T);else for(;x!==null;){if(x.tag===3){Jf(x,y,T);break}else if(x.tag===1){var k=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(da===null||!da.has(k))){y=by(T,y),y=$p(x,y,1),Da(x,y),y=br(),x=Ac(x,1),x!==null&&(ul(x,1,y),io(x,y));break}}x=x.return}}function zy(y,x,T){var k=y.pingCache;k!==null&&k.delete(x),x=br(),y.pingedLanes|=y.suspendedLanes&T,bi===y&&(Qr&T)===T&&(mi===4||mi===3&&(Qr&130023424)===Qr&&500>si()-$f?Cl(y,0):mu|=T),io(y,x)}function Hy(y,x){x===0&&(y.mode&1?(x=ir,ir<<=1,!(ir&130023424)&&(ir=4194304)):x=1);var T=br();y=Ac(y,x),y!==null&&(ul(y,x,T),io(y,T))}function t1(y){var x=y.memoizedState,T=0;x!==null&&(T=x.retryLane),Hy(y,T)}function n1(y,x){var T=0;switch(y.tag){case 13:var k=y.stateNode,H=y.memoizedState;H!==null&&(T=H.retryLane);break;case 19:k=y.stateNode;break;default:throw Error(o(314))}k!==null&&k.delete(x),Hy(y,T)}var jy;jy=function(y,x,T){if(y!==null)if(y.memoizedProps!==x.pendingProps||nn.current)Zi=!0;else{if(!(y.lanes&T)&&!(x.flags&128))return Zi=!1,Jp(y,x,T);Zi=!!(y.flags&131072)}else Zi=!1,sn&&x.flags&1048576&&Ot(x,ie,x.index);switch(x.lanes=0,x.tag){case 2:var k=x.type;y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),y=x.pendingProps;var H=qt(x,Sn.current);La(x,T),H=ph(null,x,k,y,H,T);var X=yc();return x.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Hn(k)?(X=!0,Dn(x)):X=!1,x.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,hc(x),H.updater=ch,x.stateNode=H,H._reactInternals=x,uh(x,k,y,T),x=Ts(null,x,k,!0,X,T)):(x.tag=0,sn&&X&&Cn(x),pi(null,x,H,T),x=x.child),x;case 16:k=x.elementType;e:{switch(y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),y=x.pendingProps,H=k._init,k=H(k._payload),x.type=k,H=x.tag=US(k),y=Ss(k,y),H){case 0:x=xl(null,x,k,y,T);break e;case 1:x=ou(null,x,k,y,T);break e;case 11:x=Wr(null,x,k,y,T);break e;case 14:x=zr(null,x,k,Ss(k.type,y),T);break e}throw Error(o(306,k,""))}return x;case 0:return k=x.type,H=x.pendingProps,H=x.elementType===k?H:Ss(k,H),xl(y,x,k,H,T);case 1:return k=x.type,H=x.pendingProps,H=x.elementType===k?H:Ss(k,H),ou(y,x,k,H,T);case 3:e:{if(Ff(x),y===null)throw Error(o(387));k=x.pendingProps,X=x.memoizedState,H=X.element,Sf(y,x),lh(x,k,null,T);var we=x.memoizedState;if(k=we.element,Oe&&X.isDehydrated)if(X={element:k,isDehydrated:!1,cache:we.cache,transitions:we.transitions},x.updateQueue.baseState=X,x.memoizedState=X,x.flags&256){H=Error(o(423)),x=Cy(y,x,k,T,H);break e}else if(k!==H){H=Error(o(424)),x=Cy(y,x,k,T,H);break e}else for(Oe&&(en=Js(x.stateNode.containerInfo),Pt=x,sn=!0,sr=null,wr=!1),T=Wv(x,null,k,T),x.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(pc(),k===H){x=ro(y,x,T);break e}pi(y,x,k,T)}x=x.child}return x;case 5:return $v(x),y===null&&Zn(x),k=x.type,H=x.pendingProps,X=y!==null?y.memoizedProps:null,we=H.children,he(k,H)?we=null:X!==null&&he(k,X)&&(x.flags|=32),Fs(y,x),pi(y,x,we,T),x.child;case 6:return y===null&&Zn(x),null;case 13:return Ty(y,x,T);case 4:return Lp(x,x.stateNode.containerInfo),k=x.pendingProps,y===null?x.child=dl(x,null,k,T):pi(y,x,k,T),x.child;case 11:return k=x.type,H=x.pendingProps,H=x.elementType===k?H:Ss(k,H),Wr(y,x,k,H,T);case 7:return pi(y,x,x.pendingProps,T),x.child;case 8:return pi(y,x,x.pendingProps.children,T),x.child;case 12:return pi(y,x,x.pendingProps.children,T),x.child;case 10:e:{if(k=x.type._context,H=x.pendingProps,X=x.memoizedProps,we=H.value,Ba(x,k,we),X!==null)if(Oi(X.value,we)){if(X.children===H.children&&!nn.current){x=ro(y,x,T);break e}}else for(X=x.child,X!==null&&(X.return=x);X!==null;){var Ne=X.dependencies;if(Ne!==null){we=X.child;for(var ct=Ne.firstContext;ct!==null;){if(ct.context===k){if(X.tag===1){ct=jo(-1,T&-T),ct.tag=2;var Rt=X.updateQueue;if(Rt!==null){Rt=Rt.shared;var tn=Rt.pending;tn===null?ct.next=ct:(ct.next=tn.next,tn.next=ct),Rt.pending=ct}}X.lanes|=T,ct=X.alternate,ct!==null&&(ct.lanes|=T),Ia(X.return,T,x),Ne.lanes|=T;break}ct=ct.next}}else if(X.tag===10)we=X.type===x.type?null:X.child;else if(X.tag===18){if(we=X.return,we===null)throw Error(o(341));we.lanes|=T,Ne=we.alternate,Ne!==null&&(Ne.lanes|=T),Ia(we,T,x),we=X.sibling}else we=X.child;if(we!==null)we.return=X;else for(we=X;we!==null;){if(we===x){we=null;break}if(X=we.sibling,X!==null){X.return=we.return,we=X;break}we=we.return}X=we}pi(y,x,H.children,T),x=x.child}return x;case 9:return H=x.type,k=x.pendingProps.children,La(x,T),H=ls(H),k=k(H),x.flags|=1,pi(y,x,k,T),x.child;case 14:return k=x.type,H=Ss(k,x.pendingProps),H=Ss(k.type,H),zr(y,x,k,H,T);case 15:return yl(y,x,x.type,x.pendingProps,T);case 17:return k=x.type,H=x.pendingProps,H=x.elementType===k?H:Ss(k,H),y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),x.tag=1,Hn(k)?(y=!0,Dn(x)):y=!1,La(x,T),Ip(x,k,H),uh(x,k,H,T),Ts(null,x,k,!0,y,T);case 19:return lu(y,x,T);case 22:return cs(y,x,T)}throw Error(o(156,x.tag))};function rm(y,x){return hl(y,x)}function r1(y,x,T,k){this.tag=y,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ao(y,x,T,k){return new r1(y,x,T,k)}function im(y){return y=y.prototype,!(!y||!y.isReactComponent)}function US(y){if(typeof y=="function")return im(y)?1:0;if(y!=null){if(y=y.$$typeof,y===v)return 11;if(y===A)return 14}return 2}function Tl(y,x){var T=y.alternate;return T===null?(T=Ao(y.tag,x,y.key,y.mode),T.elementType=y.elementType,T.type=y.type,T.stateNode=y.stateNode,T.alternate=y,y.alternate=T):(T.pendingProps=x,T.type=y.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=y.flags&14680064,T.childLanes=y.childLanes,T.lanes=y.lanes,T.child=y.child,T.memoizedProps=y.memoizedProps,T.memoizedState=y.memoizedState,T.updateQueue=y.updateQueue,x=y.dependencies,T.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},T.sibling=y.sibling,T.index=y.index,T.ref=y.ref,T}function sm(y,x,T,k,H,X){var we=2;if(k=y,typeof y=="function")im(y)&&(we=1);else if(typeof y=="string")we=5;else e:switch(y){case u:return vu(T.children,H,X,x);case h:we=8,H|=8;break;case d:return y=Ao(12,T,x,H|2),y.elementType=d,y.lanes=X,y;case w:return y=Ao(13,T,x,H),y.elementType=w,y.lanes=X,y;case _:return y=Ao(19,T,x,H),y.elementType=_,y.lanes=X,y;case R:return Zf(T,H,X,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case m:we=10;break e;case g:we=9;break e;case v:we=11;break e;case A:we=14;break e;case S:we=16,k=null;break e}throw Error(o(130,y==null?y:typeof y,""))}return x=Ao(we,T,x,H),x.elementType=y,x.type=k,x.lanes=X,x}function vu(y,x,T,k){return y=Ao(7,y,k,x),y.lanes=T,y}function Zf(y,x,T,k){return y=Ao(22,y,k,x),y.elementType=R,y.lanes=T,y.stateNode={},y}function om(y,x,T){return y=Ao(6,y,null,x),y.lanes=T,y}function am(y,x,T){return x=Ao(4,y.children!==null?y.children:[],y.key,x),x.lanes=T,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function lm(y,x,T,k,H){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Qe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=th(0),this.expirationTimes=th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=th(0),this.identifierPrefix=k,this.onRecoverableError=H,Oe&&(this.mutableSourceEagerHydrationData=null)}function i1(y,x,T,k,H,X,we,Ne,ct){return y=new lm(y,x,T,Ne,ct),x===1?(x=1,X===!0&&(x|=8)):x=0,X=Ao(3,null,null,x),y.current=X,X.stateNode=y,X.memoizedState={element:k,isDehydrated:T,cache:null,transitions:null},hc(X),y}function s1(y){if(!y)return Gt;y=y._reactInternals;e:{if(O(y)!==y||y.tag!==1)throw Error(o(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Hn(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(o(171))}if(y.tag===1){var T=y.type;if(Hn(T))return Jn(y,T,x)}return x}function o1(y){var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(o(188)):(y=Object.keys(y).join(","),Error(o(268,y)));return y=K(x),y===null?null:y.stateNode}function Wo(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var T=y.retryLane;y.retryLane=T!==0&&T<x?T:x}}function Qf(y,x){Wo(y,x),(y=y.alternate)&&Wo(y,x)}function cm(y){return y=K(y),y===null?null:y.stateNode}function a1(){return null}return t.attemptContinuousHydration=function(y){if(y.tag===13){var x=br();Ms(y,134217728,x),Qf(y,134217728)}},t.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var x=br(),T=pa(y);Ms(y,T,x),Qf(y,T)}},t.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var T=as(x.pendingLanes);T!==0&&(Oo(x,T|1),io(x,si()),!(Qn&6)&&(gu(),Ds()))}break;case 13:var k=br();Th(function(){return Ms(y,1,k)}),Qf(y,1)}},t.batchedUpdates=function(y,x){var T=Qn;Qn|=1;try{return y(x)}finally{Qn=T,Qn===0&&(gu(),aa&&Ds())}},t.createComponentSelector=function(y){return{$$typeof:jf,value:y}},t.createContainer=function(y,x,T,k,H,X,we){return i1(y,x,!1,null,T,k,H,X,we)},t.createHasPseudoClassSelector=function(y){return{$$typeof:hu,value:y}},t.createHydrationContainer=function(y,x,T,k,H,X,we,Ne,ct){return y=i1(T,k,!0,y,H,X,we,Ne,ct),y.context=s1(null),T=y.current,k=br(),H=pa(T),X=jo(k,H),X.callback=x??null,Da(T,X),y.current.lanes=H,ul(y,H,k),io(y,k),y},t.createPortal=function(y,x,T){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:k==null?null:""+k,children:y,containerInfo:x,implementation:T}},t.createRoleSelector=function(y){return{$$typeof:fu,value:y}},t.createTestNameSelector=function(y){return{$$typeof:wl,value:y}},t.createTextSelector=function(y){return{$$typeof:bh,value:y}},t.deferredUpdates=function(y){var x=$n,T=Ir.transition;try{return Ir.transition=null,$n=16,y()}finally{$n=x,Ir.transition=T}},t.discreteUpdates=function(y,x,T,k,H){var X=$n,we=Ir.transition;try{return Ir.transition=null,$n=1,y(x,T,k,H)}finally{$n=X,Ir.transition=we,Qn===0&&gu()}},t.findAllNodes=bl,t.findBoundingRects=function(y,x){if(!bt)throw Error(o(363));x=bl(y,x),y=[];for(var T=0;T<x.length;T++)y.push(ae(x[T]));for(x=y.length-1;0<x;x--){T=y[x];for(var k=T.x,H=k+T.width,X=T.y,we=X+T.height,Ne=x-1;0<=Ne;Ne--)if(x!==Ne){var ct=y[Ne],Rt=ct.x,tn=Rt+ct.width,jn=ct.y,Tn=jn+ct.height;if(k>=Rt&&X>=jn&&H<=tn&&we<=Tn){y.splice(x,1);break}else if(k!==Rt||T.width!==ct.width||Tn<X||jn>we){if(!(X!==jn||T.height!==ct.height||tn<k||Rt>H)){Rt>k&&(ct.width+=Rt-k,ct.x=k),tn<H&&(ct.width=H-Rt),y.splice(x,1);break}}else{jn>X&&(ct.height+=jn-X,ct.y=X),Tn<we&&(ct.height=we-jn),y.splice(x,1);break}}}return y},t.findHostInstance=o1,t.findHostInstanceWithNoPortals=function(y){return y=F(y),y=y!==null?Y(y):null,y===null?null:y.stateNode},t.findHostInstanceWithWarning=function(y){return o1(y)},t.flushControlled=function(y){var x=Qn;Qn|=1;var T=Ir.transition,k=$n;try{Ir.transition=null,$n=1,y()}finally{$n=k,Ir.transition=T,Qn=x,Qn===0&&(gu(),Ds())}},t.flushPassiveEffects=ja,t.flushSync=Th,t.focusWithin=function(y,x){if(!bt)throw Error(o(363));for(y=Gf(y),x=_o(y,x),x=Array.from(x),y=0;y<x.length;){var T=x[y++];if(!Ze(T)){if(T.tag===5&&st(T.stateNode))return!0;for(T=T.child;T!==null;)x.push(T),T=T.sibling}}return!1},t.getCurrentUpdatePriority=function(){return $n},t.getFindAllNodesFailureDescription=function(y,x){if(!bt)throw Error(o(363));var T=0,k=[];y=[Gf(y),0];for(var H=0;H<y.length;){var X=y[H++],we=y[H++],Ne=x[we];if((X.tag!==5||!Ze(X))&&(Vf(X,Ne)&&(k.push(wc(Ne)),we++,we>T&&(T=we)),we<x.length))for(X=X.child;X!==null;)y.push(X,we),X=X.sibling}if(T<x.length){for(y=[];T<x.length;T++)y.push(wc(x[T]));return`findAllNodes was able to match part of the selector:
  `+(k.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},t.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return $(y.child.stateNode);default:return y.child.stateNode}},t.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:cm,findFiberByHostInstance:y.findFiberByHostInstance||a1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(x.isDisabled||!x.supportsFiber)y=!0;else{try{Kc=x.inject(y),Uo=x}catch{}y=!!x.checkDCE}}return y},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(y,x,T,k){if(!bt)throw Error(o(363));y=bl(y,x);var H=It(y,T,k).disconnect;return{disconnect:function(){H()}}},t.registerMutableSourceForHydration=function(y,x){var T=x._getVersion;T=T(x._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[x,T]:y.mutableSourceEagerHydrationData.push(x,T)},t.runWithPriority=function(y,x){var T=$n;try{return $n=y,x()}finally{$n=T}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(y,x,T,k){var H=x.current,X=br(),we=pa(H);return T=s1(T),x.context===null?x.context=T:x.pendingContext=T,x=jo(X,we),x.payload={element:y},k=k===void 0?null:k,k!==null&&(x.callback=k),Da(H,x),y=Ms(H,we,X),y!==null&&ah(y,H,we),we},t}),CT}var _D;function xae(){return _D||(_D=1,bT.exports=yae()),bT.exports}var vae=xae();const _ae=jg(vae);var TT={exports:{}},ET={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wD;function wae(){return wD||(wD=1,function(n){function e(G,te){var re=G.length;G.push(te);e:for(;0<re;){var Z=re-1>>>1,ne=G[Z];if(0<i(ne,te))G[Z]=te,G[re]=ne,re=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],re=G.pop();if(re!==te){G[0]=re;e:for(var Z=0,ne=G.length,ce=ne>>>1;Z<ce;){var ye=2*(Z+1)-1,he=G[ye],Ce=ye+1,ke=G[Ce];if(0>i(he,re))Ce<ne&&0>i(ke,he)?(G[Z]=ke,G[Ce]=re,Z=Ce):(G[Z]=he,G[ye]=re,Z=ye);else if(Ce<ne&&0>i(ke,re))G[Z]=ke,G[Ce]=re,Z=Ce;else break e}}return te}function i(G,te){var re=G.sortIndex-te.sortIndex;return re!==0?re:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,m=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var te=t(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=G)r(c),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(c)}}function R(G){if(v=!1,S(G),!g)if(t(l)!==null)g=!0,$(B);else{var te=t(c);te!==null&&oe(R,te.startTime-G)}}function B(G,te){g=!1,v&&(v=!1,_(U),U=-1),m=!0;var re=d;try{for(S(te),h=t(l);h!==null&&(!(h.expirationTime>te)||G&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,d=h.priorityLevel;var ne=Z(h.expirationTime<=te);te=n.unstable_now(),typeof ne=="function"?h.callback=ne:h===t(l)&&r(l),S(te)}else r(l);h=t(l)}if(h!==null)var ce=!0;else{var ye=t(c);ye!==null&&oe(R,ye.startTime-te),ce=!1}return ce}finally{h=null,d=re,m=!1}}var I=!1,N=null,U=-1,O=5,P=-1;function F(){return!(n.unstable_now()-P<O)}function K(){if(N!==null){var G=n.unstable_now();P=G;var te=!0;try{te=N(!0,G)}finally{te?Q():(I=!1,N=null)}}else I=!1}var Q;if(typeof A=="function")Q=function(){A(K)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ee=Y.port2;Y.port1.onmessage=K,Q=function(){ee.postMessage(null)}}else Q=function(){w(K,0)};function $(G){N=G,I||(I=!0,Q())}function oe(G,te){U=w(function(){G(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(B))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(d){case 1:case 2:case 3:var te=3;break;default:te=d}var re=d;d=te;try{return G()}finally{d=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=d;d=G;try{return te()}finally{d=re}},n.unstable_scheduleCallback=function(G,te,re){var Z=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Z+re:Z):re=Z,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=re+ne,G={id:u++,callback:te,priorityLevel:G,startTime:re,expirationTime:ne,sortIndex:-1},re>Z?(G.sortIndex=re,e(c,G),t(l)===null&&G===t(c)&&(v?(_(U),U=-1):v=!0,oe(R,re-Z))):(G.sortIndex=ne,e(l,G),g||m||(g=!0,$(B))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var te=d;return function(){var re=d;d=te;try{return G.apply(this,arguments)}finally{d=re}}}}(ET)),ET}var bD;function bae(){return bD||(bD=1,TT.exports=wae()),TT.exports}var AD=bae();const lP={},gz=n=>void Object.assign(lP,n);function Aae(n,e){function t(u,{args:h=[],attach:d,...m},g){let v=`${u[0].toUpperCase()}${u.slice(1)}`,w;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;w=jm(_,{type:u,root:g,attach:d,primitive:!0})}else{const _=lP[v];if(!_)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");w=jm(new _(...h),{type:u,root:g,attach:d,memoizedProps:{args:h}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),v!=="inject"&&PT(w,m),w}function r(u,h){let d=!1;if(h){var m,g;(m=h.__r3f)!=null&&m.attach?RT(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),d=!0),d||(g=u.__r3f)==null||g.objects.push(h),h.__r3f||jm(h,{}),h.__r3f.parent=u,gM(h),Gm(h)}}function i(u,h,d){let m=!1;if(h){var g,v;if((g=h.__r3f)!=null&&g.attach)RT(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const w=u.children.filter(A=>A!==h),_=w.indexOf(d);u.children=[...w.slice(0,_),h,...w.slice(_)],m=!0}m||(v=u.__r3f)==null||v.objects.push(h),h.__r3f||jm(h,{}),h.__r3f.parent=u,gM(h),Gm(h)}}function s(u,h,d=!1){u&&[...u].forEach(m=>o(h,m,d))}function o(u,h,d){if(h){var m,g,v;if(h.__r3f&&(h.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(R=>R!==h)),(g=h.__r3f)!=null&&g.attach)MD(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var w;u.remove(h),(w=h.__r3f)!=null&&w.root&&Pae(sw(h),h)}const A=(v=h.__r3f)==null?void 0:v.primitive,S=!A&&(d===void 0?h.dispose!==null:d);if(!A){var _;s((_=h.__r3f)==null?void 0:_.objects,h,S),s(h.children,h,S)}if(delete h.__r3f,S&&h.dispose&&h.type!=="Scene"){const R=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?AD.unstable_scheduleCallback(AD.unstable_IdlePriority,R):R()}Gm(u)}}function a(u,h,d,m){var g;const v=(g=u.__r3f)==null?void 0:g.parent;if(!v)return;const w=t(h,d,u.__r3f.root);if(u.children){for(const _ of u.children)_.__r3f&&r(w,_);u.children=u.children.filter(_=>!_.__r3f)}u.__r3f.objects.forEach(_=>r(w,_)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),r(v,w),w.raycast&&w.__r3f.eventCount&&sw(w).getState().internal.interaction.push(w),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=w,_.ref&&(typeof _.ref=="function"?_.ref(w):_.ref.current=w))})}const l=()=>{};return{reconciler:_ae({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,r(d,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,d)=>{if(!h||!d)return;const m=u.getState().scene;m.__r3f&&i(m,h,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,d,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:w=[],children:_,...A}=m,{args:S=[],children:R,...B}=d;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((N,U)=>N!==S[U]))return[!0];const I=Az(u,A,B,!0);return I.changes.length?[!1,I]:null}},commitUpdate(u,[h,d],m,g,v,w){h?a(u,m,v,w):PT(u,d)},commitMount(u,h,d,m){var g;const v=(g=u.__r3f)!=null?g:{};u.raycast&&v.handlers&&v.eventCount&&sw(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>jm(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:d,parent:m}=(h=u.__r3f)!=null?h:{};d&&m&&MD(m,u,d),u.isObject3D&&(u.visible=!1),Gm(u)},unhideInstance(u,h){var d;const{attach:m,parent:g}=(d=u.__r3f)!=null?d:{};m&&g&&RT(g,u,m),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Gm(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ni.fun(performance.now)?performance.now:ni.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ni.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ni.fun(clearTimeout)?clearTimeout:void 0}),applyProps:PT}}var SD,CD;const MT=n=>"colorSpace"in n||"outputColorSpace"in n,yz=()=>{var n;return(n=lP.ColorManagement)!=null?n:null},xz=n=>n&&n.isOrthographicCamera,Sae=n=>n&&n.hasOwnProperty("current"),Tv=typeof window<"u"&&((SD=window.document)!=null&&SD.createElement||((CD=window.navigator)==null?void 0:CD.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function vz(n){const e=L.useRef(n);return Tv(()=>void(e.current=n),[n]),e}function Cae({set:n}){return Tv(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class _z extends L.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}_z.getDerivedStateFromError=()=>({error:!0});const wz="__default",TD=new Map,Tae=n=>n&&!!n.memoized&&!!n.changes;function bz(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const m0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function sw(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const ni={obj:n=>n===Object(n)&&!ni.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ni.str(n)||ni.num(n)||ni.boo(n))return n===e;const s=ni.obj(n);if(s&&r==="reference")return n===e;const o=ni.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!ni.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(ni.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Eae(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Mae(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function jm(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function mM(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const ED=/-\d+$/;function RT(n,e,t){if(ni.str(t)){if(ED.test(t)){const s=t.replace(ED,""),{target:o,key:a}=mM(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=mM(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function MD(n,e,t){var r,i;if(ni.str(t)){const{target:s,key:o}=mM(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function Az(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,h=Object.entries(i),d=[];if(c){const g=Object.keys(l);for(let v=0;v<g.length;v++)i.hasOwnProperty(g[v])||h.unshift([g[v],wz+"remove"])}h.forEach(([g,v])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&g==="object"||ni.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return d.push([g,v,!0,[]]);let _=[];g.includes("-")&&(_=g.split("-")),d.push([g,v,!1,_]);for(const A in i){const S=i[A];A.startsWith(`${g}-`)&&d.push([A,S,!1,A.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:d}}function PT(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Tae(e)?e:Az(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let d=0;d<a.length;d++){let[m,g,v,w]=a[d];if(MT(n)){const R="srgb",B="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?R:B):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?R:B)}let _=n,A=_[m];if(w.length&&(A=w.reduce((S,R)=>S[R],n),!(A&&A.set))){const[S,...R]=w.reverse();_=R.reverse().reduce((B,I)=>B[I],n),m=S}if(g===wz+"remove")if(_.constructor){let S=TD.get(_.constructor);S||(S=new _.constructor,TD.set(_.constructor,S)),g=S[m]}else g=0;if(v&&r)g?r.handlers[m]=g:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(A&&A.set&&(A.copy||A instanceof Jd)){if(Array.isArray(g))A.fromArray?A.fromArray(g):A.set(...g);else if(A.copy&&g&&g.constructor&&A.constructor===g.constructor)A.copy(g);else if(g!==void 0){var c;const S=(c=A)==null?void 0:c.isColor;!S&&A.setScalar?A.setScalar(g):A instanceof Jd&&g instanceof Jd?A.mask=g.mask:A.set(g),!yz()&&s&&!s.linear&&S&&A.convertSRGBToLinear()}}else{var u;if(_[m]=g,(u=_[m])!=null&&u.isTexture&&_[m].format===$i&&_[m].type===sa&&s){const S=_[m];MT(S)&&MT(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}Gm(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const d=sw(n).getState().internal,m=d.interaction.indexOf(n);m>-1&&d.interaction.splice(m,1),r.eventCount&&d.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&gM(n),n}function Gm(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function gM(n){n.onUpdate==null||n.onUpdate(n)}function Sz(n,e){n.manual||(xz(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function E_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Rae(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return N0.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return N0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return N0.ContinuousEventPriority;default:return N0.DefaultEventPriority}}function Cz(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Pae(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Cz(t.capturedMap,e,r,i)})}function kae(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),h=new Set,d=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let _=0;_<m.length;_++){const A=m0(m[_]);A&&(A.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(_){const A=m0(_);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var S;A.events.compute==null||A.events.compute(l,A,(S=A.previousRoot)==null?void 0:S.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(_,!0):[]}let v=m.flatMap(g).sort((_,A)=>{const S=m0(_.object),R=m0(A.object);return!S||!R?_.distance-A.distance:R.events.priority-S.events.priority||_.distance-A.distance}).filter(_=>{const A=E_(_);return h.has(A)?!1:(h.add(A),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const _ of v){let A=_.object;for(;A;){var w;(w=A.__r3f)!=null&&w.eventCount&&d.push({..._,eventObject:A}),A=A.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let _ of u.internal.capturedMap.get(l.pointerId).values())h.has(E_(_.intersection))||d.push(_.intersection);return d}function i(l,c,u,h){const d=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=m0(g.object)||d,{raycaster:w,pointer:_,camera:A,internal:S}=v,R=new fe(_.x,_.y,0).unproject(A),B=P=>{var F,K;return(F=(K=S.capturedMap.get(P))==null?void 0:K.has(g.eventObject))!=null?F:!1},I=P=>{const F={intersection:g,target:c.target};S.capturedMap.has(P)?S.capturedMap.get(P).set(g.eventObject,F):S.capturedMap.set(P,new Map([[g.eventObject,F]])),c.target.setPointerCapture(P)},N=P=>{const F=S.capturedMap.get(P);F&&Cz(S.capturedMap,g.eventObject,F,P)};let U={};for(let P in c){let F=c[P];typeof F!="function"&&(U[P]=F)}let O={...g,...U,pointer:_,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:R,ray:w.ray,camera:A,stopPropagation(){const P="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!P||P.has(g.eventObject))&&(O.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(F=>F.eventObject===g.eventObject))){const F=l.slice(0,l.indexOf(g));s([...F,g])}},target:{hasPointerCapture:B,setPointerCapture:I,releasePointerCapture:N},currentTarget:{hasPointerCapture:B,setPointerCapture:I,releasePointerCapture:N},nativeEvent:c};if(h(O),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const d=u.eventObject.__r3f,m=d==null?void 0:d.handlers;if(c.hovered.delete(E_(u)),d!=null&&d.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:d}=n.getState();d.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=r(u,m?t:void 0),_=g?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=w.map(S=>S.eventObject)),g&&!w.length&&_<=2&&(o(u,d.interaction),h&&h(u)),m&&s(w);function A(S){const R=S.eventObject,B=R.__r3f,I=B==null?void 0:B.handlers;if(B!=null&&B.eventCount)if(m){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const N=E_(S),U=d.hovered.get(N);U?U.stopped&&S.stopPropagation():(d.hovered.set(N,S),I.onPointerOver==null||I.onPointerOver(S),I.onPointerEnter==null||I.onPointerEnter(S))}I.onPointerMove==null||I.onPointerMove(S)}else{const N=I[l];N?(!g||d.initialHits.includes(R))&&(o(u,d.interaction.filter(U=>!d.initialHits.includes(U))),N(S)):g&&d.initialHits.includes(R)&&o(u,d.interaction.filter(U=>!d.initialHits.includes(U)))}}i(w,u,_,A)}}return{handlePointer:a}}const Bae=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Tz=n=>!!(n!=null&&n.render),cP=L.createContext(null),Iae=(n,e)=>{const t=dz((a,l)=>{const c=new fe,u=new fe,h=new fe;function d(_=l().camera,A=u,S=l().size){const{width:R,height:B,top:I,left:N}=S,U=R/B;A.isVector3?h.copy(A):h.set(...A);const O=_.getWorldPosition(c).distanceTo(h);if(xz(_))return{width:R/_.zoom,height:B/_.zoom,top:I,left:N,factor:1,distance:O,aspect:U};{const P=_.fov*Math.PI/180,F=2*Math.tan(P/2)*O,K=F*(R/B);return{width:K,height:F,top:I,left:N,factor:R/K,distance:O,aspect:U}}}let m;const g=_=>a(A=>({performance:{...A.performance,current:_}})),v=new ht;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,A)=>e(_,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new eP,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&g(_.performance.min),m=setTimeout(()=>g(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:_=>a(A=>({...A,events:{...A.events,..._}})),setSize:(_,A,S,R,B)=>{const I=l().camera,N={width:_,height:A,top:R||0,left:B||0,updateStyle:S};a(U=>({size:N,viewport:{...U.viewport,...d(I,u,N)}}))},setDpr:_=>a(A=>{const S=bz(_);return{viewport:{...A.viewport,dpr:S,initialDpr:A.viewport.initialDpr||S}}}),setFrameloop:(_="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,_!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,A,S)=>{const R=l().internal;return R.priority=R.priority+(A>0?1:0),R.subscribers.push({ref:_,priority:A,store:S}),R.subscribers=R.subscribers.sort((B,I)=>B.priority-I.priority),()=>{const B=l().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(A>0?1:0),B.subscribers=B.subscribers.filter(I=>I.ref!==_))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var d;i=l,s=c.dpr,Sz(a,l),u.setPixelRatio(c.dpr);const m=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let M_,Lae=new Set,Dae=new Set,Fae=new Set;function kT(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function g0(n,e){switch(n){case"before":return kT(Lae,e);case"after":return kT(Dae,e);case"tail":return kT(Fae,e)}}let BT,IT;function LT(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),BT=e.internal.subscribers,M_=0;M_<BT.length;M_++)IT=BT[M_],IT.ref.current(IT.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Nae(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,g0("before",c),t=!0;for(const h of n.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=LT(c,s))}if(t=!1,g0("after",c),r===0)return g0("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var h;if(!c)return n.forEach(d=>a(d.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,d){if(u&&g0("before",c),h)LT(c,h,d);else for(const m of n.values())LT(c,m.store.getState());u&&g0("after",c)}return{loop:o,invalidate:a,advance:l}}function uP(){const n=L.useContext(cP);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function gs(n=t=>t,e){return uP()(n,e)}function Ev(n,e=0){const t=uP(),r=t.getState().internal.subscribe,i=vz(n);return Tv(()=>r(i,e,t),[e,r,t]),null}const RD=new WeakMap;function Ez(n,e){return function(t,...r){let i=RD.get(t);return i||(i=new t,RD.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Eae(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Wu(n,e,t,r){const i=Array.isArray(e)?e:[e],s=fae(Ez(t,r),[n,...i],{equal:ni.equ});return Array.isArray(e)?s:s[0]}Wu.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return dae(Ez(t),[n,...r])};Wu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return pae([n,...t])};const Tg=new Map,{invalidate:PD,advance:kD}=Nae(Tg),{reconciler:Fx,applyProps:Zh}=Aae(Tg,Rae),Dm={objects:"shallow",strict:!1},Oae=(n,e)=>{const t=typeof n=="function"?n(e):n;return Tz(t)?t:new aP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Uae(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function zae(n){const e=Tg.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Iae(PD,kD),o=t||Fx.createContainer(s,N0.ConcurrentRoot,null,!1,null,"",i,null);e||Tg.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:h,size:d,scene:m,events:g,onCreated:v,shadows:w=!1,linear:_=!1,flat:A=!1,legacy:S=!1,orthographic:R=!1,frameloop:B="always",dpr:I=[1,2],performance:N,raycaster:U,camera:O,onPointerMissed:P}=u,F=s.getState(),K=F.gl;F.gl||F.set({gl:K=Oae(h,n)});let Q=F.raycaster;Q||F.set({raycaster:Q=new iP});const{params:Y,...ee}=U||{};if(ni.equ(ee,Q,Dm)||Zh(Q,{...ee}),ni.equ(Y,Q.params,Dm)||Zh(Q,{params:{...Q.params,...Y}}),!F.camera||F.camera===c&&!ni.equ(c,O,Dm)){c=O;const re=O instanceof gv,Z=re?O:R?new tl(0,0,0,0,.1,1e3):new ui(75,0,.1,1e3);re||(Z.position.z=5,O&&(Zh(Z,O),("aspect"in O||"left"in O||"right"in O||"bottom"in O||"top"in O)&&(Z.manual=!0,Z.updateProjectionMatrix())),!F.camera&&!(O!=null&&O.rotation)&&Z.lookAt(0,0,0)),F.set({camera:Z}),Q.camera=Z}if(!F.scene){let re;m!=null&&m.isScene?re=m:(re=new xv,m&&Zh(re,m)),F.set({scene:jm(re)})}if(!F.xr){var $;const re=(ce,ye)=>{const he=s.getState();he.frameloop!=="never"&&kD(ce,!0,he,ye)},Z=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?re:null),ce.gl.xr.isPresenting||PD(ce)},ne={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",Z),ce.xr.addEventListener("sessionend",Z)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",Z),ce.xr.removeEventListener("sessionend",Z)}};typeof(($=K.xr)==null?void 0:$.addEventListener)=="function"&&ne.connect(),F.set({xr:ne})}if(K.shadowMap){const re=K.shadowMap.enabled,Z=K.shadowMap.type;if(K.shadowMap.enabled=!!w,ni.boo(w))K.shadowMap.type=q0;else if(ni.str(w)){var oe;const ne={basic:MU,percentage:wA,soft:q0,variance:Ul};K.shadowMap.type=(oe=ne[w])!=null?oe:q0}else ni.obj(w)&&Object.assign(K.shadowMap,w);(re!==K.shadowMap.enabled||Z!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const G=yz();G&&("enabled"in G?G.enabled=!S:"legacyMode"in G&&(G.legacyMode=S)),l||Zh(K,{outputEncoding:_?3e3:3001,toneMapping:A?Ic:yR}),F.legacy!==S&&F.set(()=>({legacy:S})),F.linear!==_&&F.set(()=>({linear:_})),F.flat!==A&&F.set(()=>({flat:A})),h&&!ni.fun(h)&&!Tz(h)&&!ni.equ(h,K,Dm)&&Zh(K,h),g&&!F.events.handlers&&F.set({events:g(s)});const te=Uae(n,d);return ni.equ(te,F.size,Dm)||F.setSize(te.width,te.height,te.updateStyle,te.top,te.left),I&&F.viewport.dpr!==bz(I)&&F.setDpr(I),F.frameloop!==B&&F.setFrameloop(B),F.onPointerMissed||F.set({onPointerMissed:P}),N&&!ni.equ(N,F.performance,Dm)&&F.set(re=>({performance:{...re.performance,...N}})),a=v,l=!0,this},render(u){return l||this.configure(),Fx.updateContainer(C.jsx(Hae,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Mz(n)}}}function Hae({store:n,children:e,onCreated:t,rootElement:r}){return Tv(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),C.jsx(cP.Provider,{value:n,children:e})}function Mz(n,e){const t=Tg.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Fx.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Mae(i),Tg.delete(n)}catch{}},500)})}}function jae(n,e,t){return C.jsx(Gae,{children:n,container:e,state:t},e.uuid)}function Gae({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=uP(),[a]=L.useState(()=>new iP),[l]=L.useState(()=>new ht),c=L.useCallback((h,d)=>{const m={...h};Object.keys(h).forEach(v=>{(Bae.includes(v)||h[v]!==d[v]&&d[v])&&delete m[v]});let g;if(d&&i){const v=d.camera;g=h.viewport.getCurrentViewport(v,new fe,i),v!==h.camera&&Sz(v,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...d==null?void 0:d.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...g},...s}},[n]),[u]=L.useState(()=>{const h=o.getState();return dz((m,g)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...r},size:{...h.size,...i},...s,set:m,get:g,setEvents:v=>m(w=>({...w,events:{...w.events,...v}}))}))});return L.useEffect(()=>{const h=o.subscribe(d=>u.setState(m=>c(d,m)));return()=>{h()}},[c]),L.useEffect(()=>{u.setState(h=>c(o.getState(),h))},[c]),L.useEffect(()=>()=>{u.destroy()},[]),C.jsx(C.Fragment,{children:Fx.createPortal(C.jsx(cP.Provider,{value:u,children:e}),u,null)})}Fx.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});const DT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Vae(n){const{handlePointer:e}=kae(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(DT).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=DT[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=DT[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}var FT,BD;function Wae(){if(BD)return FT;BD=1;function n(e,t,r){var i,s,o,a,l;t==null&&(t=100);function c(){var h=Date.now()-a;h<t&&h>=0?i=setTimeout(c,t-h):(i=null,r||(l=e.apply(o,s),o=s=null))}var u=function(){o=this,s=arguments,a=Date.now();var h=r&&!i;return i||(i=setTimeout(c,t)),h&&(l=e.apply(o,s),o=s=null),l};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(l=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},u}return n.debounce=n,FT=n,FT}var $ae=Wae();const ID=jg($ae);var Xae=Object.defineProperty,qae=Object.defineProperties,Yae=Object.getOwnPropertyDescriptors,LD=Object.getOwnPropertySymbols,Kae=Object.prototype.hasOwnProperty,Jae=Object.prototype.propertyIsEnumerable,DD=(n,e,t)=>e in n?Xae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,FD=(n,e)=>{for(var t in e||(e={}))Kae.call(e,t)&&DD(n,t,e[t]);if(LD)for(var t of LD(e))Jae.call(e,t)&&DD(n,t,e[t]);return n},Zae=(n,e)=>qae(n,Yae(e)),ND,OD;typeof window<"u"&&((ND=window.document)!=null&&ND.createElement||((OD=window.navigator)==null?void 0:OD.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function Rz(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=Rz(r,e,t);if(i)return i;r=r.sibling}}function Pz(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const UD=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=UD;return}return UD.apply(this,arguments)};const hP=Pz(L.createContext(null));class kz extends L.Component{render(){return L.createElement(hP.Provider,{value:this._reactInternals},this.props.children)}}function Qae(){const n=L.useContext(hP);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=Rz(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function ele(){const n=Qae(),[e]=L.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==hP&&!e.has(i)&&e.set(i,L.useContext(Pz(i)))}t=t.return}return e}function tle(){const n=ele();return L.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>L.createElement(e,null,L.createElement(t.Provider,Zae(FD({},r),{value:n.get(t)}))),e=>L.createElement(kz,FD({},e))),[n])}function nle({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||typeof window<"u"&&window.ResizeObserver,[s,o]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=L.useRef(!1);L.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,d,m]=L.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:A,top:S,width:R,height:B,bottom:I,right:N,x:U,y:O}=a.current.element.getBoundingClientRect(),P={left:A,top:S,width:R,height:B,bottom:I,right:N,x:U,y:O};a.current.element instanceof HTMLElement&&r&&(P.height=a.current.element.offsetHeight,P.width=a.current.element.offsetWidth),Object.freeze(P),u.current&&!ole(a.current.lastBounds,P)&&o(a.current.lastBounds=P)};return[_,c?ID(_,c):_,l?ID(_,l):_]},[o,r,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function v(){var _;a.current.element&&(a.current.resizeObserver=new i(d),(_=a.current.resizeObserver)==null||_.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(A=>A.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=_=>{!_||_===a.current.element||(g(),a.current.element=_,a.current.scrollContainers=Bz(_),v())};return ile(m,!!e),rle(d),L.useEffect(()=>{g(),v()},[e,m,d]),L.useEffect(()=>g,[]),[w,s,h]}function rle(n){L.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function ile(n,e){L.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Bz(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Bz(n.parentElement)]}const sle=["x","y","top","bottom","left","right","width","height"],ole=(n,e)=>sle.every(t=>n[t]===e[t]),ale=L.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Vae,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:d,orthographic:m,frameloop:g,dpr:v,performance:w,raycaster:_,camera:A,scene:S,onPointerMissed:R,onCreated:B,...I},N){L.useMemo(()=>gz(oae),[]);const U=tle(),[O,P]=nle({scroll:!0,debounce:{scroll:50,resize:0},...r}),F=L.useRef(null),K=L.useRef(null);L.useImperativeHandle(N,()=>F.current);const Q=vz(R),[Y,ee]=L.useState(!1),[$,oe]=L.useState(!1);if(Y)throw Y;if($)throw $;const G=L.useRef(null);Tv(()=>{const re=F.current;P.width>0&&P.height>0&&re&&(G.current||(G.current=zae(re)),G.current.configure({gl:s,events:o,shadows:c,linear:u,flat:h,legacy:d,orthographic:m,frameloop:g,dpr:v,performance:w,raycaster:_,camera:A,scene:S,size:P,onPointerMissed:(...Z)=>Q.current==null?void 0:Q.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?Sae(a)?a.current:a:K.current),l&&Z.setEvents({compute:(ne,ce)=>{const ye=ne[l+"X"],he=ne[l+"Y"];ce.pointer.set(ye/ce.size.width*2-1,-(he/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),B==null||B(Z)}}),G.current.render(C.jsx(U,{children:C.jsx(_z,{set:oe,children:C.jsx(L.Suspense,{fallback:C.jsx(Cae,{set:ee}),children:e})})})))}),L.useEffect(()=>{const re=F.current;if(re)return()=>Mz(re)},[]);const te=a?"none":"auto";return C.jsx("div",{ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:te,...i},...I,children:C.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:C.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}),lle=L.forwardRef(function(e,t){return C.jsx(kz,{children:C.jsx(ale,{...e,ref:t})})});function Eg(){return Eg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Eg.apply(null,arguments)}const Mv=new fe,fP=new fe,cle=new fe,zD=new ht;function ule(n,e,t){const r=Mv.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function hle(n,e){const t=Mv.setFromMatrixPosition(n.matrixWorld),r=fP.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(cle);return i.angleTo(s)>Math.PI/2}function fle(n,e,t,r){const i=Mv.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),zD.set(s.x,s.y),t.setFromCamera(zD,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function dle(n,e){if(e instanceof tl)return e.zoom;if(e instanceof ui){const t=Mv.setFromMatrixPosition(n.matrixWorld),r=fP.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function ple(n,e,t){if(e instanceof ui||e instanceof tl){const r=Mv.setFromMatrixPosition(n.matrixWorld),i=fP.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const yM=n=>Math.abs(n)<1e-10?0:n;function Iz(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=yM(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const mle=(n=>e=>Iz(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),gle=(n=>(e,t)=>Iz(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function yle(n){return n&&typeof n=="object"&&"current"in n}const xle=L.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:h,onOcclude:d,castShadow:m,receiveShadow:g,material:v,geometry:w,zIndexRange:_=[16777271,0],calculatePosition:A=ule,as:S="div",wrapperClass:R,pointerEvents:B="auto",...I},N)=>{const{gl:U,camera:O,scene:P,size:F,raycaster:K,events:Q,viewport:Y}=gs(),[ee]=L.useState(()=>document.createElement(S)),$=L.useRef(),oe=L.useRef(null),G=L.useRef(0),te=L.useRef([0,0]),re=L.useRef(null),Z=L.useRef(null),ne=(a==null?void 0:a.current)||Q.connected||U.domElement.parentNode,ce=L.useRef(null),ye=L.useRef(!1),he=L.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&yle(h[0]),[h]);L.useLayoutEffect(()=>{const Te=U.domElement;h&&h==="blending"?(Te.style.zIndex=`${Math.floor(_[0]/2)}`,Te.style.position="absolute",Te.style.pointerEvents="none"):(Te.style.zIndex=null,Te.style.position=null,Te.style.pointerEvents=null)},[h]),L.useLayoutEffect(()=>{if(oe.current){const Te=$.current=J3.createRoot(ee);if(P.updateMatrixWorld(),u)ee.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const $e=A(oe.current,O,F);ee.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${$e[0]}px,${$e[1]}px,0);transform-origin:0 0;`}return ne&&(i?ne.prepend(ee):ne.appendChild(ee)),()=>{ne&&ne.removeChild(ee),Te.unmount()}}},[ne,u]),L.useLayoutEffect(()=>{R&&(ee.className=R)},[R]);const Ce=L.useMemo(()=>u?{position:"absolute",top:0,left:0,width:F.width,height:F.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-F.height/2,left:-F.width/2,width:F.width,height:F.height},...t},[t,s,o,F,u]),ke=L.useMemo(()=>({position:"absolute",pointerEvents:B}),[B]);L.useLayoutEffect(()=>{if(ye.current=!1,u){var Te;(Te=$.current)==null||Te.render(L.createElement("div",{ref:re,style:Ce},L.createElement("div",{ref:Z,style:ke},L.createElement("div",{ref:N,className:r,style:t,children:n}))))}else{var $e;($e=$.current)==null||$e.render(L.createElement("div",{ref:N,style:Ce,className:r,children:n}))}});const Ue=L.useRef(!0);Ev(Te=>{if(oe.current){O.updateMatrixWorld(),oe.current.updateWorldMatrix(!0,!1);const $e=u?te.current:A(oe.current,O,F);if(u||Math.abs(G.current-O.zoom)>e||Math.abs(te.current[0]-$e[0])>e||Math.abs(te.current[1]-$e[1])>e){const Ee=hle(oe.current,O);let Oe=!1;he&&(Array.isArray(h)?Oe=h.map(_t=>_t.current):h!=="blending"&&(Oe=[P]));const le=Ue.current;if(Oe){const _t=fle(oe.current,O,K,Oe);Ue.current=_t&&!Ee}else Ue.current=!Ee;le!==Ue.current&&(d?d(!Ue.current):ee.style.display=Ue.current?"block":"none");const vt=Math.floor(_[0]/2),ft=h?he?[_[0],vt]:[vt-1,0]:_;if(ee.style.zIndex=`${ple(oe.current,O,ft)}`,u){const[_t,mt]=[F.width/2,F.height/2],Vt=O.projectionMatrix.elements[5]*mt,{isOrthographicCamera:bt,top:de,left:ae,bottom:He,right:Ze}=O,ut=mle(O.matrixWorldInverse),st=bt?`scale(${Vt})translate(${yM(-(Ze+ae)/2)}px,${yM((de+He)/2)}px)`:`translateZ(${Vt}px)`;let It=oe.current.matrixWorld;c&&(It=O.matrixWorldInverse.clone().transpose().copyPosition(It).scale(oe.current.scale),It.elements[3]=It.elements[7]=It.elements[11]=0,It.elements[15]=1),ee.style.width=F.width+"px",ee.style.height=F.height+"px",ee.style.perspective=bt?"":`${Vt}px`,re.current&&Z.current&&(re.current.style.transform=`${st}${ut}translate(${_t}px,${mt}px)`,Z.current.style.transform=gle(It,1/((l||10)/400)))}else{const _t=l===void 0?1:dle(oe.current,O)*l;ee.style.transform=`translate3d(${$e[0]}px,${$e[1]}px,0) scale(${_t})`}te.current=$e,G.current=O.zoom}}if(!he&&ce.current&&!ye.current)if(u){if(re.current){const $e=re.current.children[0];if($e!=null&&$e.clientWidth&&$e!=null&&$e.clientHeight){const{isOrthographicCamera:Ee}=O;if(Ee||w)I.scale&&(Array.isArray(I.scale)?I.scale instanceof fe?ce.current.scale.copy(I.scale.clone().divideScalar(1)):ce.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):ce.current.scale.setScalar(1/I.scale));else{const Oe=(l||10)/400,le=$e.clientWidth*Oe,vt=$e.clientHeight*Oe;ce.current.scale.set(le,vt,1)}ye.current=!0}}}else{const $e=ee.children[0];if($e!=null&&$e.clientWidth&&$e!=null&&$e.clientHeight){const Ee=1/Y.factor,Oe=$e.clientWidth*Ee,le=$e.clientHeight*Ee;ce.current.scale.set(Oe,le,1),ye.current=!0}ce.current.lookAt(Te.camera.position)}});const Qe=L.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return L.createElement("group",Eg({},I,{ref:oe}),h&&!he&&L.createElement("mesh",{castShadow:m,receiveShadow:g,ref:ce},w||L.createElement("planeGeometry",null),v||L.createElement("shaderMaterial",{side:wa,vertexShader:Qe.vertexShader,fragmentShader:Qe.fragmentShader})))}),dP=parseInt(uv.replace(/\D+/g,""));function HD(n,e){if(e===r5)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===hb||e===MR){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===hb)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Za=Uint8Array,tf=Uint16Array,xM=Uint32Array,Lz=new Za([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dz=new Za([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vle=new Za([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fz=function(n,e){for(var t=new tf(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new xM(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},Nz=Fz(Lz,2),Oz=Nz[0],_le=Nz[1];Oz[28]=258,_le[258]=28;var wle=Fz(Dz,0),ble=wle[0],vM=new tf(32768);for(var hi=0;hi<32768;++hi){var Vh=(hi&43690)>>>1|(hi&21845)<<1;Vh=(Vh&52428)>>>2|(Vh&13107)<<2,Vh=(Vh&61680)>>>4|(Vh&3855)<<4,vM[hi]=((Vh&65280)>>>8|(Vh&255)<<8)>>>1}var ix=function(n,e,t){for(var r=n.length,i=0,s=new tf(e);i<r;++i)++s[n[i]-1];var o=new tf(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new tf(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],h=o[n[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[vM[h]>>>l]=c}else for(a=new tf(r),i=0;i<r;++i)n[i]&&(a[i]=vM[o[n[i]-1]++]>>>15-n[i]);return a},Rv=new Za(288);for(var hi=0;hi<144;++hi)Rv[hi]=8;for(var hi=144;hi<256;++hi)Rv[hi]=9;for(var hi=256;hi<280;++hi)Rv[hi]=7;for(var hi=280;hi<288;++hi)Rv[hi]=8;var Uz=new Za(32);for(var hi=0;hi<32;++hi)Uz[hi]=5;var Ale=ix(Rv,9,1),Sle=ix(Uz,5,1),NT=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ll=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},OT=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Cle=function(n){return(n/8|0)+(n&7&&1)},Tle=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof tf?tf:n instanceof xM?xM:Za)(t-e);return r.set(n.subarray(e,t)),r},Ele=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Za(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Za(r*3));var o=function(Ce){var ke=e.length;if(Ce>ke){var Ue=new Za(Math.max(ke*2,Ce));Ue.set(e),e=Ue}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,h=t.d,d=t.m,m=t.n,g=r*8;do{if(!u){t.f=a=Ll(n,l,1);var v=Ll(n,l+1,3);if(l+=3,v)if(v==1)u=Ale,h=Sle,d=9,m=5;else if(v==2){var S=Ll(n,l,31)+257,R=Ll(n,l+10,15)+4,B=S+Ll(n,l+5,31)+1;l+=14;for(var I=new Za(B),N=new Za(19),U=0;U<R;++U)N[vle[U]]=Ll(n,l+U*3,7);l+=R*3;for(var O=NT(N),P=(1<<O)-1,F=ix(N,O,1),U=0;U<B;){var K=F[Ll(n,l,P)];l+=K&15;var w=K>>>4;if(w<16)I[U++]=w;else{var Q=0,Y=0;for(w==16?(Y=3+Ll(n,l,3),l+=2,Q=I[U-1]):w==17?(Y=3+Ll(n,l,7),l+=3):w==18&&(Y=11+Ll(n,l,127),l+=7);Y--;)I[U++]=Q}}var ee=I.subarray(0,S),$=I.subarray(S);d=NT(ee),m=NT($),u=ix(ee,d,1),h=ix($,m,1)}else throw"invalid block type";else{var w=Cle(l)+4,_=n[w-4]|n[w-3]<<8,A=w+_;if(A>r){if(s)throw"unexpected EOF";break}i&&o(c+_),e.set(n.subarray(w,A),c),t.b=c+=_,t.p=l=A*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var oe=(1<<d)-1,G=(1<<m)-1,te=l;;te=l){var Q=u[OT(n,l)&oe],re=Q>>>4;if(l+=Q&15,l>g){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(re<256)e[c++]=re;else if(re==256){te=l,u=null;break}else{var Z=re-254;if(re>264){var U=re-257,ne=Lz[U];Z=Ll(n,l,(1<<ne)-1)+Oz[U],l+=ne}var ce=h[OT(n,l)&G],ye=ce>>>4;if(!ce)throw"invalid distance";l+=ce&15;var $=ble[ye];if(ye>3){var ne=Dz[ye];$+=OT(n,l)&(1<<ne)-1,l+=ne}if(l>g){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var he=c+Z;c<he;c+=4)e[c]=e[c-$],e[c+1]=e[c+1-$],e[c+2]=e[c+2-$],e[c+3]=e[c+3-$];c=he}}t.l=u,t.p=te,t.b=c,u&&(a=1,t.m=d,t.d=h,t.n=m)}while(!a);return c==e.length?e:Tle(e,0,c)},Mle=new Za(0),Rle=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function R_(n,e){return Ele((Rle(n),n.subarray(2,-4)),e)}var Ple=typeof TextDecoder<"u"&&new TextDecoder,kle=0;try{Ple.decode(Mle,{stream:!0}),kle=1}catch{}const Ble=n=>n&&n.isCubeTexture;class Ile extends di{constructor(e,t){var r,i;const s=Ble(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),h=4*c,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${dP>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},w=new bv(1,16),_=new oa({uniforms:v,fragmentShader:g,vertexShader:m,side:wa});super(w,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Lle=Object.defineProperty,Dle=(n,e,t)=>e in n?Lle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fle=(n,e,t)=>(Dle(n,e+"",t),t);class Nle{constructor(){Fle(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var Ole=Object.defineProperty,Ule=(n,e,t)=>e in n?Ole(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kn=(n,e,t)=>(Ule(n,typeof e!="symbol"?e+"":e,t),t);const P_=new bp,jD=new Lu,zle=Math.cos(70*(Math.PI/180)),GD=(n,e)=>(n%e+e)%e;let Hle=class extends Nle{constructor(e,t){super(),kn(this,"object"),kn(this,"domElement"),kn(this,"enabled",!0),kn(this,"target",new fe),kn(this,"minDistance",0),kn(this,"maxDistance",1/0),kn(this,"minZoom",0),kn(this,"maxZoom",1/0),kn(this,"minPolarAngle",0),kn(this,"maxPolarAngle",Math.PI),kn(this,"minAzimuthAngle",-1/0),kn(this,"maxAzimuthAngle",1/0),kn(this,"enableDamping",!1),kn(this,"dampingFactor",.05),kn(this,"enableZoom",!0),kn(this,"zoomSpeed",1),kn(this,"enableRotate",!0),kn(this,"rotateSpeed",1),kn(this,"enablePan",!0),kn(this,"panSpeed",1),kn(this,"screenSpacePanning",!0),kn(this,"keyPanSpeed",7),kn(this,"zoomToCursor",!1),kn(this,"autoRotate",!1),kn(this,"autoRotateSpeed",2),kn(this,"reverseOrbit",!1),kn(this,"reverseHorizontalOrbit",!1),kn(this,"reverseVerticalOrbit",!1),kn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),kn(this,"mouseButtons",{LEFT:wd.ROTATE,MIDDLE:wd.DOLLY,RIGHT:wd.PAN}),kn(this,"touches",{ONE:bd.ROTATE,TWO:bd.DOLLY_PAN}),kn(this,"target0"),kn(this,"position0"),kn(this,"zoom0"),kn(this,"_domElementKeyEvents",null),kn(this,"getPolarAngle"),kn(this,"getAzimuthalAngle"),kn(this,"setPolarAngle"),kn(this,"setAzimuthalAngle"),kn(this,"getDistance"),kn(this,"getZoomScale"),kn(this,"listenToKeyEvents"),kn(this,"stopListenToKeyEvents"),kn(this,"saveState"),kn(this,"reset"),kn(this,"update"),kn(this,"connect"),kn(this,"dispose"),kn(this,"dollyIn"),kn(this,"dollyOut"),kn(this,"getScale"),kn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Me=>{let et=GD(Me,2*Math.PI),wt=u.phi;wt<0&&(wt+=2*Math.PI),et<0&&(et+=2*Math.PI);let Se=Math.abs(et-wt);2*Math.PI-Se<Se&&(et<wt?et+=2*Math.PI:wt+=2*Math.PI),h.phi=et-wt,r.update()},this.setAzimuthalAngle=Me=>{let et=GD(Me,2*Math.PI),wt=u.theta;wt<0&&(wt+=2*Math.PI),et<0&&(et+=2*Math.PI);let Se=Math.abs(et-wt);2*Math.PI-Se<Se&&(et<wt?et+=2*Math.PI:wt+=2*Math.PI),h.theta=et-wt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Me=>{Me.addEventListener("keydown",Et),this._domElementKeyEvents=Me},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Et),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Me=new fe,et=new fe(0,1,0),wt=new ri().setFromUnitVectors(e.up,et),Se=wt.clone().invert(),je=new fe,qe=new ri,at=2*Math.PI;return function(){const Dt=r.object.position;wt.setFromUnitVectors(e.up,et),Se.copy(wt).invert(),Me.copy(Dt).sub(r.target),Me.applyQuaternion(wt),u.setFromVector3(Me),r.autoRotate&&l===a.NONE&&Y(K()),r.enableDamping?(u.theta+=h.theta*r.dampingFactor,u.phi+=h.phi*r.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let kt=r.minAzimuthAngle,En=r.maxAzimuthAngle;isFinite(kt)&&isFinite(En)&&(kt<-Math.PI?kt+=at:kt>Math.PI&&(kt-=at),En<-Math.PI?En+=at:En>Math.PI&&(En-=at),kt<=En?u.theta=Math.max(kt,Math.min(En,u.theta)):u.theta=u.theta>(kt+En)/2?Math.max(kt,u.theta):Math.min(En,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&O||r.object.isOrthographicCamera?u.radius=ce(u.radius):u.radius=ce(u.radius*d),Me.setFromSpherical(u),Me.applyQuaternion(Se),Dt.copy(r.target).add(Me),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let xr=!1;if(r.zoomToCursor&&O){let Mn=null;if(r.object instanceof ui&&r.object.isPerspectiveCamera){const _r=Me.length();Mn=ce(_r*d);const Or=_r-Mn;r.object.position.addScaledVector(N,Or),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const _r=new fe(U.x,U.y,0);_r.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),xr=!0;const Or=new fe(U.x,U.y,0);Or.unproject(r.object),r.object.position.sub(Or).add(_r),r.object.updateMatrixWorld(),Mn=Me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Mn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Mn).add(r.object.position):(P_.origin.copy(r.object.position),P_.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(P_.direction))<zle?e.lookAt(r.target):(jD.setFromNormalAndCoplanarPoint(r.object.up,r.target),P_.intersectPlane(jD,r.target))))}else r.object instanceof tl&&r.object.isOrthographicCamera&&(xr=d!==1,xr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,O=!1,xr||je.distanceToSquared(r.object.position)>c||8*(1-qe.dot(r.object.quaternion))>c?(r.dispatchEvent(i),je.copy(r.object.position),qe.copy(r.object.quaternion),xr=!1,!0):!1}})(),this.connect=Me=>{r.domElement=Me,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",gt),r.domElement.addEventListener("pointerdown",ae),r.domElement.addEventListener("pointercancel",Ze),r.domElement.addEventListener("wheel",It)},this.dispose=()=>{var Me,et,wt,Se,je,qe;r.domElement&&(r.domElement.style.touchAction="auto"),(Me=r.domElement)==null||Me.removeEventListener("contextmenu",gt),(et=r.domElement)==null||et.removeEventListener("pointerdown",ae),(wt=r.domElement)==null||wt.removeEventListener("pointercancel",Ze),(Se=r.domElement)==null||Se.removeEventListener("wheel",It),(je=r.domElement)==null||je.ownerDocument.removeEventListener("pointermove",He),(qe=r.domElement)==null||qe.ownerDocument.removeEventListener("pointerup",Ze),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Et)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new hM,h=new hM;let d=1;const m=new fe,g=new ht,v=new ht,w=new ht,_=new ht,A=new ht,S=new ht,R=new ht,B=new ht,I=new ht,N=new fe,U=new ht;let O=!1;const P=[],F={};function K(){return 2*Math.PI/60/60*r.autoRotateSpeed}function Q(){return Math.pow(.95,r.zoomSpeed)}function Y(Me){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=Me:h.theta-=Me}function ee(Me){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=Me:h.phi-=Me}const $=(()=>{const Me=new fe;return function(wt,Se){Me.setFromMatrixColumn(Se,0),Me.multiplyScalar(-wt),m.add(Me)}})(),oe=(()=>{const Me=new fe;return function(wt,Se){r.screenSpacePanning===!0?Me.setFromMatrixColumn(Se,1):(Me.setFromMatrixColumn(Se,0),Me.crossVectors(r.object.up,Me)),Me.multiplyScalar(wt),m.add(Me)}})(),G=(()=>{const Me=new fe;return function(wt,Se){const je=r.domElement;if(je&&r.object instanceof ui&&r.object.isPerspectiveCamera){const qe=r.object.position;Me.copy(qe).sub(r.target);let at=Me.length();at*=Math.tan(r.object.fov/2*Math.PI/180),$(2*wt*at/je.clientHeight,r.object.matrix),oe(2*Se*at/je.clientHeight,r.object.matrix)}else je&&r.object instanceof tl&&r.object.isOrthographicCamera?($(wt*(r.object.right-r.object.left)/r.object.zoom/je.clientWidth,r.object.matrix),oe(Se*(r.object.top-r.object.bottom)/r.object.zoom/je.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function te(Me){r.object instanceof ui&&r.object.isPerspectiveCamera||r.object instanceof tl&&r.object.isOrthographicCamera?d=Me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function re(Me){te(d/Me)}function Z(Me){te(d*Me)}function ne(Me){if(!r.zoomToCursor||!r.domElement)return;O=!0;const et=r.domElement.getBoundingClientRect(),wt=Me.clientX-et.left,Se=Me.clientY-et.top,je=et.width,qe=et.height;U.x=wt/je*2-1,U.y=-(Se/qe)*2+1,N.set(U.x,U.y,1).unproject(r.object).sub(r.object.position).normalize()}function ce(Me){return Math.max(r.minDistance,Math.min(r.maxDistance,Me))}function ye(Me){g.set(Me.clientX,Me.clientY)}function he(Me){ne(Me),R.set(Me.clientX,Me.clientY)}function Ce(Me){_.set(Me.clientX,Me.clientY)}function ke(Me){v.set(Me.clientX,Me.clientY),w.subVectors(v,g).multiplyScalar(r.rotateSpeed);const et=r.domElement;et&&(Y(2*Math.PI*w.x/et.clientHeight),ee(2*Math.PI*w.y/et.clientHeight)),g.copy(v),r.update()}function Ue(Me){B.set(Me.clientX,Me.clientY),I.subVectors(B,R),I.y>0?re(Q()):I.y<0&&Z(Q()),R.copy(B),r.update()}function Qe(Me){A.set(Me.clientX,Me.clientY),S.subVectors(A,_).multiplyScalar(r.panSpeed),G(S.x,S.y),_.copy(A),r.update()}function Te(Me){ne(Me),Me.deltaY<0?Z(Q()):Me.deltaY>0&&re(Q()),r.update()}function $e(Me){let et=!1;switch(Me.code){case r.keys.UP:G(0,r.keyPanSpeed),et=!0;break;case r.keys.BOTTOM:G(0,-r.keyPanSpeed),et=!0;break;case r.keys.LEFT:G(r.keyPanSpeed,0),et=!0;break;case r.keys.RIGHT:G(-r.keyPanSpeed,0),et=!0;break}et&&(Me.preventDefault(),r.update())}function Ee(){if(P.length==1)g.set(P[0].pageX,P[0].pageY);else{const Me=.5*(P[0].pageX+P[1].pageX),et=.5*(P[0].pageY+P[1].pageY);g.set(Me,et)}}function Oe(){if(P.length==1)_.set(P[0].pageX,P[0].pageY);else{const Me=.5*(P[0].pageX+P[1].pageX),et=.5*(P[0].pageY+P[1].pageY);_.set(Me,et)}}function le(){const Me=P[0].pageX-P[1].pageX,et=P[0].pageY-P[1].pageY,wt=Math.sqrt(Me*Me+et*et);R.set(0,wt)}function vt(){r.enableZoom&&le(),r.enablePan&&Oe()}function ft(){r.enableZoom&&le(),r.enableRotate&&Ee()}function _t(Me){if(P.length==1)v.set(Me.pageX,Me.pageY);else{const wt=Ft(Me),Se=.5*(Me.pageX+wt.x),je=.5*(Me.pageY+wt.y);v.set(Se,je)}w.subVectors(v,g).multiplyScalar(r.rotateSpeed);const et=r.domElement;et&&(Y(2*Math.PI*w.x/et.clientHeight),ee(2*Math.PI*w.y/et.clientHeight)),g.copy(v)}function mt(Me){if(P.length==1)A.set(Me.pageX,Me.pageY);else{const et=Ft(Me),wt=.5*(Me.pageX+et.x),Se=.5*(Me.pageY+et.y);A.set(wt,Se)}S.subVectors(A,_).multiplyScalar(r.panSpeed),G(S.x,S.y),_.copy(A)}function Vt(Me){const et=Ft(Me),wt=Me.pageX-et.x,Se=Me.pageY-et.y,je=Math.sqrt(wt*wt+Se*Se);B.set(0,je),I.set(0,Math.pow(B.y/R.y,r.zoomSpeed)),re(I.y),R.copy(B)}function bt(Me){r.enableZoom&&Vt(Me),r.enablePan&&mt(Me)}function de(Me){r.enableZoom&&Vt(Me),r.enableRotate&&_t(Me)}function ae(Me){var et,wt;r.enabled!==!1&&(P.length===0&&((et=r.domElement)==null||et.ownerDocument.addEventListener("pointermove",He),(wt=r.domElement)==null||wt.ownerDocument.addEventListener("pointerup",Ze)),jt(Me),Me.pointerType==="touch"?Lt(Me):ut(Me))}function He(Me){r.enabled!==!1&&(Me.pointerType==="touch"?hn(Me):st(Me))}function Ze(Me){var et,wt,Se;$t(Me),P.length===0&&((et=r.domElement)==null||et.releasePointerCapture(Me.pointerId),(wt=r.domElement)==null||wt.ownerDocument.removeEventListener("pointermove",He),(Se=r.domElement)==null||Se.ownerDocument.removeEventListener("pointerup",Ze)),r.dispatchEvent(o),l=a.NONE}function ut(Me){let et;switch(Me.button){case 0:et=r.mouseButtons.LEFT;break;case 1:et=r.mouseButtons.MIDDLE;break;case 2:et=r.mouseButtons.RIGHT;break;default:et=-1}switch(et){case wd.DOLLY:if(r.enableZoom===!1)return;he(Me),l=a.DOLLY;break;case wd.ROTATE:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(r.enablePan===!1)return;Ce(Me),l=a.PAN}else{if(r.enableRotate===!1)return;ye(Me),l=a.ROTATE}break;case wd.PAN:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(r.enableRotate===!1)return;ye(Me),l=a.ROTATE}else{if(r.enablePan===!1)return;Ce(Me),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function st(Me){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ke(Me);break;case a.DOLLY:if(r.enableZoom===!1)return;Ue(Me);break;case a.PAN:if(r.enablePan===!1)return;Qe(Me);break}}function It(Me){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Me.preventDefault(),r.dispatchEvent(s),Te(Me),r.dispatchEvent(o))}function Et(Me){r.enabled===!1||r.enablePan===!1||$e(Me)}function Lt(Me){switch(zt(Me),P.length){case 1:switch(r.touches.ONE){case bd.ROTATE:if(r.enableRotate===!1)return;Ee(),l=a.TOUCH_ROTATE;break;case bd.PAN:if(r.enablePan===!1)return;Oe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case bd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;vt(),l=a.TOUCH_DOLLY_PAN;break;case bd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ft(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function hn(Me){switch(zt(Me),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;_t(Me),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;mt(Me),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;bt(Me),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;de(Me),r.update();break;default:l=a.NONE}}function gt(Me){r.enabled!==!1&&Me.preventDefault()}function jt(Me){P.push(Me)}function $t(Me){delete F[Me.pointerId];for(let et=0;et<P.length;et++)if(P[et].pointerId==Me.pointerId){P.splice(et,1);return}}function zt(Me){let et=F[Me.pointerId];et===void 0&&(et=new ht,F[Me.pointerId]=et),et.set(Me.pageX,Me.pageY)}function Ft(Me){const et=Me.pointerId===P[0].pointerId?P[1]:P[0];return F[et.pointerId]}this.dollyIn=(Me=Q())=>{Z(Me),r.update()},this.dollyOut=(Me=Q())=>{re(Me),r.update()},this.getScale=()=>d,this.setScale=Me=>{te(Me),r.update()},this.getZoomScale=()=>Q(),t!==void 0&&this.connect(t),this.update()}};function mb(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Ud="srgb",Hu="srgb-linear",VD=3001,jle=3e3;class pP extends ss{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Xle(t)}),this.register(function(t){return new qle(t)}),this.register(function(t){return new rce(t)}),this.register(function(t){return new ice(t)}),this.register(function(t){return new sce(t)}),this.register(function(t){return new Kle(t)}),this.register(function(t){return new Jle(t)}),this.register(function(t){return new Zle(t)}),this.register(function(t){return new Qle(t)}),this.register(function(t){return new $le(t)}),this.register(function(t){return new ece(t)}),this.register(function(t){return new Yle(t)}),this.register(function(t){return new nce(t)}),this.register(function(t){return new tce(t)}),this.register(function(t){return new Vle(t)}),this.register(function(t){return new oce(t)}),this.register(function(t){return new ace(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=zu.extractUrlBase(e);o=zu.resolveURL(c,this.path)}else o=zu.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Is(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(mb(new Uint8Array(e.slice(0,4)))===zz){try{o[gr.KHR_BINARY_GLTF]=new lce(e)}catch(u){i&&i(u);return}s=JSON.parse(o[gr.KHR_BINARY_GLTF].content)}else s=JSON.parse(mb(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new wce(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],h=s.extensionsRequired||[];switch(u){case gr.KHR_MATERIALS_UNLIT:o[u]=new Wle;break;case gr.KHR_DRACO_MESH_COMPRESSION:o[u]=new cce(s,this.dracoLoader);break;case gr.KHR_TEXTURE_TRANSFORM:o[u]=new uce;break;case gr.KHR_MESH_QUANTIZATION:o[u]=new hce;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Gle(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const gr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Vle{constructor(e){this.parser=e,this.name=gr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ut(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Hu);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new eS(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Dx(u),c.distance=h;break;case"spot":c=new QA(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Iu(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class Wle{constructor(){this.name=gr.KHR_MATERIALS_UNLIT}getMaterialType(){return ta}extendParams(e,t,r){const i=[];e.color=new Ut(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Hu),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Ud))}return Promise.all(i)}}class $le{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Xle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ht(a,a)}return Promise.all(s)}}class qle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Yle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Kle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ut(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Hu)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ud)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Jle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Zle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ut().setRGB(a[0],a[1],a[2],Hu),Promise.all(s)}}class Qle{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class ece{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ut().setRGB(a[0],a[1],a[2],Hu),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Ud)),Promise.all(s)}}class tce{constructor(e){this.parser=e,this.name=gr.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class nce{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:cl}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class rce{constructor(e){this.parser=e,this.name=gr.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ice{constructor(e){this.parser=e,this.name=gr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class sce{constructor(e){this.parser=e,this.name=gr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class oce{constructor(e){this.name=gr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,h=i.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(m),u,h,d,i.mode,i.filter),m})})}else return null}}class ace{constructor(e){this.name=gr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ka.TRIANGLES&&c.mode!==Ka.TRIANGLE_STRIP&&c.mode!==Ka.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],d=c[0].count,m=[];for(const g of h){const v=new Zt,w=new fe,_=new ri,A=new fe(1,1,1),S=new LR(g.geometry,g.material,d);for(let R=0;R<d;R++)l.TRANSLATION&&w.fromBufferAttribute(l.TRANSLATION,R),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,R),l.SCALE&&A.fromBufferAttribute(l.SCALE,R),S.setMatrixAt(R,v.compose(w,_,A));for(const R in l)if(R==="_COLOR_0"){const B=l[R];S.instanceColor=new dp(B.array,B.itemSize,B.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&g.geometry.setAttribute(R,l[R]);cr.prototype.copy.call(S,g),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const zz="glTF",y0=12,WD={JSON:1313821514,BIN:5130562};class lce{constructor(e){this.name=gr.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,y0);if(this.header={magic:mb(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==zz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-y0,i=new DataView(e,y0);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===WD.JSON){const l=new Uint8Array(e,y0+s,o);this.content=mb(l)}else if(a===WD.BIN){const l=y0+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class cce{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=_M[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=_M[u]||u.toLowerCase();if(o[u]!==void 0){const d=r.accessors[e.attributes[u]],m=sg[d.componentType];c[h]=m.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h,d){i.decodeDracoFile(u,function(m){for(const g in m.attributes){const v=m.attributes[g],w=l[g];w!==void 0&&(v.normalized=w)}h(m)},a,c,Hu,d)})})}}class uce{constructor(){this.name=gr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class hce{constructor(){this.name=gr.KHR_MESH_QUANTIZATION}}class Hz extends Qg{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,h=(r-t)/u,d=h*h,m=d*h,g=e*c,v=g-c,w=-2*m+3*d,_=m-d,A=1-w,S=_-d+h;for(let R=0;R!==a;R++){const B=o[v+R+a],I=o[v+R+l]*u,N=o[g+R+a],U=o[g+R]*u;s[R]=A*B+S*I+w*N+_*U}return s}}const fce=new ri;class dce extends Hz{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return fce.fromArray(s).normalize().toArray(s),s}}const Ka={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$D={9728:Bs,9729:Er,9984:bA,9985:rg,9986:Bd,9987:el},XD={33071:Ti,33648:vg,10497:zc},UT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_M={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...dP>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Wh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pce={CUBICSPLINE:void 0,LINEAR:bg,STEP:wg},zT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mce(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Cv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Oc})),n.DefaultMaterial}function xd(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Iu(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function gce(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(i=!0),h.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(r){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(d)}if(i){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(d)}if(s){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function yce(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function xce(n){let e;const t=n.extensions&&n.extensions[gr.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+HT(t.attributes):e=n.indices+":"+HT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+HT(n.targets[r]);return e}function HT(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function wM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function vce(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _ce=new Zt;class wce{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Gle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new KR(this.options.manager):this.textureLoader=new ez(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Is(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return xd(s,a,i),Iu(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[gr.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(zu.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=UT[i.type],a=sg[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Mr(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=UT[i.type],c=sg[i.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let v,w;if(m&&m!==h){const _=Math.floor(d/m),A="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let S=t.cache.get(A);S||(v=new c(a,_*m,i.count*m/u),S=new vv(v,m/u),t.cache.add(A,S)),w=new lf(S,l,d%m/u,g)}else a===null?v=new c(i.count*l):v=new c(a,d,i.count*l),w=new Mr(v,l,g);if(i.sparse!==void 0){const _=UT.SCALAR,A=sg[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,R=i.sparse.values.byteOffset||0,B=new A(o[1],S,i.sparse.count*_),I=new c(o[2],R,i.sparse.count*l);a!==null&&(w=new Mr(w.array.slice(),w.itemSize,w.normalized));for(let N=0,U=B.length;N<U;N++){const O=B[N];if(w.setX(O,I[N*l]),l>=2&&w.setY(O,I[N*l+1]),l>=3&&w.setZ(O,I[N*l+2]),l>=4&&w.setW(O,I[N*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return u.magFilter=$D[d.magFilter]||Er,u.minFilter=$D[d.minFilter]||el,u.wrapS=XD[d.wrapS]||zc,u.wrapT=XD[d.wrapT]||zc,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,m){let g=d;t.isImageBitmapLoader===!0&&(g=function(v){const w=new Pr(v);w.needsUpdate=!0,d(w)}),t.load(zu.resolveURL(h,s.path),g,void 0,m)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),Iu(h,o),h.userData.mimeType=o.mimeType||vce(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[gr.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[gr.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[gr.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===VD?Ud:Hu),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Ud?VD:jle),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new FA,vs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Ys,vs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Cv}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[gr.KHR_MATERIALS_UNLIT]){const h=i[gr.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Ut(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],Hu),a.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,Ud)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=wa);const u=s.alphaMode||zT.OPAQUE;if(u===zT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===zT.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ta&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ht(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&o!==ta&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ta){const h=s.emissiveFactor;a.emissive=new Ut().setRGB(h[0],h[1],h[2],Hu)}return s.emissiveTexture!==void 0&&o!==ta&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Ud)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),Iu(h,s),t.associations.set(h,{materials:e}),s.extensions&&xd(i,h,s),h})}createUniqueName(e){const t=fr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[gr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return qD(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=xce(c),h=i[u];if(h)o.push(h.promise);else{let d;c.extensions&&c.extensions[gr.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=qD(new Vn,c,t),i[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?mce(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let m=0,g=u.length;m<g;m++){const v=u[m],w=o[m];let _;const A=c[m];if(w.mode===Ka.TRIANGLES||w.mode===Ka.TRIANGLE_STRIP||w.mode===Ka.TRIANGLE_FAN||w.mode===void 0)_=s.isSkinnedMesh===!0?new DA(v,A):new di(v,A),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),w.mode===Ka.TRIANGLE_STRIP?_.geometry=HD(_.geometry,MR):w.mode===Ka.TRIANGLE_FAN&&(_.geometry=HD(_.geometry,hb));else if(w.mode===Ka.LINES)_=new tc(v,A);else if(w.mode===Ka.LINE_STRIP)_=new Gc(v,A);else if(w.mode===Ka.LINE_LOOP)_=new DR(v,A);else if(w.mode===Ka.POINTS)_=new FR(v,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(_.geometry.morphAttributes).length>0&&yce(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),Iu(_,s),w.extensions&&xd(i,_,w),t.assignFinalMaterial(_),h.push(_)}for(let m=0,g=h.length;m<g;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return s.extensions&&xd(i,h[0],s),h[0];const d=new Wl;s.extensions&&xd(i,d,s),t.associations.set(d,{meshes:e});for(let m=0,g=h.length;m<g;m++)d.add(h[m]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new ui(Ws.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new tl(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Iu(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const d=new Zt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Jg(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,d=i.channels.length;h<d;h++){const m=i.channels[h],g=i.samplers[m.sampler],v=m.target,w=v.node,_=i.parameters!==void 0?i.parameters[g.input]:g.input,A=i.parameters!==void 0?i.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",w)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",A)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const d=h[0],m=h[1],g=h[2],v=h[3],w=h[4],_=[];for(let A=0,S=d.length;A<S;A++){const R=d[A],B=m[A],I=g[A],N=v[A],U=w[A];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const O=r._createAnimationTracks(R,B,I,N,U);if(O)for(let P=0;P<O.length;P++)_.push(O[P])}return new mp(s,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(d,_ce)});for(let m=0,g=h.length;m<g;m++)u.add(h[m]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Cg:c.length>1?u=new Wl:c.length===1?u=c[0]:u=new cr,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=o),Iu(u,s),s.extensions&&xd(r,u,s),s.matrix!==void 0){const h=new Zt;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Wl;r.name&&(s.name=i.createUniqueName(r.name)),Iu(s,r),r.extensions&&xd(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[d,m]of i.associations)(d instanceof vs||d instanceof Pr)&&h.set(d,m);return u.traverse(d=>{const m=i.associations.get(d);m!=null&&h.set(d,m)}),h};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];Wh[s.path]===Wh.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let c;switch(Wh[s.path]){case Wh.weights:c=cf;break;case Wh.rotation:c=Vu;break;case Wh.position:case Wh.scale:c=uf;break;default:switch(r.itemSize){case 1:c=cf;break;case 2:case 3:default:c=uf;break}break}const u=i.interpolation!==void 0?pce[i.interpolation]:bg,h=this._getArrayFromAccessor(r);for(let d=0,m=l.length;d<m;d++){const g=new c(l[d]+"."+Wh[s.path],t.array,h,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=wM(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof Vu?dce:Hz;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function bce(n,e,t){const r=e.attributes,i=new po;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new fe(l[0],l[1],l[2]),new fe(c[0],c[1],c[2])),a.normalized){const u=wM(sg[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new fe,l=new fe;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],m=d.min,g=d.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),d.normalized){const v=wM(sg[d.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Xs;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function qD(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=_M[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Iu(n,e),bce(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?gce(n,e.targets,t):n})}class Ace extends YR{constructor(e){super(e),this.type=xs}parse(e){const o=function(U,O){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},u=`
`,h=function(U,O,P){O=O||1024;let K=U.pos,Q=-1,Y=0,ee="",$=String.fromCharCode.apply(null,new Uint16Array(U.subarray(K,K+128)));for(;0>(Q=$.indexOf(u))&&Y<O&&K<U.byteLength;)ee+=$,Y+=$.length,K+=128,$+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(K,K+128)));return-1<Q?(U.pos+=Y+Q+1,ee+$.slice(0,Q)):!1},d=function(U){const O=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,K=/^\s*FORMAT=(\S+)\s*$/,Q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ee,$;for((U.pos>=U.byteLength||!(ee=h(U)))&&o(1,"no header found"),($=ee.match(O))||o(3,"bad initial token"),Y.valid|=1,Y.programtype=$[1],Y.string+=ee+`
`;ee=h(U),ee!==!1;){if(Y.string+=ee+`
`,ee.charAt(0)==="#"){Y.comments+=ee+`
`;continue}if(($=ee.match(P))&&(Y.gamma=parseFloat($[1])),($=ee.match(F))&&(Y.exposure=parseFloat($[1])),($=ee.match(K))&&(Y.valid|=2,Y.format=$[1]),($=ee.match(Q))&&(Y.valid|=4,Y.height=parseInt($[1],10),Y.width=parseInt($[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||o(3,"missing format specifier"),Y.valid&4||o(3,"missing image size specifier"),Y},m=function(U,O,P){const F=O;if(F<8||F>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);F!==(U[2]<<8|U[3])&&o(3,"wrong scanline width");const K=new Uint8Array(4*O*P);K.length||o(4,"unable to allocate buffer space");let Q=0,Y=0;const ee=4*F,$=new Uint8Array(4),oe=new Uint8Array(ee);let G=P;for(;G>0&&Y<U.byteLength;){Y+4>U.byteLength&&o(1),$[0]=U[Y++],$[1]=U[Y++],$[2]=U[Y++],$[3]=U[Y++],($[0]!=2||$[1]!=2||($[2]<<8|$[3])!=F)&&o(3,"bad rgbe scanline format");let te=0,re;for(;te<ee&&Y<U.byteLength;){re=U[Y++];const ne=re>128;if(ne&&(re-=128),(re===0||te+re>ee)&&o(3,"bad scanline data"),ne){const ce=U[Y++];for(let ye=0;ye<re;ye++)oe[te++]=ce}else oe.set(U.subarray(Y,Y+re),te),te+=re,Y+=re}const Z=F;for(let ne=0;ne<Z;ne++){let ce=0;K[Q]=oe[ne+ce],ce+=F,K[Q+1]=oe[ne+ce],ce+=F,K[Q+2]=oe[ne+ce],ce+=F,K[Q+3]=oe[ne+ce],Q+=4}G--}return K},g=function(U,O,P,F){const K=U[O+3],Q=Math.pow(2,K-128)/255;P[F+0]=U[O+0]*Q,P[F+1]=U[O+1]*Q,P[F+2]=U[O+2]*Q,P[F+3]=1},v=function(U,O,P,F){const K=U[O+3],Q=Math.pow(2,K-128)/255;P[F+0]=Fd.toHalfFloat(Math.min(U[O+0]*Q,65504)),P[F+1]=Fd.toHalfFloat(Math.min(U[O+1]*Q,65504)),P[F+2]=Fd.toHalfFloat(Math.min(U[O+2]*Q,65504)),P[F+3]=Fd.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const _=d(w),A=_.width,S=_.height,R=m(w.subarray(w.pos),A,S);let B,I,N;switch(this.type){case xi:N=R.length/4;const U=new Float32Array(N*4);for(let P=0;P<N;P++)g(R,P*4,U,P*4);B=U,I=xi;break;case xs:N=R.length/4;const O=new Uint16Array(N*4);for(let P=0;P<N;P++)v(R,P*4,O,P*4);B=O,I=xs;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:S,data:B,header:_.string,gamma:_.gamma,exposure:_.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case xi:case xs:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Er,o.magFilter=Er,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const x0=dP>=152;class Sce extends YR{constructor(e){super(e),this.type=xs}parse(e){const O=Math.pow(2.7182818,2.2);function P(J,ue){for(var Re=0,Xe=0;Xe<65536;++Xe)(Xe==0||J[Xe>>3]&1<<(Xe&7))&&(ue[Re++]=Xe);for(var it=Re-1;Re<65536;)ue[Re++]=0;return it}function F(J){for(var ue=0;ue<16384;ue++)J[ue]={},J[ue].len=0,J[ue].lit=0,J[ue].p=null}const K={l:0,c:0,lc:0};function Q(J,ue,Re,Xe,it){for(;Re<J;)ue=ue<<8|Ft(Xe,it),Re+=8;Re-=J,K.l=ue>>Re&(1<<J)-1,K.c=ue,K.lc=Re}const Y=new Array(59);function ee(J){for(var ue=0;ue<=58;++ue)Y[ue]=0;for(var ue=0;ue<65537;++ue)Y[J[ue]]+=1;for(var Re=0,ue=58;ue>0;--ue){var Xe=Re+Y[ue]>>1;Y[ue]=Re,Re=Xe}for(var ue=0;ue<65537;++ue){var it=J[ue];it>0&&(J[ue]=it|Y[it]++<<6)}}function $(J,ue,Re,Xe,it,Le,me){for(var De=Re,q=0,pe=0;it<=Le;it++){if(De.value-Re.value>Xe)return!1;Q(6,q,pe,J,De);var be=K.l;if(q=K.c,pe=K.lc,me[it]=be,be==63){if(De.value-Re.value>Xe)throw"Something wrong with hufUnpackEncTable";Q(8,q,pe,J,De);var xe=K.l+6;if(q=K.c,pe=K.lc,it+xe>Le+1)throw"Something wrong with hufUnpackEncTable";for(;xe--;)me[it++]=0;it--}else if(be>=59){var xe=be-59+2;if(it+xe>Le+1)throw"Something wrong with hufUnpackEncTable";for(;xe--;)me[it++]=0;it--}}ee(me)}function oe(J){return J&63}function G(J){return J>>6}function te(J,ue,Re,Xe){for(;ue<=Re;ue++){var it=G(J[ue]),Le=oe(J[ue]);if(it>>Le)throw"Invalid table entry";if(Le>14){var me=Xe[it>>Le-14];if(me.len)throw"Invalid table entry";if(me.lit++,me.p){var De=me.p;me.p=new Array(me.lit);for(var q=0;q<me.lit-1;++q)me.p[q]=De[q]}else me.p=new Array(1);me.p[me.lit-1]=ue}else if(Le)for(var pe=0,q=1<<14-Le;q>0;q--){var me=Xe[(it<<14-Le)+pe];if(me.len||me.p)throw"Invalid table entry";me.len=Le,me.lit=ue,pe++}}return!0}const re={c:0,lc:0};function Z(J,ue,Re,Xe){J=J<<8|Ft(Re,Xe),ue+=8,re.c=J,re.lc=ue}const ne={c:0,lc:0};function ce(J,ue,Re,Xe,it,Le,me,De,q,pe){if(J==ue){Xe<8&&(Z(Re,Xe,it,me),Re=re.c,Xe=re.lc),Xe-=8;var be=Re>>Xe,be=new Uint8Array([be])[0];if(q.value+be>pe)return!1;for(var xe=De[q.value-1];be-- >0;)De[q.value++]=xe}else if(q.value<pe)De[q.value++]=J;else return!1;ne.c=Re,ne.lc=Xe}function ye(J){return J&65535}function he(J){var ue=ye(J);return ue>32767?ue-65536:ue}const Ce={a:0,b:0};function ke(J,ue){var Re=he(J),Xe=he(ue),it=Xe,Le=Re+(it&1)+(it>>1),me=Le,De=Le-it;Ce.a=me,Ce.b=De}function Ue(J,ue){var Re=ye(J),Xe=ye(ue),it=Re-(Xe>>1)&65535,Le=Xe+it-32768&65535;Ce.a=Le,Ce.b=it}function Qe(J,ue,Re,Xe,it,Le,me){for(var De=me<16384,q=Re>it?it:Re,pe=1,be;pe<=q;)pe<<=1;for(pe>>=1,be=pe,pe>>=1;pe>=1;){for(var xe=0,Pe=xe+Le*(it-be),Ge=Le*pe,nt=Le*be,rt=Xe*pe,dt=Xe*be,Mt,Ct,pt,Wt;xe<=Pe;xe+=nt){for(var Gt=xe,Sn=xe+Xe*(Re-be);Gt<=Sn;Gt+=dt){var nn=Gt+rt,ln=Gt+Ge,qt=ln+rt;De?(ke(J[Gt+ue],J[ln+ue]),Mt=Ce.a,pt=Ce.b,ke(J[nn+ue],J[qt+ue]),Ct=Ce.a,Wt=Ce.b,ke(Mt,Ct),J[Gt+ue]=Ce.a,J[nn+ue]=Ce.b,ke(pt,Wt),J[ln+ue]=Ce.a,J[qt+ue]=Ce.b):(Ue(J[Gt+ue],J[ln+ue]),Mt=Ce.a,pt=Ce.b,Ue(J[nn+ue],J[qt+ue]),Ct=Ce.a,Wt=Ce.b,Ue(Mt,Ct),J[Gt+ue]=Ce.a,J[nn+ue]=Ce.b,Ue(pt,Wt),J[ln+ue]=Ce.a,J[qt+ue]=Ce.b)}if(Re&pe){var ln=Gt+Ge;De?ke(J[Gt+ue],J[ln+ue]):Ue(J[Gt+ue],J[ln+ue]),Mt=Ce.a,J[ln+ue]=Ce.b,J[Gt+ue]=Mt}}if(it&pe)for(var Gt=xe,Sn=xe+Xe*(Re-be);Gt<=Sn;Gt+=dt){var nn=Gt+rt;De?ke(J[Gt+ue],J[nn+ue]):Ue(J[Gt+ue],J[nn+ue]),Mt=Ce.a,J[nn+ue]=Ce.b,J[Gt+ue]=Mt}be=pe,pe>>=1}return xe}function Te(J,ue,Re,Xe,it,Le,me,De,q,pe){for(var be=0,xe=0,Pe=De,Ge=Math.trunc(it.value+(Le+7)/8);it.value<Ge;)for(Z(be,xe,Re,it),be=re.c,xe=re.lc;xe>=14;){var nt=be>>xe-14&16383,rt=ue[nt];if(rt.len)xe-=rt.len,ce(rt.lit,me,be,xe,Re,Xe,it,q,pe,Pe),be=ne.c,xe=ne.lc;else{if(!rt.p)throw"hufDecode issues";var dt;for(dt=0;dt<rt.lit;dt++){for(var Mt=oe(J[rt.p[dt]]);xe<Mt&&it.value<Ge;)Z(be,xe,Re,it),be=re.c,xe=re.lc;if(xe>=Mt&&G(J[rt.p[dt]])==(be>>xe-Mt&(1<<Mt)-1)){xe-=Mt,ce(rt.p[dt],me,be,xe,Re,Xe,it,q,pe,Pe),be=ne.c,xe=ne.lc;break}}if(dt==rt.lit)throw"hufDecode issues"}}var Ct=8-Le&7;for(be>>=Ct,xe-=Ct;xe>0;){var rt=ue[be<<14-xe&16383];if(rt.len)xe-=rt.len,ce(rt.lit,me,be,xe,Re,Xe,it,q,pe,Pe),be=ne.c,xe=ne.lc;else throw"hufDecode issues"}return!0}function $e(J,ue,Re,Xe,it,Le){var me={value:0},De=Re.value,q=zt(ue,Re),pe=zt(ue,Re);Re.value+=4;var be=zt(ue,Re);if(Re.value+=4,q<0||q>=65537||pe<0||pe>=65537)throw"Something wrong with HUF_ENCSIZE";var xe=new Array(65537),Pe=new Array(16384);F(Pe);var Ge=Xe-(Re.value-De);if($(J,ue,Re,Ge,q,pe,xe),be>8*(Xe-(Re.value-De)))throw"Something wrong with hufUncompress";te(xe,q,pe,Pe),Te(xe,Pe,J,ue,Re,be,pe,Le,it,me)}function Ee(J,ue,Re){for(var Xe=0;Xe<Re;++Xe)ue[Xe]=J[ue[Xe]]}function Oe(J){for(var ue=1;ue<J.length;ue++){var Re=J[ue-1]+J[ue]-128;J[ue]=Re}}function le(J,ue){for(var Re=0,Xe=Math.floor((J.length+1)/2),it=0,Le=J.length-1;!(it>Le||(ue[it++]=J[Re++],it>Le));)ue[it++]=J[Xe++]}function vt(J){for(var ue=J.byteLength,Re=new Array,Xe=0,it=new DataView(J);ue>0;){var Le=it.getInt8(Xe++);if(Le<0){var me=-Le;ue-=me+1;for(var De=0;De<me;De++)Re.push(it.getUint8(Xe++))}else{var me=Le;ue-=2;for(var q=it.getUint8(Xe++),De=0;De<me+1;De++)Re.push(q)}}return Re}function ft(J,ue,Re,Xe,it,Le){var nn=new DataView(Le.buffer),me=Re[J.idx[0]].width,De=Re[J.idx[0]].height,q=3,pe=Math.floor(me/8),be=Math.ceil(me/8),xe=Math.ceil(De/8),Pe=me-(be-1)*8,Ge=De-(xe-1)*8,nt={value:0},rt=new Array(q),dt=new Array(q),Mt=new Array(q),Ct=new Array(q),pt=new Array(q);for(let In=0;In<q;++In)pt[In]=ue[J.idx[In]],rt[In]=In<1?0:rt[In-1]+be*xe,dt[In]=new Float32Array(64),Mt[In]=new Uint16Array(64),Ct[In]=new Uint16Array(be*64);for(let In=0;In<xe;++In){var Wt=8;In==xe-1&&(Wt=Ge);var Gt=8;for(let Dn=0;Dn<be;++Dn){Dn==be-1&&(Gt=Pe);for(let Wn=0;Wn<q;++Wn)Mt[Wn].fill(0),Mt[Wn][0]=it[rt[Wn]++],_t(nt,Xe,Mt[Wn]),mt(Mt[Wn],dt[Wn]),Vt(dt[Wn]);bt(dt);for(let Wn=0;Wn<q;++Wn)de(dt[Wn],Ct[Wn],Dn*64)}let Jn=0;for(let Dn=0;Dn<q;++Dn){const Wn=Re[J.idx[Dn]].type;for(let vn=8*In;vn<8*In+Wt;++vn){Jn=pt[Dn][vn];for(let Ur=0;Ur<pe;++Ur){const pr=Ur*64+(vn&7)*8;nn.setUint16(Jn+0*2*Wn,Ct[Dn][pr+0],!0),nn.setUint16(Jn+1*2*Wn,Ct[Dn][pr+1],!0),nn.setUint16(Jn+2*2*Wn,Ct[Dn][pr+2],!0),nn.setUint16(Jn+3*2*Wn,Ct[Dn][pr+3],!0),nn.setUint16(Jn+4*2*Wn,Ct[Dn][pr+4],!0),nn.setUint16(Jn+5*2*Wn,Ct[Dn][pr+5],!0),nn.setUint16(Jn+6*2*Wn,Ct[Dn][pr+6],!0),nn.setUint16(Jn+7*2*Wn,Ct[Dn][pr+7],!0),Jn+=8*2*Wn}}if(pe!=be)for(let vn=8*In;vn<8*In+Wt;++vn){const Ur=pt[Dn][vn]+8*pe*2*Wn,pr=pe*64+(vn&7)*8;for(let Br=0;Br<Gt;++Br)nn.setUint16(Ur+Br*2*Wn,Ct[Dn][pr+Br],!0)}}}for(var Sn=new Uint16Array(me),nn=new DataView(Le.buffer),ln=0;ln<q;++ln){Re[J.idx[ln]].decoded=!0;var qt=Re[J.idx[ln]].type;if(Re[ln].type==2)for(var Hn=0;Hn<De;++Hn){const In=pt[ln][Hn];for(var xn=0;xn<me;++xn)Sn[xn]=nn.getUint16(In+xn*2*qt,!0);for(var xn=0;xn<me;++xn)nn.setFloat32(In+xn*2*qt,je(Sn[xn]),!0)}}}function _t(J,ue,Re){for(var Xe,it=1;it<64;)Xe=ue[J.value],Xe==65280?it=64:Xe>>8==255?it+=Xe&255:(Re[it]=Xe,it++),J.value++}function mt(J,ue){ue[0]=je(J[0]),ue[1]=je(J[1]),ue[2]=je(J[5]),ue[3]=je(J[6]),ue[4]=je(J[14]),ue[5]=je(J[15]),ue[6]=je(J[27]),ue[7]=je(J[28]),ue[8]=je(J[2]),ue[9]=je(J[4]),ue[10]=je(J[7]),ue[11]=je(J[13]),ue[12]=je(J[16]),ue[13]=je(J[26]),ue[14]=je(J[29]),ue[15]=je(J[42]),ue[16]=je(J[3]),ue[17]=je(J[8]),ue[18]=je(J[12]),ue[19]=je(J[17]),ue[20]=je(J[25]),ue[21]=je(J[30]),ue[22]=je(J[41]),ue[23]=je(J[43]),ue[24]=je(J[9]),ue[25]=je(J[11]),ue[26]=je(J[18]),ue[27]=je(J[24]),ue[28]=je(J[31]),ue[29]=je(J[40]),ue[30]=je(J[44]),ue[31]=je(J[53]),ue[32]=je(J[10]),ue[33]=je(J[19]),ue[34]=je(J[23]),ue[35]=je(J[32]),ue[36]=je(J[39]),ue[37]=je(J[45]),ue[38]=je(J[52]),ue[39]=je(J[54]),ue[40]=je(J[20]),ue[41]=je(J[22]),ue[42]=je(J[33]),ue[43]=je(J[38]),ue[44]=je(J[46]),ue[45]=je(J[51]),ue[46]=je(J[55]),ue[47]=je(J[60]),ue[48]=je(J[21]),ue[49]=je(J[34]),ue[50]=je(J[37]),ue[51]=je(J[47]),ue[52]=je(J[50]),ue[53]=je(J[56]),ue[54]=je(J[59]),ue[55]=je(J[61]),ue[56]=je(J[35]),ue[57]=je(J[36]),ue[58]=je(J[48]),ue[59]=je(J[49]),ue[60]=je(J[57]),ue[61]=je(J[58]),ue[62]=je(J[62]),ue[63]=je(J[63])}function Vt(J){const ue=.5*Math.cos(.7853975),Re=.5*Math.cos(3.14159/16),Xe=.5*Math.cos(3.14159/8),it=.5*Math.cos(3*3.14159/16),Le=.5*Math.cos(5*3.14159/16),me=.5*Math.cos(3*3.14159/8),De=.5*Math.cos(7*3.14159/16);for(var q=new Array(4),pe=new Array(4),be=new Array(4),xe=new Array(4),Pe=0;Pe<8;++Pe){var Ge=Pe*8;q[0]=Xe*J[Ge+2],q[1]=me*J[Ge+2],q[2]=Xe*J[Ge+6],q[3]=me*J[Ge+6],pe[0]=Re*J[Ge+1]+it*J[Ge+3]+Le*J[Ge+5]+De*J[Ge+7],pe[1]=it*J[Ge+1]-De*J[Ge+3]-Re*J[Ge+5]-Le*J[Ge+7],pe[2]=Le*J[Ge+1]-Re*J[Ge+3]+De*J[Ge+5]+it*J[Ge+7],pe[3]=De*J[Ge+1]-Le*J[Ge+3]+it*J[Ge+5]-Re*J[Ge+7],be[0]=ue*(J[Ge+0]+J[Ge+4]),be[3]=ue*(J[Ge+0]-J[Ge+4]),be[1]=q[0]+q[3],be[2]=q[1]-q[2],xe[0]=be[0]+be[1],xe[1]=be[3]+be[2],xe[2]=be[3]-be[2],xe[3]=be[0]-be[1],J[Ge+0]=xe[0]+pe[0],J[Ge+1]=xe[1]+pe[1],J[Ge+2]=xe[2]+pe[2],J[Ge+3]=xe[3]+pe[3],J[Ge+4]=xe[3]-pe[3],J[Ge+5]=xe[2]-pe[2],J[Ge+6]=xe[1]-pe[1],J[Ge+7]=xe[0]-pe[0]}for(var nt=0;nt<8;++nt)q[0]=Xe*J[16+nt],q[1]=me*J[16+nt],q[2]=Xe*J[48+nt],q[3]=me*J[48+nt],pe[0]=Re*J[8+nt]+it*J[24+nt]+Le*J[40+nt]+De*J[56+nt],pe[1]=it*J[8+nt]-De*J[24+nt]-Re*J[40+nt]-Le*J[56+nt],pe[2]=Le*J[8+nt]-Re*J[24+nt]+De*J[40+nt]+it*J[56+nt],pe[3]=De*J[8+nt]-Le*J[24+nt]+it*J[40+nt]-Re*J[56+nt],be[0]=ue*(J[nt]+J[32+nt]),be[3]=ue*(J[nt]-J[32+nt]),be[1]=q[0]+q[3],be[2]=q[1]-q[2],xe[0]=be[0]+be[1],xe[1]=be[3]+be[2],xe[2]=be[3]-be[2],xe[3]=be[0]-be[1],J[0+nt]=xe[0]+pe[0],J[8+nt]=xe[1]+pe[1],J[16+nt]=xe[2]+pe[2],J[24+nt]=xe[3]+pe[3],J[32+nt]=xe[3]-pe[3],J[40+nt]=xe[2]-pe[2],J[48+nt]=xe[1]-pe[1],J[56+nt]=xe[0]-pe[0]}function bt(J){for(var ue=0;ue<64;++ue){var Re=J[0][ue],Xe=J[1][ue],it=J[2][ue];J[0][ue]=Re+1.5747*it,J[1][ue]=Re-.1873*Xe-.4682*it,J[2][ue]=Re+1.8556*Xe}}function de(J,ue,Re){for(var Xe=0;Xe<64;++Xe)ue[Re+Xe]=Fd.toHalfFloat(ae(J[Xe]))}function ae(J){return J<=1?Math.sign(J)*Math.pow(Math.abs(J),2.2):Math.sign(J)*Math.pow(O,Math.abs(J)-1)}function He(J){return new DataView(J.array.buffer,J.offset.value,J.size)}function Ze(J){var ue=J.viewer.buffer.slice(J.offset.value,J.offset.value+J.size),Re=new Uint8Array(vt(ue)),Xe=new Uint8Array(Re.length);return Oe(Re),le(Re,Xe),new DataView(Xe.buffer)}function ut(J){var ue=J.array.slice(J.offset.value,J.offset.value+J.size),Re=R_(ue),Xe=new Uint8Array(Re.length);return Oe(Re),le(Re,Xe),new DataView(Xe.buffer)}function st(J){for(var ue=J.viewer,Re={value:J.offset.value},Xe=new Uint16Array(J.width*J.scanlineBlockSize*(J.channels*J.type)),it=new Uint8Array(8192),Le=0,me=new Array(J.channels),De=0;De<J.channels;De++)me[De]={},me[De].start=Le,me[De].end=me[De].start,me[De].nx=J.width,me[De].ny=J.lines,me[De].size=J.type,Le+=me[De].nx*me[De].ny*me[De].size;var q=qe(ue,Re),pe=qe(ue,Re);if(pe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(q<=pe)for(var De=0;De<pe-q+1;De++)it[De+q]=Me(ue,Re);var be=new Uint16Array(65536),xe=P(it,be),Pe=zt(ue,Re);$e(J.array,ue,Re,Pe,Xe,Le);for(var De=0;De<J.channels;++De)for(var Ge=me[De],nt=0;nt<me[De].size;++nt)Qe(Xe,Ge.start+nt,Ge.nx,Ge.size,Ge.ny,Ge.nx*Ge.size,xe);Ee(be,Xe,Le);for(var rt=0,dt=new Uint8Array(Xe.buffer.byteLength),Mt=0;Mt<J.lines;Mt++)for(var Ct=0;Ct<J.channels;Ct++){var Ge=me[Ct],pt=Ge.nx*Ge.size,Wt=new Uint8Array(Xe.buffer,Ge.end*2,pt*2);dt.set(Wt,rt),rt+=pt*2,Ge.end+=pt}return new DataView(dt.buffer)}function It(J){var ue=J.array.slice(J.offset.value,J.offset.value+J.size),Re=R_(ue);const Xe=J.lines*J.channels*J.width,it=J.type==1?new Uint16Array(Xe):new Uint32Array(Xe);let Le=0,me=0;const De=new Array(4);for(let q=0;q<J.lines;q++)for(let pe=0;pe<J.channels;pe++){let be=0;switch(J.type){case 1:De[0]=Le,De[1]=De[0]+J.width,Le=De[1]+J.width;for(let xe=0;xe<J.width;++xe){const Pe=Re[De[0]++]<<8|Re[De[1]++];be+=Pe,it[me]=be,me++}break;case 2:De[0]=Le,De[1]=De[0]+J.width,De[2]=De[1]+J.width,Le=De[2]+J.width;for(let xe=0;xe<J.width;++xe){const Pe=Re[De[0]++]<<24|Re[De[1]++]<<16|Re[De[2]++]<<8;be+=Pe,it[me]=be,me++}break}}return new DataView(it.buffer)}function Et(J){var ue=J.viewer,Re={value:J.offset.value},Xe=new Uint8Array(J.width*J.lines*(J.channels*J.type*2)),it={version:et(ue,Re),unknownUncompressedSize:et(ue,Re),unknownCompressedSize:et(ue,Re),acCompressedSize:et(ue,Re),dcCompressedSize:et(ue,Re),rleCompressedSize:et(ue,Re),rleUncompressedSize:et(ue,Re),rleRawSize:et(ue,Re),totalAcUncompressedCount:et(ue,Re),totalDcUncompressedCount:et(ue,Re),acCompression:et(ue,Re)};if(it.version<2)throw"EXRLoader.parse: "+Xn.compression+" version "+it.version+" is unsupported";for(var Le=new Array,me=qe(ue,Re)-2;me>0;){var De=Lt(ue.buffer,Re),q=Me(ue,Re),pe=q>>2&3,be=(q>>4)-1,xe=new Int8Array([be])[0],Pe=Me(ue,Re);Le.push({name:De,index:xe,type:Pe,compression:pe}),me-=De.length+3}for(var Ge=Xn.channels,nt=new Array(J.channels),rt=0;rt<J.channels;++rt){var dt=nt[rt]={},Mt=Ge[rt];dt.name=Mt.name,dt.compression=0,dt.decoded=!1,dt.type=Mt.pixelType,dt.pLinear=Mt.pLinear,dt.width=J.width,dt.height=J.lines}for(var Ct={idx:new Array(3)},pt=0;pt<J.channels;++pt)for(var dt=nt[pt],rt=0;rt<Le.length;++rt){var Wt=Le[rt];dt.name==Wt.name&&(dt.compression=Wt.compression,Wt.index>=0&&(Ct.idx[Wt.index]=pt),dt.offset=pt)}if(it.acCompressedSize>0)switch(it.acCompression){case 0:var nn=new Uint16Array(it.totalAcUncompressedCount);$e(J.array,ue,Re,it.acCompressedSize,nn,it.totalAcUncompressedCount);break;case 1:var Gt=J.array.slice(Re.value,Re.value+it.totalAcUncompressedCount),Sn=R_(Gt),nn=new Uint16Array(Sn.buffer);Re.value+=it.totalAcUncompressedCount;break}if(it.dcCompressedSize>0){var ln={array:J.array,offset:Re,size:it.dcCompressedSize},qt=new Uint16Array(ut(ln).buffer);Re.value+=it.dcCompressedSize}if(it.rleRawSize>0){var Gt=J.array.slice(Re.value,Re.value+it.rleCompressedSize),Sn=R_(Gt),Hn=vt(Sn.buffer);Re.value+=it.rleCompressedSize}for(var xn=0,In=new Array(nt.length),rt=0;rt<In.length;++rt)In[rt]=new Array;for(var Jn=0;Jn<J.lines;++Jn)for(var Dn=0;Dn<nt.length;++Dn)In[Dn].push(xn),xn+=nt[Dn].width*J.type*2;ft(Ct,In,nt,nn,qt,Xe);for(var rt=0;rt<nt.length;++rt){var dt=nt[rt];if(!dt.decoded)switch(dt.compression){case 2:for(var Wn=0,vn=0,Jn=0;Jn<J.lines;++Jn){for(var Ur=In[rt][Wn],pr=0;pr<dt.width;++pr){for(var Br=0;Br<2*dt.type;++Br)Xe[Ur++]=Hn[vn+Br*dt.width*dt.height];vn++}Wn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Xe.buffer)}function Lt(J,ue){for(var Re=new Uint8Array(J),Xe=0;Re[ue.value+Xe]!=0;)Xe+=1;var it=new TextDecoder().decode(Re.slice(ue.value,ue.value+Xe));return ue.value=ue.value+Xe+1,it}function hn(J,ue,Re){var Xe=new TextDecoder().decode(new Uint8Array(J).slice(ue.value,ue.value+Re));return ue.value=ue.value+Re,Xe}function gt(J,ue){var Re=$t(J,ue),Xe=zt(J,ue);return[Re,Xe]}function jt(J,ue){var Re=zt(J,ue),Xe=zt(J,ue);return[Re,Xe]}function $t(J,ue){var Re=J.getInt32(ue.value,!0);return ue.value=ue.value+4,Re}function zt(J,ue){var Re=J.getUint32(ue.value,!0);return ue.value=ue.value+4,Re}function Ft(J,ue){var Re=J[ue.value];return ue.value=ue.value+1,Re}function Me(J,ue){var Re=J.getUint8(ue.value);return ue.value=ue.value+1,Re}const et=function(J,ue){let Re;return"getBigInt64"in DataView.prototype?Re=Number(J.getBigInt64(ue.value,!0)):Re=J.getUint32(ue.value+4,!0)+Number(J.getUint32(ue.value,!0)<<32),ue.value+=8,Re};function wt(J,ue){var Re=J.getFloat32(ue.value,!0);return ue.value+=4,Re}function Se(J,ue){return Fd.toHalfFloat(wt(J,ue))}function je(J){var ue=(J&31744)>>10,Re=J&1023;return(J>>15?-1:1)*(ue?ue===31?Re?NaN:1/0:Math.pow(2,ue-15)*(1+Re/1024):6103515625e-14*(Re/1024))}function qe(J,ue){var Re=J.getUint16(ue.value,!0);return ue.value+=2,Re}function at(J,ue){return je(qe(J,ue))}function Nt(J,ue,Re,Xe){for(var it=Re.value,Le=[];Re.value<it+Xe-1;){var me=Lt(ue,Re),De=$t(J,Re),q=Me(J,Re);Re.value+=3;var pe=$t(J,Re),be=$t(J,Re);Le.push({name:me,pixelType:De,pLinear:q,xSampling:pe,ySampling:be})}return Re.value+=1,Le}function Dt(J,ue){var Re=wt(J,ue),Xe=wt(J,ue),it=wt(J,ue),Le=wt(J,ue),me=wt(J,ue),De=wt(J,ue),q=wt(J,ue),pe=wt(J,ue);return{redX:Re,redY:Xe,greenX:it,greenY:Le,blueX:me,blueY:De,whiteX:q,whiteY:pe}}function kt(J,ue){var Re=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Xe=Me(J,ue);return Re[Xe]}function En(J,ue){var Re=zt(J,ue),Xe=zt(J,ue),it=zt(J,ue),Le=zt(J,ue);return{xMin:Re,yMin:Xe,xMax:it,yMax:Le}}function xr(J,ue){var Re=["INCREASING_Y"],Xe=Me(J,ue);return Re[Xe]}function Mn(J,ue){var Re=wt(J,ue),Xe=wt(J,ue);return[Re,Xe]}function _r(J,ue){var Re=wt(J,ue),Xe=wt(J,ue),it=wt(J,ue);return[Re,Xe,it]}function Or(J,ue,Re,Xe,it){if(Xe==="string"||Xe==="stringvector"||Xe==="iccProfile")return hn(ue,Re,it);if(Xe==="chlist")return Nt(J,ue,Re,it);if(Xe==="chromaticities")return Dt(J,Re);if(Xe==="compression")return kt(J,Re);if(Xe==="box2i")return En(J,Re);if(Xe==="lineOrder")return xr(J,Re);if(Xe==="float")return wt(J,Re);if(Xe==="v2f")return Mn(J,Re);if(Xe==="v3f")return _r(J,Re);if(Xe==="int")return $t(J,Re);if(Xe==="rational")return gt(J,Re);if(Xe==="timecode")return jt(J,Re);if(Xe==="preview")return Re.value+=it,"skipped";Re.value+=it}function Xi(J,ue,Re){const Xe={};if(J.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Xe.version=J.getUint8(4);const it=J.getUint8(5);Xe.spec={singleTile:!!(it&2),longName:!!(it&4),deepFormat:!!(it&8),multiPart:!!(it&16)},Re.value=8;for(var Le=!0;Le;){var me=Lt(ue,Re);if(me==0)Le=!1;else{var De=Lt(ue,Re),q=zt(J,Re),pe=Or(J,ue,Re,De,q);pe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${De}'.`):Xe[me]=pe}}if(it&-5)throw console.error("EXRHeader:",Xe),"THREE.EXRLoader: provided file is currently unsupported.";return Xe}function Ks(J,ue,Re,Xe,it){const Le={size:0,viewer:ue,array:Re,offset:Xe,width:J.dataWindow.xMax-J.dataWindow.xMin+1,height:J.dataWindow.yMax-J.dataWindow.yMin+1,channels:J.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:J.channels[0].pixelType,uncompress:null,getter:null,format:null,[x0?"colorSpace":"encoding"]:null};switch(J.compression){case"NO_COMPRESSION":Le.lines=1,Le.uncompress=He;break;case"RLE_COMPRESSION":Le.lines=1,Le.uncompress=Ze;break;case"ZIPS_COMPRESSION":Le.lines=1,Le.uncompress=ut;break;case"ZIP_COMPRESSION":Le.lines=16,Le.uncompress=ut;break;case"PIZ_COMPRESSION":Le.lines=32,Le.uncompress=st;break;case"PXR24_COMPRESSION":Le.lines=16,Le.uncompress=It;break;case"DWAA_COMPRESSION":Le.lines=32,Le.uncompress=Et;break;case"DWAB_COMPRESSION":Le.lines=256,Le.uncompress=Et;break;default:throw"EXRLoader.parse: "+J.compression+" is unsupported"}if(Le.scanlineBlockSize=Le.lines,Le.type==1)switch(it){case xi:Le.getter=at,Le.inputSize=2;break;case xs:Le.getter=qe,Le.inputSize=2;break}else if(Le.type==2)switch(it){case xi:Le.getter=wt,Le.inputSize=4;break;case xs:Le.getter=Se,Le.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Le.type+" for "+J.compression+".";Le.blockCount=(J.dataWindow.yMax+1)/Le.scanlineBlockSize;for(var me=0;me<Le.blockCount;me++)et(ue,Xe);Le.outputChannels=Le.channels==3?4:Le.channels;const De=Le.width*Le.height*Le.outputChannels;switch(it){case xi:Le.byteArray=new Float32Array(De),Le.channels<Le.outputChannels&&Le.byteArray.fill(1,0,De);break;case xs:Le.byteArray=new Uint16Array(De),Le.channels<Le.outputChannels&&Le.byteArray.fill(15360,0,De);break;default:console.error("THREE.EXRLoader: unsupported type: ",it);break}return Le.bytesPerLine=Le.width*Le.inputSize*Le.channels,Le.outputChannels==4?Le.format=$i:Le.format=dv,x0?Le.colorSpace="srgb-linear":Le.encoding=3e3,Le}const ur=new DataView(e),Gr=new Uint8Array(e),Ni={value:0},Xn=Xi(ur,e,Ni),fn=Ks(Xn,ur,Gr,Ni,this.type),Js={value:0},Pi={R:0,G:1,B:2,A:3,Y:0};for(let J=0;J<fn.height/fn.scanlineBlockSize;J++){const ue=zt(ur,Ni);fn.size=zt(ur,Ni),fn.lines=ue+fn.scanlineBlockSize>fn.height?fn.height-ue:fn.scanlineBlockSize;const Xe=fn.size<fn.lines*fn.bytesPerLine?fn.uncompress(fn):He(fn);Ni.value+=fn.size;for(let it=0;it<fn.scanlineBlockSize;it++){const Le=it+J*fn.scanlineBlockSize;if(Le>=fn.height)break;for(let me=0;me<fn.channels;me++){const De=Pi[Xn.channels[me].name];for(let q=0;q<fn.width;q++){Js.value=(it*(fn.channels*fn.width)+me*fn.width+q)*fn.inputSize;const pe=(fn.height-1-Le)*(fn.width*fn.outputChannels)+q*fn.outputChannels+De;fn.byteArray[pe]=fn.getter(Xe,Js)}}}}return{header:Xn,width:fn.width,height:fn.height,data:fn.byteArray,format:fn.format,[x0?"colorSpace":"encoding"]:fn[x0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){x0?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Er,o.magFilter=Er,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const jT=new WeakMap;class Cce extends ss{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Is(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(jT.has(e)){const l=jT.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),jT.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Vn;e.index&&t.setIndex(new Mr(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Mr(o,a))}return t}_loadLibrary(e,t){const r=new Is(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=Tce.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Tce(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const h=u.draco,d=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(h,d,m,c),v=g.attributes.map(w=>w.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{h.destroy(m),h.destroy(d)}});break}};function t(o,a,l,c){const u=c.attributeIDs,h=c.attributeTypes;let d,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)d=new o.Mesh,m=a.DecodeBufferToMesh(l,d);else if(g===o.POINT_CLOUD)d=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const w in u){const _=self[h[w]];let A,S;if(c.useUniqueIDs)S=u[w],A=a.GetAttributeByUniqueId(d,S);else{if(S=a.GetAttributeId(d,o[u[w]]),S===-1)continue;A=a.GetAttribute(d,S)}v.attributes.push(i(o,a,d,w,_,A))}return g===o.TRIANGULAR_MESH&&(v.index=r(o,a,d)),o.destroy(d),v}function r(o,a,l){const u=l.num_faces()*3,h=u*4,d=o._malloc(h);a.GetTrianglesUInt32Array(l,h,d);const m=new Uint32Array(o.HEAPF32.buffer,d,u).slice();return o._free(d),{array:m,itemSize:1}}function i(o,a,l,c,u,h){const d=h.num_components(),g=l.num_points()*d,v=g*u.BYTES_PER_ELEMENT,w=s(o,u),_=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,h,w,v,_);const A=new u(o.HEAPF32.buffer,_,g).slice();return o._free(_),{name:c,array:A,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let k_;const GT=()=>{if(k_)return k_;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const d=new Uint8Array(h.length);for(let g=0;g<h.length;++g){const v=h.charCodeAt(g);d[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let m=0;for(let g=0;g<h.length;++g)d[m++]=d[g]<60?r[d[g]]:(d[g]-60)*64+d[++g];return d.buffer.slice(0,m)}function l(h,d,m,g,v,w){const _=s.exports.sbrk,A=m+3&-4,S=_(A*g),R=_(v.length),B=new Uint8Array(s.exports.memory.buffer);B.set(v,R);const I=h(S,m,g,R,v.length);if(I===0&&w&&w(S,A,g),d.set(B.subarray(S,S+m*g)),_(S-_(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return k_={ready:o,supported:!0,decodeVertexBuffer(h,d,m,g,v){l(s.exports.meshopt_decodeVertexBuffer,h,d,m,g,s.exports[c[v]])},decodeIndexBuffer(h,d,m,g){l(s.exports.meshopt_decodeIndexBuffer,h,d,m,g)},decodeIndexSequence(h,d,m,g){l(s.exports.meshopt_decodeIndexSequence,h,d,m,g)},decodeGltfBuffer(h,d,m,g,v,w){l(s.exports[u[v]],h,d,m,g,s.exports[c[w]])}},k_};let B_=null,jz="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Gz(n=!0,e=!0,t){return r=>{t&&t(r),n&&(B_||(B_=new Cce),B_.setDecoderPath(typeof n=="string"?n:jz),r.setDRACOLoader(B_)),e&&r.setMeshoptDecoder(typeof GT=="function"?GT():GT)}}const rS=(n,e,t,r)=>Wu(pP,n,Gz(e,t,r));rS.preload=(n,e,t,r)=>Wu.preload(pP,n,Gz(e,t,r));rS.clear=n=>Wu.clear(pP,n);rS.setDecoderPath=n=>{jz=n};function Ece(n,e,t){const r=gs(d=>d.size),i=gs(d=>d.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...u}=a,h=L.useMemo(()=>{const d=new Ca(s,o,{minFilter:Er,magFilter:Er,type:xs,...u});return c&&(d.depthTexture=new OA(s,o,xi)),d.samples=l,d},[]);return L.useLayoutEffect(()=>{h.setSize(s,o),l&&(h.samples=l)},[l,h,s,o]),L.useEffect(()=>()=>h.dispose(),[]),h}const Mce=n=>typeof n=="function",Rce=L.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...s},o)=>{const a=gs(({set:w})=>w),l=gs(({camera:w})=>w),c=gs(({size:w})=>w),u=L.useRef(null);L.useImperativeHandle(o,()=>u.current,[]);const h=L.useRef(null),d=Ece(e);L.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),L.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,g=null;const v=Mce(i);return Ev(w=>{v&&(t===1/0||m<t)&&(h.current.visible=!1,w.gl.setRenderTarget(d),g=w.scene.background,n&&(w.scene.background=n),w.gl.render(w.scene,u.current),w.scene.background=g,w.gl.setRenderTarget(null),h.current.visible=!0,m++)}),L.useLayoutEffect(()=>{if(r){const w=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:w}))}},[u,r,a]),L.createElement(L.Fragment,null,L.createElement("perspectiveCamera",Eg({ref:u},s),!v&&i),L.createElement("group",{ref:h},v&&i(d.texture)))}),Pce=L.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const h=gs(I=>I.invalidate),d=gs(I=>I.camera),m=gs(I=>I.gl),g=gs(I=>I.events),v=gs(I=>I.setEvents),w=gs(I=>I.set),_=gs(I=>I.get),A=gs(I=>I.performance),S=e||d,R=r||g.connected||m.domElement,B=L.useMemo(()=>new Hle(S),[S]);return Ev(()=>{B.enabled&&B.update()},-1),L.useEffect(()=>(s&&B.connect(s===!0?R:s),B.connect(R),()=>void B.dispose()),[s,R,t,B,h]),L.useEffect(()=>{const I=O=>{h(),t&&A.regress(),o&&o(O)},N=O=>{a&&a(O)},U=O=>{l&&l(O)};return B.addEventListener("change",I),B.addEventListener("start",N),B.addEventListener("end",U),()=>{B.removeEventListener("start",N),B.removeEventListener("end",U),B.removeEventListener("change",I)}},[o,a,l,B,h,v]),L.useEffect(()=>{if(n){const I=_().controls;return w({controls:B}),()=>w({controls:I})}},[n,B]),L.createElement("primitive",Eg({ref:u,object:B,enableDamping:i},c))}),kce="modulepreload",Bce=function(n){return"/"+n},YD={},Yr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=Bce(l),l in YD)return;YD[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":kce,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,m)=>{h.addEventListener("load",d),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Ice=3e3,Lce=3001,Vz=(n,e,t)=>{let r;switch(n){case sa:r=new Uint8ClampedArray(e*t*4);break;case xs:r=new Uint16Array(e*t*4);break;case Hc:r=new Uint32Array(e*t*4);break;case AA:r=new Int8Array(e*t*4);break;case SA:r=new Int16Array(e*t*4);break;case fv:r=new Int32Array(e*t*4);break;case xi:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let I_;const Dce=(n,e,t,r)=>{if(I_!==void 0)return I_;const i=new Ca(1,1,r);e.setRenderTarget(i);const s=new di(new vf,new ta({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=Vz(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),I_=o[0]!==0,I_};class mP{constructor(e){var t,r,i,s,o,a,l,c,u,h,d,m,g,v,w,_;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const A={format:$i,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Er,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Er,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Ti,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:Ti};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=mP.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new xv,this._camera=new tl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Dce(this._type,this._renderer,this._camera,A)){let S;switch(this._type){case xs:S=this._renderer.extensions.has("EXT_color_buffer_float")?xi:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${xi}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new di(new vf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ca(this.width,this.height,A),this._renderTarget.texture.mapping=((w=e.renderTargetOptions)===null||w===void 0?void 0:w.mapping)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping:of}static instantiateRenderer(){const e=new aP;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=Vz(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Xl(this.toArray(),this.width,this.height,$i,this._type,(e==null?void 0:e.mapping)||of,(e==null?void 0:e.wrapS)||Ti,(e==null?void 0:e.wrapT)||Ti,(e==null?void 0:e.magFilter)||Er,(e==null?void 0:e.minFilter)||Er,(e==null?void 0:e.anisotropy)||1,jc);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof oa&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Pr&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Pr&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Fce=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Nce=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Oce extends oa{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:Fce,fragmentShader:Nce,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new fe(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new fe().fromArray(t)},offsetSdr:{value:new fe().fromArray(r)},gainMapMin:{value:new fe().fromArray(i)},gainMapMax:{value:new fe().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Bc,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Wz extends Error{}class $z extends Error{}const v0=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Uce=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const s=v0(i,"hdrgm:GainMapMin","0"),o=v0(i,"hdrgm:GainMapMax"),a=v0(i,"hdrgm:Gamma","1"),l=v0(i,"hdrgm:OffsetSDR","0.015625"),c=v0(i,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),h=u?u[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!d)throw new Error("Incomplete gainmap metadata");const m=d[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(m)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class zce{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const h=u+4;let d;if(s.getUint16(h)===18761)d=!1;else if(s.getUint16(h)===19789)d=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!d)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(h+4,!d);if(m<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=h+m,v=s.getUint16(g,!d),w=g+2;let _=0;for(let B=w;B<w+12*v;B+=12)s.getUint16(B,!d)===45057&&(_=s.getUint32(B+8,!d));const S=g+2+v*12+4,R=[];for(let B=S;B<S+_*16;B+=16){const I={MPType:s.getUint32(B,!d),size:s.getUint32(B+4,!d),dataOffset:s.getUint32(B+8,!d),dependantImages:s.getUint32(B+12,!d),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=h+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,R.push(I)}if(this.options.extractNonFII&&R.length){const B=new Blob([s]),I=[];for(const N of R){if(N.isFII&&!this.options.extractFII)continue;const U=B.slice(N.start,N.end+1,"image/jpeg");I.push(U)}t(I)}}}a+=2+s.getUint16(a+2)}})}}const Hce=async n=>{const e=Uce(n);if(!e)throw new $z("Gain map XMP metadata not found");const r=await new zce({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new Wz("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},KD=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class Xz extends ss{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new ZA}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Oce({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Pr,sdr:new Pr});return new mP({width:16,height:16,type:xs,colorSpace:jc,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?KD(s):Promise.resolve(void 0),KD(o)]);l=d[0],a=d[1],c=!0}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=d[0],a=d[1]}const u=new Pr(l||new ImageData(2,2),of,Ti,Ti,Er,rM,$i,sa,1,jc);u.flipY=c,u.needsUpdate=!0;const h=new Pr(a,of,Ti,Ti,Er,rM,$i,sa,1,Xr);h.flipY=c,h.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class jce extends Xz{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let l,c,u;const h=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(O){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(O),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let d=!0,m=0,g=0,v=!0,w=0,_=0,A=!0,S=0,R=0;const B=()=>{if(typeof s=="function"){const O=m+w+S,P=g+_+R,F=d&&v&&A;s(new ProgressEvent("progress",{lengthComputable:F,loaded:P,total:O}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const I=new Is(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async O=>{if(typeof O=="string")throw new Error("Invalid sdr buffer");l=O,await h()},O=>{d=O.lengthComputable,g=O.loaded,m=O.total,B()},O=>{this.manager.itemError(e),typeof o=="function"&&o(O)});const N=new Is(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(t,async O=>{if(typeof O=="string")throw new Error("Invalid gainmap buffer");c=O,await h()},O=>{v=O.lengthComputable,_=O.loaded,w=O.total,B()},O=>{this.manager.itemError(t),typeof o=="function"&&o(O)});const U=new Is(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(r,async O=>{if(typeof O!="string")throw new Error("Invalid metadata string");u=JSON.parse(O),await h()},O=>{A=O.lengthComputable,R=O.loaded,S=O.total,B()},O=>{this.manager.itemError(r),typeof o=="function"&&o(O)}),a}}class Gce extends Xz{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new Is(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,h;try{const d=await Hce(l);c=d.sdr,u=d.gainMap,h=d.metadata}catch(d){if(d instanceof $z||d instanceof Wz)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw d}try{await this.render(s,h,c,u)}catch(d){this.manager.itemError(e),typeof i=="function"&&i(d),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const Nx={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},qz="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",og=n=>Array.isArray(n),gP=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function iS({files:n=gP,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let s=null,o=!1;t&&(yP(t),n=Nx[t],e=qz),o=og(n);const{extension:a,isCubemap:l}=xP(n);if(s=vP(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=gs(m=>m.gl);L.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function m(){Wu.clear(s,o?[n]:n)}c.domElement.addEventListener("webglcontextlost",m,{once:!0})},[n,c.domElement]);const u=Wu(s,o?[n]:n,m=>{(a==="webp"||a==="jpg"||a==="jpeg")&&m.setRenderer(c),m.setPath==null||m.setPath(e),i&&i(m)});let h=o?u[0]:u;if(a==="jpg"||a==="jpeg"||a==="webp"){var d;h=(d=h.renderTarget)==null?void 0:d.texture}return h.mapping=l?Uc:up,"colorSpace"in h?h.colorSpace=r??l?"srgb":"srgb-linear":h.encoding=r??l?Lce:Ice,h}const Vce={files:gP,path:"",preset:void 0,extensions:void 0};iS.preload=n=>{const e={...Vce,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:s}=e;i&&(yP(i),t=Nx[i],r=qz);const{extension:o}=xP(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=vP(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Wu.preload(a,og(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),s&&s(l)})};const Wce={files:gP,preset:void 0};iS.clear=n=>{const e={...Wce,...n};let{files:t}=e;const{preset:r}=e;r&&(yP(r),t=Nx[r]);const{extension:i}=xP(t),s=vP(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Wu.clear(s,og(t)?[t]:t)};function yP(n){if(!(n in Nx))throw new Error("Preset must be one of: "+Object.keys(Nx).join(", "))}function xP(n){var e;const t=og(n)&&n.length===6,r=og(n)&&n.length===3&&n.some(o=>o.endsWith("json")),i=og(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function vP(n){return n==="cube"?X5:n==="hdr"?Ace:n==="exr"?Sce:n==="jpg"||n==="jpeg"?Gce:n==="webp"?jce:null}const $ce=n=>n.current&&n.current.isScene,Xce=n=>$ce(n)?n.current:n;function _P(n,e,t,r,i={}){var s,o,a,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const c=Xce(e||t),u=c.background,h=c.environment,d={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(o=c.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(a=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(c.environment=r),n&&(c.background=r),Zh(c,i),()=>{n!=="only"&&(c.environment=h),n&&(c.background=u),Zh(c,d)}}function wP({scene:n,background:e=!1,map:t,...r}){const i=gs(s=>s.scene);return L.useLayoutEffect(()=>{if(t)return _P(e,n,i,t,r)}),null}function Yz({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=iS(l),u=gs(h=>h.scene);return L.useLayoutEffect(()=>_P(n,e,u,c,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),L.useEffect(()=>()=>{c.dispose()},[c]),null}function qce({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:d,scene:m,files:g,path:v,preset:w=void 0,extensions:_}){const A=gs(U=>U.gl),S=gs(U=>U.scene),R=L.useRef(null),[B]=L.useState(()=>new xv),I=L.useMemo(()=>{const U=new BR(r);return U.texture.type=xs,U},[r]);L.useEffect(()=>()=>{I.dispose()},[I]),L.useLayoutEffect(()=>{if(i===1){const U=A.autoClear;A.autoClear=!0,R.current.update(A,B),A.autoClear=U}return _P(o,m,S,I.texture,{backgroundBlurriness:a??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:d})},[n,B,I.texture,m,S,o,i,A]);let N=1;return Ev(()=>{if(i===1/0||N<i){const U=A.autoClear;A.autoClear=!0,R.current.update(A,B),A.autoClear=U,N++}}),L.createElement(L.Fragment,null,jae(L.createElement(L.Fragment,null,n,L.createElement("cubeCamera",{ref:R,args:[e,t,I]}),g||w?L.createElement(Yz,{background:!0,files:g,preset:w,path:v,extensions:_}):s?L.createElement(wP,{background:!0,map:s,extensions:_}):null),B))}function Yce(n){var e,t,r,i;const s=iS(n),o=n.map||s;L.useMemo(()=>gz({GroundProjectedEnvImpl:Ile}),[]),L.useEffect(()=>()=>{s.dispose()},[s]);const a=L.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return L.createElement(L.Fragment,null,L.createElement(wP,Eg({},n,{map:o})),L.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function Kce(n){return n.ground?L.createElement(Yce,n):n.map?L.createElement(wP,n):n.children?L.createElement(qce,n):L.createElement(Yz,n)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Qa=Uint8Array,qm=Uint16Array,Jce=Int32Array,Kz=new Qa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jz=new Qa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zce=new Qa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zz=function(n,e){for(var t=new qm(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Jce(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},Qz=Zz(Kz,2),e6=Qz.b,Qce=Qz.r;e6[28]=258,Qce[258]=28;var eue=Zz(Jz,0),tue=eue.b,bM=new qm(32768);for(var fi=0;fi<32768;++fi){var $h=(fi&43690)>>1|(fi&21845)<<1;$h=($h&52428)>>2|($h&13107)<<2,$h=($h&61680)>>4|($h&3855)<<4,bM[fi]=(($h&65280)>>8|($h&255)<<8)>>1}var sx=function(n,e,t){for(var r=n.length,i=0,s=new qm(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new qm(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new qm(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],h=o[n[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[bM[h]>>l]=c}else for(a=new qm(r),i=0;i<r;++i)n[i]&&(a[i]=bM[o[n[i]-1]++]>>15-n[i]);return a},Pv=new Qa(288);for(var fi=0;fi<144;++fi)Pv[fi]=8;for(var fi=144;fi<256;++fi)Pv[fi]=9;for(var fi=256;fi<280;++fi)Pv[fi]=7;for(var fi=280;fi<288;++fi)Pv[fi]=8;var t6=new Qa(32);for(var fi=0;fi<32;++fi)t6[fi]=5;var nue=sx(Pv,9,1),rue=sx(t6,5,1),VT=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Dl=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},WT=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},iue=function(n){return(n+7)/8|0},sue=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Qa(n.subarray(e,t))},oue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zl=function(n,e,t){var r=new Error(e||oue[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,zl),!t)throw r;return r},aue=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Qa(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new Qa(i*3));var c=function($e){var Ee=t.length;if($e>Ee){var Oe=new Qa(Math.max(Ee*2,$e));Oe.set(t),t=Oe}},u=e.f||0,h=e.p||0,d=e.b||0,m=e.l,g=e.d,v=e.m,w=e.n,_=i*8;do{if(!m){u=Dl(n,h,1);var A=Dl(n,h+1,3);if(h+=3,A)if(A==1)m=nue,g=rue,v=9,w=5;else if(A==2){var I=Dl(n,h,31)+257,N=Dl(n,h+10,15)+4,U=I+Dl(n,h+5,31)+1;h+=14;for(var O=new Qa(U),P=new Qa(19),F=0;F<N;++F)P[Zce[F]]=Dl(n,h+F*3,7);h+=N*3;for(var K=VT(P),Q=(1<<K)-1,Y=sx(P,K,1),F=0;F<U;){var ee=Y[Dl(n,h,Q)];h+=ee&15;var S=ee>>4;if(S<16)O[F++]=S;else{var $=0,oe=0;for(S==16?(oe=3+Dl(n,h,3),h+=2,$=O[F-1]):S==17?(oe=3+Dl(n,h,7),h+=3):S==18&&(oe=11+Dl(n,h,127),h+=7);oe--;)O[F++]=$}}var G=O.subarray(0,I),te=O.subarray(I);v=VT(G),w=VT(te),m=sx(G,v,1),g=sx(te,w,1)}else zl(1);else{var S=iue(h)+4,R=n[S-4]|n[S-3]<<8,B=S+R;if(B>i){l&&zl(0);break}a&&c(d+R),t.set(n.subarray(S,B),d),e.b=d+=R,e.p=h=B*8,e.f=u;continue}if(h>_){l&&zl(0);break}}a&&c(d+131072);for(var re=(1<<v)-1,Z=(1<<w)-1,ne=h;;ne=h){var $=m[WT(n,h)&re],ce=$>>4;if(h+=$&15,h>_){l&&zl(0);break}if($||zl(2),ce<256)t[d++]=ce;else if(ce==256){ne=h,m=null;break}else{var ye=ce-254;if(ce>264){var F=ce-257,he=Kz[F];ye=Dl(n,h,(1<<he)-1)+e6[F],h+=he}var Ce=g[WT(n,h)&Z],ke=Ce>>4;Ce||zl(3),h+=Ce&15;var te=tue[ke];if(ke>3){var he=Jz[ke];te+=WT(n,h)&(1<<he)-1,h+=he}if(h>_){l&&zl(0);break}a&&c(d+131072);var Ue=d+ye;if(d<te){var Qe=s-te,Te=Math.min(te,Ue);for(Qe+d<0&&zl(3);d<Te;++d)t[d]=r[Qe+d]}for(;d<Ue;++d)t[d]=t[d-te]}}e.l=m,e.p=ne,e.b=d,e.f=u,m&&(u=1,e.m=v,e.d=g,e.n=w)}while(!u);return d!=t.length&&o?sue(t,0,d):t.subarray(0,d)},lue=new Qa(0),cue=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&zl(6,"invalid zlib data"),(n[1]>>5&1)==1&&zl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function uue(n,e){return aue(n.subarray(cue(n),-4),{i:2},e,e)}var hue=typeof TextDecoder<"u"&&new TextDecoder,fue=0;try{hue.decode(lue,{stream:!0}),fue=1}catch{}function n6(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function due(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],h=s[a-c],d=i[c]/(u+h);i[c]=l+u*d,l=h*d}i[a]=l}return i}function pue(n,e,t,r){const i=n6(n,r,e),s=due(i,r,n,e),o=new dr(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function mue(n,e,t,r,i){const s=[];for(let h=0;h<=t;++h)s[h]=0;const o=[];for(let h=0;h<=r;++h)o[h]=s.slice(0);const a=[];for(let h=0;h<=t;++h)a[h]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let h=1;h<=t;++h){l[h]=e-i[n+1-h],c[h]=i[n+h]-e;let d=0;for(let m=0;m<h;++m){const g=c[m+1],v=l[h-m];a[h][m]=g+v;const w=a[m][h-1]/a[h][m];a[m][h]=d+g*w,d=v*w}a[h][h]=d}for(let h=0;h<=t;++h)o[0][h]=a[h][t];for(let h=0;h<=t;++h){let d=0,m=1;const g=[];for(let v=0;v<=t;++v)g[v]=s.slice(0);g[0][0]=1;for(let v=1;v<=r;++v){let w=0;const _=h-v,A=t-v;h>=v&&(g[m][0]=g[d][0]/a[A+1][_],w=g[m][0]*a[_][A]);const S=_>=-1?1:-_,R=h-1<=A?v-1:t-h;for(let I=S;I<=R;++I)g[m][I]=(g[d][I]-g[d][I-1])/a[A+1][_+I],w+=g[m][I]*a[_+I][A];h<=A&&(g[m][v]=-g[d][v-1]/a[A+1][h],w+=g[m][v]*a[h][A]),o[v][h]=w;const B=d;d=m,m=B}}let u=t;for(let h=1;h<=r;++h){for(let d=0;d<=t;++d)o[h][d]*=u;u*=t-h}return o}function gue(n,e,t,r,i){const s=i<n?i:n,o=[],a=n6(n,r,e),l=mue(a,r,n,s,e),c=[];for(let u=0;u<t.length;++u){const h=t[u].clone(),d=h.w;h.x*=d,h.y*=d,h.z*=d,c[u]=h}for(let u=0;u<=s;++u){const h=c[a-n].clone().multiplyScalar(l[u][0]);for(let d=1;d<=n;++d)h.add(c[a-n+d].clone().multiplyScalar(l[u][d]));o[u]=h}for(let u=s+1;u<=i+1;++u)o[u]=new dr(0,0,0);return o}function yue(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function xue(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new fe(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(yue(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function vue(n,e,t,r,i){const s=gue(n,e,t,r,i);return xue(s)}class _ue extends ll{constructor(e,t,r,i,s){super();const o=t?t.length-1:0,a=r?r.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||o;for(let l=0;l<a;++l){const c=r[l];this.controlPoints[l]=new dr(c.x,c.y,c.z,c.w)}}getPoint(e,t=new fe){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=pue(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new fe){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=vue(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}toJSON(){const e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new dr(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}let lr,Vi,Ro;class wue extends ss{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?zu.extractUrlBase(e):s.path,a=new Is(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,t){if(Eue(e))lr=new Tue().parse(e);else{const i=s6(e);if(!Mue(i))throw new Error("THREE.FBXLoader: Unknown format.");if(ZD(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ZD(i));lr=new Cue().parse(i)}const r=new KR(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new bue(r,this.manager).parse(lr)}}class bue{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Vi=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new Aue().parse(i);return this.parseScene(i,s,r),Ro}parseConnections(){const e=new Map;return"Connections"in lr&&lr.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in lr.Objects){const r=lr.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=c}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in lr.Objects){const r=lr.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?zc:Ti,r.wrapT=a===0?zc:Ti,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){const r=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),i=e.FileName.split(".").pop().toLowerCase(),s=r.has(i)?this.manager.getHandler(`.${i}`):this.textureLoader;if(!s)return console.warn(`FBXLoader: ${i.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Pr;const o=s.path;o||s.setPath(this.textureLoader.path);const a=Vi.get(e.id).children;let l;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(l=t[a[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&s.setPath(void 0));const c=s.load(l);return s.setPath(o),c}parseMaterials(e){const t=new Map;if("Material"in lr.Objects){const r=lr.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Vi.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new rx;break;case"lambert":a=new GR;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new rx;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=nr.toWorkingColorSpace(new Ut().fromArray(e.Diffuse.value),Xr):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=nr.toWorkingColorSpace(new Ut().fromArray(e.DiffuseColor.value),Xr)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=nr.toWorkingColorSpace(new Ut().fromArray(e.Emissive.value),Xr):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=nr.toWorkingColorSpace(new Ut().fromArray(e.EmissiveColor.value),Xr)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),i.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(i.opacity===1||i.opacity===0)&&(i.opacity=e.Opacity?parseFloat(e.Opacity.value):null,i.opacity===null&&(i.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=nr.toWorkingColorSpace(new Ut().fromArray(e.Specular.value),Xr):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=nr.toWorkingColorSpace(new Ut().fromArray(e.SpecularColor.value),Xr));const s=this;return Vi.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.colorSpace=Xr);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=Xr);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=up,i.envMap.colorSpace=Xr);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=Xr);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in lr.Objects&&t in lr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Vi.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in lr.Objects){const r=lr.Objects.Deformer;for(const i in r){const s=r[i],o=Vi.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Zt().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Vi.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){Ro=new Wl;const i=this.parseModels(e.skeletons,t,r),s=lr.Objects.Model,o=this;i.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),Vi.get(l.ID).parents.forEach(function(h){const d=i.get(h.ID);d!==void 0&&d.add(l)}),l.parent===null&&Ro.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.addGlobalSceneSettings(),Ro.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=i6(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new Sue().parse();Ro.children.length===1&&Ro.children[0].isGroup&&(Ro.children[0].animations=a,Ro=Ro.children[0]),Ro.animations=a}parseModels(e,t,r){const i=new Map,s=lr.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=Vi.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,r);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new Cg;break;case"Null":default:u=new Wl;break}u.name=l.attrName?fr.sanitizeNodeName(l.attrName):"",u.userData.originalName=l.attrName,u.ID=a}this.getTransformData(u,l),i.set(a,u)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const h=s;s=new Cg,s.matrixWorld.copy(c.transformLink),s.name=i?fr.sanitizeNodeName(i):"",s.userData.originalName=i,s.ID=r,l.bones[u]=s,h!==null&&s.add(h)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=lr.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new cr;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const c=a/l;let u=45;r.FieldOfView!==void 0&&(u=r.FieldOfView.value);const h=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new ui(u,c,s,o),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new cr;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new cr;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=lr.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new cr;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=nr.toWorkingColorSpace(new Ut().fromArray(r.Color.value),Xr));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new Dx(s,o,a,l);break;case 1:t=new eS(s,o);break;case 2:let c=Math.PI/3;r.InnerAngle!==void 0&&(c=Ws.degToRad(r.InnerAngle.value));let u=0;r.OuterAngle!==void 0&&(u=Ws.degToRad(r.OuterAngle.value),u=Math.max(u,1)),t=new QA(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new Dx(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new rx({name:ss.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new DA(s,o),i.normalizeSkinWeights()):i=new di(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Ys({name:ss.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Gc(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=Ox(t.RotationOrder.value):r.eulerOrder=Ox(0),"Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Vi.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=lr.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Ro.add(e.target)):e.lookAt(new fe().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Vi.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Vi.get(c).parents.forEach(function(h){r.has(h.ID)&&r.get(h.ID).bind(new Jg(o.bones),i[h.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in lr.Objects){const t=lr.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Zt().fromArray(s.Matrix.a)}):e[i.Node]=new Zt().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in lr){if("AmbientColor"in lr.GlobalSettings){const e=lr.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new Ut().setRGB(t,r,i,Xr);Ro.add(new ZR(s,1))}}"UnitScaleFactor"in lr.GlobalSettings&&(Ro.userData.unitScaleFactor=lr.GlobalSettings.UnitScaleFactor.value)}}}class Aue{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in lr.Objects){const r=lr.Objects.Geometry;for(const i in r){const s=Vi.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(h){return lr.Objects.Model[h.ID]});if(o.length===0)return;const a=e.children.reduce(function(h,d){return i[d.ID]!==void 0&&(h=i[d.ID]),h},null);e.children.forEach(function(h){r.morphTargets[h.ID]!==void 0&&s.push(r.morphTargets[h.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Ox(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=i6(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,r,i){const s=new Vn;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new rn(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new rn(a.colors,3)),t&&(s.setAttribute("skinIndex",new BA(a.weightsIndices,4)),s.setAttribute("skinWeight",new rn(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new Yn().getNormalMatrix(i),u=new rn(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){const h=u===0?"uv":`uv${u}`;s.setAttribute(h,new rn(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(h,d){h!==c&&(s.addGroup(u,d-u,c),c=h,u=d)}),s.groups.length>0){const h=s.groups[s.groups.length-1],d=h.start+h.count;d!==a.materialIndex.length&&s.addGroup(d,a.materialIndex.length-d,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],c=[],u=[],h=[];const d=this;return e.vertexIndices.forEach(function(m,g){let v,w=!1;m<0&&(m=m^-1,w=!0);let _=[],A=[];if(o.push(m*3,m*3+1,m*3+2),e.color){const S=L_(g,r,m,e.color);l.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[m]!==void 0&&e.weightTable[m].forEach(function(S){A.push(S.weight),_.push(S.id)}),A.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const S=[0,0,0,0],R=[0,0,0,0];A.forEach(function(B,I){let N=B,U=_[I];R.forEach(function(O,P,F){if(N>O){F[P]=N,N=O;const K=S[P];S[P]=U,U=K}})}),_=S,A=R}for(;A.length<4;)A.push(0),_.push(0);for(let S=0;S<4;++S)u.push(A[S]),h.push(_[S])}if(e.normal){const S=L_(g,r,m,e.normal);a.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(v=L_(g,r,m,e.material)[0],v<0&&(d.negativeMaterialIndices=!0,v=0)),e.uv&&e.uv.forEach(function(S,R){const B=L_(g,r,m,S);c[R]===void 0&&(c[R]=[]),c[R].push(B[0]),c[R].push(B[1])}),i++,w&&(d.genFace(t,e,o,v,a,l,c,u,h,i),r++,i=0,o=[],a=[],l=[],c=[],u=[],h=[])}),t}getNormalNewell(e){const t=new fe(0,0,0);for(let r=0;r<e.length;r++){const i=e[r],s=e[(r+1)%e.length];t.x+=(i.y-s.y)*(i.z+s.z),t.y+=(i.z-s.z)*(i.x+s.x),t.z+=(i.x-s.x)*(i.y+s.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),i=(Math.abs(t.z)>.5?new fe(0,1,0):new fe(0,0,1)).cross(t).normalize(),s=t.clone().cross(i).normalize();return{normal:t,tangent:i,bitangent:s}}flattenVertex(e,t,r){return new ht(e.dot(t),e.dot(r))}genFace(e,t,r,i,s,o,a,l,c,u){let h;if(u>3){const d=[],m=t.baseVertexPositions||t.vertexPositions;for(let _=0;_<r.length;_+=3)d.push(new fe(m[r[_]],m[r[_+1]],m[r[_+2]]));const{tangent:g,bitangent:v}=this.getNormalTangentAndBitangent(d),w=[];for(const _ of d)w.push(this.flattenVertex(_,g,v));h=ql.triangulateShape(w,[])}else h=[[0,1,2]];for(const[d,m,g]of h)e.vertex.push(t.vertexPositions[r[d*3]]),e.vertex.push(t.vertexPositions[r[d*3+1]]),e.vertex.push(t.vertexPositions[r[d*3+2]]),e.vertex.push(t.vertexPositions[r[m*3]]),e.vertex.push(t.vertexPositions[r[m*3+1]]),e.vertex.push(t.vertexPositions[r[m*3+2]]),e.vertex.push(t.vertexPositions[r[g*3]]),e.vertex.push(t.vertexPositions[r[g*3+1]]),e.vertex.push(t.vertexPositions[r[g*3+2]]),t.skeleton&&(e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.vertexWeights.push(l[m*4]),e.vertexWeights.push(l[m*4+1]),e.vertexWeights.push(l[m*4+2]),e.vertexWeights.push(l[m*4+3]),e.vertexWeights.push(l[g*4]),e.vertexWeights.push(l[g*4+1]),e.vertexWeights.push(l[g*4+2]),e.vertexWeights.push(l[g*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3]),e.weightsIndices.push(c[m*4]),e.weightsIndices.push(c[m*4+1]),e.weightsIndices.push(c[m*4+2]),e.weightsIndices.push(c[m*4+3]),e.weightsIndices.push(c[g*4]),e.weightsIndices.push(c[g*4+1]),e.weightsIndices.push(c[g*4+2]),e.weightsIndices.push(c[g*4+3])),t.color&&(e.colors.push(o[d*3]),e.colors.push(o[d*3+1]),e.colors.push(o[d*3+2]),e.colors.push(o[m*3]),e.colors.push(o[m*3+1]),e.colors.push(o[m*3+2]),e.colors.push(o[g*3]),e.colors.push(o[g*3+1]),e.colors.push(o[g*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2]),e.normal.push(s[m*3]),e.normal.push(s[m*3+1]),e.normal.push(s[m*3+2]),e.normal.push(s[g*3]),e.normal.push(s[g*3+1]),e.normal.push(s[g*3+2])),t.uv&&t.uv.forEach(function(v,w){e.uvs[w]===void 0&&(e.uvs[w]=[]),e.uvs[w].push(a[w][d*2]),e.uvs[w].push(a[w][d*2+1]),e.uvs[w].push(a[w][m*2]),e.uvs[w].push(a[w][m*2+1]),e.uvs[w].push(a[w][g*2]),e.uvs[w].push(a[w][g*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=lr.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.Vertices!==void 0?t.Vertices.a:[],a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=r.Vertices!==void 0?r.Vertices.a:[],c=r.Indexes!==void 0?r.Indexes.a:[],u=e.attributes.position.count*3,h=new Float32Array(u);for(let v=0;v<c.length;v++){const w=c[v]*3;h[w]=l[v*3],h[w+1]=l[v*3+1],h[w+2]=l[v*3+2]}const d={vertexIndices:a,vertexPositions:h,baseVertexPositions:o},m=this.genBuffers(d),g=new rn(m.vertex,3);g.name=s||r.attrName,g.applyMatrix4(i),e.morphAttributes.position.push(g)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];r==="IndexToDirect"&&(s=e.ColorIndex.a);for(let o=0,a=new Ut;o<i.length;o+=4)a.fromArray(i,o),nr.toWorkingColorSpace(a,Xr),a.toArray(i,o);return{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Vn;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let h=0,d=o.length;h<d;h+=4)s.push(new dr().fromArray(o,h));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let h=0;h<r;++h)s.push(s[h])}const u=new _ue(r,i,s,a,l).getPoints(s.length*12);return new Vn().setFromPoints(u)}}class Sue{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(lr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=lr.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=lr.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(Rue),values:t[r].KeyValueFloat.a},s=Vi.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=lr.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Vi.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const h=Vi.get(l.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(h!==void 0){const d=lr.Objects.Model[h.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:d.attrName?fr.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ro.traverse(function(g){g.ID===d.id&&(m.transform=g.matrix,g.userData.transformData&&(m.eulerOrder=g.userData.transformData.eulerOrder))}),m.transform||(m.transform=new Zt),"PreRotation"in d&&(m.preRotation=d.PreRotation.value),"PostRotation"in d&&(m.postRotation=d.PostRotation.value),s[c]=m}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const h=Vi.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,d=Vi.get(h).parents[0].ID,m=Vi.get(d).parents[0].ID,g=Vi.get(m).parents[0].ID,v=lr.Objects.Model[g],w={modelName:v.attrName?fr.sanitizeNodeName(v.attrName):"",morphName:lr.Objects.Deformer[h].attrName};s[c]=w}s[c][u.attr]=u}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=lr.Objects.AnimationStack,r={};for(const i in t){const s=Vi.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new mp(e.name,-1,t)}generateTracks(e){const t=[];let r=new fe,i=new fe;if(e.transform&&e.transform.decompose(r,new ri,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");s!==void 0&&t.push(s)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const s=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);s!==void 0&&t.push(s)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");s!==void 0&&t.push(s)}if(e.DeformPercent!==void 0){const s=this.generateMorphTrack(e);s!==void 0&&t.push(s)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new uf(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s){let o,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){const d=this.interpolateRotations(t.x,t.y,t.z,s);o=d[0],a=d[1]}const l=Ox(0);r!==void 0&&(r=r.map(Ws.degToRad),r.push(l),r=new rs().fromArray(r),r=new ri().setFromEuler(r)),i!==void 0&&(i=i.map(Ws.degToRad),i.push(l),i=new rs().fromArray(i),i=new ri().setFromEuler(i).invert());const c=new ri,u=new rs,h=[];if(!a||!o)return new Vu(e+".quaternion",[0],[0]);for(let d=0;d<a.length;d+=3)u.set(a[d],a[d+1],a[d+2],s),c.setFromEuler(u),r!==void 0&&c.premultiply(r),i!==void 0&&c.multiply(i),d>2&&new ri().fromArray(h,(d-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(h,d/3*4);return new Vu(e+".quaternion",o,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=Ro.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new cf(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),i[0]=u}else s.push(i[0]);if(a!==-1){const u=t.y.values[a];s.push(u),i[1]=u}else s.push(i[1]);if(l!==-1){const u=t.z.values[l];s.push(u),i[2]=u}else s.push(i[2])}),s}interpolateRotations(e,t,r,i){const s=[],o=[];s.push(e.times[0]),o.push(Ws.degToRad(e.values[0])),o.push(Ws.degToRad(t.values[0])),o.push(Ws.degToRad(r.values[0]));for(let a=1;a<e.values.length;a++){const l=[e.values[a-1],t.values[a-1],r.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const c=l.map(Ws.degToRad),u=[e.values[a],t.values[a],r.values[a]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;const h=u.map(Ws.degToRad),d=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],m=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(m[0]>=180||m[1]>=180||m[2]>=180){const v=Math.max(...m)/180,w=new rs(...c,i),_=new rs(...h,i),A=new ri().setFromEuler(w),S=new ri().setFromEuler(_);A.dot(S)&&S.set(-S.x,-S.y,-S.z,-S.w);const R=e.times[a-1],B=e.times[a]-R,I=new ri,N=new rs;for(let U=0;U<1;U+=1/v)I.copy(A.clone().slerp(S.clone(),U)),s.push(R+U*B),N.setFromQuaternion(I,i),o.push(N.x),o.push(N.y),o.push(N.z)}else s.push(e.times[a]),o.push(Ws.degToRad(e.values[a])),o.push(Ws.degToRad(t.values[a])),o.push(Ws.degToRad(r.values[a]))}return[s,o]}}class Cue{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new r6,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):c?t.parseNodeProperty(i,c,r[++s]):u?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let h=s.split(",").slice(3);h=h.map(function(d){return d.trim().replace(/^"/,"")}),i="connections",s=[c,u],kue(s,h),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=XT(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=XT(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let c=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=XT(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class Tue{parse(e){const t=new JD(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new r6;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let d=0;d<s;d++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const d=this.parseNode(e,t);d!==null&&this.parseSubNode(a,r,d)}return r.propertyList=l,typeof c=="number"&&(r.id=c),u!==""&&(r.attrName=u),h!==""&&(r.attrType=h),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=uue(new Uint8Array(e.getArrayBuffer(o))),l=new JD(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class JD{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(r)}}class r6{add(e,t){this[e]=t}}function Eue(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===s6(n,0,e.length)}function Mue(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function ZD(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Rue(n){return n/46186158e3}const Pue=[];function L_(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return Bue(Pue,r.buffer,s,o)}const $T=new rs,Fm=new fe;function i6(n){const e=new Zt,t=new Zt,r=new Zt,i=new Zt,s=new Zt,o=new Zt,a=new Zt,l=new Zt,c=new Zt,u=new Zt,h=new Zt,d=new Zt,m=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(Fm.fromArray(n.translation));const g=Ox(0);if(n.preRotation){const F=n.preRotation.map(Ws.degToRad);F.push(g),t.makeRotationFromEuler($T.fromArray(F))}if(n.rotation){const F=n.rotation.map(Ws.degToRad);F.push(n.eulerOrder||g),r.makeRotationFromEuler($T.fromArray(F))}if(n.postRotation){const F=n.postRotation.map(Ws.degToRad);F.push(g),i.makeRotationFromEuler($T.fromArray(F)),i.invert()}n.scale&&s.scale(Fm.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Fm.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(Fm.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Fm.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Fm.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const v=t.clone().multiply(r).multiply(i),w=new Zt;w.extractRotation(u);const _=new Zt;_.copyPosition(u);const A=_.clone().invert().multiply(u),S=w.clone().invert().multiply(A),R=s,B=new Zt;if(m===0)B.copy(w).multiply(v).multiply(S).multiply(R);else if(m===1)B.copy(w).multiply(S).multiply(v).multiply(R);else{const K=new Zt().scale(new fe().setFromMatrixScale(h)).clone().invert(),Q=S.clone().multiply(K);B.copy(w).multiply(v).multiply(Q).multiply(R)}const I=c.clone().invert(),N=o.clone().invert();let U=e.clone().multiply(l).multiply(c).multiply(t).multiply(r).multiply(i).multiply(I).multiply(a).multiply(o).multiply(s).multiply(N);const O=new Zt().copyPosition(U),P=u.clone().multiply(O);return d.copyPosition(P),U=d.clone().multiply(B),U.premultiply(u.invert()),U}function Ox(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function XT(n){return n.split(",").map(function(t){return parseFloat(t)})}function s6(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function kue(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function Bue(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}const o6=L.createContext({isTeaching:!1,setIsTeaching:()=>{},isClapping:!1,setIsClapping:()=>{},isBowing:!1,setBowing:()=>{}}),a6=()=>L.useContext(o6);function Iue(){return C.jsx(xle,{center:!0,children:C.jsx("div",{className:"text-lg text-gray-600",children:"Loading Avatar..."})})}function l6({scale:n=1,setFeedback:e}){const{scene:t}=rS("/models/megan.glb"),[r]=L.useState(()=>new sz(t)),[i,s]=L.useState({idle:null,talking:null,clapping:null,bow:null}),{isTeaching:o,isClapping:a,isBowing:l}=a6();return L.useEffect(()=>{t.traverse(c=>{c.isMesh&&(c.material.roughness=.8,c.material.metalness=.1,c.material.envMapIntensity=.5,(c.name.toLowerCase().includes("skin")||c.name.toLowerCase().includes("face")||c.name.toLowerCase().includes("body"))&&(c.material.transmission=.1,c.material.thickness=.5,c.material.clearcoat=.1),c.material.color&&c.material.color.offsetHSL(.02,.1,.05))})},[t]),L.useEffect(()=>{const c=new wue;return Object.entries({idle:"/animations/Idle.fbx",talking:"/animations/talk1.fbx",clapping:"/animations/clap.fbx",bow:"/animations/bow.fbx"}).forEach(([h,d])=>{c.load(d,m=>{if(m.animations&&m.animations.length>0){const g=m.animations[0],v=r.clipAction(g,t);v.setLoop(TR),v.clampWhenFinished=!0,s(w=>({...w,[h]:v}))}},m=>{console.log(`Loading ${h}: ${(m.loaded/m.total*100).toFixed(2)}%`)},m=>{console.error(`Error loading animation ${h}:`,m)})}),()=>{r.stopAllAction()}},[r,t]),L.useEffect(()=>{if(!i.idle||!i.talking||!i.clapping||!i.bow)return;const c=()=>{Object.values(i).forEach(u=>{u&&u.isRunning()&&u.fadeOut(.2)})};l&&i.bow?(c(),e("Great Job!"),i.bow.reset().fadeIn(.2).play(),i.bow.setLoop(CR),setTimeout(()=>{i.bow&&i.idle&&(i.bow.fadeOut(.2),i.idle.reset().fadeIn(.2).play())},2e3)):a&&i.clapping?(c(),e("Great Job!"),i.clapping.reset().fadeIn(.2).play()):o&&i.talking?(c(),e("Teaching Mode"),i.talking.reset().fadeIn(.2).play()):i.idle&&(c(),e(null),i.idle.reset().fadeIn(.2).play())},[o,a,l,i,e]),Ev((c,u)=>{r.update(u)}),C.jsx("primitive",{object:t,scale:2.5,position:[0,-1.5,0],rotation:[-Math.PI/2,0,0]})}l6.propTypes={scale:Ar.number,setFeedback:Ar.func.isRequired};function c6({cameraPosition:n,targetPosition:e,fov:t,enableZoom:r,minZoom:i,maxZoom:s,initialScale:o,setFeedback:a}){return C.jsxs(C.Fragment,{children:[C.jsx(Rce,{makeDefault:!0,position:n,fov:t}),C.jsx(Pce,{enableZoom:r,enablePan:!1,minDistance:i,maxDistance:s,target:new fe(...e),minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/1.5,minAzimuthAngle:-Math.PI/4,maxAzimuthAngle:Math.PI/4}),C.jsx("ambientLight",{intensity:.4}),C.jsx("directionalLight",{position:[5,5,5],intensity:.3,castShadow:!0}),C.jsx(Kce,{preset:"sunset",intensity:.2}),C.jsx(L.Suspense,{fallback:C.jsx(Iue,{}),children:C.jsx(l6,{scale:o,setFeedback:a})})]})}c6.propTypes={cameraPosition:Ar.arrayOf(Ar.number).isRequired,targetPosition:Ar.arrayOf(Ar.number).isRequired,fov:Ar.number.isRequired,enableZoom:Ar.bool.isRequired,minZoom:Ar.number.isRequired,maxZoom:Ar.number.isRequired,initialScale:Ar.number.isRequired,setFeedback:Ar.func.isRequired};function u6({children:n}){const[e,t]=L.useState(!1),[r,i]=L.useState(!1),[s,o]=L.useState(!1),a={isTeaching:e,setIsTeaching:t,isClapping:r,setIsClapping:i,isBowing:s,setBowing:o};return C.jsx(o6.Provider,{value:a,children:n})}u6.propTypes={children:Ar.node.isRequired};function h6({cameraPosition:n=[0,-1,8],targetPosition:e=[0,-6,0],fov:t=50,enableZoom:r=!0,minZoom:i=2,maxZoom:s=10,initialScale:o=5}){const[a,l]=L.useState(null);return C.jsxs("div",{className:"relative w-full h-screen bg-gray-100",children:[a&&C.jsx("div",{className:`absolute top-10 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg text-white font-bold shadow-lg transition-all ${a==="Great Job!"?"bg-green-500":"bg-blue-500"}`,children:a}),C.jsxs(lle,{shadows:!0,fog:{near:10,far:20,color:"#f0f0f0"},children:[C.jsx(c6,{cameraPosition:n,targetPosition:e,fov:t,enableZoom:r,minZoom:i,maxZoom:s,initialScale:o,setFeedback:l}),C.jsx("color",{attach:"background",args:["#f0f0f0"]})]})]})}h6.propTypes={cameraPosition:Ar.arrayOf(Ar.number),targetPosition:Ar.arrayOf(Ar.number),fov:Ar.number,enableZoom:Ar.bool,minZoom:Ar.number,maxZoom:Ar.number,initialScale:Ar.number};const Lue=({currentLesson:n,lessons:e})=>{const t=e[n],r=(t==null?void 0:t.expected)||"",s=`/images/${(o=>({अनार:"anaar",आम:"aam",इमली:"imli",ईख:"eekh",उल्लू:"ullu",ऊन:"oon",एप्पल:"apple",ऐनक:"ainak",ओखली:"okhli",औरत:"aurat",अंगूर:"angoor"})[o]||o.toLowerCase())(r)}.png`;return L.useEffect(()=>{n&&n!==0&&(console.log("Current lesson:",n),console.log("Current word:",r),console.log("Image path:",s))},[n,r,s]),!n||n===0?null:C.jsx("div",{className:"absolute top-12 right-16 z-40 pointer-events-none",children:C.jsx("div",{className:"relative",children:C.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white rounded-full shadow-lg animate-bounce-slow p-2",children:C.jsx("img",{src:s,alt:r,className:"max-w-[60px] max-h-[60px] w-auto h-auto object-contain rounded-full",onError:o=>{console.error(`Failed to load image: ${s}`),o.target.style.display="none",o.target.parentElement.innerHTML=`<div class="text-2xl text-orange-500">${r}</div>`}})})})})};function Due(){const n=Ku(),e=al(),{levelFile:t,userId:r}=n.state||{levelFile:"swar.json",userId:"guest"},{isTeaching:i,setIsTeaching:s,setIsClapping:o,setBowing:a}=a6(),[l,c]=L.useState(""),[u,h]=L.useState([]),[d,m]=L.useState(0),[g,v]=L.useState(""),[w,_]=L.useState(""),[A,S]=L.useState(null),[R,B]=L.useState(""),[I,N]=L.useState(!0),[U,O]=L.useState(null),[P,F]=L.useState(!1),[K,Q]=L.useState(!1);L.useEffect(()=>{(async()=>{var re,Z;try{if(!r){console.error("❌ No username found, cannot load progress!");return}N(!0);const ne=await fetch(`/syllabus/${t}`);if(!ne.ok)throw new Error("Failed to load lesson data");const ce=await ne.json();h(ce);const ye=await fetch(`https://indic-backend.onrender.com/api/progress/${r}/${t}`);if(!ye.ok)throw new Error("Failed to fetch progress");const he=await ye.json();console.log(`🔥 Progress for ${r}:`,he);const Ce=he.lastLesson||0;m(Ce),v(((re=ce[Ce])==null?void 0:re.text)||""),_(((Z=ce[Ce])==null?void 0:Z.english)||""),N(!1)}catch(ne){console.error("❌ Error loading lessons:",ne),O(ne.message),N(!1)}})()},[t,r]);const Y=async te=>{var re,Z,ne,ce;try{await fetch("https://indic-backend.onrender.com/api/progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,levelFile:t,lastLesson:te})}),m(te),v(((re=u[te])==null?void 0:re.text)||""),_(((Z=u[te])==null?void 0:Z.english)||"")}catch(ye){console.error("Error saving progress:",ye),m(te),v(((ne=u[te])==null?void 0:ne.text)||""),_(((ce=u[te])==null?void 0:ce.english)||"")}};L.useEffect(()=>{const te=window.SpeechRecognition||window.webkitSpeechRecognition;if(te){const re=new te;re.lang="hi-IN",re.continuous=!1,re.interimResults=!1,S(re)}},[]),L.useEffect(()=>()=>{speechSynthesis.cancel()},[]);const ee=L.useCallback(async(te,re)=>(speechSynthesis.cancel(),new Promise(Z=>{var ye,he;if(K){Z();return}const ne=new SpeechSynthesisUtterance(te);ne.lang="hi-IN",ne.rate=.9,ne.pitch=1.1,ne.volume=1,s(!0),Q(!0),te===((ye=u[0])==null?void 0:ye.text)&&(a(!0),setTimeout(()=>a(!1),2e3));const ce=(he=te.split("।")[0].split("से ")[1])==null?void 0:he.split(" ")[0];ce&&c(ce),ne.onstart=()=>{s(!0)},ne.onend=()=>{s(!1),c(""),Q(!1),re&&re(),Z()},ne.onerror=Ce=>{console.error("Speech synthesis error:",Ce),s(!1),c(""),Q(!1),Z()},speechSynthesis.speak(ne)})),[s,a,u,K]),$=L.useCallback(te=>{!A||P||K||(F(!0),A.start(),A.onresult=function(re){const Z=re.results[0][0].transcript.trim();B(Z),F(!1),Z===te?(o(!0),ee("बहुत बढ़िया! चलिए आगे बढ़ते हैं।").then(()=>{o(!1);const ne=d+1;ne<u.length&&Y(ne)})):ee("फिर से कोशिश कीजिए।")},A.onerror=function(re){console.error("Speech recognition error:",re),F(!1),ee("फिर से कोशिश कीजिए।")},A.onend=function(){F(!1)})},[A,ee,d,u,o,P,K]),oe=L.useCallback(async()=>{if(d<u.length&&!K){const te=u[d];if(d===0){await ee(te.text);const re=d+1;re<u.length&&Y(re)}else await ee(te.text),await new Promise(re=>setTimeout(re,500)),await ee("मेरे बाद दोहराएँ"),setTimeout(()=>{$(te.expected)},500)}},[d,u,ee,$,K]);L.useEffect(()=>{let te=!0;if(!I&&u.length>0&&d===0&&!K){const re=setTimeout(()=>{te&&oe()},1e3);return()=>{te=!1,clearTimeout(re)}}},[I,u,d,oe,K]);const G=te=>{if(!l)return te;const re=te.split(l);return C.jsx(C.Fragment,{children:re.map((Z,ne)=>C.jsxs(Hl.Fragment,{children:[Z,ne<re.length-1&&C.jsx("span",{className:"text-orange-500 font-bold",children:l})]},ne))})};return I?C.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-white",children:[C.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 rounded-full border-t-transparent"}),C.jsx("p",{className:"mt-4 text-gray-800",children:"Loading lesson..."})]}):U?C.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-white",children:[C.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Error Loading Lesson"}),C.jsx("p",{className:"text-red-500 mb-4",children:U}),C.jsx("button",{onClick:()=>e("/"),className:"rounded-full bg-white p-4 shadow-md hover:shadow-lg transition-transform hover:-translate-y-1",children:C.jsx(UO,{className:"w-6 h-6"})})]}):C.jsx("div",{className:"bg-white min-h-screen",children:C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative right-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] translate-x-1/2 rotate-[-30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:right-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(25.9% 44.1%, 0% 61.6%, 2.5% 26.9%, 14.5% 0.1%, 19.3% 2%, 27.5% 32.5%, 39.8% 62.4%, 47.6% 68.1%, 52.5% 58.3%, 54.8% 34.5%, 72.5% 76.7%, 99.9% 64.9%, 82.1% 100%, 72.4% 76.8%, 23.9% 97.7%, 25.9% 44.1%)"}})]}),C.jsx("div",{className:"flex min-h-screen items-start justify-center pt-24",children:C.jsxs("div",{className:"w-full max-w-4xl mx-auto flex flex-col items-center",children:[C.jsxs("div",{className:"relative w-[400px] h-[400px] rounded-full overflow-hidden bg-gray-100 shadow-lg mb-8",children:[C.jsx("div",{className:"absolute inset-0",children:C.jsx(h6,{cameraPosition:[0,2,8],targetPosition:[0,0,0],fov:45,enableZoom:!1,minZoom:2,maxZoom:10,initialScale:4.5})}),i&&C.jsx(Lue,{currentLesson:d,lessons:u})]}),C.jsxs("div",{className:"flex justify-center gap-6 mb-8",children:[C.jsx("button",{onClick:oe,className:"bg-orange-500 text-white p-4 rounded-full hover:bg-orange-600 transition-colors",disabled:K,children:C.jsx(UY,{className:"w-6 h-6"})}),C.jsx("button",{onClick:()=>{var te;return $((te=u[d])==null?void 0:te.expected)},className:"bg-blue-500 text-white p-4 rounded-full hover:bg-blue-600 transition-colors",disabled:P||K,children:C.jsx(NY,{className:"w-6 h-6"})}),C.jsx("button",{onClick:()=>{e("/frog")},className:"bg-purple-500 text-white p-4 rounded-full hover:bg-purple-600 transition-colors",children:C.jsx(SY,{className:"w-6 h-6"})})]}),C.jsxs("div",{className:"w-full",children:[C.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full mb-4",children:C.jsx("div",{className:"bg-orange-500 h-full rounded-full transition-all duration-300",style:{width:`${d/u.length*100}%`}})}),C.jsxs("div",{className:"text-center space-y-4",children:[C.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:G(g)}),C.jsx("p",{className:"text-lg text-gray-600",children:w})]})]})]})})]})})}const Fue=[{name:"Frog Jump",description:"Help the frog jump to the correct vowel platform!",route:"frog",image:"🐸"},{name:"Fill in the Blanks",description:"Complete the sentence by filling in the blanks!",route:"fillintheblanks",image:"✍️"},{name:"Match the Pairs",description:"Find and match the correct pairs of cards!",route:"match",image:"🃏"},{name:"Sentence Builder",description:"Arrange the words to build a meaningful sentence!",route:"sentence",image:"🔠"},{name:"Canvas",description:"Draw and create on the virtual canvas!",route:"canvas",image:"🖼️"},{name:"Flipped Card",description:"Flip and match the cards!",route:"flippedcard",image:"🎴"},{name:"Noun Quest",description:"Identify and match the correct nouns in this fun game!",route:"noun",image:"🧩"},{name:"Rangoli Colors Quest",description:"Complete beautiful Rangoli patterns in this colorful and fun game!",route:"rangoli",image:"🎨"},{name:"Avatar Actions",description:"Control the avatar and perform actions!",route:"home",image:"🕺"}],Nue=()=>{const n=al();return C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative left-[calc(50%+11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[-30deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-30 sm:left-[calc(50%+30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"flex flex-col items-center justify-center w-full pt-32",children:C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 max-w-6xl mx-auto",children:Fue.map((e,t)=>C.jsxs("div",{className:"relative backdrop-blur-md  bg-white/20 border border-white/40 shadow-lg rounded-2xl p-5 hover:shadow-2xl transition-transform transform hover:scale-110 cursor-pointer flex flex-col items-center text-center overflow-hidden",onClick:()=>n(`/${e.route}`),children:[C.jsxs("div",{className:"absolute inset-0 -z-10 transform-gpu overflow-hidden blur-2xl","aria-hidden":"true",children:[C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[-10deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"absolute top-4 right-4 z-10"}),C.jsx("div",{className:"flex items-center justify-center mb-4 text-7xl h-24 w-24 bg-purple-100/40 backdrop-blur-sm rounded-full border border-purple-200/50 z-10",children:e.image}),C.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-2 z-10",children:e.name}),C.jsx("p",{className:"text-gray-600 text-sm mb-4 z-10",children:e.description}),C.jsx("button",{onClick:r=>{r.stopPropagation(),n(`/${e.route}`)},className:"px-6 py-2 bg-blue-600/90 backdrop-blur-sm text-white font-bold rounded-lg hover:bg-blue-700 transition-all shadow-md z-10",children:"Play Now"})]},t))})})]})},Fl=[{text:"यह बिल्ली है।",english:"This is a cat.",missing:"बिल्ली",options:["कुत्ता","बिल्ली","गाय"]},{text:"यह घर है।",english:"This is a house.",missing:"घर",options:["गाड़ी","घर","पानी"]},{text:"यह जल है।",english:"This is water.",missing:"जल",options:["जल","हवा","आग"]}],Oue=()=>{const[n,e]=L.useState(0),[t,r]=L.useState(null),[i,s]=L.useState(!1),[o,a]=L.useState(!1),l=(d,m)=>d.replace(m,"___"),c=d=>{const m=new SpeechSynthesisUtterance(d);m.lang="hi-IN",m.rate=.8,window.speechSynthesis.speak(m)};L.useEffect(()=>{const d=Fl[n].text;c(d)},[n]);const u=d=>{r(d),d===Fl[n].missing&&(s(!0),a(!0))},h=()=>{n<Fl.length-1?(e(n+1),r(null),s(!1),a(!1)):alert("शाबाश! आपने सब सवाल हल कर लिए।")};return C.jsx("div",{className:"bg-gradient-to-b from-purple-300 via-pink-200 to-white min-h-screen flex flex-col items-center",children:C.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6 flex flex-col items-center mt-60",children:[" ",C.jsx("h1",{className:"text-2xl font-bold text-green-600 mb-6 text-center",children:"खाली जगह भरो"}),C.jsxs("div",{className:"mb-8 text-center",children:[o?C.jsxs("div",{className:"animate-fadeIn",children:[C.jsx("p",{className:"text-xl font-semibold text-green-600 mb-2",children:Fl[n].text}),C.jsx("p",{className:"text-lg text-gray-600",children:Fl[n].english})]}):C.jsx("p",{className:"text-xl mb-4",children:l(Fl[n].text,Fl[n].missing)}),C.jsx("button",{className:"text-2xl bg-none border-none cursor-pointer transform hover:scale-110 mt-4",onClick:()=>c(Fl[n].text),children:"🔊"})]}),C.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-6",children:Fl[n].options.map((d,m)=>C.jsx("button",{onClick:()=>u(d),disabled:i,className:`px-6 py-3 text-lg rounded-md transition-all 
                ${t===d&&d===Fl[n].missing?"bg-green-500 text-white":"bg-gray-100 hover:bg-gray-200"}
              `,children:d},m))}),i&&C.jsx("button",{onClick:h,className:"px-6 py-3 text-lg rounded-md bg-blue-500 text-white hover:bg-blue-600 transition-all",children:n<Fl.length-1?"अगला सवाल":"समाप्त"})]})})};function Uue(){const n=L.useMemo(()=>["अ","आ","इ","ई","उ","ऊ","ऋ","ए","ऐ","ओ","औ","अं","अः"],[]),[e,t]=L.useState(""),[r,i]=L.useState(0),[s,o]=L.useState(!0),[a,l]=L.useState({x:0,y:0}),[c,u]=L.useState(!1),h=L.useRef(null),d=L.useRef(null),m=L.useRef({correct:new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjIwLjEwMAAAAAAAAAAAAAAA//tUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAAFWgDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAAAAAAAAAAAAQVa+I2kXwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sUZAAP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU="),wrong:new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjIwLjEwMAAAAAAAAAAAAAAA//tUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAAFWgDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAAAAAAAAAAAAQVa+I2kXwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sUZAAP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=")}),g=L.useCallback(()=>{t(A=>A||n[Math.floor(Math.random()*n.length)])},[n]),v=L.useCallback(A=>{if(!s)return;o(!1),u(!0);const S=A.getBoundingClientRect(),R=d.current.getBoundingClientRect(),B=S.left-R.left,I=R.height-(S.bottom-R.top);let N=null;const U=600,O=150,P=F=>{N||(N=F);const K=(F-N)/U;if(K<1){const Q=a.x+(B-a.x)*K,Y=I+Math.sin(K*Math.PI)*O;l({x:Q,y:Y}),requestAnimationFrame(P)}else l({x:B,y:I}),u(!1),m.current.correct.play(),i(Q=>Q+1),setTimeout(()=>{t(n[Math.floor(Math.random()*n.length)]),o(!0)},500)};requestAnimationFrame(P)},[s,a,n]),w=L.useCallback(A=>{if(!s)return;A.dataset.vowel===e?v(A):(m.current.wrong.play(),A.classList.add("animate-shake"),setTimeout(()=>A.classList.remove("animate-shake"),500))},[s,e,v]),_=L.useCallback(A=>{var R;const S="1234567890qwe".indexOf(A.key);if(S>=0&&S<n.length){const B=(R=d.current)==null?void 0:R.children[S];B&&w(B)}},[n,w]);return L.useEffect(()=>(g(),document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)),[g,_]),C.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-400 via-sky-300 to-white flex flex-col items-center justify-center py-5",children:[C.jsxs("div",{className:"flex gap-4 mb-5",children:[C.jsxs("div",{className:"bg-white/90 px-8 py-3 rounded-lg shadow-lg text-2xl w-48",children:["Score: ",C.jsx("span",{className:"text-sky-600",children:r})]}),C.jsxs("div",{className:"bg-white/90 px-8 py-3 rounded-lg shadow-lg text-2xl w-48",children:["Jump to: ",C.jsx("span",{className:"text-sky-800",children:e})]})]}),C.jsxs("div",{className:"relative w-[90%] max-w-4xl h-[70vh] bg-gradient-to-b from-sky-400 to-sky-600 rounded-2xl overflow-hidden shadow-xl",children:[C.jsx("div",{ref:h,style:{transform:`translate(${a.x}px, ${-a.y}px) ${c?"rotate(180deg)":"rotate(0deg)"}`,bottom:0,left:0,position:"absolute"},className:"w-16 h-16 text-5xl transition-transform duration-100",children:"🐸"}),C.jsx("div",{ref:d,className:"absolute bottom-10 grid grid-cols-5 gap-6 p-6 w-full",style:{top:"20px"},children:n.map((A,S)=>C.jsx("div",{"data-vowel":A,onClick:R=>w(R.currentTarget),className:"aspect-square cursor-pointer group",children:C.jsx("div",{className:"w-full h-full bg-pink-200 rounded-full flex items-center justify-center text-2xl font-bold shadow-md transition-transform duration-300 group-hover:-translate-y-1",children:A})},S))})]})]})}const zue="/assets/grapes-D2ptGdIM.png",Hue="/assets/banana-DD10UCwH.png",jue="/assets/mango-CkKd7Hga.png",Gue="/assets/watermelon-Bow71YZ7.png",Vue="/assets/orange-C9s8BPvu.png",QD=[{fruit:C.jsx("img",{src:zue,alt:"Grapes",className:"w-10 h-10 object-cover rounded-lg"}),fruitHindi:"अंगूर"},{fruit:C.jsx("img",{src:Hue,alt:"Banana",className:"w-10 h-10 object-cover rounded-lg"}),fruitHindi:"केला"},{fruit:C.jsx("img",{src:jue,alt:"Mango",className:"w-10 h-10 object-cover rounded-lg"}),fruitHindi:"आम"},{fruit:C.jsx("img",{src:Gue,alt:"Watermelon",className:"w-10 h-10 object-cover rounded-lg"}),fruitHindi:"तरबूज"},{fruit:C.jsx("img",{src:Vue,alt:"Orange",className:"w-10 h-10 object-cover rounded-lg"}),fruitHindi:"संतरा"}],Wue=n=>n.slice().sort(()=>Math.random()-.5);function $ue(){const[n,e]=L.useState([]),[t,r]=L.useState([]),[i,s]=L.useState(null);L.useEffect(()=>{e(Wue(QD))},[]);const o=l=>{if(i&&l.fruitHindi===i.fruitHindi){const c=[...t,{fruit:i.fruit,fruitHindi:l.fruitHindi}];r(c)}s(null)},a=l=>t.some(c=>c.fruitHindi===l.fruitHindi);return C.jsx("div",{className:"w-full h-screen fixed top-0 left-0 bg-gradient-to-b from-purple-300 via-pink-200 to-white overflow-auto flex items-center justify-center",children:C.jsx("div",{className:"relative w-full flex flex-col items-center",children:C.jsxs("div",{className:"flex gap-5 justify-center p-5",children:[C.jsx("div",{className:"flex flex-col gap-4",children:QD.map((l,c)=>C.jsx("button",{onClick:()=>s(l),className:`
                  w-52 h-20 flex justify-center items-center
                  bg-white border border-black/10 rounded-2xl
                  text-lg text-gray-700 cursor-pointer
                  transition-all duration-200 outline-none
                  hover:translate-y-[-2px] hover:shadow-lg
                  ${a(l)?"bg-green-500 text-black border-green-500":""}
                  ${i===l?"bg-gray-600 text-white border-gray-600":""}
                  ${a(l)?"":"hover:shadow-black/10"}
                `,children:l.fruit},c))}),C.jsx("div",{className:"flex flex-col gap-4",children:n.map((l,c)=>C.jsx("button",{onClick:()=>o(l),disabled:i===null,className:`
                  w-52 h-20 flex justify-center items-center
                  bg-white border border-black/10 rounded-2xl
                  text-lg text-gray-700
                  transition-all duration-200 outline-none
                  ${a(l)?"bg-green-500 text-black border-green-500":""}
                  ${i===null?"opacity-70 cursor-not-allowed":"cursor-pointer hover:translate-y-[-2px] hover:shadow-lg hover:shadow-black/10"}
                `,children:l.fruitHindi},c))})]})})})}const Xue=()=>{const n=[{emoji:"🏡",english:"House",correct:"घर",options:["विद्यालय","बाजार","घर"]},{emoji:"🏫",english:"School",correct:"विद्यालय",options:["घर","विद्यालय","लड़का"]},{emoji:"🛍",english:"Market",correct:"बाजार",options:["शिक्षक","बाजार","पुस्तक"]},{emoji:"🍏",english:"Apple",correct:"सेब",options:["सेब","लड़की","कुर्सी"]},{emoji:"📚",english:"Book",correct:"पुस्तक",options:["पुस्तक","घर","विद्यालय"]},{emoji:"🪑",english:"Chair",correct:"कुर्सी",options:["लड़का","कुर्सी","शिक्षक"]},{emoji:"👦",english:"Boy",correct:"लड़का",options:["लड़का","बाजार","विद्यालय"]},{emoji:"👩",english:"Girl",correct:"लड़की",options:["घर","लड़की","कुर्सी"]},{emoji:"👨‍🏫",english:"Teacher",correct:"शिक्षक",options:["शिक्षक","बाजार","सेब"]},{emoji:"🚗",english:"Car",correct:"गाड़ी",options:["गाड़ी","घर","विद्यालय"]}],[e,t]=L.useState(0),[r,i]=L.useState(0),[s,o]=L.useState(""),[a,l]=L.useState(!1),[c,u]=L.useState(!0),h=v=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const w=new SpeechSynthesisUtterance(v);w.lang="hi-IN";const A=window.speechSynthesis.getVoices().find(S=>S.lang.includes("hi-IN"));A&&(w.voice=A),window.speechSynthesis.speak(w)}},d=v=>{if(!c||a)return;u(!1);const w=n[e];v===w.correct?(o("सही उत्तर! 🎉"),i(_=>_+1),h(w.correct)):(o("गलत उत्तर! ❌"),h(w.correct)),setTimeout(()=>{e<n.length-1?(t(_=>_+1),o(""),u(!0)):(l(!0),o(`खेल समाप्त! 🎉 आपका स्कोर: ${r+(v===w.correct?1:0)}/10`))},1500)},m=()=>{t(0),i(0),o(""),l(!1),u(!0)};L.useEffect(()=>{const v=()=>{window.speechSynthesis.getVoices()};v(),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=v)},[]);const g=n[e];return C.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-green-100 flex flex-col items-center justify-center p-6",children:[C.jsx("h1",{className:"text-4xl font-bold text-purple-800 mb-8",children:"Emoji पहचानो"}),C.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl max-w-md w-full text-center",children:[C.jsx("div",{className:"text-8xl mb-6 animate-bounce",children:g.emoji}),C.jsxs("div",{className:"text-xl font-medium mb-6 flex items-center justify-center gap-2",children:[g.english,C.jsx("button",{onClick:()=>h(g.correct),className:"p-2 text-blue-600 hover:text-blue-800 transition-colors","aria-label":"Play sound",children:"🔊"})]}),C.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:g.options.map((v,w)=>C.jsx("button",{onClick:()=>d(v),disabled:!c||a,className:`px-6 py-3 text-lg font-medium text-white 
                ${!c&&v===g.correct?"bg-green-500":"bg-blue-500 hover:bg-blue-600"} 
                rounded-lg transition-all focus:outline-none 
                disabled:opacity-75 disabled:cursor-not-allowed`,children:v},w))}),s&&C.jsx("p",{className:`text-xl font-bold mb-4 ${s.includes("सही")?"text-green-500":s.includes("गलत")?"text-red-500":"text-purple-600"}`,children:s}),C.jsxs("p",{className:"text-xl font-bold text-gray-700",children:["स्कोर: ",r,"/",n.length]}),a&&C.jsx("button",{onClick:m,className:"mt-6 px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"फिर से खेलें"})]})]})},qT=[{id:1,name:"Yellow",fill:"white",path:"M150,150 h100 v100 h-100 Z"},{id:2,name:"Red",fill:"white",path:"M150,150 L200,100 L250,150 Z"},{id:3,name:"Purple",fill:"white",path:"M150,150 L100,100 L50,150 Z"},{id:4,name:"Blue",fill:"white",path:"M50,150 m0,-30 a30,30 0 1,0 60,0 a30,30 0 1,0 -60,0"},{id:5,name:"Green",fill:"white",path:"M250,150 m0,-30 a30,30 0 1,0 60,0 a30,30 0 1,0 -60,0"},{id:6,name:"Orange",fill:"white",path:"M150,150 m-20,-20 l-20,-20 a10,10 0 1,1 20,-20 l20,20"},{id:7,name:"Pink",fill:"white",path:"M150,150 m20,-20 l20,-20 a10,10 0 1,0 20,20 l-20,20"},{id:8,name:"Purple",fill:"white",path:"M150,150 m20,20 l20,20 a10,10 0 1,1 -20,20 l-20,-20"}],que=[{name:"Yellow",value:"#FFD700"},{name:"Red",value:"#FF4444"},{name:"Purple",value:"#8844FF"},{name:"Blue",value:"#4444FF"},{name:"Green",value:"#44FF44"},{name:"Orange",value:"#FFA500"},{name:"Pink",value:"#FF69B4"}],Yue=()=>{const[n,e]=L.useState(qT),[t,r]=L.useState(null),[i,s]=L.useState(0),[o,a]=L.useState(""),l=h=>{r(h),a("")},c=h=>{if(!t){a("Please select a color first!");return}const d=n.map(m=>{if(m.id===h.id){const g=t.name===m.name;return g&&m.fill==="white"?(s(i+1),a("Correct color!")):g||a("Try a different color!"),{...m,fill:t.value}}return m});e(d)},u=()=>{e(qT),s(0),r(null),a("")};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-orange-100 to-yellow-50 flex flex-col items-center justify-center p-4",children:[C.jsx("h1",{className:"text-3xl font-bold text-orange-800 mb-4",children:"House Rangoli"}),C.jsx("p",{className:"text-lg text-orange-600 mb-8",children:"Fill in the pattern with correct colors"}),C.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 relative",children:C.jsx("svg",{width:"400",height:"400",viewBox:"50,50 200,200",className:"mb-4",children:n.map(h=>C.jsxs("g",{children:[C.jsx("path",{d:h.path,fill:h.fill,stroke:"black",strokeWidth:"1",onClick:()=>c(h),className:"cursor-pointer hover:opacity-80 transition-opacity"}),C.jsx("title",{children:h.name})]},h.id))})}),C.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-8 max-w-md",children:que.map(h=>C.jsx("button",{onClick:()=>l(h),className:`w-16 h-16 rounded-full shadow-md transition-transform ${(t==null?void 0:t.name)===h.name?"scale-110 ring-4 ring-black":"hover:scale-105"}`,style:{backgroundColor:h.value},children:C.jsx("span",{className:"sr-only",children:h.name})},h.name))}),o&&C.jsx("div",{className:`text-lg font-semibold mb-4 ${o.includes("Correct")?"text-green-600":"text-orange-600"}`,children:o}),C.jsxs("div",{className:"flex gap-4",children:[C.jsx("div",{className:"bg-white rounded-lg px-6 py-3 shadow-md",children:C.jsxs("span",{className:"text-xl font-semibold",children:["Score: ",i,"/",qT.length]})}),C.jsx("button",{onClick:u,className:"px-6 py-3 bg-orange-500 text-white rounded-lg shadow-md hover:bg-orange-600 transition-colors",children:"Reset Game"})]})]})},Nm=[{hindi:"आज का मौसम अच्छा है।",english:"The weather is nice today.",romanized:"Aaj ka mausam accha hai.",words:["The","weather","is","nice","today"],extraWords:["beautiful","cold","was","will","morning"]},{hindi:"मुझे यात्रा करना पसंद है।",english:"I like to travel.",romanized:"Mujhe yatra karna pasand hai.",words:["I","like","to","travel"],extraWords:["want","love","hate","going","we"]},{hindi:"वह बहुत समझदार है।",english:"He/She is very wise.",romanized:"Woh bahut samajhdar hai.",words:["He/She","is","very","wise"],extraWords:["they","are","was","smart","good"]},{hindi:"मेरे पास एक किताब है।",english:"I have a book.",romanized:"Mere paas ek kitaab hai.",words:["I","have","a","book"],extraWords:["the","had","pen","many","will"]},{hindi:"हम शाम को पार्क में जाएंगे।",english:"We will go to the park in the evening.",romanized:"Hum shaam ko park mein jaayenge.",words:["We","will","go","to","the","park","in","the","evening"],extraWords:["morning","today","tomorrow","they","walk"]}],Kue=()=>{const[n,e]=L.useState(0),[t,r]=L.useState([]),[i,s]=L.useState([]),[o,a]=L.useState(!1),[l,c]=L.useState(!1),[u,h]=L.useState(null),[d,m]=L.useState(!1),g=L.useCallback(R=>{const B=[...R];for(let I=B.length-1;I>0;I--){const N=Math.floor(Math.random()*(I+1));[B[I],B[N]]=[B[N],B[I]]}return B},[]),v=L.useCallback(()=>{const R=Nm[n],B=[...R.words,...R.extraWords];s(g(B))},[n,g]),w=L.useCallback(()=>{const R=new SpeechSynthesisUtterance(Nm[n].hindi);R.lang="hi-IN",R.rate=.8,window.speechSynthesis.speak(R)},[n]);L.useEffect(()=>{v(),w()},[v,w]);const _=R=>{t.includes(R)||(r([...t,R]),s(i.filter(B=>B!==R)),c(!1))},A=(R,B)=>{const I=[...t];I.splice(B,1),r(I),s([...i,R]),c(!1)},S=()=>{const R=Nm[n].words.join(" "),B=t.join(" ");R===B?(a(!0),c(!1),m(!0),h("Correct Answer!"),setTimeout(()=>{h(null),n<Nm.length-1?(e(n+1),r([]),a(!1),m(!1)):alert("आप सभी सवालों को हल कर चुके हैं!")},2e3)):(c(!0),h("Wrong Answer! Try again."),setTimeout(()=>{h(null);const I=[...t,...i];r([]),s(g(I)),c(!1)},1500))};return C.jsx("div",{className:"min-h-screen w-full bg-gradient-to-b from-purple-300 via-pink-200 to-white flex items-center justify-center",children:C.jsxs("div",{className:"max-w-3xl w-full mx-auto p-5 font-sans",children:[C.jsx("h1",{className:"text-2xl text-center font-bold text-purple-700 mb-6",children:"Translate this sentence"}),C.jsxs("div",{className:"mb-8 flex items-center justify-center",children:[C.jsx("button",{onClick:w,className:"text-2xl bg-none border-none cursor-pointer focus:outline-none mr-4",children:"🔊"}),C.jsx("div",{className:`px-6 py-4 rounded-lg shadow-lg text-lg ${d?"bg-green-100 border-2 border-green-500":l?"bg-red-100 border-2 border-red-500":"bg-white border"}`,children:Nm[n].hindi})]}),o&&C.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-md shadow-md text-center mb-4",children:C.jsx("p",{className:"text-base text-gray-600",children:Nm[n].english})}),u&&C.jsx("div",{className:`px-4 py-2 rounded-md text-center mb-4 font-semibold ${d?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:u}),C.jsx("div",{className:"flex flex-wrap gap-3 p-3 bg-purple-100 border-2 border-purple-300 rounded-lg min-h-[80px] mb-5",children:t.map((R,B)=>C.jsx("button",{className:"px-4 py-2 bg-purple-200 text-purple-800 rounded-lg shadow-md focus:outline-none",onClick:()=>A(R,B),children:R},B))}),C.jsx("div",{className:"flex flex-wrap gap-3 p-3 bg-gray-100 border-2 border-gray-300 rounded-lg min-h-[80px] mb-6",children:i.map((R,B)=>C.jsx("button",{className:"px-4 py-2 bg-white text-gray-800 rounded-lg shadow-md hover:bg-gray-200 focus:outline-none",onClick:()=>_(R),children:R},B))}),C.jsx("button",{className:`w-full px-6 py-3 rounded-lg text-white font-bold transition-all ${t.length>0?"bg-purple-600 hover:bg-purple-700":"bg-gray-300 cursor-not-allowed"} ${l?"bg-red-500":""}`,onClick:S,disabled:t.length===0,children:"CHECK"})]})})},Jue=()=>{const{user:n,logout:e}=L.useContext(vA),t=al(),[r,i]=L.useState(!1),[s,o]=L.useState(!1),[a,l]=L.useState(!1),[c,u]=L.useState({}),[h,d]=L.useState({totalLessons:0,averageAccuracy:0,streak:0});L.useEffect(()=>{(async()=>{if(!(!n||!s))try{const w={};for(const _ of Jh)try{const A=await fetch(`https://indic-backend.onrender.com/api/progress/${n.username}/${_.file}`);if(A.ok){const S=await A.json(),R=await fetch(`/syllabus/${_.file}`);if(R.ok){const B=await R.json();S.totalLessons=B.length}w[_.id]=S}}catch(A){console.error(`❌ Failed to fetch progress for level ${_.id}:`,A)}u(w),console.log("🔥 All profile progress data:",w),m(w)}catch(w){console.error("❌ Error fetching progress data:",w)}})()},[n,s]);const m=v=>{if(!v||Object.keys(v).length===0){d({totalLessons:0,averageAccuracy:0,streak:24});return}let w=0,_=0,A=0;Object.keys(v).forEach(R=>{const B=v[R];if(B){w+=B.lastLesson||0;const I=B.totalLessons||1,N=(B.lastLesson||0)/I*100;A+=N,_++}});const S=_>0?Math.round(A/_):0;d({totalLessons:w,averageAccuracy:S,streak:24})},g=()=>{e(),t("/"),o(!1)};return C.jsxs("header",{className:"absolute inset-x-0 top-0 z-50",children:[C.jsxs("nav",{className:"flex items-center justify-between p-6 lg:px-8","aria-label":"Global",children:[C.jsx("div",{className:"flex lg:flex-1",children:C.jsxs(ti,{to:"/",className:"-m-1.5 p-1.5",children:[C.jsx("span",{className:"sr-only",children:"WickedMouse"}),C.jsx("h1",{className:"text-3xl font-bold text-gray-900",style:{fontFamily:"WickedMouse, cursive"},children:"INDIC"})]})}),C.jsx("div",{className:"flex lg:hidden",children:C.jsxs("button",{type:"button",onClick:()=>i(!r),className:"-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700",children:[C.jsx("span",{className:"sr-only",children:"Open main menu"}),r?C.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):C.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5"})})]})}),C.jsxs("div",{className:"hidden lg:flex lg:gap-x-12",children:[C.jsx(ti,{to:"/home",className:"text-sm font-semibold text-gray-900",children:"Home"}),C.jsx(ti,{to:"/games",className:"text-sm font-semibold text-gray-900",children:"Games"}),C.jsx(ti,{to:"/stories",className:"text-sm font-semibold text-gray-900",children:"Stories"}),C.jsx(ti,{to:"/learnings",className:"text-sm font-semibold text-gray-900",children:"Learnings"}),C.jsx(ti,{to:"/ar",className:"text-sm font-semibold text-gray-900",children:"AR"})]}),C.jsx("div",{className:"hidden lg:flex lg:flex-1 lg:justify-end gap-x-6",children:n?C.jsxs(C.Fragment,{children:[C.jsxs(DI,{open:a,onOpenChange:l,children:[C.jsx(FI,{asChild:!0,children:C.jsx("button",{className:"text-gray-900 hover:text-gray-600 transition-colors cursor-pointer",children:C.jsx(TY,{className:"w-6 h-6","aria-label":"Rewards"})})}),C.jsxs(YE,{className:"w-[400px] sm:w-[540px]",children:[C.jsx(KE,{children:C.jsx(JE,{children:"Rewards & Achievements"})}),C.jsx("div",{className:"py-6",children:C.jsxs("div",{className:"space-y-6",children:[C.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg p-6 text-white",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-sm opacity-90",children:"Total Points"}),C.jsx("h3",{className:"text-3xl font-bold",children:"2,450"})]}),C.jsx(fI,{className:"w-12 h-12 opacity-90"})]})}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium mb-3",children:"Recent Achievements"}),C.jsx("div",{className:"space-y-3",children:[{title:"Perfect Score",description:"Complete a lesson with 100% accuracy",icon:WY},{title:"Weekly Champion",description:"Top performer of the week",icon:bY},{title:"7-Day Streak",description:"Practice for 7 days in a row",icon:fI}].map((v,w)=>C.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[C.jsx("div",{className:"bg-indigo-100 p-2 rounded-full",children:C.jsx(v.icon,{className:"w-5 h-5 text-indigo-600"})}),C.jsxs("div",{children:[C.jsx("h5",{className:"font-medium text-gray-900",children:v.title}),C.jsx("p",{className:"text-sm text-gray-500",children:v.description})]})]},w))})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium mb-3",children:"Available Rewards"}),C.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{name:"Premium Theme",points:1e3},{name:"Extra Lives",points:500},{name:"Special Badge",points:750},{name:"Power Boost",points:300}].map((v,w)=>C.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[C.jsx("h5",{className:"font-medium text-gray-900",children:v.name}),C.jsxs("p",{className:"text-sm text-gray-500",children:[v.points," points"]}),C.jsx("button",{className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 cursor-pointer",children:"Redeem"})]},w))})]})]})})]})]}),C.jsxs(DI,{open:s,onOpenChange:o,children:[C.jsx(FI,{asChild:!0,children:C.jsxs("button",{className:"flex items-center space-x-2 text-gray-900 hover:text-gray-600 transition-colors cursor-pointer",children:[C.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["Hello, ",n.username]}),C.jsx(dI,{className:"w-6 h-6","aria-label":"Profile"})]})}),C.jsxs(YE,{className:"w-[400px] sm:w-[540px]",children:[C.jsx(KE,{children:C.jsx(JE,{children:"Profile"})}),C.jsx("div",{className:"py-6",children:C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",children:C.jsx(dI,{className:"w-8 h-8 text-gray-500"})}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-medium",children:n.fullname||n.username}),C.jsx("p",{className:"text-sm text-gray-500",children:n.email})]})]}),C.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[C.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[C.jsx("div",{className:"text-2xl text-gray-900 font-bold",children:h.totalLessons}),C.jsx("div",{className:"text-sm text-gray-500",children:"Lessons"})]}),C.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[C.jsxs("div",{className:"text-2xl text-gray-900 font-bold",children:[h.averageAccuracy,"%"]}),C.jsx("div",{className:"text-sm text-gray-500",children:"Accuracy"})]}),C.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[C.jsx("div",{className:"text-2xl text-gray-900 font-bold",children:h.streak}),C.jsx("div",{className:"text-sm text-gray-500",children:"Streak"})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium mb-3",children:"Recent Activity"}),C.jsxs("div",{className:"space-y-3",children:[Object.entries(c).slice(0,3).map(([v,w],_)=>{const A=parseInt(v,10),S=Jh.find(B=>B.id===A),R=S?S.name:v;return C.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[C.jsx("span",{className:"text-sm text-gray-500",children:`Completed Lesson ${w.lastLesson} in ${R}`}),C.jsx("span",{className:"text-xs text-gray-500",children:"Recent"})]},_)}),Object.keys(c).length===0&&C.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:C.jsx("span",{className:"text-sm text-gray-500",children:"No recent activity"})})]})]}),C.jsx("div",{className:"pt-4 border-t",children:C.jsx("button",{onClick:g,className:"w-full text-center text-red-600 hover:text-red-700 font-medium cursor-pointer",children:"Logout"})})]})})]})]})]}):C.jsxs(C.Fragment,{children:[C.jsx(ti,{to:"/login",className:"text-sm font-semibold text-gray-900",children:"Log in"}),C.jsx(ti,{to:"/signup",className:"text-sm font-semibold text-gray-900",children:"Sign Up"})]})})]}),r&&C.jsx("div",{className:"lg:hidden",children:C.jsxs("div",{className:"px-6 pt-2 pb-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx(ti,{to:"/home",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"Home"}),C.jsx(ti,{to:"/games",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"Games"}),C.jsx(ti,{to:"/stories",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"Stories"}),C.jsx(ti,{to:"/learnings",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"Learnings"}),C.jsx(ti,{to:"/ar",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"AR"})]}),C.jsx("div",{className:"mt-6",children:n?C.jsxs(C.Fragment,{children:[C.jsx("button",{onClick:()=>{o(!0),i(!1)},className:"block text-base font-semibold text-gray-900",children:"View Profile"}),C.jsx("button",{onClick:()=>{g(),i(!1)},className:"mt-2 block text-base font-semibold text-gray-900",children:"Logout"})]}):C.jsxs(C.Fragment,{children:[C.jsx(ti,{to:"/login",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"Log in"}),C.jsx(ti,{to:"/signup",className:"block text-base font-semibold text-gray-900",onClick:()=>i(!1),children:"Sign Up"})]})})]})})]})},Hr=({children:n})=>{const{user:e}=L.useContext(vA);return e?n:C.jsx(XX,{to:"/login"})},Zue=()=>{const[n,e]=L.useState(!1),t=async()=>{try{(await fetch("http://localhost:8000/start")).ok&&e(!0)}catch(i){console.error("Failed to start stream:",i)}},r=async()=>{try{await fetch("http://localhost:8000/stop"),e(!1)}catch(i){console.error("Failed to stop stream:",i)}};return L.useEffect(()=>()=>{n&&r()},[n]),C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative left-[calc(50%+11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[-30deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-30 sm:left-[calc(50%+30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:C.jsx(dA,{className:"w-full max-w-3xl",children:C.jsxs("div",{className:"p-6",children:[C.jsxs("div",{className:"aspect-video relative bg-black rounded-lg overflow-hidden",children:[n&&C.jsx("img",{src:"http://localhost:8000/video_feed",alt:"Object Detection Stream",className:"w-full h-full object-contain"}),!n&&C.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:C.jsx("p",{className:"text-white",children:"Click Start to begin detection"})})]}),C.jsx("div",{className:"mt-6 flex justify-center",children:C.jsx(ap,{onClick:n?r:t,className:"w-32",children:n?"Stop":"Start"})})]})})})]})},Que=()=>{const[n,e]=L.useState(0),t=[{title:"Golconda Fort",image:"story/image_1.png",description:"Once upon a time... On a green hill near a little village, there stood nothing but goats and trees. One day, a clever king rode by and thought, 'This hill is perfect for a fort!'",hindiDescription:"एक समय की बात है... एक हरे-भरे पहाड़ी पर, एक छोटे से गाँव के पास, केवल बकरियाँ और पेड़ थे। एक दिन, एक समझदार राजा वहाँ से गुजरा और सोचा, 'यह पहाड़ी एक किले के लिए एकदम सही है!'"},{title:"Building The Fort",image:"story/image_2.png",description:"With hammers and shovels, workers built a big mud fort on the hill. Tap, tap, tap! The walls grew higher, and soon it became a mighty fort, strong enough to protect the king’s treasures!",hindiDescription:"हथौड़े और फावड़े लेकर, मजदूरों ने पहाड़ी पर एक बड़ा मिट्टी का किला बनाया। ठक-ठक-ठक! दीवारें ऊँची होती गईं, और जल्द ही यह एक शक्तिशाली किला बन गया, जो राजा के खजानों की रक्षा करने के लिए काफी मजबूत था!"},{title:"The Famous Diamond",image:"story/image_3.png",description:"The fort housed the famous Koh-i-Noor diamond, one of the largest in the world. It became a symbol of the fort's wealth and the king's power.",hindiDescription:"किले में प्रसिद्ध कोहिनूर हीरा रखा गया था, जो दुनिया के सबसे बड़े हीरों में से एक है। यह किले की संपत्ति और राजा की शक्ति का प्रतीक बन गया।"},{title:"The Mighty Cannon",image:"story/image.png",description:"The fort was also home to a massive cannon that could protect the kingdom from enemies far away. It was so powerful that its sound echoed across the hills!",hindiDescription:"किला एक विशाल तोप का घर भी था, जो दुश्मनों को दूर से ही हरा सकता था। यह इतनी शक्तिशाली थी कि इसकी गूंज पहाड़ियों में गूँजती थी!"},{title:"A Place of Wonder",image:"/path/to/image5.png",description:"Today, Golconda Fort is a place of wonder. Tourists visit from all over the world to explore its majestic walls and hear the stories of its glorious past.",hindiDescription:"आज, गोलकुंडा किला एक आश्चर्यजनक स्थान है। पर्यटक इसकी भव्य दीवारों को देखने और इसके शानदार अतीत की कहानियाँ सुनने के लिए दुनिया भर से आते हैं।"}],r=()=>{n<t.length-1&&e(n+1)},i=()=>{n>0&&e(n-1)},s=o=>{const a=new SpeechSynthesisUtterance(o);a.lang="hi-IN",window.speechSynthesis.speak(a)};return C.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-blue-300 to-blue-100 p-5 pt-18",children:[C.jsx("div",{className:"w-96 bg-gradient-to-b from-blue-300 to-blue-100 shadow-xl rounded-lg overflow-hidden",children:C.jsxs("div",{className:"p-4 text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:t[n].title}),C.jsx("img",{src:t[n].image,alt:"Story Illustration",className:"w-full rounded-lg mb-4"}),C.jsx("p",{className:"text-gray-600 text-lg mb-4",children:t[n].description}),C.jsx("button",{onClick:()=>s(t[n].hindiDescription),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Read Aloud"})]})}),C.jsxs("div",{className:"flex justify-between mt-6 gap-4",children:[C.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-300 rounded-lg text-gray-800 hover:bg-gray-400",disabled:n===0,children:"Previous"}),C.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:n===t.length-1,children:"Next"})]})]})},ehe=()=>{const[n,e]=L.useState(0),t=[{title:"Charminar: The Story of a Timeless Monument",image:"/images/charu1.jpg",description:"Long ago, in the kingdom of Golconda, a terrible plague spread across the land, causing great suffering. The young Sultan Muhammad Quli Qutb Shah was deeply saddened by the plight of his people. Standing by the Musi River, he prayed, “If my city is freed from this disaster, I shall build a grand monument in gratitude.”",hindiDescription:"बहुत समय पहले, गोलकुंडा राज्य में एक भयानक महामारी फैली, जिससे लोग बहुत परेशान हो गए। युवा सुल्तान मुहम्मद कुली कुतुब शाह अपने लोगों की दुर्दशा से दुखी थे। मूसी नदी के किनारे खड़े होकर, उन्होंने प्रार्थना की, 'यदि मेरा शहर इस आपदा से मुक्त हो जाता है, तो मैं आभार स्वरूप एक भव्य स्मारक बनाऊंगा।'"},{title:"The Birth of Charminar",image:"/images/charu2.jpg",description:"In 1591, after the plague subsided, the Sultan kept his promise and ordered the construction of a magnificent structure at the heart of his new city, Hyderabad. He named it Charminar, meaning 'Four Towers,' as it had four grand minarets, symbolizing the four Khalifas of Islam.",hindiDescription:"1591 में, जब महामारी समाप्त हो गई, तो सुल्तान ने अपना वादा निभाया और अपने नए शहर, हैदराबाद के केंद्र में एक भव्य संरचना बनाने का आदेश दिया। उन्होंने इसे चारमीनार नाम दिया, जिसका अर्थ है 'चार मीनारें,' जो इस्लाम के चार खलीफाओं का प्रतीक थीं।"},{title:"The Stunning Architecture",image:"/images/charu3.jpg",description:"Charminar was an architectural wonder made of limestone and granite, blending Indo-Islamic and Persian designs. Each of its four towering minarets was 56 meters (184 feet) high, and inside, a spiral staircase of 149 steps led to the upper levels. At the very top was a mosque, where the Sultan and his people gathered for prayers.",hindiDescription:"चारमीनार एक वास्तुशिल्प चमत्कार था, जो चूना पत्थर और ग्रेनाइट से बना था और भारतीय-इस्लामिक और फारसी डिजाइनों को मिलाकर बनाया गया था। इसकी चार ऊँची मीनारें 56 मीटर (184 फीट) ऊँची थीं, और भीतर 149 सीढ़ियों वाली घुमावदार सीढ़ी ऊपरी स्तरों तक जाती थी। सबसे ऊपर एक मस्जिद थी, जहाँ सुल्तान और उनके लोग प्रार्थना करने आते थे।"},{title:"The Marketplace and Laad Bazaar",image:"/images/charu4.jpg",description:"Over time, Charminar became the center of trade and culture. Merchants from faraway lands came to Laad Bazaar, the market next to Charminar, to buy and sell precious pearls, silk, and bangles. The Sultan's vision of a grand city came to life as Hyderabad flourished around this monument.",hindiDescription:"समय के साथ, चारमीनार व्यापार और संस्कृति का केंद्र बन गया। दूर-दूर से व्यापारी लाड बाजार में आते थे, जो चारमीनार के पास स्थित था, और यहाँ कीमती मोती, रेशम और चूड़ियाँ खरीदी और बेची जाती थीं। सुल्तान का एक भव्य शहर बनाने का सपना चारमीनार के चारों ओर साकार हुआ।"},{title:"A Symbol of Hyderabad",image:"/images/charu5.jpg",description:"Today, Charminar is the pride of Hyderabad, standing tall for over 400 years. Visitors from around the world come to admire its beauty and hear the stories of its royal past. Whether at sunrise or under the evening lights, Charminar continues to be a symbol of history, culture, and architectural brilliance.",hindiDescription:"आज, चारमीनार हैदराबाद की शान है, जो 400 से अधिक वर्षों से मजबूती से खड़ा है। दुनियाभर से लोग इसकी सुंदरता देखने और इसके शाही अतीत की कहानियाँ सुनने आते हैं। सूर्योदय हो या रात की रोशनी, चारमीनार अब भी इतिहास, संस्कृति और वास्तुकला की उत्कृष्टता का प्रतीक बना हुआ है।"}];L.useEffect(()=>{window.speechSynthesis.getVoices()},[]);const r=()=>{n<t.length-1&&e(n+1)},i=()=>{n>0&&e(n-1)},s=o=>{if(!window.speechSynthesis){alert("Text-to-Speech is not supported in this browser.");return}window.speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(o);a.lang="hi-IN";let l=window.speechSynthesis.getVoices();l.length===0?window.speechSynthesis.onvoiceschanged=()=>{l=window.speechSynthesis.getVoices(),a.voice=l.find(c=>c.lang==="hi-IN")||null,window.speechSynthesis.speak(a)}:(a.voice=l.find(c=>c.lang==="hi-IN")||null,window.speechSynthesis.speak(a))};return C.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-blue-300 to-blue-100 p-5 pt-18",children:[C.jsx("div",{className:"w-96 bg-gradient-to-b from-blue-300 to-blue-100 shadow-xl rounded-lg overflow-hidden",children:C.jsxs("div",{className:"p-4 text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:t[n].title}),C.jsx("img",{src:t[n].image,alt:"Story Illustration",className:"w-full rounded-lg mb-4"}),C.jsx("p",{className:"text-gray-600 text-lg mb-4",children:t[n].description}),C.jsx("button",{onClick:()=>s(t[n].hindiDescription),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Read Aloud"}),C.jsx("button",{onClick:()=>window.speechSynthesis.cancel(),className:"ml-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Stop Reading"})]})}),C.jsxs("div",{className:"flex justify-between mt-6 gap-4",children:[C.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-300 rounded-lg text-gray-800 hover:bg-gray-400",disabled:n===0,children:"Previous"}),C.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:n===t.length-1,children:"Next"})]})]})},the=()=>C.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-blue-300 to-blue-100 p-5 pt-18",children:C.jsx("div",{className:"w-full max-w-4xl bg-white shadow-xl rounded-lg overflow-hidden",children:C.jsxs("div",{className:"p-4 text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"प्रतापपुर के नन्हे खोजी और महाकुंभ का रहस्य!"}),C.jsx("video",{src:"story/videos/mahakumbh.mp4",controls:!0,className:"w-full h-auto rounded-lg mb-4"})]})})}),nhe=[{name:"Whispering Fort",description:"Whispering Fort: A place where ancient secrets echo through time.",route:"golconda",image:"🏰",genre:"Historical"},{name:"Clean Brilliance",description:"A fun and interactive way to learn about cleanliness and hygiene.",route:"cleanliness",image:"🧹",genre:"Awareness"},{name:"The Kumbh Quest of Pratappur",description:"Embark on a journey to discover the ancient mysteries of the Mahakumbh!",route:"mahakumbh",image:"⚔️",genre:"Cultural"},{name:"Charminar",description:"Charminar the glimpse of Hyderabad!",route:"charminar",image:"🕌",genre:"Historical"},{name:"The Lost Temple of Hampi",description:"A hidden temple a lost legend!",route:"cleanliness",image:"🏛️",genre:"Mythological"},{name:"Sunset Over Konark",description:"A chariot frozen in time!",route:"mahakumbh",image:"🌅",genre:"Archaeological"}],rhe=()=>{const n=al();return C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative left-[calc(50%+11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[-30deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-30 sm:left-[calc(50%+30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"flex flex-col items-center justify-center w-full pt-32",children:C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 max-w-6xl mx-auto",children:nhe.map((e,t)=>C.jsxs("div",{className:"relative backdrop-blur-md  bg-white/20 border border-white/40 shadow-lg rounded-2xl p-5 hover:shadow-2xl transition-transform transform hover:scale-110 cursor-pointer flex flex-col items-center text-center overflow-hidden",onClick:()=>n(`/${e.route}`),children:[C.jsxs("div",{className:"absolute inset-0 -z-10 transform-gpu overflow-hidden blur-2xl","aria-hidden":"true",children:[C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[-10deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"absolute top-4 right-4 z-10",children:C.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-blue-100/80 backdrop-blur-sm text-blue-800 rounded-full border border-blue-200/50",children:e.genre})}),C.jsx("div",{className:"flex items-center justify-center mb-4 text-7xl h-24 w-24 bg-purple-100/40 backdrop-blur-sm rounded-full border border-purple-200/50 z-10",children:e.image}),C.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-2 z-10",children:e.name}),C.jsx("p",{className:"text-gray-600 text-sm mb-4 z-10",children:e.description}),C.jsx("button",{onClick:r=>{r.stopPropagation(),n(`/${e.route}`)},className:"px-6 py-2 bg-blue-600/90 backdrop-blur-sm text-white font-bold rounded-lg hover:bg-blue-700 transition-all shadow-md z-10",children:"Play Now"})]},t))})})]})},ihe=()=>C.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-blue-300 to-blue-100 p-5 pt-18",children:C.jsx("div",{className:"w-full max-w-4xl bg-white shadow-xl rounded-lg overflow-hidden",children:C.jsxs("div",{className:"p-4 text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"स्वच्छता की मिसाल: बच्चों का कमाल"}),C.jsx("video",{src:"story/videos/clean.mp4",controls:!0,className:"w-full h-auto rounded-lg mb-4"})]})})}),she=()=>{const[n,e]=L.useState(!1);L.useEffect(()=>{const r=()=>{const s=document.createElement("script");s.src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit",s.async=!0,document.body.appendChild(s)};window.googleTranslateElementInit=()=>{new window.google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"as,bn,gu,hi,kn,ks,ml,mr,ne,or,pa,sd,ta,te,ur,sa,bo,mai,brx,sat,dz,doi,mni,kok,lus,kha,en",layout:window.google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element")};const i=document.createElement("style");return i.textContent=`
      .goog-te-gadget {
        color: transparent !important;
      }
      .goog-te-gadget .goog-te-combo {
        margin: 4px 0;
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #ddd;
        width: 100%;
        color: #333;
      }
      .goog-te-banner-frame {
        display: none !important;
      }
      body {
        top: 0px !important;
      }
      .VIpgJd-ZVi9od-l4eHX-hSRGPd, .VIpgJd-ZVi9od-ORHb {
        display: none !important;
      }
    `,document.head.appendChild(i),r(),()=>{const s=document.querySelector('script[src*="translate.google.com"]');s&&s.remove(),i&&i.remove(),delete window.googleTranslateElementInit}},[]);const t=()=>{e(!n)};return C.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[C.jsx("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-[#2d457e] text-white rounded hover:bg-[#1d2f5c] transition-colors",children:"🌐"}),C.jsx("div",{className:`absolute bottom-full right-0 mb-2 w-64 max-h-[300px] overflow-y-auto bg-white rounded shadow-lg border border-gray-200 ${n?"block":"hidden"}`,children:C.jsx("div",{className:"p-3",children:C.jsx("div",{id:"google_translate_element"})})})]})},ohe=()=>{const[n,e]=L.useState(!1),[t,r]=L.useState(!1),[i,s]=L.useState(!1),[o,a]=L.useState("en-US"),l=window.speechSynthesis;L.useEffect(()=>()=>{l.cancel()},[]);const c=()=>document.body.innerText,u=()=>{const m=c();if(!m){alert("No text found to read!");return}l.speaking&&l.cancel();const g=new SpeechSynthesisUtterance(m);g.lang=o,g.onend=()=>r(!1),g.onerror=v=>console.error("Speech error:",v),l.speak(g),r(!0),s(!1)},h=()=>{l.speaking&&!i?(l.pause(),s(!0)):i&&(l.resume(),s(!1))},d=()=>{l.cancel(),r(!1),s(!1)};return C.jsxs("div",{className:"fixed bottom-4 right-24 z-50",children:[C.jsx("button",{onClick:()=>e(!n),className:"flex items-center gap-2 px-4 py-2 bg-[#2d457e] text-white rounded hover:bg-[#1d2f5c] transition-colors",children:C.jsx(YY,{className:"w-5 h-5"})}),C.jsx("div",{className:`absolute bottom-full right-0 mb-2 w-64 bg-white rounded shadow-lg border border-gray-200 ${n?"block":"hidden"}`,children:C.jsxs("div",{className:"p-3",children:[C.jsxs("div",{className:"flex justify-between items-center mb-3",children:[C.jsx("span",{className:"font-medium text-gray-700",children:"Read Aloud"}),C.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-gray-600",children:C.jsx(HO,{className:"w-4 h-4"})})]}),C.jsxs("select",{className:"w-full mb-3 p-2 border border-gray-200 rounded text-gray-700",value:o,onChange:m=>a(m.target.value),children:[C.jsx("option",{value:"en-US",children:"English (US)"}),C.jsx("option",{value:"hi-IN",children:"Hindi"}),C.jsx("option",{value:"ta-IN",children:"Tamil"}),C.jsx("option",{value:"te-IN",children:"Telugu"}),C.jsx("option",{value:"mr-IN",children:"Marathi"}),C.jsx("option",{value:"bn-IN",children:"Bengali"}),C.jsx("option",{value:"gu-IN",children:"Gujarati"}),C.jsx("option",{value:"pa-IN",children:"Punjabi"}),C.jsx("option",{value:"ml-IN",children:"Malayalam"}),C.jsx("option",{value:"kn-IN",children:"Kannada"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("button",{onClick:u,disabled:t,className:"w-full px-3 py-2 bg-[#2d457e] text-white rounded hover:bg-[#1d2f5c] transition-colors disabled:opacity-50",children:"📢 Read Aloud"}),C.jsx("button",{onClick:h,disabled:!t,className:"w-full px-3 py-2 bg-[#2d457e] text-white rounded hover:bg-[#1d2f5c] transition-colors disabled:opacity-50",children:i?"▶ Resume":"⏸ Pause"}),C.jsx("button",{onClick:d,disabled:!t,className:"w-full px-3 py-2 bg-[#2d457e] text-white rounded hover:bg-[#1d2f5c] transition-colors disabled:opacity-50",children:"⛔ Stop"})]})]})})]})},ahe=[{name:"Habit 1",description:"Doing homework daily helps you learn and grow!",route:"habit1",image:"📚"},{name:"Habit 2",description:"Brushing your teeth keeps them strong and healthy!",route:"habit2",image:"🪥"},{name:"Habit 3",description:"Respecting elders shows kindness and good manners!",route:"habit3",image:"🙏"},{name:"Habit 4",description:"Keeping your surroundings clean makes life better!",route:"habit4",image:"🧹"},{name:"Habit 5",description:"Should you pick your nose? Think wisely!",route:"habit5",image:"👃"},{name:"Habit 6",description:"Skipping a bath daily? Hygiene matters!",route:"habit6",image:"🚿"}],lhe=()=>{const n=al();return C.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[C.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[C.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"relative left-[calc(50%+11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[-30deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-30 sm:left-[calc(50%+30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"flex flex-col items-center justify-center w-full pt-32",children:C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 max-w-6xl mx-auto",children:ahe.map((e,t)=>C.jsxs("div",{className:"relative backdrop-blur-md  bg-white/20 border border-white/40 shadow-lg rounded-2xl p-5 hover:shadow-2xl transition-transform transform hover:scale-110 cursor-pointer flex flex-col items-center text-center overflow-hidden",onClick:()=>n(`/${e.route}`),children:[C.jsxs("div",{className:"absolute inset-0 -z-10 transform-gpu overflow-hidden blur-2xl","aria-hidden":"true",children:[C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),C.jsx("div",{className:"absolute left-1/2 top-1/2 aspect-[1155/678] w-[200%] -translate-x-1/2 -translate-y-1/2 rotate-[-10deg] bg-gradient-to-bl from-[#9089fc] to-[#ff80b5] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 76.1% 97.7%, 27.6% 76.8%, 17.9% 100%, 0.1% 64.9%, 27.5% 76.7%, 45.2% 34.5%, 47.5% 58.3%, 52.4% 68.1%, 60.2% 62.4%, 72.5% 32.5%, 80.7% 2%, 85.5% 0.1%, 97.5% 26.9%, 100% 61.6%, 74.1% 44.1%)"}})]}),C.jsx("div",{className:"absolute top-4 right-4 z-10"}),C.jsx("div",{className:"flex items-center justify-center mb-4 text-7xl h-24 w-24 bg-purple-100/40 backdrop-blur-sm rounded-full border border-purple-200/50 z-10",children:e.image}),C.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-2 z-10",children:e.name}),C.jsx("p",{className:"text-gray-600 text-sm mb-4 z-10",children:e.description}),C.jsx("button",{onClick:r=>{r.stopPropagation(),n(`/${e.route}`)},className:"px-6 py-2 bg-blue-600/90 backdrop-blur-sm text-white font-bold rounded-lg hover:bg-blue-700 transition-all shadow-md z-10",children:"Play Now"})]},t))})})]})},che=()=>{const n=[{id:1,x:100,y:50},{id:2,x:130,y:75},{id:3,x:100,y:100},{id:4,x:130,y:125},{id:5,x:100,y:150},{id:6,x:175,y:100},{id:7,x:175,y:40},{id:8,x:175,y:160},{id:9,x:140,y:40},{id:10,x:205,y:40}],e=[1,2,3,4,5,4,3,6,8,6,7,9,10],[t,r]=L.useState(null),[i,s]=L.useState([]),[o,a]=L.useState(""),[l,c]=L.useState(0),u=(v,w)=>{const _=(v.x+w.x)/2,A=(v.y+w.y)/2;return v.id===1&&w.id===2||v.id===2&&w.id===3?{x:_+30,y:A}:v.id===3&&w.id===4||v.id===4&&w.id===5||v.id===5&&w.id===4||v.id===4&&w.id===3?{x:_+30,y:A}:null},h=(v,w)=>{const _=e[l],A=e[l+1];return v.id===_&&w.id===A},d=v=>{if(a(""),t){if(!h(t,v)){a(`Connect dot ${e[l]} to dot ${e[l+1]}`),r(null);return}const w={id:`${t.id}-${v.id}-${l}`,start:t,end:v,controlPoint:u(t,v)};s([...i,w]),c(l+1),r(null),l===e.length-2&&a("Success! You completed the sequence correctly!")}else{if(i.length===0&&v.id!==1){a("Start with dot 1");return}if(v.id!==e[l]){a(`Connect dot ${e[l]} next`);return}r(v)}},m=v=>v.controlPoint?`M ${v.start.x} ${v.start.y} 
              Q ${v.controlPoint.x} ${v.controlPoint.y} 
              ${v.end.x} ${v.end.y}`:`M ${v.start.x} ${v.start.y} 
              L ${v.end.x} ${v.end.y}`,g=()=>{s([]),r(null),a(""),c(0)};return C.jsxs("div",{className:"flex flex-col items-center gap-4",children:[C.jsx("h2",{className:"text-2xl font-bold",children:"Connect the Dots: अ"}),C.jsx("div",{className:"relative w-96 h-64 border border-gray-300 rounded-lg",children:C.jsxs("svg",{className:"w-full h-full",viewBox:"50 0 200 200",children:[i.map(v=>C.jsx("path",{d:m(v),stroke:"black",strokeWidth:"2",fill:"none"},v.id)),n.map(v=>C.jsxs("g",{children:[C.jsx("circle",{cx:v.x,cy:v.y,r:"6",fill:(t==null?void 0:t.id)===v.id?"red":"blue",onClick:()=>d(v),className:"cursor-pointer"}),C.jsx("text",{x:v.x,y:v.y-10,textAnchor:"middle",className:"text-xs fill-black",children:v.id})]},v.id))]})}),C.jsxs("div",{className:"flex flex-col items-center gap-2",children:[C.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reset"}),C.jsx("p",{className:`text-sm ${o.includes("Success")?"text-green-500":"text-red-500"} font-medium`,children:o}),C.jsx("p",{className:"text-sm text-gray-600",children:"Connect dots in sequence: 1 → 2 → 3 → 4 → 5 → 4 → 3 → 6 → 8 → 6 → 7 → 9 → 10"})]})]})},uhe=()=>{const[n,e]=L.useState(!1),t=r=>{const i=document.getElementById("yesButton1"),s=document.getElementById("noButton1");r==="Yes"?(i.style.backgroundColor="green",s.style.backgroundColor="#d1d5db",e(!0),setTimeout(()=>e(!1),1500)):r==="No"&&(s.style.backgroundColor="red",i.style.backgroundColor="#d1d5db")};return C.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-b from-emerald-400 to-lime-200",children:C.jsxs("div",{className:"w-[400px] h-[480px] bg-white rounded-2xl shadow-2xl flex flex-col justify-between p-6 relative",children:[C.jsxs("div",{className:"text-center flex flex-col items-center",children:[C.jsx("div",{className:"text-xl font-bold mb-3",children:"Should do homework?"}),C.jsx("img",{src:"/images/team/learnings/habit1.png",alt:"Habit Image",className:"w-[65%] h-auto mb-3"})]}),n&&C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-lg font-bold animate-pulse",children:"Correct! ✅"}),C.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3",children:[C.jsx("button",{id:"yesButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("Yes"),children:"Yes"}),C.jsx("button",{id:"noButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("No"),children:"No"})]})]})})},hhe=()=>{const[n,e]=L.useState(!1),t=r=>{const i=document.getElementById("yesButton1"),s=document.getElementById("noButton1");r==="Yes"?(i.style.backgroundColor="green",s.style.backgroundColor="#d1d5db",e(!0),setTimeout(()=>e(!1),1500)):r==="No"&&(s.style.backgroundColor="red",i.style.backgroundColor="#d1d5db")};return C.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-b from-emerald-400 to-lime-200",children:C.jsxs("div",{className:"w-[400px] h-[480px] bg-white rounded-2xl shadow-2xl flex flex-col justify-between p-6 relative",children:[C.jsxs("div",{className:"text-center flex flex-col items-center",children:[C.jsx("div",{className:"text-xl font-bold mb-3",children:"Should brush teeth?"}),C.jsx("img",{src:"/images/team/learnings/habit3.png",alt:"Habit Image",className:"w-[65%] h-auto mb-3"})]}),n&&C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-lg font-bold animate-pulse",children:"Correct! ✅"}),C.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3",children:[C.jsx("button",{id:"yesButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("Yes"),children:"Yes"}),C.jsx("button",{id:"noButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("No"),children:"No"})]})]})})},fhe=()=>{const[n,e]=L.useState(!1),t=r=>{const i=document.getElementById("yesButton1"),s=document.getElementById("noButton1");r==="Yes"?(i.style.backgroundColor="green",s.style.backgroundColor="#d1d5db",e(!0),setTimeout(()=>e(!1),1500)):r==="No"&&(s.style.backgroundColor="red",i.style.backgroundColor="#d1d5db")};return C.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-b from-emerald-400 to-lime-200",children:C.jsxs("div",{className:"w-[400px] h-[480px] bg-white rounded-2xl shadow-2xl flex flex-col justify-between p-6 relative",children:[C.jsxs("div",{className:"text-center flex flex-col items-center",children:[C.jsx("div",{className:"text-xl font-bold mb-3",children:"Should respect elders?"}),C.jsx("img",{src:"/images/team/learnings/habit2.png",alt:"Habit Image",className:"w-[65%] h-auto mb-3"})]}),n&&C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-lg font-bold animate-pulse",children:"Correct! ✅"}),C.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3",children:[C.jsx("button",{id:"yesButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("Yes"),children:"Yes"}),C.jsx("button",{id:"noButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("No"),children:"No"})]})]})})},dhe=()=>{const[n,e]=L.useState(!1),t=r=>{const i=document.getElementById("yesButton1"),s=document.getElementById("noButton1");r==="Yes"?(i.style.backgroundColor="green",s.style.backgroundColor="#d1d5db",e(!0),setTimeout(()=>e(!1),1500)):r==="No"&&(s.style.backgroundColor="red",i.style.backgroundColor="#d1d5db")};return C.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-b from-emerald-400 to-lime-200",children:C.jsxs("div",{className:"w-[400px] h-[480px] bg-white rounded-2xl shadow-2xl flex flex-col justify-between p-6 relative",children:[C.jsxs("div",{className:"text-center flex flex-col items-center",children:[C.jsx("div",{className:"text-xl font-bold mb-3",children:"Should keep surrounding clean?"}),C.jsx("img",{src:"/images/team/learnings/habit4.png",alt:"Habit Image",className:"w-[65%] h-auto mb-3"})]}),n&&C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-lg font-bold animate-pulse",children:"Correct! ✅"}),C.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3",children:[C.jsx("button",{id:"yesButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("Yes"),children:"Yes"}),C.jsx("button",{id:"noButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("No"),children:"No"})]})]})})},phe=()=>{const[n,e]=L.useState(!1),t=r=>{const i=document.getElementById("yesButton1"),s=document.getElementById("noButton1");r==="No"?(s.style.backgroundColor="green",i.style.backgroundColor="#d1d5db",e(!0),setTimeout(()=>e(!1),1500)):r==="Yes"&&(i.style.backgroundColor="red",s.style.backgroundColor="#d1d5db")};return C.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-b from-emerald-400 to-lime-200",children:C.jsxs("div",{className:"w-[400px] h-[480px] bg-white rounded-2xl shadow-2xl flex flex-col justify-between p-6 relative",children:[C.jsxs("div",{className:"text-center flex flex-col items-center",children:[C.jsx("div",{className:"text-xl font-bold mb-3",children:"Should pick your nose?"}),C.jsx("img",{src:"/images/team/learnings/habit5.png",alt:"Habit Image",className:"w-[47%] h-auto mb-3"})]}),n&&C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-lg font-bold animate-pulse",children:"Correct! ✅"}),C.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3",children:[C.jsx("button",{id:"yesButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("Yes"),children:"Yes"}),C.jsx("button",{id:"noButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("No"),children:"No"})]})]})})},mhe=()=>{const[n,e]=L.useState(!1),t=r=>{const i=document.getElementById("yesButton1"),s=document.getElementById("noButton1");r==="No"?(s.style.backgroundColor="green",i.style.backgroundColor="#d1d5db",e(!0),setTimeout(()=>e(!1),1500)):r==="Yes"&&(i.style.backgroundColor="red",s.style.backgroundColor="#d1d5db")};return C.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-b from-emerald-400 to-lime-200",children:C.jsxs("div",{className:"w-[400px] h-[480px] bg-white rounded-2xl shadow-2xl flex flex-col justify-between p-6 relative",children:[C.jsxs("div",{className:"text-center flex flex-col items-center",children:[C.jsx("div",{className:"text-xl font-bold mb-3",children:"Should not bath daily?"}),C.jsx("img",{src:"/images/team/learnings/habit6.png",alt:"Habit Image",className:"w-[75%] h-auto mb-3"})]}),n&&C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-md text-lg font-bold animate-pulse",children:"Correct! ✅"}),C.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3",children:[C.jsx("button",{id:"yesButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("Yes"),children:"Yes"}),C.jsx("button",{id:"noButton1",className:"bg-gray-100 text-black text-lg px-4 py-2 rounded-lg shadow-md w-3/4 hover:bg-white transition duration-200",onClick:()=>t("No"),children:"No"})]})]})})},bP=L.createContext({});function AP(n){const e=L.useRef(null);return e.current===null&&(e.current=n()),e.current}const SP=typeof window<"u",f6=SP?L.useLayoutEffect:L.useEffect,sS=L.createContext(null);function CP(n,e){n.indexOf(e)===-1&&n.push(e)}function TP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $u=(n,e,t)=>t>e?e:t<n?n:t;let gb=()=>{};const Xu={},d6=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function p6(n){return typeof n=="object"&&n!==null}const m6=n=>/^0[^.\s]+$/u.test(n);function EP(n){let e;return()=>(e===void 0&&(e=n()),e)}const nl=n=>n,ghe=(n,e)=>t=>e(n(t)),kv=(...n)=>n.reduce(ghe),Ux=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class MP{constructor(){this.subscriptions=[]}add(e){return CP(this.subscriptions,e),()=>TP(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Lc=n=>n*1e3,Dc=n=>n/1e3;function g6(n,e){return e?n*(1e3/e):0}const y6=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,yhe=1e-7,xhe=12;function vhe(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=y6(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>yhe&&++a<xhe);return o}function Bv(n,e,t,r){if(n===e&&t===r)return nl;const i=s=>vhe(s,0,1,n,t);return s=>s===0||s===1?s:y6(i(s),e,r)}const x6=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,v6=n=>e=>1-n(1-e),_6=Bv(.33,1.53,.69,.99),RP=v6(_6),w6=x6(RP),b6=n=>(n*=2)<1?.5*RP(n):.5*(2-Math.pow(2,-10*(n-1))),PP=n=>1-Math.sin(Math.acos(n)),A6=v6(PP),S6=x6(PP),_he=Bv(.42,0,1,1),whe=Bv(0,0,.58,1),C6=Bv(.42,0,.58,1),bhe=n=>Array.isArray(n)&&typeof n[0]!="number",T6=n=>Array.isArray(n)&&typeof n[0]=="number",eF={linear:nl,easeIn:_he,easeInOut:C6,easeOut:whe,circIn:PP,circInOut:S6,circOut:A6,backIn:RP,backInOut:w6,backOut:_6,anticipate:b6},Ahe=n=>typeof n=="string",tF=n=>{if(T6(n)){gb(n.length===4);const[e,t,r,i]=n;return Bv(e,t,r,i)}else if(Ahe(n))return gb(eF[n]!==void 0),eF[n];return n},D_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function She(n,e){let t=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),n()),u(a)}const c={schedule:(u,h=!1,d=!1)=>{const g=d&&i?t:r;return h&&o.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const Che=40;function E6(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=D_.reduce((S,R)=>(S[R]=She(s),S),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:d,render:m,postRender:g}=o,v=()=>{const S=Xu.useManualTiming?i.timestamp:performance.now();t=!1,Xu.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,Che),1)),i.timestamp=S,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),d.process(i),m.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(v))},w=()=>{t=!0,r=!0,i.isProcessing||n(v)};return{schedule:D_.reduce((S,R)=>{const B=o[R];return S[R]=(I,N=!1,U=!1)=>(t||w(),B.schedule(I,N,U)),S},{}),cancel:S=>{for(let R=0;R<D_.length;R++)o[D_[R]].cancel(S)},state:i,steps:o}}const{schedule:Ei,cancel:hf,state:Vs,steps:YT}=E6(typeof requestAnimationFrame<"u"?requestAnimationFrame:nl,!0);let ow;function The(){ow=void 0}const na={now:()=>(ow===void 0&&na.set(Vs.isProcessing||Xu.useManualTiming?Vs.timestamp:performance.now()),ow),set:n=>{ow=n,queueMicrotask(The)}},M6=n=>e=>typeof e=="string"&&e.startsWith(n),kP=M6("--"),Ehe=M6("var(--"),BP=n=>Ehe(n)?Mhe.test(n.split("/*")[0].trim()):!1,Mhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ty={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},zx={...ty,transform:n=>$u(0,1,n)},F_={...ty,default:1},ox=n=>Math.round(n*1e5)/1e5,IP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rhe(n){return n==null}const Phe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,LP=(n,e)=>t=>!!(typeof t=="string"&&Phe.test(t)&&t.startsWith(n)||e&&!Rhe(t)&&Object.prototype.hasOwnProperty.call(t,e)),R6=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(IP);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},khe=n=>$u(0,255,n),KT={...ty,transform:n=>Math.round(khe(n))},zd={test:LP("rgb","red"),parse:R6("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+KT.transform(n)+", "+KT.transform(e)+", "+KT.transform(t)+", "+ox(zx.transform(r))+")"};function Bhe(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const AM={test:LP("#"),parse:Bhe,transform:zd.transform},Iv=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Yh=Iv("deg"),Fc=Iv("%"),Fn=Iv("px"),Ihe=Iv("vh"),Lhe=Iv("vw"),nF={...Fc,parse:n=>Fc.parse(n)/100,transform:n=>Fc.transform(n*100)},Ym={test:LP("hsl","hue"),parse:R6("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Fc.transform(ox(e))+", "+Fc.transform(ox(t))+", "+ox(zx.transform(r))+")"},ns={test:n=>zd.test(n)||AM.test(n)||Ym.test(n),parse:n=>zd.test(n)?zd.parse(n):Ym.test(n)?Ym.parse(n):AM.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?zd.transform(n):Ym.transform(n),getAnimatableNone:n=>{const e=ns.parse(n);return e.alpha=0,ns.transform(e)}},Dhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fhe(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(IP))==null?void 0:e.length)||0)+(((t=n.match(Dhe))==null?void 0:t.length)||0)>0}const P6="number",k6="color",Nhe="var",Ohe="var(",rF="${}",Uhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hx(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Uhe,l=>(ns.test(l)?(r.color.push(s),i.push(k6),t.push(ns.parse(l))):l.startsWith(Ohe)?(r.var.push(s),i.push(Nhe),t.push(l)):(r.number.push(s),i.push(P6),t.push(parseFloat(l))),++s,rF)).split(rF);return{values:t,split:a,indexes:r,types:i}}function B6(n){return Hx(n).values}function I6(n){const{split:e,types:t}=Hx(n),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=t[o];a===P6?s+=ox(i[o]):a===k6?s+=ns.transform(i[o]):s+=i[o]}return s}}const zhe=n=>typeof n=="number"?0:ns.test(n)?ns.getAnimatableNone(n):n;function Hhe(n){const e=B6(n);return I6(n)(e.map(zhe))}const ff={test:Fhe,parse:B6,createTransformer:I6,getAnimatableNone:Hhe};function JT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function jhe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=JT(l,a,n+1/3),s=JT(l,a,n),o=JT(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function yb(n,e){return t=>t>0?e:n}const Ci=(n,e,t)=>n+(e-n)*t,ZT=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Ghe=[AM,zd,Ym],Vhe=n=>Ghe.find(e=>e.test(n));function iF(n){const e=Vhe(n);if(!e)return!1;let t=e.parse(n);return e===Ym&&(t=jhe(t)),t}const sF=(n,e)=>{const t=iF(n),r=iF(e);if(!t||!r)return yb(n,e);const i={...t};return s=>(i.red=ZT(t.red,r.red,s),i.green=ZT(t.green,r.green,s),i.blue=ZT(t.blue,r.blue,s),i.alpha=Ci(t.alpha,r.alpha,s),zd.transform(i))},SM=new Set(["none","hidden"]);function Whe(n,e){return SM.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function $he(n,e){return t=>Ci(n,e,t)}function DP(n){return typeof n=="number"?$he:typeof n=="string"?BP(n)?yb:ns.test(n)?sF:Yhe:Array.isArray(n)?L6:typeof n=="object"?ns.test(n)?sF:Xhe:yb}function L6(n,e){const t=[...n],r=t.length,i=n.map((s,o)=>DP(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}}function Xhe(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=DP(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function qhe(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=n.indexes[s][r[s]],a=n.values[o]??0;t[i]=a,r[s]++}return t}const Yhe=(n,e)=>{const t=ff.createTransformer(e),r=Hx(n),i=Hx(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?SM.has(n)&&!i.values.length||SM.has(e)&&!r.values.length?Whe(n,e):kv(L6(qhe(r,i),i.values),t):yb(n,e)};function D6(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ci(n,e,t):DP(n)(n,e)}const Khe=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Ei.update(e,t),stop:()=>hf(e),now:()=>Vs.isProcessing?Vs.timestamp:na.now()}},F6=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},xb=2e4;function FP(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<xb;)e+=t,r=n.next(e);return e>=xb?1/0:e}function Jhe(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(FP(r),xb);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Dc(i)}}const Zhe=5;function N6(n,e,t){const r=Math.max(e-Zhe,0);return g6(t-n(r),e-r)}const Fi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oF=.001;function Qhe({duration:n=Fi.duration,bounce:e=Fi.bounce,velocity:t=Fi.velocity,mass:r=Fi.mass}){let i,s,o=1-e;o=$u(Fi.minDamping,Fi.maxDamping,o),n=$u(Fi.minDuration,Fi.maxDuration,Dc(n)),o<1?(i=c=>{const u=c*o,h=u*n,d=u-t,m=CM(c,o),g=Math.exp(-h);return oF-d/m*g},s=c=>{const h=c*o*n,d=h*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,g=Math.exp(-h),v=CM(Math.pow(c,2),o);return(-i(c)+oF>0?-1:1)*((d-m)*g)/v}):(i=c=>{const u=Math.exp(-c*n),h=(c-t)*n+1;return-.001+u*h},s=c=>{const u=Math.exp(-c*n),h=(t-c)*(n*n);return u*h});const a=5/n,l=tfe(i,s,a);if(n=Lc(n),isNaN(l))return{stiffness:Fi.stiffness,damping:Fi.damping,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:n}}}const efe=12;function tfe(n,e,t){let r=t;for(let i=1;i<efe;i++)r=r-n(r)/e(r);return r}function CM(n,e){return n*Math.sqrt(1-e*e)}const nfe=["duration","bounce"],rfe=["stiffness","damping","mass"];function aF(n,e){return e.some(t=>n[t]!==void 0)}function ife(n){let e={velocity:Fi.velocity,stiffness:Fi.stiffness,damping:Fi.damping,mass:Fi.mass,isResolvedFromDuration:!1,...n};if(!aF(n,rfe)&&aF(n,nfe))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*$u(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Fi.mass,stiffness:i,damping:s}}else{const t=Qhe(n);e={...e,...t,mass:Fi.mass},e.isResolvedFromDuration=!0}return e}function vb(n=Fi.visualDuration,e=Fi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:m}=ife({...t,velocity:-Dc(t.velocity||0)}),g=d||0,v=c/(2*Math.sqrt(l*u)),w=o-s,_=Dc(Math.sqrt(l/u)),A=Math.abs(w)<5;r||(r=A?Fi.restSpeed.granular:Fi.restSpeed.default),i||(i=A?Fi.restDelta.granular:Fi.restDelta.default);let S;if(v<1){const B=CM(_,v);S=I=>{const N=Math.exp(-v*_*I);return o-N*((g+v*_*w)/B*Math.sin(B*I)+w*Math.cos(B*I))}}else if(v===1)S=B=>o-Math.exp(-_*B)*(w+(g+_*w)*B);else{const B=_*Math.sqrt(v*v-1);S=I=>{const N=Math.exp(-v*_*I),U=Math.min(B*I,300);return o-N*((g+v*_*w)*Math.sinh(U)+B*w*Math.cosh(U))/B}}const R={calculatedDuration:m&&h||null,next:B=>{const I=S(B);if(m)a.done=B>=h;else{let N=B===0?g:0;v<1&&(N=B===0?Lc(g):N6(S,B,I));const U=Math.abs(N)<=r,O=Math.abs(o-I)<=i;a.done=U&&O}return a.value=a.done?o:I,a},toString:()=>{const B=Math.min(FP(R),xb),I=F6(N=>R.next(B*N).value,B,30);return B+"ms "+I},toTransition:()=>{}};return R}vb.applyToOptions=n=>{const e=Jhe(n,100,vb);return n.ease=e.ease,n.duration=Lc(e.duration),n.type="keyframes",n};function TM({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=n[0],d={done:!1,value:h},m=U=>a!==void 0&&U<a||l!==void 0&&U>l,g=U=>a===void 0?l:l===void 0||Math.abs(a-U)<Math.abs(l-U)?a:l;let v=t*e;const w=h+v,_=o===void 0?w:o(w);_!==w&&(v=_-h);const A=U=>-v*Math.exp(-U/r),S=U=>_+A(U),R=U=>{const O=A(U),P=S(U);d.done=Math.abs(O)<=c,d.value=d.done?_:P};let B,I;const N=U=>{m(d.value)&&(B=U,I=vb({keyframes:[d.value,g(d.value)],velocity:N6(S,U,d.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return N(0),{calculatedDuration:null,next:U=>{let O=!1;return!I&&B===void 0&&(O=!0,R(U),N(U)),B!==void 0&&U>=B?I.next(U-B):(!O&&R(U),d)}}}function sfe(n,e,t){const r=[],i=t||Xu.mix||D6,s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||nl:e;a=kv(l,a)}r.push(a)}return r}function ofe(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(gb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=sfe(e,r,i),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const d=Ux(n[h],n[h+1],u);return a[h](d)};return t?u=>c($u(n[0],n[s-1],u)):c}function afe(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ux(0,e,r);n.push(Ci(t,1,i))}}function lfe(n){const e=[0];return afe(e,n.length-1),e}function cfe(n,e){return n.map(t=>t*e)}function ufe(n,e){return n.map(()=>e||C6).splice(0,n.length-1)}function ax({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=bhe(r)?r.map(tF):tF(r),s={done:!1,value:e[0]},o=cfe(t&&t.length===e.length?t:lfe(e),n),a=ofe(o,e,{ease:Array.isArray(i)?i:ufe(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const hfe=n=>n!==null;function NP(n,{repeat:e,repeatType:t="loop"},r,i=1){const s=n.filter(hfe),a=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const ffe={decay:TM,inertia:TM,tween:ax,keyframes:ax,spring:vb};function O6(n){typeof n.type=="string"&&(n.type=ffe[n.type])}class OP{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const dfe=n=>n/100;class UP extends OP{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==na.now()&&this.tick(na.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;O6(e);const{type:t=ax,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||ax;l!==ax&&typeof a[0]!="number"&&(this.mixKeyframes=kv(dfe,D6(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=FP(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:d,repeatDelay:m,type:g,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const _=this.currentTime-c*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,R=r;if(h){const U=Math.min(this.currentTime,i)/a;let O=Math.floor(U),P=U%1;!P&&U>=1&&(P=1),P===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(d==="reverse"?(P=1-P,m&&(P-=m/a)):d==="mirror"&&(R=o)),S=$u(0,1,P)*a}const B=A?{done:!1,value:u[0]}:R.next(S);s&&(B.value=s(B.value));let{done:I}=B;!A&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return N&&g!==TM&&(B.value=NP(u,this.options,w,this.speed)),v&&v(B.value),N&&this.finish(),B}then(e,t){return this.finished.then(e,t)}get duration(){return Dc(this.calculatedDuration)}get time(){return Dc(this.currentTime)}set time(e){var t;e=Lc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(na.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Dc(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Khe,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(na.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function pfe(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Hd=n=>n*180/Math.PI,EM=n=>{const e=Hd(Math.atan2(n[1],n[0]));return MM(e)},mfe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:EM,rotateZ:EM,skewX:n=>Hd(Math.atan(n[1])),skewY:n=>Hd(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},MM=n=>(n=n%360,n<0&&(n+=360),n),lF=EM,cF=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),uF=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),gfe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:cF,scaleY:uF,scale:n=>(cF(n)+uF(n))/2,rotateX:n=>MM(Hd(Math.atan2(n[6],n[5]))),rotateY:n=>MM(Hd(Math.atan2(-n[2],n[0]))),rotateZ:lF,rotate:lF,skewX:n=>Hd(Math.atan(n[4])),skewY:n=>Hd(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function RM(n){return n.includes("scale")?1:0}function PM(n,e){if(!n||n==="none")return RM(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=gfe,i=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=mfe,i=a}if(!i)return RM(e);const s=r[e],o=i[1].split(",").map(xfe);return typeof s=="function"?s(o):o[s]}const yfe=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return PM(t,e)};function xfe(n){return parseFloat(n.trim())}const ny=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ry=new Set(ny),hF=n=>n===ty||n===Fn,vfe=new Set(["x","y","z"]),_fe=ny.filter(n=>!vfe.has(n));function wfe(n){const e=[];return _fe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Qd={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>PM(e,"x"),y:(n,{transform:e})=>PM(e,"y")};Qd.translateX=Qd.x;Qd.translateY=Qd.y;const ep=new Set;let kM=!1,BM=!1,IM=!1;function U6(){if(BM){const n=Array.from(ep).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=wfe(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}BM=!1,kM=!1,ep.forEach(n=>n.complete(IM)),ep.clear()}function z6(){ep.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(BM=!0)})}function bfe(){IM=!0,z6(),U6(),IM=!1}class zP{constructor(e,t,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ep.add(this),kM||(kM=!0,Ei.read(z6),Ei.resolveKeyframes(U6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const a=r.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}pfe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ep.delete(this)}cancel(){this.state==="scheduled"&&(ep.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Afe=n=>n.startsWith("--");function Sfe(n,e,t){Afe(e)?n.style.setProperty(e,t):n.style[e]=t}const Cfe=EP(()=>window.ScrollTimeline!==void 0),Tfe={};function Efe(n,e){const t=EP(n);return()=>Tfe[e]??t()}const H6=Efe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),O0=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,fF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:O0([0,.65,.55,1]),circOut:O0([.55,0,1,.45]),backIn:O0([.31,.01,.66,-.59]),backOut:O0([.33,1.53,.69,.99])};function j6(n,e){if(n)return typeof n=="function"?H6()?F6(n,e):"ease-out":T6(n)?O0(n):Array.isArray(n)?n.map(t=>j6(t,e)||fF.easeOut):fF[n]}function Mfe(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:t};l&&(u.offset=l);const h=j6(a,i);Array.isArray(h)&&(u.easing=h);const d={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(d.pseudoElement=c),n.animate(u,d)}function G6(n){return typeof n=="function"&&"applyToOptions"in n}function Rfe({type:n,...e}){return G6(n)&&H6()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Pfe extends OP{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,gb(typeof e.type!="string");const c=Rfe(e);this.animation=Mfe(t,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=NP(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Sfe(t,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Dc(Number(e))}get time(){return Dc(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Lc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Cfe()?(this.animation.timeline=e,nl):t(this)}}const V6={anticipate:b6,backInOut:w6,circInOut:S6};function kfe(n){return n in V6}function Bfe(n){typeof n.ease=="string"&&kfe(n.ease)&&(n.ease=V6[n.ease])}const dF=10;class Ife extends Pfe{constructor(e){Bfe(e),O6(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new UP({...o,autoplay:!1}),l=Lc(this.finishedTime??this.time);t.setWithVelocity(a.sample(l-dF).value,a.sample(l).value,dF),a.stop()}}const pF=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ff.test(n)||n==="0")&&!n.startsWith("url("));function Lfe(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Dfe(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=pF(i,e),a=pF(s,e);return!o||!a?!1:Lfe(n)||(t==="spring"||G6(t))&&r}function HP(n){return p6(n)&&"offsetHeight"in n}const Ffe=new Set(["opacity","clipPath","filter","transform"]),Nfe=EP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ofe(n){var c;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:s,type:o}=n;if(!HP((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return Nfe()&&t&&Ffe.has(t)&&(t!=="transform"||!l)&&!a&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Ufe=40;class zfe extends OP{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var g;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=na.now();const d={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...h},m=(u==null?void 0:u.KeyframeResolver)||zP;this.keyframeResolver=new m(a,(v,w,_)=>this.onKeyframesResolved(v,w,d,!_),l,c,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=na.now(),Dfe(e,s,o,a)||((Xu.instantAnimations||!l)&&(u==null||u(NP(e,r,t))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Ufe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},m=!c&&Ofe(d)?new Ife({...d,element:d.motionValue.owner.current}):new UP(d);m.finished.then(()=>this.notifyFinished()).catch(nl),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),bfe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Hfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jfe(n){const e=Hfe.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function W6(n,e,t=1){const[r,i]=jfe(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return d6(o)?parseFloat(o):o}return BP(i)?W6(i,e,t+1):i}function jP(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const $6=new Set(["width","height","top","left","right","bottom",...ny]),Gfe={test:n=>n==="auto",parse:n=>n},X6=n=>e=>e.test(n),q6=[ty,Fn,Fc,Yh,Lhe,Ihe,Gfe],mF=n=>q6.find(X6(n));function Vfe(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||m6(n):!0}const Wfe=new Set(["brightness","contrast","saturate","opacity"]);function $fe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(IP)||[];if(!r)return n;const i=t.replace(r,"");let s=Wfe.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const Xfe=/\b([a-z-]*)\(.*?\)/gu,LM={...ff,getAnimatableNone:n=>{const e=n.match(Xfe);return e?e.map($fe).join(" "):n}},gF={...ty,transform:Math.round},qfe={rotate:Yh,rotateX:Yh,rotateY:Yh,rotateZ:Yh,scale:F_,scaleX:F_,scaleY:F_,scaleZ:F_,skew:Yh,skewX:Yh,skewY:Yh,distance:Fn,translateX:Fn,translateY:Fn,translateZ:Fn,x:Fn,y:Fn,z:Fn,perspective:Fn,transformPerspective:Fn,opacity:zx,originX:nF,originY:nF,originZ:Fn},GP={borderWidth:Fn,borderTopWidth:Fn,borderRightWidth:Fn,borderBottomWidth:Fn,borderLeftWidth:Fn,borderRadius:Fn,radius:Fn,borderTopLeftRadius:Fn,borderTopRightRadius:Fn,borderBottomRightRadius:Fn,borderBottomLeftRadius:Fn,width:Fn,maxWidth:Fn,height:Fn,maxHeight:Fn,top:Fn,right:Fn,bottom:Fn,left:Fn,padding:Fn,paddingTop:Fn,paddingRight:Fn,paddingBottom:Fn,paddingLeft:Fn,margin:Fn,marginTop:Fn,marginRight:Fn,marginBottom:Fn,marginLeft:Fn,backgroundPositionX:Fn,backgroundPositionY:Fn,...qfe,zIndex:gF,fillOpacity:zx,strokeOpacity:zx,numOctaves:gF},Yfe={...GP,color:ns,backgroundColor:ns,outlineColor:ns,fill:ns,stroke:ns,borderColor:ns,borderTopColor:ns,borderRightColor:ns,borderBottomColor:ns,borderLeftColor:ns,filter:LM,WebkitFilter:LM},Y6=n=>Yfe[n];function K6(n,e){let t=Y6(n);return t!==LM&&(t=ff),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Kfe=new Set(["auto","none","0"]);function Jfe(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Kfe.has(s)&&Hx(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=K6(t,i)}class Zfe extends zP{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),BP(c))){const u=W6(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$6.has(r)||e.length!==2)return;const[i,s]=e,o=mF(i),a=mF(s);if(o!==a)if(hF(o)&&hF(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Qd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Vfe(e[i]))&&r.push(i);r.length&&Jfe(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Qd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Qfe(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const i=document.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const J6=(n,e)=>e&&typeof n=="number"?e.transform(n):n,yF=30,ede=n=>!isNaN(parseFloat(n));class tde{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var o,a;const s=na.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=na.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ede(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new MP);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ei.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=na.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yF)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,yF);return g6(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mg(n,e){return new tde(n,e)}const{schedule:VP,cancel:d2e}=E6(queueMicrotask,!1),Nl={x:!1,y:!1};function Z6(){return Nl.x||Nl.y}function nde(n){return n==="x"||n==="y"?Nl[n]?null:(Nl[n]=!0,()=>{Nl[n]=!1}):Nl.x||Nl.y?null:(Nl.x=Nl.y=!0,()=>{Nl.x=Nl.y=!1})}function Q6(n,e){const t=Qfe(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function xF(n){return!(n.pointerType==="touch"||Z6())}function rde(n,e,t={}){const[r,i,s]=Q6(n,t),o=a=>{if(!xF(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{xF(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const eH=(n,e)=>e?n===e?!0:eH(n,e.parentElement):!1,WP=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ide=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sde(n){return ide.has(n.tagName)||n.tabIndex!==-1}const aw=new WeakSet;function vF(n){return e=>{e.key==="Enter"&&n(e)}}function QT(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ode=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=vF(()=>{if(aw.has(t))return;QT(t,"down");const i=vF(()=>{QT(t,"up")}),s=()=>QT(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function _F(n){return WP(n)&&!Z6()}function ade(n,e,t={}){const[r,i,s]=Q6(n,t),o=a=>{const l=a.currentTarget;if(!_F(a))return;aw.add(l);const c=e(l,a),u=(m,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),aw.has(l)&&aw.delete(l),_F(m)&&typeof c=="function"&&c(m,{success:g})},h=m=>{u(m,l===window||l===document||t.useGlobalTarget||eH(l,m.target))},d=m=>{u(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return r.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),HP(a)&&(a.addEventListener("focus",c=>ode(c,i)),!sde(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function tH(n){return p6(n)&&"ownerSVGElement"in n}function lde(n){return tH(n)&&n.tagName==="svg"}const fo=n=>!!(n&&n.getVelocity),cde=[...q6,ns,ff],ude=n=>cde.find(X6(n)),$P=L.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class hde extends L.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=HP(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function fde({children:n,isPresent:e,anchorX:t}){const r=L.useId(),i=L.useRef(null),s=L.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=L.useContext($P);return L.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u,right:h}=s.current;if(e||!i.current||!a||!l)return;const d=t==="left"?`left: ${u}`:`right: ${h}`;i.current.dataset.motionPopId=r;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${d}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(m)&&document.head.removeChild(m)}},[e]),C.jsx(hde,{isPresent:e,childRef:i,sizeRef:s,children:L.cloneElement(n,{ref:i})})}const dde=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a})=>{const l=AP(pde),c=L.useId();let u=!0,h=L.useMemo(()=>(u=!1,{id:c,initial:e,isPresent:t,custom:i,onExitComplete:d=>{l.set(d,!0);for(const m of l.values())if(!m)return;r&&r()},register:d=>(l.set(d,!1),()=>l.delete(d))}),[t,l,r]);return s&&u&&(h={...h}),L.useMemo(()=>{l.forEach((d,m)=>l.set(m,!1))},[t]),L.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),o==="popLayout"&&(n=C.jsx(fde,{isPresent:t,anchorX:a,children:n})),C.jsx(sS.Provider,{value:h,children:n})};function pde(){return new Map}function nH(n=!0){const e=L.useContext(sS);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=L.useId();L.useEffect(()=>{if(n)return i(s)},[n]);const o=L.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,o]:[!0]}const N_=n=>n.key||"";function wF(n){const e=[];return L.Children.forEach(n,t=>{L.isValidElement(t)&&e.push(t)}),e}const mde=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=nH(o),u=L.useMemo(()=>wF(n),[n]),h=o&&!l?[]:u.map(N_),d=L.useRef(!0),m=L.useRef(u),g=AP(()=>new Map),[v,w]=L.useState(u),[_,A]=L.useState(u);f6(()=>{d.current=!1,m.current=u;for(let B=0;B<_.length;B++){const I=N_(_[B]);h.includes(I)?g.delete(I):g.get(I)!==!0&&g.set(I,!1)}},[_,h.length,h.join("-")]);const S=[];if(u!==v){let B=[...u];for(let I=0;I<_.length;I++){const N=_[I],U=N_(N);h.includes(U)||(B.splice(I,0,N),S.push(N))}return s==="wait"&&S.length&&(B=S),A(wF(B)),w(u),null}const{forceRender:R}=L.useContext(bP);return C.jsx(C.Fragment,{children:_.map(B=>{const I=N_(B),N=o&&!l?!1:u===_||h.includes(I),U=()=>{if(g.has(I))g.set(I,!0);else return;let O=!0;g.forEach(P=>{P||(O=!1)}),O&&(R==null||R(),A(m.current),o&&(c==null||c()),r&&r())};return C.jsx(dde,{isPresent:N,initial:!d.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,onExitComplete:N?void 0:U,anchorX:a,children:B},I)})})},rH=L.createContext({strict:!1}),bF={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rg={};for(const n in bF)Rg[n]={isEnabled:e=>bF[n].some(t=>!!e[t])};function gde(n){for(const e in n)Rg[e]={...Rg[e],...n[e]}}const yde=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _b(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||yde.has(n)}let iH=n=>!_b(n);function xde(n){typeof n=="function"&&(iH=e=>e.startsWith("on")?!_b(e):n(e))}try{xde(require("@emotion/is-prop-valid").default)}catch{}function vde(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(iH(i)||t===!0&&_b(i)||!e&&!_b(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function _de(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const oS=L.createContext({});function aS(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function jx(n){return typeof n=="string"||Array.isArray(n)}const XP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qP=["initial",...XP];function lS(n){return aS(n.animate)||qP.some(e=>jx(n[e]))}function sH(n){return!!(lS(n)||n.variants)}function wde(n,e){if(lS(n)){const{initial:t,animate:r}=n;return{initial:t===!1||jx(t)?t:void 0,animate:jx(r)?r:void 0}}return n.inherit!==!1?e:{}}function bde(n){const{initial:e,animate:t}=wde(n,L.useContext(oS));return L.useMemo(()=>({initial:e,animate:t}),[AF(e),AF(t)])}function AF(n){return Array.isArray(n)?n.join(" "):n}const Ade=Symbol.for("motionComponentSymbol");function Km(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Sde(n,e,t){return L.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Km(t)&&(t.current=r))},[e])}const YP=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cde="framerAppearId",oH="data-"+YP(Cde),aH=L.createContext({});function Tde(n,e,t,r,i){var v,w;const{visualElement:s}=L.useContext(oS),o=L.useContext(rH),a=L.useContext(sS),l=L.useContext($P).reducedMotion,c=L.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=L.useContext(aH);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&Ede(c.current,t,i,h);const d=L.useRef(!1);L.useInsertionEffect(()=>{u&&d.current&&u.update(t,a)});const m=t[oH],g=L.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,m)));return f6(()=>{u&&(d.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),VP.render(u.render),g.current&&u.animationState&&u.animationState.animateChanges())}),L.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,m)}),g.current=!1))}),u}function Ede(n,e,t,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:lH(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Km(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function lH(n){if(n)return n.options.allowProjection!==!1?n.projection:lH(n.parent)}function Mde({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&gde(n);function s(a,l){let c;const u={...L.useContext($P),...a,layoutId:Rde(a)},{isStatic:h}=u,d=bde(a),m=r(a,h);if(!h&&SP){Pde();const g=kde(u);c=g.MeasureLayout,d.visualElement=Tde(i,m,u,e,g.ProjectionNode)}return C.jsxs(oS.Provider,{value:d,children:[c&&d.visualElement?C.jsx(c,{visualElement:d.visualElement,...u}):null,t(i,a,Sde(m,d.visualElement,l),m,h,d.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=L.forwardRef(s);return o[Ade]=i,o}function Rde({layoutId:n}){const e=L.useContext(bP).id;return e&&n!==void 0?e+"-"+n:n}function Pde(n,e){L.useContext(rH).strict}function kde(n){const{drag:e,layout:t}=Rg;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Gx={};function Bde(n){for(const e in n)Gx[e]=n[e],kP(e)&&(Gx[e].isCSSVariable=!0)}function cH(n,{layout:e,layoutId:t}){return ry.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Gx[n]||n==="opacity")}const Ide={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lde=ny.length;function Dde(n,e,t){let r="",i=!0;for(let s=0;s<Lde;s++){const o=ny[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=J6(a,GP[o]);if(!l){i=!1;const u=Ide[o]||o;r+=`${u}(${c}) `}t&&(e[o]=c)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function KP(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(ry.has(l)){o=!0;continue}else if(kP(l)){i[l]=c;continue}else{const u=J6(c,GP[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||t?r.transform=Dde(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const JP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uH(n,e,t){for(const r in e)!fo(e[r])&&!cH(r,t)&&(n[r]=e[r])}function Fde({transformTemplate:n},e){return L.useMemo(()=>{const t=JP();return KP(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Nde(n,e){const t=n.style||{},r={};return uH(r,t,n),Object.assign(r,Fde(n,e)),r}function Ode(n,e){const t={},r=Nde(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Ude={offset:"stroke-dashoffset",array:"stroke-dasharray"},zde={offset:"strokeDashoffset",array:"strokeDasharray"};function Hde(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Ude:zde;n[s.offset]=Fn.transform(-r);const o=Fn.transform(e),a=Fn.transform(t);n[s.array]=`${o} ${a}`}function hH(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(KP(n,a,c),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:d}=n;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),i!==void 0&&Hde(h,i,s,o,!1)}const fH=()=>({...JP(),attrs:{}}),dH=n=>typeof n=="string"&&n.toLowerCase()==="svg";function jde(n,e,t,r){const i=L.useMemo(()=>{const s=fH();return hH(s,e,dH(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};uH(s,n.style,n),i.style={...s,...i.style}}return i}const Gde=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ZP(n){return typeof n!="string"||n.includes("-")?!1:!!(Gde.indexOf(n)>-1||/[A-Z]/u.test(n))}function Vde(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(ZP(t)?jde:Ode)(r,s,o,t),c=vde(r,typeof t=="string",n),u=t!==L.Fragment?{...c,...l,ref:i}:{},{children:h}=r,d=L.useMemo(()=>fo(h)?h.get():h,[h]);return L.createElement(t,{...u,children:d})}}function SF(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function QP(n,e,t,r){if(typeof e=="function"){const[i,s]=SF(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=SF(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function lw(n){return fo(n)?n.get():n}function Wde({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:$de(t,r,i,n),renderState:e()}}const pH=n=>(e,t)=>{const r=L.useContext(oS),i=L.useContext(sS),s=()=>Wde(n,e,r,i);return t?s():AP(s)};function $de(n,e,t,r){const i={},s=r(n,{});for(const d in s)i[d]=lw(s[d]);let{initial:o,animate:a}=n;const l=lS(n),c=sH(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!aS(h)){const d=Array.isArray(h)?h:[h];for(let m=0;m<d.length;m++){const g=QP(n,d[m]);if(g){const{transitionEnd:v,transition:w,..._}=g;for(const A in _){let S=_[A];if(Array.isArray(S)){const R=u?S.length-1:0;S=S[R]}S!==null&&(i[A]=S)}for(const A in v)i[A]=v[A]}}}return i}function ek(n,e,t){var s;const{style:r}=n,i={};for(const o in r)(fo(r[o])||e.style&&fo(e.style[o])||cH(o,n)||((s=t==null?void 0:t.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Xde={useVisualState:pH({scrapeMotionValuesFromProps:ek,createRenderState:JP})};function mH(n,e,t){const r=ek(n,e,t);for(const i in n)if(fo(n[i])||fo(e[i])){const s=ny.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const qde={useVisualState:pH({scrapeMotionValuesFromProps:mH,createRenderState:fH})};function Yde(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...ZP(r)?qde:Xde,preloadedFeatures:n,useRender:Vde(i),createVisualElement:e,Component:r};return Mde(o)}}function Vx(n,e,t){const r=n.getProps();return QP(r,e,t!==void 0?t:r.custom,n)}const DM=n=>Array.isArray(n);function Kde(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Mg(t))}function Jde(n){return DM(n)?n[n.length-1]||0:n}function Zde(n,e){const t=Vx(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const o in s){const a=Jde(s[o]);Kde(n,o,a)}}function Qde(n){return!!(fo(n)&&n.add)}function FM(n,e){const t=n.getValue("willChange");if(Qde(t))return t.add(e);if(!t&&Xu.WillChange){const r=new Xu.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function gH(n){return n.props[oH]}const epe=n=>n!==null;function tpe(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(epe),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const npe={type:"spring",stiffness:500,damping:25,restSpeed:10},rpe=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),ipe={type:"keyframes",duration:.8},spe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ope=(n,{keyframes:e})=>e.length>2?ipe:ry.has(n)?n.startsWith("scale")?rpe(e[1]):npe:spe;function ape({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const tk=(n,e,t,r={},i,s)=>o=>{const a=jP(r,n)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Lc(l);const u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:i};ape(a)||Object.assign(u,ope(n,u)),u.duration&&(u.duration=Lc(u.duration)),u.repeatDelay&&(u.repeatDelay=Lc(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),(Xu.instantAnimations||Xu.skipAnimations)&&(h=!0,u.duration=0,u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const d=tpe(u.keyframes,a);if(d!==void 0){Ei.update(()=>{u.onUpdate(d),u.onComplete()});return}}return a.isSync?new UP(u):new zfe(u)};function lpe({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function yH(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&n.animationState&&n.animationState.getState()[i];for(const u in a){const h=n.getValue(u,n.latestValues[u]??null),d=a[u];if(d===void 0||c&&lpe(c,u))continue;const m={delay:t,...jP(s||{},u)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===g&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const _=gH(n);if(_){const A=window.MotionHandoffAnimation(_,u,Ei);A!==null&&(m.startTime=A,v=!0)}}FM(n,u),h.start(tk(u,h,d,n.shouldReduceMotion&&$6.has(u)?{type:!1}:m,n,v));const w=h.animation;w&&l.push(w)}return o&&Promise.all(l).then(()=>{Ei.update(()=>{o&&Zde(n,o)})}),l}function NM(n,e,t={}){var l;const r=Vx(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(yH(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=i;return cpe(n,e,u+c,h,d,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function cpe(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(upe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(NM(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function upe(n,e){return n.sortNodePosition(e)}function hpe(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>NM(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=NM(n,e,t);else{const i=typeof e=="function"?Vx(n,e,t.custom):e;r=Promise.all(yH(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function xH(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const fpe=qP.length;function vH(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?vH(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<fpe;t++){const r=qP[t],i=n.props[r];(jx(i)||i===!1)&&(e[r]=i)}return e}const dpe=[...XP].reverse(),ppe=XP.length;function mpe(n){return e=>Promise.all(e.map(({animation:t,options:r})=>hpe(n,t,r)))}function gpe(n){let e=mpe(n),t=CF(),r=!0;const i=l=>(c,u)=>{var d;const h=Vx(n,u,l==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);if(h){const{transition:m,transitionEnd:g,...v}=h;c={...c,...v,...g}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=vH(n.parent)||{},h=[],d=new Set;let m={},g=1/0;for(let w=0;w<ppe;w++){const _=dpe[w],A=t[_],S=c[_]!==void 0?c[_]:u[_],R=jx(S),B=_===l?A.isActive:null;B===!1&&(g=w);let I=S===u[_]&&S!==c[_]&&R;if(I&&r&&n.manuallyAnimateOnMount&&(I=!1),A.protectedKeys={...m},!A.isActive&&B===null||!S&&!A.prevProp||aS(S)||typeof S=="boolean")continue;const N=ype(A.prevProp,S);let U=N||_===l&&A.isActive&&!I&&R||w>g&&R,O=!1;const P=Array.isArray(S)?S:[S];let F=P.reduce(i(_),{});B===!1&&(F={});const{prevResolvedValues:K={}}=A,Q={...K,...F},Y=oe=>{U=!0,d.has(oe)&&(O=!0,d.delete(oe)),A.needsAnimating[oe]=!0;const G=n.getValue(oe);G&&(G.liveStyle=!1)};for(const oe in Q){const G=F[oe],te=K[oe];if(m.hasOwnProperty(oe))continue;let re=!1;DM(G)&&DM(te)?re=!xH(G,te):re=G!==te,re?G!=null?Y(oe):d.add(oe):G!==void 0&&d.has(oe)?Y(oe):A.protectedKeys[oe]=!0}A.prevProp=S,A.prevResolvedValues=F,A.isActive&&(m={...m,...F}),r&&n.blockInitialAnimation&&(U=!1),U&&(!(I&&N)||O)&&h.push(...P.map(oe=>({animation:oe,options:{type:_}})))}if(d.size){const w={};if(typeof c.initial!="boolean"){const _=Vx(n,Array.isArray(c.initial)?c.initial[0]:c.initial);_&&_.transition&&(w.transition=_.transition)}d.forEach(_=>{const A=n.getBaseTarget(_),S=n.getValue(_);S&&(S.liveStyle=!0),w[_]=A??null}),h.push({animation:w})}let v=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function a(l,c){var h;if(t[l].isActive===c)return Promise.resolve();(h=n.variantChildren)==null||h.forEach(d=>{var m;return(m=d.animationState)==null?void 0:m.setActive(l,c)}),t[l].isActive=c;const u=o(l);for(const d in t)t[d].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=CF(),r=!0}}}function ype(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!xH(e,n):!1}function vd(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CF(){return{animate:vd(!0),whileInView:vd(),whileHover:vd(),whileTap:vd(),whileDrag:vd(),whileFocus:vd(),exit:vd()}}class wf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xpe extends wf{constructor(e){super(e),e.animationState||(e.animationState=gpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();aS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let vpe=0;class _pe extends wf{constructor(){super(...arguments),this.id=vpe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const wpe={animation:{Feature:xpe},exit:{Feature:_pe}};function Wx(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Lv(n){return{point:{x:n.pageX,y:n.pageY}}}const bpe=n=>e=>WP(e)&&n(e,Lv(e));function lx(n,e,t,r){return Wx(n,e,bpe(t),r)}function _H({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Ape({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Spe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const wH=1e-4,Cpe=1-wH,Tpe=1+wH,bH=.01,Epe=0-bH,Mpe=0+bH;function ko(n){return n.max-n.min}function Rpe(n,e,t){return Math.abs(n-e)<=t}function TF(n,e,t,r=.5){n.origin=r,n.originPoint=Ci(e.min,e.max,n.origin),n.scale=ko(t)/ko(e),n.translate=Ci(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Cpe&&n.scale<=Tpe||isNaN(n.scale))&&(n.scale=1),(n.translate>=Epe&&n.translate<=Mpe||isNaN(n.translate))&&(n.translate=0)}function cx(n,e,t,r){TF(n.x,e.x,t.x,r?r.originX:void 0),TF(n.y,e.y,t.y,r?r.originY:void 0)}function EF(n,e,t){n.min=t.min+e.min,n.max=n.min+ko(e)}function Ppe(n,e,t){EF(n.x,e.x,t.x),EF(n.y,e.y,t.y)}function MF(n,e,t){n.min=e.min-t.min,n.max=n.min+ko(e)}function ux(n,e,t){MF(n.x,e.x,t.x),MF(n.y,e.y,t.y)}const RF=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jm=()=>({x:RF(),y:RF()}),PF=()=>({min:0,max:0}),Gi=()=>({x:PF(),y:PF()});function Ya(n){return[n("x"),n("y")]}function eE(n){return n===void 0||n===1}function OM({scale:n,scaleX:e,scaleY:t}){return!eE(n)||!eE(e)||!eE(t)}function Cd(n){return OM(n)||AH(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function AH(n){return kF(n.x)||kF(n.y)}function kF(n){return n&&n!=="0%"}function wb(n,e,t){const r=n-t,i=e*r;return t+i}function BF(n,e,t,r,i){return i!==void 0&&(n=wb(n,i,r)),wb(n,t,r)+e}function UM(n,e=0,t=1,r,i){n.min=BF(n.min,e,t,r,i),n.max=BF(n.max,e,t,r,i)}function SH(n,{x:e,y:t}){UM(n.x,e.translate,e.scale,e.originPoint),UM(n.y,t.translate,t.scale,t.originPoint)}const IF=.999999999999,LF=1.0000000000001;function kpe(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Qm(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,SH(n,o)),r&&Cd(s.latestValues)&&Qm(n,s.latestValues))}e.x<LF&&e.x>IF&&(e.x=1),e.y<LF&&e.y>IF&&(e.y=1)}function Zm(n,e){n.min=n.min+e,n.max=n.max+e}function DF(n,e,t,r,i=.5){const s=Ci(n.min,n.max,i);UM(n,e,t,s,r)}function Qm(n,e){DF(n.x,e.x,e.scaleX,e.scale,e.originX),DF(n.y,e.y,e.scaleY,e.scale,e.originY)}function CH(n,e){return _H(Spe(n.getBoundingClientRect(),e))}function Bpe(n,e,t){const r=CH(n,t),{scroll:i}=e;return i&&(Zm(r.x,i.offset.x),Zm(r.y,i.offset.y)),r}const TH=({current:n})=>n?n.ownerDocument.defaultView:null,FF=(n,e)=>Math.abs(n-e);function Ipe(n,e){const t=FF(n.x,e.x),r=FF(n.y,e.y);return Math.sqrt(t**2+r**2)}class EH{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=nE(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,m=Ipe(h.offset,{x:0,y:0})>=3;if(!d&&!m)return;const{point:g}=h,{timestamp:v}=Vs;this.history.push({...g,timestamp:v});const{onStart:w,onMove:_}=this.handlers;d||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=tE(d,this.transformPagePoint),Ei.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=nE(h.type==="pointercancel"?this.lastMoveEventInfo:tE(d,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,w),g&&g(h,w)},!WP(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=Lv(e),a=tE(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Vs;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,nE(a,this.history)),this.removeListeners=kv(lx(this.contextWindow,"pointermove",this.handlePointerMove),lx(this.contextWindow,"pointerup",this.handlePointerUp),lx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hf(this.updatePoint)}}function tE(n,e){return e?{point:e(n.point)}:n}function NF(n,e){return{x:n.x-e.x,y:n.y-e.y}}function nE({point:n},e){return{point:n,delta:NF(n,MH(e)),offset:NF(n,Lpe(e)),velocity:Dpe(e,.1)}}function Lpe(n){return n[0]}function MH(n){return n[n.length-1]}function Dpe(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=MH(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Lc(e)));)t--;if(!r)return{x:0,y:0};const s=Dc(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fpe(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Ci(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Ci(t,n,r.max):Math.min(n,t)),n}function OF(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Npe(n,{top:e,left:t,bottom:r,right:i}){return{x:OF(n.x,t,i),y:OF(n.y,e,r)}}function UF(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Ope(n,e){return{x:UF(n.x,e.x),y:UF(n.y,e.y)}}function Upe(n,e){let t=.5;const r=ko(n),i=ko(e);return i>r?t=Ux(e.min,e.max-r,n.min):r>i&&(t=Ux(n.min,n.max-i,e.min)),$u(0,1,t)}function zpe(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const zM=.35;function Hpe(n=zM){return n===!1?n=0:n===!0&&(n=zM),{x:zF(n,"left","right"),y:zF(n,"top","bottom")}}function zF(n,e,t){return{min:HF(n,e),max:HF(n,t)}}function HF(n,e){return typeof n=="number"?n:n[e]||0}const jpe=new WeakMap;class Gpe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gi(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Lv(u).point)},s=(u,h)=>{const{drag:d,dragPropagation:m,onDragStart:g}=this.getProps();if(d&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nde(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ya(w=>{let _=this.getAxisMotionValue(w).get()||0;if(Fc.test(_)){const{projection:A}=this.visualElement;if(A&&A.layout){const S=A.layout.layoutBox[w];S&&(_=ko(S)*(parseFloat(_)/100))}}this.originPoint[w]=_}),g&&Ei.postRender(()=>g(u,h)),FM(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:d,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:w}=h;if(m&&this.currentDirection===null){this.currentDirection=Vpe(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),v&&v(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Ya(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new EH(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:TH(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ei.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!O_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Fpe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Km(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Npe(r.layoutBox,e):this.constraints=!1,this.elastic=Hpe(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ya(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zpe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Km(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Bpe(r,i.root,this.visualElement.getTransformPagePoint());let o=Ope(i.layout.layoutBox,s);if(t){const a=t(Ape(o));this.hasMutatedConstraints=!!a,a&&(o=_H(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ya(u=>{if(!O_(u,t,this.currentDirection))return;let h=l[u]||{};o&&(h={min:0,max:0});const d=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:d,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return FM(this.visualElement,e),r.start(tk(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ya(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ya(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ya(t=>{const{drag:r}=this.getProps();if(!O_(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-Ci(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Km(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ya(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Upe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ya(o=>{if(!O_(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ci(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;jpe.set(this.visualElement,this);const e=this.visualElement.current,t=lx(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Km(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ei.read(r);const o=Wx(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ya(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=zM,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function O_(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Vpe(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Wpe extends wf{constructor(e){super(e),this.removeGroupControls=nl,this.removeListeners=nl,this.controls=new Gpe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nl}unmount(){this.removeGroupControls(),this.removeListeners()}}const jF=n=>(e,t)=>{n&&Ei.postRender(()=>n(e,t))};class $pe extends wf{constructor(){super(...arguments),this.removePointerDownListener=nl}onPointerDown(e){this.session=new EH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:jF(e),onStart:jF(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ei.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=lx(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GF(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const _0={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Fn.test(n))n=parseFloat(n);else return n;const t=GF(n,e.target.x),r=GF(n,e.target.y);return`${t}% ${r}%`}},Xpe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=ff.parse(n);if(i.length>5)return r;const s=ff.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ci(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class qpe extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Bde(Ype),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),cw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ei.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),VP.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RH(n){const[e,t]=nH(),r=L.useContext(bP);return C.jsx(qpe,{...n,layoutGroup:r,switchLayoutGroup:L.useContext(aH),isPresent:e,safeToRemove:t})}const Ype={borderRadius:{..._0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_0,borderTopRightRadius:_0,borderBottomLeftRadius:_0,borderBottomRightRadius:_0,boxShadow:Xpe};function Kpe(n,e,t){const r=fo(n)?n:Mg(n);return r.start(tk("",r,e,t)),r.animation}const Jpe=(n,e)=>n.depth-e.depth;class Zpe{constructor(){this.children=[],this.isDirty=!1}add(e){CP(this.children,e),this.isDirty=!0}remove(e){TP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Jpe),this.isDirty=!1,this.children.forEach(e)}}function Qpe(n,e){const t=na.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(hf(r),n(s-e))};return Ei.setup(r,!0),()=>hf(r)}const PH=["TopLeft","TopRight","BottomLeft","BottomRight"],eme=PH.length,VF=n=>typeof n=="string"?parseFloat(n):n,WF=n=>typeof n=="number"||Fn.test(n);function tme(n,e,t,r,i,s){i?(n.opacity=Ci(0,t.opacity??1,nme(r)),n.opacityExit=Ci(e.opacity??1,0,rme(r))):s&&(n.opacity=Ci(e.opacity??1,t.opacity??1,r));for(let o=0;o<eme;o++){const a=`border${PH[o]}Radius`;let l=$F(e,a),c=$F(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||WF(l)===WF(c)?(n[a]=Math.max(Ci(VF(l),VF(c),r),0),(Fc.test(c)||Fc.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Ci(e.rotate||0,t.rotate||0,r))}function $F(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const nme=kH(0,.5,A6),rme=kH(.5,.95,nl);function kH(n,e,t){return r=>r<n?0:r>e?1:t(Ux(n,e,r))}function XF(n,e){n.min=e.min,n.max=e.max}function $a(n,e){XF(n.x,e.x),XF(n.y,e.y)}function qF(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function YF(n,e,t,r,i){return n-=e,n=wb(n,1/t,r),i!==void 0&&(n=wb(n,1/i,r)),n}function ime(n,e=0,t=1,r=.5,i,s=n,o=n){if(Fc.test(e)&&(e=parseFloat(e),e=Ci(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ci(s.min,s.max,r);n===s&&(a-=e),n.min=YF(n.min,e,t,a,i),n.max=YF(n.max,e,t,a,i)}function KF(n,e,[t,r,i],s,o){ime(n,e[t],e[r],e[i],e.scale,s,o)}const sme=["x","scaleX","originX"],ome=["y","scaleY","originY"];function JF(n,e,t,r){KF(n.x,e,sme,t?t.x:void 0,r?r.x:void 0),KF(n.y,e,ome,t?t.y:void 0,r?r.y:void 0)}function ZF(n){return n.translate===0&&n.scale===1}function BH(n){return ZF(n.x)&&ZF(n.y)}function QF(n,e){return n.min===e.min&&n.max===e.max}function ame(n,e){return QF(n.x,e.x)&&QF(n.y,e.y)}function eN(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function IH(n,e){return eN(n.x,e.x)&&eN(n.y,e.y)}function tN(n){return ko(n.x)/ko(n.y)}function nN(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class lme{constructor(){this.members=[]}add(e){CP(this.members,e),e.scheduleRender()}remove(e){if(TP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cme(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:m,skewY:g}=t;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),d&&(r+=`rotateY(${d}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const rE=["","X","Y","Z"],ume={visibility:"hidden"},hme=1e3;let fme=0;function iE(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function LH(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=gH(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ei,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&LH(r)}function DH({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=fme++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mme),this.nodes.forEach(_me),this.nodes.forEach(wme),this.nodes.forEach(gme)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Zpe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new MP),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=tH(o)&&!lde(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let u;const h=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Qpe(h,250),cw.hasAnimatedSinceResize&&(cw.hasAnimatedSinceResize=!1,this.nodes.forEach(iN))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||Tme,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=c.getProps(),_=!this.targetLayout||!IH(this.targetLayout,m),A=!h&&d;if(this.options.layoutRoot||this.resumeFrom||A||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...jP(g,"layout"),onPlay:v,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(u,A)}else h||iN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),hf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bme),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rN);return}this.isUpdating||this.nodes.forEach(xme),this.isUpdating=!1,this.nodes.forEach(vme),this.nodes.forEach(dme),this.nodes.forEach(pme),this.clearAllSnapshots();const a=na.now();Vs.delta=$u(0,1e3/60,a-Vs.timestamp),Vs.timestamp=a,Vs.isProcessing=!0,YT.update.process(Vs),YT.preRender.process(Vs),YT.render.process(Vs),Vs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,VP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yme),this.sharedNodes.forEach(Ame)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ei.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ei.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ko(this.snapshot.measuredBox.x)&&!ko(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!BH(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Cd(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Eme(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Gi();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Mme))){const{scroll:u}=this.root;u&&(Zm(a.x,u.offset.x),Zm(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Gi();if($a(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;u!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&$a(a,o),Zm(a.x,h.offset.x),Zm(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Gi();$a(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Qm(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Cd(u.latestValues)&&Qm(l,u.latestValues)}return Cd(this.latestValues)&&Qm(l,this.latestValues),l}removeTransform(o){const a=Gi();$a(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Cd(c.latestValues))continue;OM(c.latestValues)&&c.updateSnapshot();const u=Gi(),h=c.measurePageBox();$a(u,h),JF(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Cd(this.latestValues)&&JF(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var d;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Vs.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gi(),this.relativeTargetOrigin=Gi(),ux(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),$a(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Gi(),this.targetWithTransforms=Gi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ppe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$a(this.target,this.layout.layoutBox),SH(this.target,this.targetDelta)):$a(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gi(),this.relativeTargetOrigin=Gi(),ux(this.relativeTargetOrigin,this.target,m.target),$a(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||OM(this.parent.latestValues)||AH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Vs.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;$a(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;kpe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Gi());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qF(this.prevProjectionDelta.x,this.projectionDelta.x),qF(this.prevProjectionDelta.y,this.projectionDelta.y)),cx(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!nN(this.projectionDelta.x,this.prevProjectionDelta.x)||!nN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jm(),this.projectionDelta=Jm(),this.projectionDeltaWithTransform=Jm()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Jm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Gi(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,w=this.getStack(),_=!w||w.members.length<=1,A=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(Cme));this.animationProgress=0;let S;this.mixTargetDelta=R=>{const B=R/1e3;sN(h.x,o.x,B),sN(h.y,o.y,B),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ux(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Sme(this.relativeTarget,this.relativeTargetOrigin,d,B),S&&ame(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Gi()),$a(S,this.relativeTarget)),v&&(this.animationValues=u,tme(u,c,this.latestValues,B,A,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(hf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ei.update(()=>{cw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mg(0)),this.currentAnimation=Kpe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hme),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&FH(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Gi();const h=ko(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=ko(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}$a(a,l),Qm(a,u),cx(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new lme),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&iE("z",o,c,this.animationValues);for(let u=0;u<rE.length;u++)iE(`rotate${rE[u]}`,o,c,this.animationValues),iE(`skew${rE[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return ume;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=lw(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=lw(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Cd(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=cme(this.projectionDeltaWithTransform,this.treeScale,u),l&&(a.transform=l(u,a.transform));const{x:h,y:d}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Gx){if(u[m]===void 0)continue;const{correct:g,applyTo:v,isCSSVariable:w}=Gx[m],_=a.transform==="none"?u[m]:g(u[m],c);if(v){const A=v.length;for(let S=0;S<A;S++)a[v[S]]=_}else w?this.options.visualElement.renderState.vars[m]=_:a[m]=_}return this.options.layoutId&&(a.pointerEvents=c===this?lw(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(rN),this.root.sharedNodes.clear()}}}function dme(n){n.updateLayout()}function pme(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?Ya(h=>{const d=o?e.measuredBox[h]:e.layoutBox[h],m=ko(d);d.min=r[h].min,d.max=d.min+m}):FH(s,e.layoutBox,r)&&Ya(h=>{const d=o?e.measuredBox[h]:e.layoutBox[h],m=ko(r[h]);d.max=d.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=Jm();cx(a,r,e.layoutBox);const l=Jm();o?cx(l,n.applyTransform(i,!0),e.measuredBox):cx(l,r,e.layoutBox);const c=!BH(a);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:m}=h;if(d&&m){const g=Gi();ux(g,e.layoutBox,d.layoutBox);const v=Gi();ux(v,r,m.layoutBox),IH(g,v)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=g,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function mme(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function gme(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function yme(n){n.clearSnapshot()}function rN(n){n.clearMeasurements()}function xme(n){n.isLayoutDirty=!1}function vme(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function iN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function _me(n){n.resolveTargetDelta()}function wme(n){n.calcProjection()}function bme(n){n.resetSkewAndRotation()}function Ame(n){n.removeLeadSnapshot()}function sN(n,e,t){n.translate=Ci(e.translate,0,t),n.scale=Ci(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function oN(n,e,t,r){n.min=Ci(e.min,t.min,r),n.max=Ci(e.max,t.max,r)}function Sme(n,e,t,r){oN(n.x,e.x,t.x,r),oN(n.y,e.y,t.y,r)}function Cme(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Tme={duration:.45,ease:[.4,0,.1,1]},aN=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),lN=aN("applewebkit/")&&!aN("chrome/")?Math.round:nl;function cN(n){n.min=lN(n.min),n.max=lN(n.max)}function Eme(n){cN(n.x),cN(n.y)}function FH(n,e,t){return n==="position"||n==="preserve-aspect"&&!Rpe(tN(e),tN(t),.2)}function Mme(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const Rme=DH({attachResizeListener:(n,e)=>Wx(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sE={current:void 0},NH=DH({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!sE.current){const n=new Rme({});n.mount(window),n.setOptions({layoutScroll:!0}),sE.current=n}return sE.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Pme={pan:{Feature:$pe},drag:{Feature:Wpe,ProjectionNode:NH,MeasureLayout:RH}};function uN(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&Ei.postRender(()=>s(e,Lv(e)))}class kme extends wf{mount(){const{current:e}=this.node;e&&(this.unmount=rde(e,(t,r)=>(uN(this.node,r,"Start"),i=>uN(this.node,i,"End"))))}unmount(){}}class Bme extends wf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kv(Wx(this.node.current,"focus",()=>this.onFocus()),Wx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hN(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&Ei.postRender(()=>s(e,Lv(e)))}class Ime extends wf{mount(){const{current:e}=this.node;e&&(this.unmount=ade(e,(t,r)=>(hN(this.node,r,"Start"),(i,{success:s})=>hN(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const HM=new WeakMap,oE=new WeakMap,Lme=n=>{const e=HM.get(n.target);e&&e(n)},Dme=n=>{n.forEach(Lme)};function Fme({root:n,...e}){const t=n||document;oE.has(t)||oE.set(t,{});const r=oE.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Dme,{root:n,...e})),r[i]}function Nme(n,e,t){const r=Fme(e);return HM.set(n,t),r.observe(n),()=>{HM.delete(n),r.unobserve(n)}}const Ome={some:0,all:1};class Ume extends wf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ome[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return Nme(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(zme(e,t))&&this.startObserver()}unmount(){}}function zme({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Hme={inView:{Feature:Ume},tap:{Feature:Ime},focus:{Feature:Bme},hover:{Feature:kme}},jme={layout:{ProjectionNode:NH,MeasureLayout:RH}},jM={current:null},OH={current:!1};function Gme(){if(OH.current=!0,!!SP)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>jM.current=n.matches;n.addListener(e),e()}else jM.current=!1}const Vme=new WeakMap;function Wme(n,e,t){for(const r in e){const i=e[r],s=t[r];if(fo(i))n.addValue(r,i);else if(fo(s))n.addValue(r,Mg(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,Mg(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const fN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $me{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=na.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,Ei.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=lS(t),this.isVariantNode=sH(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in h){const m=h[d];l[d]!==void 0&&fo(m)&&m.set(l[d],!1)}}mount(e){this.current=e,Vme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),OH.current||Gme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),hf(this.notifyUpdate),hf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ry.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ei.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Rg){const t=Rg[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<fN.length;r++){const i=fN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Wme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Mg(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(d6(r)||m6(r))?r=parseFloat(r):!ude(r)&&ff.test(t)&&(r=K6(e,t)),this.setBaseTarget(e,fo(r)?r.get():r)),fo(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=QP(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!fo(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new MP),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class UH extends $me{constructor(){super(...arguments),this.KeyframeResolver=Zfe}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fo(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function zH(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}function Xme(n){return window.getComputedStyle(n)}class qme extends UH{constructor(){super(...arguments),this.type="html",this.renderInstance=zH}readValueFromInstance(e,t){var r;if(ry.has(t))return(r=this.projection)!=null&&r.isProjecting?RM(t):yfe(e,t);{const i=Xme(e),s=(kP(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return CH(e,t)}build(e,t,r){KP(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return ek(e,t,r)}}const HH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Yme(n,e,t,r){zH(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(HH.has(i)?i:YP(i),e.attrs[i])}class Kme extends UH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ry.has(t)){const r=Y6(t);return r&&r.default||0}return t=HH.has(t)?t:YP(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return mH(e,t,r)}build(e,t,r){hH(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){Yme(e,t,r,i)}mount(e){this.isSVGTag=dH(e.tagName),super.mount(e)}}const Jme=(n,e)=>ZP(n)?new Kme(e):new qme(e,{allowProjection:n!==L.Fragment}),Zme=Yde({...wpe,...Hme,...Pme,...jme},Jme),Om=_de(Zme),Qme=()=>{const[n,e]=L.useState(!1),t=al(),r=i=>{t(i),e(!1)};return C.jsxs("div",{className:"fixed bottom-24 left-6 flex flex-col items-end",children:[C.jsx(mde,{children:n&&C.jsxs(Om.div,{className:"flex flex-col items-end space-y-2 mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:[C.jsx(Om.button,{onClick:()=>r("/home"),className:"w-12 h-12 flex items-center justify-center bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-transform transform hover:scale-110",whileHover:{scale:1.1},whileTap:{scale:.9},children:C.jsx(PY,{size:20})}),C.jsx(Om.button,{onClick:()=>r("/roadmap"),className:"w-12 h-12 flex items-center justify-center bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-transform transform hover:scale-110",whileHover:{scale:1.1},whileTap:{scale:.9},children:C.jsx(IY,{size:20})}),C.jsx(Om.button,{onClick:()=>r("/signdashboard"),className:"w-12 h-12 flex items-center justify-center bg-yellow-600 text-white rounded-full shadow-lg hover:bg-yellow-700 transition-transform transform hover:scale-110",whileHover:{scale:1.1},whileTap:{scale:.9},children:C.jsx(MY,{size:20})}),C.jsx(Om.button,{onClick:()=>r("/pdf"),className:"w-12 h-12 flex items-center justify-center bg-red-600 text-white rounded-full shadow-lg hover:bg-red-700 transition-transform transform hover:scale-110",whileHover:{scale:1.1},whileTap:{scale:.9},children:C.jsx(_Y,{size:20})})]})}),C.jsx(Om.button,{onClick:()=>e(!n),className:"w-14 h-14 flex items-center justify-center bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 transition-transform transform",whileTap:{scale:.9,rotate:90},children:C.jsx(HY,{size:24})})]})},ege=({children:n})=>C.jsx("div",{children:n}),dN=({onClick:n,children:e,className:t,disabled:r})=>C.jsx("button",{onClick:n,className:`rounded-full p-4 ${t}`,disabled:r,children:e}),tge=({children:n,className:e})=>C.jsx("div",{className:`p-4 bg-white shadow-xl rounded-lg ${e}`,children:n}),aE="http://127.0.0.1:5500",pN=`
Hello from INDIC! 🌟
I am here to assist you with all your queries, doubts, and questions.
I can help with anything related to:
- Your language learning journey.
- Queries about the syllabus.
- Fun games that can make learning more exciting!🎮
- Or any feedback you have for the platform!

Feel free to ask me anything within these topics, and let's get started on your learning path!
`,nge=()=>"user_"+Math.random().toString(36).substr(2,9),rge=()=>{const[n,e]=L.useState([]),[t,r]=L.useState(""),[i,s]=L.useState(!1),[o,a]=L.useState(!1),[l,c]=L.useState(!1),[u]=L.useState(nge()),[h,d]=L.useState(!1);L.useEffect(()=>{(async()=>{try{await kr.get(`${aE}/test`,{headers:{"Content-Type":"application/json"},withCredentials:!1}),c(!1),console.log("Backend connection successful!")}catch(S){console.error("Backend connection failed:",S),c(!0)}})()},[]);const m=async()=>{a(!0);try{console.log("Fetching boilerplate message");const A=await kr.post(`${aE}/chat`,{userMessage:"",userId:u},{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1});console.log("Received boilerplate:",A.data),e([{text:pN,sender:"bot"}]),c(!1)}catch(A){console.error("Error fetching boilerplate:",A),e([{text:pN,sender:"bot"}]),c(!0)}finally{a(!1)}},g=A=>/\b(create|generate|make|build|design).*\b(syllabus|curriculum)\b/i.test(A),v=async()=>{if(!t.trim()||o)return;const A=t.trim(),S=[...n,{text:A,sender:"user"}];e(S),r(""),a(!0);const R=g(A);R&&(d(!0),e([...S,{text:"I'll help you create a syllabus. This might take a minute or two, please be patient...",sender:"bot"}]));try{console.log("Sending message to backend:",A);const B=R||h?12e4:2e4,I=await kr({method:"post",url:`${aE}/chat`,data:{userMessage:A,userId:u},headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1,timeout:B});console.log("Received response:",I.data);const N=R?S:h?[...n.slice(0,-1),{text:A,sender:"user"}]:S,U={text:I.data.reply,sender:"bot"};e([...N,U]),I.data.reply.includes("Here's your personalized syllabus")||I.data.reply.includes("No problem! Let me know if")?d(!1):(I.data.reply.includes("Would you like me to create")||I.data.reply.includes("What proficiency level")||I.data.reply.includes("Which language")||I.data.reply.includes("What is your purpose"))&&d(!0),c(!1)}catch(B){console.error("Error sending message:",B);const I=B.code==="ECONNABORTED"?"Sorry, generating the syllabus is taking longer than expected. Please try a simpler request or try again later.":"Sorry, I couldn't connect to the server. Please check that the backend is running correctly.";e([...S,{text:I,sender:"bot"}]),d(!1),c(!0)}finally{a(!1)}},w=()=>{const A=!i;s(A),A&&n.length===0&&m()},_=A=>{A.key==="Enter"&&!A.shiftKey&&t.trim()&&(A.preventDefault(),v())};return L.useEffect(()=>{const A=document.getElementById("chat-messages");A&&(A.scrollTop=A.scrollHeight)},[n]),C.jsxs(ege,{children:[C.jsx(dN,{onClick:w,className:"fixed bottom-6 left-6 bg-blue-600 text-white shadow-lg hover:bg-blue-800 transition-transform transform hover:scale-110",children:C.jsx(DY,{size:24})}),i&&C.jsxs(tge,{className:"fixed bottom-20 left-6 w-80 h-96 flex flex-col",children:[C.jsxs("div",{className:"border-b pb-2 mb-2 flex justify-between items-center",children:[C.jsxs("h3",{className:"font-bold text-lg text-blue-600",children:["INDIC Assistant",l&&C.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Connection Issues)"})]}),C.jsx("button",{onClick:w,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),C.jsxs("div",{id:"chat-messages",className:"flex-grow overflow-y-auto space-y-2 p-2 custom-scrollbar relative",children:[C.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-6xl font-bold text-gray-200 opacity-30 select-none pointer-events-none",children:"INDIC"}),n.map((A,S)=>C.jsx("div",{className:`flex ${A.sender==="user"?"justify-end":"justify-start"}`,children:C.jsx("div",{className:`p-2 rounded-lg max-w-[90%] ${A.sender==="user"?"bg-blue-500 text-white rounded-tr-none":"bg-gray-200 text-gray-800 rounded-tl-none"} whitespace-pre-wrap`,children:A.text.split(`
`).map((R,B)=>C.jsxs(Hl.Fragment,{children:[R,B<A.text.split(`
`).length-1&&C.jsx("br",{})]},B))})},S)),o&&C.jsxs("div",{className:"flex justify-center py-2",children:[C.jsx(zO,{size:24,className:"animate-spin text-blue-500"}),h&&C.jsx("span",{className:"ml-2 text-sm text-blue-600",children:"Generating syllabus..."})]})]}),C.jsxs("div",{className:"mt-2 flex items-center",children:[C.jsx("input",{type:"text",className:"flex-grow p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:o&&h?"Generating syllabus...":"Type a message...",value:t,onChange:A=>r(A.target.value),onKeyDown:_,disabled:o}),C.jsx(dN,{onClick:v,className:`ml-2 ${o||!t.trim()?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,disabled:o||!t.trim(),children:C.jsx(GY,{size:16})})]})]}),C.jsx("style",{jsx:!0,children:`
                /* Styling the Scrollbar */
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                    height: 6px;
                }

                .custom-scrollbar::-webkit-scrollbar-track {
                    background-color: transparent;
                    border-radius: 10px;
                }

                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background-color: #c1c1c1;
                    border-radius: 10px;
                    transition: background-color 0.3s ease;
                }

                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background-color: #a1a1a1;
                }

                .custom-scrollbar::-webkit-scrollbar-corner {
                    background-color: transparent;
                }
            `})]})};var uw={exports:{}},ige=uw.exports,mN;function sge(){return mN||(mN=1,function(n,e){(function(t,r){n.exports=r()})(ige,function(){var t=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",m="year",g="date",v="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var ee=["th","st","nd","rd"],$=Y%100;return"["+Y+(ee[($-20)%10]||ee[$]||ee[0])+"]"}},S=function(Y,ee,$){var oe=String(Y);return!oe||oe.length>=ee?Y:""+Array(ee+1-oe.length).join($)+Y},R={s:S,z:function(Y){var ee=-Y.utcOffset(),$=Math.abs(ee),oe=Math.floor($/60),G=$%60;return(ee<=0?"+":"-")+S(oe,2,"0")+":"+S(G,2,"0")},m:function Y(ee,$){if(ee.date()<$.date())return-Y($,ee);var oe=12*($.year()-ee.year())+($.month()-ee.month()),G=ee.clone().add(oe,h),te=$-G<0,re=ee.clone().add(oe+(te?-1:1),h);return+(-(oe+($-G)/(te?G-re:re-G))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:h,y:m,w:u,d:c,D:g,h:l,m:a,s:o,ms:s,Q:d}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},B="en",I={};I[B]=A;var N="$isDayjsObject",U=function(Y){return Y instanceof K||!(!Y||!Y[N])},O=function Y(ee,$,oe){var G;if(!ee)return B;if(typeof ee=="string"){var te=ee.toLowerCase();I[te]&&(G=te),$&&(I[te]=$,G=te);var re=ee.split("-");if(!G&&re.length>1)return Y(re[0])}else{var Z=ee.name;I[Z]=ee,G=Z}return!oe&&G&&(B=G),G||!oe&&B},P=function(Y,ee){if(U(Y))return Y.clone();var $=typeof ee=="object"?ee:{};return $.date=Y,$.args=arguments,new K($)},F=R;F.l=O,F.i=U,F.w=function(Y,ee){return P(Y,{locale:ee.$L,utc:ee.$u,x:ee.$x,$offset:ee.$offset})};var K=function(){function Y($){this.$L=O($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[N]=!0}var ee=Y.prototype;return ee.parse=function($){this.$d=function(oe){var G=oe.date,te=oe.utc;if(G===null)return new Date(NaN);if(F.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var re=G.match(w);if(re){var Z=re[2]-1||0,ne=(re[7]||"0").substring(0,3);return te?new Date(Date.UTC(re[1],Z,re[3]||1,re[4]||0,re[5]||0,re[6]||0,ne)):new Date(re[1],Z,re[3]||1,re[4]||0,re[5]||0,re[6]||0,ne)}}return new Date(G)}($),this.init()},ee.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},ee.$utils=function(){return F},ee.isValid=function(){return this.$d.toString()!==v},ee.isSame=function($,oe){var G=P($);return this.startOf(oe)<=G&&G<=this.endOf(oe)},ee.isAfter=function($,oe){return P($)<this.startOf(oe)},ee.isBefore=function($,oe){return this.endOf(oe)<P($)},ee.$g=function($,oe,G){return F.u($)?this[oe]:this.set(G,$)},ee.unix=function(){return Math.floor(this.valueOf()/1e3)},ee.valueOf=function(){return this.$d.getTime()},ee.startOf=function($,oe){var G=this,te=!!F.u(oe)||oe,re=F.p($),Z=function(Qe,Te){var $e=F.w(G.$u?Date.UTC(G.$y,Te,Qe):new Date(G.$y,Te,Qe),G);return te?$e:$e.endOf(c)},ne=function(Qe,Te){return F.w(G.toDate()[Qe].apply(G.toDate("s"),(te?[0,0,0,0]:[23,59,59,999]).slice(Te)),G)},ce=this.$W,ye=this.$M,he=this.$D,Ce="set"+(this.$u?"UTC":"");switch(re){case m:return te?Z(1,0):Z(31,11);case h:return te?Z(1,ye):Z(0,ye+1);case u:var ke=this.$locale().weekStart||0,Ue=(ce<ke?ce+7:ce)-ke;return Z(te?he-Ue:he+(6-Ue),ye);case c:case g:return ne(Ce+"Hours",0);case l:return ne(Ce+"Minutes",1);case a:return ne(Ce+"Seconds",2);case o:return ne(Ce+"Milliseconds",3);default:return this.clone()}},ee.endOf=function($){return this.startOf($,!1)},ee.$set=function($,oe){var G,te=F.p($),re="set"+(this.$u?"UTC":""),Z=(G={},G[c]=re+"Date",G[g]=re+"Date",G[h]=re+"Month",G[m]=re+"FullYear",G[l]=re+"Hours",G[a]=re+"Minutes",G[o]=re+"Seconds",G[s]=re+"Milliseconds",G)[te],ne=te===c?this.$D+(oe-this.$W):oe;if(te===h||te===m){var ce=this.clone().set(g,1);ce.$d[Z](ne),ce.init(),this.$d=ce.set(g,Math.min(this.$D,ce.daysInMonth())).$d}else Z&&this.$d[Z](ne);return this.init(),this},ee.set=function($,oe){return this.clone().$set($,oe)},ee.get=function($){return this[F.p($)]()},ee.add=function($,oe){var G,te=this;$=Number($);var re=F.p(oe),Z=function(ye){var he=P(te);return F.w(he.date(he.date()+Math.round(ye*$)),te)};if(re===h)return this.set(h,this.$M+$);if(re===m)return this.set(m,this.$y+$);if(re===c)return Z(1);if(re===u)return Z(7);var ne=(G={},G[a]=r,G[l]=i,G[o]=t,G)[re]||1,ce=this.$d.getTime()+$*ne;return F.w(ce,this)},ee.subtract=function($,oe){return this.add(-1*$,oe)},ee.format=function($){var oe=this,G=this.$locale();if(!this.isValid())return G.invalidDate||v;var te=$||"YYYY-MM-DDTHH:mm:ssZ",re=F.z(this),Z=this.$H,ne=this.$m,ce=this.$M,ye=G.weekdays,he=G.months,Ce=G.meridiem,ke=function(Te,$e,Ee,Oe){return Te&&(Te[$e]||Te(oe,te))||Ee[$e].slice(0,Oe)},Ue=function(Te){return F.s(Z%12||12,Te,"0")},Qe=Ce||function(Te,$e,Ee){var Oe=Te<12?"AM":"PM";return Ee?Oe.toLowerCase():Oe};return te.replace(_,function(Te,$e){return $e||function(Ee){switch(Ee){case"YY":return String(oe.$y).slice(-2);case"YYYY":return F.s(oe.$y,4,"0");case"M":return ce+1;case"MM":return F.s(ce+1,2,"0");case"MMM":return ke(G.monthsShort,ce,he,3);case"MMMM":return ke(he,ce);case"D":return oe.$D;case"DD":return F.s(oe.$D,2,"0");case"d":return String(oe.$W);case"dd":return ke(G.weekdaysMin,oe.$W,ye,2);case"ddd":return ke(G.weekdaysShort,oe.$W,ye,3);case"dddd":return ye[oe.$W];case"H":return String(Z);case"HH":return F.s(Z,2,"0");case"h":return Ue(1);case"hh":return Ue(2);case"a":return Qe(Z,ne,!0);case"A":return Qe(Z,ne,!1);case"m":return String(ne);case"mm":return F.s(ne,2,"0");case"s":return String(oe.$s);case"ss":return F.s(oe.$s,2,"0");case"SSS":return F.s(oe.$ms,3,"0");case"Z":return re}return null}(Te)||re.replace(":","")})},ee.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ee.diff=function($,oe,G){var te,re=this,Z=F.p(oe),ne=P($),ce=(ne.utcOffset()-this.utcOffset())*r,ye=this-ne,he=function(){return F.m(re,ne)};switch(Z){case m:te=he()/12;break;case h:te=he();break;case d:te=he()/3;break;case u:te=(ye-ce)/6048e5;break;case c:te=(ye-ce)/864e5;break;case l:te=ye/i;break;case a:te=ye/r;break;case o:te=ye/t;break;default:te=ye}return G?te:F.a(te)},ee.daysInMonth=function(){return this.endOf(h).$D},ee.$locale=function(){return I[this.$L]},ee.locale=function($,oe){if(!$)return this.$L;var G=this.clone(),te=O($,oe,!0);return te&&(G.$L=te),G},ee.clone=function(){return F.w(this.$d,this)},ee.toDate=function(){return new Date(this.valueOf())},ee.toJSON=function(){return this.isValid()?this.toISOString():null},ee.toISOString=function(){return this.$d.toISOString()},ee.toString=function(){return this.$d.toUTCString()},Y}(),Q=K.prototype;return P.prototype=Q,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",m],["$D",g]].forEach(function(Y){Q[Y[1]]=function(ee){return this.$g(ee,Y[0],Y[1])}}),P.extend=function(Y,ee){return Y.$i||(Y(ee,K,P),Y.$i=!0),P},P.locale=O,P.isDayjs=U,P.unix=function(Y){return P(1e3*Y)},P.en=I[B],P.Ls=I,P.p={},P})}(uw)),uw.exports}var oge=sge();const age=jg(oge),hw={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:n=>n>=255?255:n<0?0:n,g:n=>n>=255?255:n<0?0:n,b:n=>n>=255?255:n<0?0:n,h:n=>n%360,s:n=>n>=100?100:n<0?0:n,l:n=>n>=100?100:n<0?0:n,a:n=>n>=1?1:n<0?0:n},toLinear:n=>{const e=n/255;return n>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n),hsl2rgb:({h:n,s:e,l:t},r)=>{if(!e)return t*2.55;n/=360,e/=100,t/=100;const i=t<.5?t*(1+e):t+e-t*e,s=2*t-i;switch(r){case"r":return hw.hue2rgb(s,i,n+1/3)*255;case"g":return hw.hue2rgb(s,i,n)*255;case"b":return hw.hue2rgb(s,i,n-1/3)*255}},rgb2hsl:({r:n,g:e,b:t},r)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),s=Math.min(n,e,t),o=(i+s)/2;if(r==="l")return o*100;if(i===s)return 0;const a=i-s,l=o>.5?a/(2-i-s):a/(i+s);if(r==="s")return l*100;switch(i){case n:return((e-t)/a+(e<t?6:0))*60;case e:return((t-n)/a+2)*60;case t:return((n-e)/a+4)*60;default:return-1}}},lge={clamp:(n,e,t)=>e>t?Math.min(e,Math.max(t,n)):Math.min(t,Math.max(e,n)),round:n=>Math.round(n*1e10)/1e10},cge={dec2hex:n=>{const e=Math.round(n).toString(16);return e.length>1?e:`0${e}`}},On={channel:hw,lang:lge,unit:cge},Kh={};for(let n=0;n<=255;n++)Kh[n]=On.unit.dec2hex(n);const uo={ALL:0,RGB:1,HSL:2};class uge{constructor(){this.type=uo.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=uo.ALL}is(e){return this.type===e}}class hge{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new uge}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=uo.ALL,this}_ensureHSL(){const e=this.data,{h:t,s:r,l:i}=e;t===void 0&&(e.h=On.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=On.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=On.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:r,b:i}=e;t===void 0&&(e.r=On.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=On.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=On.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return!this.type.is(uo.HSL)&&t!==void 0?t:(this._ensureHSL(),On.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,t=e.g;return!this.type.is(uo.HSL)&&t!==void 0?t:(this._ensureHSL(),On.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,t=e.b;return!this.type.is(uo.HSL)&&t!==void 0?t:(this._ensureHSL(),On.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,t=e.h;return!this.type.is(uo.RGB)&&t!==void 0?t:(this._ensureRGB(),On.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,t=e.s;return!this.type.is(uo.RGB)&&t!==void 0?t:(this._ensureRGB(),On.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,t=e.l;return!this.type.is(uo.RGB)&&t!==void 0?t:(this._ensureRGB(),On.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(uo.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(uo.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(uo.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(uo.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(uo.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(uo.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const cS=new hge({r:0,g:0,b:0,a:0},"transparent"),ag={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:n=>{if(n.charCodeAt(0)!==35)return;const e=n.match(ag.re);if(!e)return;const t=e[1],r=parseInt(t,16),i=t.length,s=i%4===0,o=i>4,a=o?1:17,l=o?8:4,c=s?0:-1,u=o?255:15;return cS.set({r:(r>>l*(c+3)&u)*a,g:(r>>l*(c+2)&u)*a,b:(r>>l*(c+1)&u)*a,a:s?(r&u)*a/255:1},n)},stringify:n=>{const{r:e,g:t,b:r,a:i}=n;return i<1?`#${Kh[Math.round(e)]}${Kh[Math.round(t)]}${Kh[Math.round(r)]}${Kh[Math.round(i*255)]}`:`#${Kh[Math.round(e)]}${Kh[Math.round(t)]}${Kh[Math.round(r)]}`}},jd={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:n=>{const e=n.match(jd.hueRe);if(e){const[,t,r]=e;switch(r){case"grad":return On.channel.clamp.h(parseFloat(t)*.9);case"rad":return On.channel.clamp.h(parseFloat(t)*180/Math.PI);case"turn":return On.channel.clamp.h(parseFloat(t)*360)}}return On.channel.clamp.h(parseFloat(n))},parse:n=>{const e=n.charCodeAt(0);if(e!==104&&e!==72)return;const t=n.match(jd.re);if(!t)return;const[,r,i,s,o,a]=t;return cS.set({h:jd._hue2deg(r),s:On.channel.clamp.s(parseFloat(i)),l:On.channel.clamp.l(parseFloat(s)),a:o?On.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},n)},stringify:n=>{const{h:e,s:t,l:r,a:i}=n;return i<1?`hsla(${On.lang.round(e)}, ${On.lang.round(t)}%, ${On.lang.round(r)}%, ${i})`:`hsl(${On.lang.round(e)}, ${On.lang.round(t)}%, ${On.lang.round(r)}%)`}},hx={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:n=>{n=n.toLowerCase();const e=hx.colors[n];if(e)return ag.parse(e)},stringify:n=>{const e=ag.stringify(n);for(const t in hx.colors)if(hx.colors[t]===e)return t}},U0={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:n=>{const e=n.charCodeAt(0);if(e!==114&&e!==82)return;const t=n.match(U0.re);if(!t)return;const[,r,i,s,o,a,l,c,u]=t;return cS.set({r:On.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:On.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:On.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?On.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},n)},stringify:n=>{const{r:e,g:t,b:r,a:i}=n;return i<1?`rgba(${On.lang.round(e)}, ${On.lang.round(t)}, ${On.lang.round(r)}, ${On.lang.round(i)})`:`rgb(${On.lang.round(e)}, ${On.lang.round(t)}, ${On.lang.round(r)})`}},Vc={format:{keyword:hx,hex:ag,rgb:U0,rgba:U0,hsl:jd,hsla:jd},parse:n=>{if(typeof n!="string")return n;const e=ag.parse(n)||U0.parse(n)||jd.parse(n)||hx.parse(n);if(e)return e;throw new Error(`Unsupported color format: "${n}"`)},stringify:n=>!n.changed&&n.color?n.color:n.type.is(uo.HSL)||n.data.r===void 0?jd.stringify(n):n.a<1||!Number.isInteger(n.r)||!Number.isInteger(n.g)||!Number.isInteger(n.b)?U0.stringify(n):ag.stringify(n)},jH=(n,e)=>{const t=Vc.parse(n);for(const r in e)t[r]=On.channel.clamp[r](e[r]);return Vc.stringify(t)},fx=(n,e,t=0,r=1)=>{if(typeof n!="number")return jH(n,{a:e});const i=cS.set({r:On.channel.clamp.r(n),g:On.channel.clamp.g(e),b:On.channel.clamp.b(t),a:On.channel.clamp.a(r)});return Vc.stringify(i)},fge=n=>{const{r:e,g:t,b:r}=Vc.parse(n),i=.2126*On.channel.toLinear(e)+.7152*On.channel.toLinear(t)+.0722*On.channel.toLinear(r);return On.lang.round(i)},dge=n=>fge(n)>=.5,Dv=n=>!dge(n),GH=(n,e,t)=>{const r=Vc.parse(n),i=r[e],s=On.channel.clamp[e](i+t);return i!==s&&(r[e]=s),Vc.stringify(r)},wn=(n,e)=>GH(n,"l",e),Bn=(n,e)=>GH(n,"l",-e),Ve=(n,e)=>{const t=Vc.parse(n),r={};for(const i in e)e[i]&&(r[i]=t[i]+e[i]);return jH(n,r)},pge=(n,e,t=50)=>{const{r,g:i,b:s,a:o}=Vc.parse(n),{r:a,g:l,b:c,a:u}=Vc.parse(e),h=t/100,d=h*2-1,m=o-u,v=((d*m===-1?d:(d+m)/(1+d*m))+1)/2,w=1-v,_=r*v+a*w,A=i*v+l*w,S=s*v+c*w,R=o*h+u*(1-h);return fx(_,A,S,R)},Xt=(n,e=100)=>{const t=Vc.parse(n);return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,pge(t,n,e)};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:VH,setPrototypeOf:gN,isFrozen:mge,getPrototypeOf:gge,getOwnPropertyDescriptor:yge}=Object;let{freeze:Fo,seal:sl,create:WH}=Object,{apply:GM,construct:VM}=typeof Reflect<"u"&&Reflect;Fo||(Fo=function(e){return e});sl||(sl=function(e){return e});GM||(GM=function(e,t,r){return e.apply(t,r)});VM||(VM=function(e,t){return new e(...t)});const U_=No(Array.prototype.forEach),xge=No(Array.prototype.lastIndexOf),yN=No(Array.prototype.pop),w0=No(Array.prototype.push),vge=No(Array.prototype.splice),fw=No(String.prototype.toLowerCase),lE=No(String.prototype.toString),xN=No(String.prototype.match),b0=No(String.prototype.replace),_ge=No(String.prototype.indexOf),wge=No(String.prototype.trim),Ol=No(Object.prototype.hasOwnProperty),Eo=No(RegExp.prototype.test),A0=bge(TypeError);function No(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return GM(n,e,r)}}function bge(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return VM(n,t)}}function mr(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fw;gN&&gN(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(mge(e)||(e[r]=s),i=s)}n[i]=!0}return n}function Age(n){for(let e=0;e<n.length;e++)Ol(n,e)||(n[e]=null);return n}function Td(n){const e=WH(null);for(const[t,r]of VH(n))Ol(n,t)&&(Array.isArray(r)?e[t]=Age(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=Td(r):e[t]=r);return e}function S0(n,e){for(;n!==null;){const r=yge(n,e);if(r){if(r.get)return No(r.get);if(typeof r.value=="function")return No(r.value)}n=gge(n)}function t(){return null}return t}const vN=Fo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cE=Fo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),uE=Fo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Sge=Fo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hE=Fo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Cge=Fo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_N=Fo(["#text"]),wN=Fo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),fE=Fo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bN=Fo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z_=Fo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tge=sl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ege=sl(/<%[\w\W]*|[\w\W]*%>/gm),Mge=sl(/\$\{[\w\W]*/gm),Rge=sl(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pge=sl(/^aria-[\-\w]+$/),$H=sl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kge=sl(/^(?:\w+script|data):/i),Bge=sl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),XH=sl(/^html$/i),Ige=sl(/^[a-z][.\w]*(-[.\w]+)+$/i);var AN=Object.freeze({__proto__:null,ARIA_ATTR:Pge,ATTR_WHITESPACE:Bge,CUSTOM_ELEMENT:Ige,DATA_ATTR:Rge,DOCTYPE_NAME:XH,ERB_EXPR:Ege,IS_ALLOWED_URI:$H,IS_SCRIPT_OR_DATA:kge,MUSTACHE_EXPR:Tge,TMPLIT_EXPR:Mge});const C0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Lge=function(){return typeof window>"u"?null:window},Dge=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},SN=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function qH(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lge();const e=Le=>qH(Le);if(e.version="3.2.4",e.removed=[],!n||!n.document||n.document.nodeType!==C0.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:m}=n,g=l.prototype,v=S0(g,"cloneNode"),w=S0(g,"remove"),_=S0(g,"nextSibling"),A=S0(g,"childNodes"),S=S0(g,"parentNode");if(typeof o=="function"){const Le=t.createElement("template");Le.content&&Le.content.ownerDocument&&(t=Le.content.ownerDocument)}let R,B="";const{implementation:I,createNodeIterator:N,createDocumentFragment:U,getElementsByTagName:O}=t,{importNode:P}=r;let F=SN();e.isSupported=typeof VH=="function"&&typeof S=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:K,ERB_EXPR:Q,TMPLIT_EXPR:Y,DATA_ATTR:ee,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:G,CUSTOM_ELEMENT:te}=AN;let{IS_ALLOWED_URI:re}=AN,Z=null;const ne=mr({},[...vN,...cE,...uE,...hE,..._N]);let ce=null;const ye=mr({},[...wN,...fE,...bN,...z_]);let he=Object.seal(WH(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,ke=null,Ue=!0,Qe=!0,Te=!1,$e=!0,Ee=!1,Oe=!0,le=!1,vt=!1,ft=!1,_t=!1,mt=!1,Vt=!1,bt=!0,de=!1;const ae="user-content-";let He=!0,Ze=!1,ut={},st=null;const It=mr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Et=null;const Lt=mr({},["audio","video","img","source","image","track"]);let hn=null;const gt=mr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",zt="http://www.w3.org/1999/xhtml";let Ft=zt,Me=!1,et=null;const wt=mr({},[jt,$t,zt],lE);let Se=mr({},["mi","mo","mn","ms","mtext"]),je=mr({},["annotation-xml"]);const qe=mr({},["title","style","font","a","script"]);let at=null;const Nt=["application/xhtml+xml","text/html"],Dt="text/html";let kt=null,En=null;const xr=t.createElement("form"),Mn=function(me){return me instanceof RegExp||me instanceof Function},_r=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(En&&En===me)){if((!me||typeof me!="object")&&(me={}),me=Td(me),at=Nt.indexOf(me.PARSER_MEDIA_TYPE)===-1?Dt:me.PARSER_MEDIA_TYPE,kt=at==="application/xhtml+xml"?lE:fw,Z=Ol(me,"ALLOWED_TAGS")?mr({},me.ALLOWED_TAGS,kt):ne,ce=Ol(me,"ALLOWED_ATTR")?mr({},me.ALLOWED_ATTR,kt):ye,et=Ol(me,"ALLOWED_NAMESPACES")?mr({},me.ALLOWED_NAMESPACES,lE):wt,hn=Ol(me,"ADD_URI_SAFE_ATTR")?mr(Td(gt),me.ADD_URI_SAFE_ATTR,kt):gt,Et=Ol(me,"ADD_DATA_URI_TAGS")?mr(Td(Lt),me.ADD_DATA_URI_TAGS,kt):Lt,st=Ol(me,"FORBID_CONTENTS")?mr({},me.FORBID_CONTENTS,kt):It,Ce=Ol(me,"FORBID_TAGS")?mr({},me.FORBID_TAGS,kt):{},ke=Ol(me,"FORBID_ATTR")?mr({},me.FORBID_ATTR,kt):{},ut=Ol(me,"USE_PROFILES")?me.USE_PROFILES:!1,Ue=me.ALLOW_ARIA_ATTR!==!1,Qe=me.ALLOW_DATA_ATTR!==!1,Te=me.ALLOW_UNKNOWN_PROTOCOLS||!1,$e=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ee=me.SAFE_FOR_TEMPLATES||!1,Oe=me.SAFE_FOR_XML!==!1,le=me.WHOLE_DOCUMENT||!1,_t=me.RETURN_DOM||!1,mt=me.RETURN_DOM_FRAGMENT||!1,Vt=me.RETURN_TRUSTED_TYPE||!1,ft=me.FORCE_BODY||!1,bt=me.SANITIZE_DOM!==!1,de=me.SANITIZE_NAMED_PROPS||!1,He=me.KEEP_CONTENT!==!1,Ze=me.IN_PLACE||!1,re=me.ALLOWED_URI_REGEXP||$H,Ft=me.NAMESPACE||zt,Se=me.MATHML_TEXT_INTEGRATION_POINTS||Se,je=me.HTML_INTEGRATION_POINTS||je,he=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&Mn(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(he.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&Mn(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(he.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(he.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ee&&(Qe=!1),mt&&(_t=!0),ut&&(Z=mr({},_N),ce=[],ut.html===!0&&(mr(Z,vN),mr(ce,wN)),ut.svg===!0&&(mr(Z,cE),mr(ce,fE),mr(ce,z_)),ut.svgFilters===!0&&(mr(Z,uE),mr(ce,fE),mr(ce,z_)),ut.mathMl===!0&&(mr(Z,hE),mr(ce,bN),mr(ce,z_))),me.ADD_TAGS&&(Z===ne&&(Z=Td(Z)),mr(Z,me.ADD_TAGS,kt)),me.ADD_ATTR&&(ce===ye&&(ce=Td(ce)),mr(ce,me.ADD_ATTR,kt)),me.ADD_URI_SAFE_ATTR&&mr(hn,me.ADD_URI_SAFE_ATTR,kt),me.FORBID_CONTENTS&&(st===It&&(st=Td(st)),mr(st,me.FORBID_CONTENTS,kt)),He&&(Z["#text"]=!0),le&&mr(Z,["html","head","body"]),Z.table&&(mr(Z,["tbody"]),delete Ce.tbody),me.TRUSTED_TYPES_POLICY){if(typeof me.TRUSTED_TYPES_POLICY.createHTML!="function")throw A0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw A0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=me.TRUSTED_TYPES_POLICY,B=R.createHTML("")}else R===void 0&&(R=Dge(m,i)),R!==null&&typeof B=="string"&&(B=R.createHTML(""));Fo&&Fo(me),En=me}},Or=mr({},[...cE,...uE,...Sge]),Xi=mr({},[...hE,...Cge]),Ks=function(me){let De=S(me);(!De||!De.tagName)&&(De={namespaceURI:Ft,tagName:"template"});const q=fw(me.tagName),pe=fw(De.tagName);return et[me.namespaceURI]?me.namespaceURI===$t?De.namespaceURI===zt?q==="svg":De.namespaceURI===jt?q==="svg"&&(pe==="annotation-xml"||Se[pe]):!!Or[q]:me.namespaceURI===jt?De.namespaceURI===zt?q==="math":De.namespaceURI===$t?q==="math"&&je[pe]:!!Xi[q]:me.namespaceURI===zt?De.namespaceURI===$t&&!je[pe]||De.namespaceURI===jt&&!Se[pe]?!1:!Xi[q]&&(qe[q]||!Or[q]):!!(at==="application/xhtml+xml"&&et[me.namespaceURI]):!1},ur=function(me){w0(e.removed,{element:me});try{S(me).removeChild(me)}catch{w(me)}},Gr=function(me,De){try{w0(e.removed,{attribute:De.getAttributeNode(me),from:De})}catch{w0(e.removed,{attribute:null,from:De})}if(De.removeAttribute(me),me==="is")if(_t||mt)try{ur(De)}catch{}else try{De.setAttribute(me,"")}catch{}},Ni=function(me){let De=null,q=null;if(ft)me="<remove></remove>"+me;else{const xe=xN(me,/^[\r\n\t ]+/);q=xe&&xe[0]}at==="application/xhtml+xml"&&Ft===zt&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");const pe=R?R.createHTML(me):me;if(Ft===zt)try{De=new d().parseFromString(pe,at)}catch{}if(!De||!De.documentElement){De=I.createDocument(Ft,"template",null);try{De.documentElement.innerHTML=Me?B:pe}catch{}}const be=De.body||De.documentElement;return me&&q&&be.insertBefore(t.createTextNode(q),be.childNodes[0]||null),Ft===zt?O.call(De,le?"html":"body")[0]:le?De.documentElement:be},Xn=function(me){return N.call(me.ownerDocument||me,me,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},fn=function(me){return me instanceof h&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof u)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},Js=function(me){return typeof a=="function"&&me instanceof a};function Pi(Le,me,De){U_(Le,q=>{q.call(e,me,De,En)})}const J=function(me){let De=null;if(Pi(F.beforeSanitizeElements,me,null),fn(me))return ur(me),!0;const q=kt(me.nodeName);if(Pi(F.uponSanitizeElement,me,{tagName:q,allowedTags:Z}),me.hasChildNodes()&&!Js(me.firstElementChild)&&Eo(/<[/\w]/g,me.innerHTML)&&Eo(/<[/\w]/g,me.textContent)||me.nodeType===C0.progressingInstruction||Oe&&me.nodeType===C0.comment&&Eo(/<[/\w]/g,me.data))return ur(me),!0;if(!Z[q]||Ce[q]){if(!Ce[q]&&Re(q)&&(he.tagNameCheck instanceof RegExp&&Eo(he.tagNameCheck,q)||he.tagNameCheck instanceof Function&&he.tagNameCheck(q)))return!1;if(He&&!st[q]){const pe=S(me)||me.parentNode,be=A(me)||me.childNodes;if(be&&pe){const xe=be.length;for(let Pe=xe-1;Pe>=0;--Pe){const Ge=v(be[Pe],!0);Ge.__removalCount=(me.__removalCount||0)+1,pe.insertBefore(Ge,_(me))}}}return ur(me),!0}return me instanceof l&&!Ks(me)||(q==="noscript"||q==="noembed"||q==="noframes")&&Eo(/<\/no(script|embed|frames)/i,me.innerHTML)?(ur(me),!0):(Ee&&me.nodeType===C0.text&&(De=me.textContent,U_([K,Q,Y],pe=>{De=b0(De,pe," ")}),me.textContent!==De&&(w0(e.removed,{element:me.cloneNode()}),me.textContent=De)),Pi(F.afterSanitizeElements,me,null),!1)},ue=function(me,De,q){if(bt&&(De==="id"||De==="name")&&(q in t||q in xr))return!1;if(!(Qe&&!ke[De]&&Eo(ee,De))){if(!(Ue&&Eo($,De))){if(!ce[De]||ke[De]){if(!(Re(me)&&(he.tagNameCheck instanceof RegExp&&Eo(he.tagNameCheck,me)||he.tagNameCheck instanceof Function&&he.tagNameCheck(me))&&(he.attributeNameCheck instanceof RegExp&&Eo(he.attributeNameCheck,De)||he.attributeNameCheck instanceof Function&&he.attributeNameCheck(De))||De==="is"&&he.allowCustomizedBuiltInElements&&(he.tagNameCheck instanceof RegExp&&Eo(he.tagNameCheck,q)||he.tagNameCheck instanceof Function&&he.tagNameCheck(q))))return!1}else if(!hn[De]){if(!Eo(re,b0(q,G,""))){if(!((De==="src"||De==="xlink:href"||De==="href")&&me!=="script"&&_ge(q,"data:")===0&&Et[me])){if(!(Te&&!Eo(oe,b0(q,G,"")))){if(q)return!1}}}}}}return!0},Re=function(me){return me!=="annotation-xml"&&xN(me,te)},Xe=function(me){Pi(F.beforeSanitizeAttributes,me,null);const{attributes:De}=me;if(!De||fn(me))return;const q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ce,forceKeepAttr:void 0};let pe=De.length;for(;pe--;){const be=De[pe],{name:xe,namespaceURI:Pe,value:Ge}=be,nt=kt(xe);let rt=xe==="value"?Ge:wge(Ge);if(q.attrName=nt,q.attrValue=rt,q.keepAttr=!0,q.forceKeepAttr=void 0,Pi(F.uponSanitizeAttribute,me,q),rt=q.attrValue,de&&(nt==="id"||nt==="name")&&(Gr(xe,me),rt=ae+rt),Oe&&Eo(/((--!?|])>)|<\/(style|title)/i,rt)){Gr(xe,me);continue}if(q.forceKeepAttr||(Gr(xe,me),!q.keepAttr))continue;if(!$e&&Eo(/\/>/i,rt)){Gr(xe,me);continue}Ee&&U_([K,Q,Y],Mt=>{rt=b0(rt,Mt," ")});const dt=kt(me.nodeName);if(ue(dt,nt,rt)){if(R&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Pe)switch(m.getAttributeType(dt,nt)){case"TrustedHTML":{rt=R.createHTML(rt);break}case"TrustedScriptURL":{rt=R.createScriptURL(rt);break}}try{Pe?me.setAttributeNS(Pe,xe,rt):me.setAttribute(xe,rt),fn(me)?ur(me):yN(e.removed)}catch{}}}Pi(F.afterSanitizeAttributes,me,null)},it=function Le(me){let De=null;const q=Xn(me);for(Pi(F.beforeSanitizeShadowDOM,me,null);De=q.nextNode();)Pi(F.uponSanitizeShadowNode,De,null),J(De),Xe(De),De.content instanceof s&&Le(De.content);Pi(F.afterSanitizeShadowDOM,me,null)};return e.sanitize=function(Le){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=null,q=null,pe=null,be=null;if(Me=!Le,Me&&(Le="<!-->"),typeof Le!="string"&&!Js(Le))if(typeof Le.toString=="function"){if(Le=Le.toString(),typeof Le!="string")throw A0("dirty is not a string, aborting")}else throw A0("toString is not a function");if(!e.isSupported)return Le;if(vt||_r(me),e.removed=[],typeof Le=="string"&&(Ze=!1),Ze){if(Le.nodeName){const Ge=kt(Le.nodeName);if(!Z[Ge]||Ce[Ge])throw A0("root node is forbidden and cannot be sanitized in-place")}}else if(Le instanceof a)De=Ni("<!---->"),q=De.ownerDocument.importNode(Le,!0),q.nodeType===C0.element&&q.nodeName==="BODY"||q.nodeName==="HTML"?De=q:De.appendChild(q);else{if(!_t&&!Ee&&!le&&Le.indexOf("<")===-1)return R&&Vt?R.createHTML(Le):Le;if(De=Ni(Le),!De)return _t?null:Vt?B:""}De&&ft&&ur(De.firstChild);const xe=Xn(Ze?Le:De);for(;pe=xe.nextNode();)J(pe),Xe(pe),pe.content instanceof s&&it(pe.content);if(Ze)return Le;if(_t){if(mt)for(be=U.call(De.ownerDocument);De.firstChild;)be.appendChild(De.firstChild);else be=De;return(ce.shadowroot||ce.shadowrootmode)&&(be=P.call(r,be,!0)),be}let Pe=le?De.outerHTML:De.innerHTML;return le&&Z["!doctype"]&&De.ownerDocument&&De.ownerDocument.doctype&&De.ownerDocument.doctype.name&&Eo(XH,De.ownerDocument.doctype.name)&&(Pe="<!DOCTYPE "+De.ownerDocument.doctype.name+`>
`+Pe),Ee&&U_([K,Q,Y],Ge=>{Pe=b0(Pe,Ge," ")}),R&&Vt?R.createHTML(Pe):Pe},e.setConfig=function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_r(Le),vt=!0},e.clearConfig=function(){En=null,vt=!1},e.isValidAttribute=function(Le,me,De){En||_r({});const q=kt(Le),pe=kt(me);return ue(q,pe,De)},e.addHook=function(Le,me){typeof me=="function"&&w0(F[Le],me)},e.removeHook=function(Le,me){if(me!==void 0){const De=xge(F[Le],me);return De===-1?void 0:vge(F[Le],De,1)[0]}return yN(F[Le])},e.removeHooks=function(Le){F[Le]=[]},e.removeAllHooks=function(){F=SN()},e}var Pg=qH(),YH=Object.defineProperty,V=(n,e)=>YH(n,"name",{value:e,configurable:!0}),Fge=(n,e)=>{for(var t in e)YH(n,t,{get:e[t],enumerable:!0})},Ru={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},yt={trace:V((...n)=>{},"trace"),debug:V((...n)=>{},"debug"),info:V((...n)=>{},"info"),warn:V((...n)=>{},"warn"),error:V((...n)=>{},"error"),fatal:V((...n)=>{},"fatal")},nk=V(function(n="fatal"){let e=Ru.fatal;typeof n=="string"?n.toLowerCase()in Ru&&(e=Ru[n]):typeof n=="number"&&(e=n),yt.trace=()=>{},yt.debug=()=>{},yt.info=()=>{},yt.warn=()=>{},yt.error=()=>{},yt.fatal=()=>{},e<=Ru.fatal&&(yt.fatal=console.error?console.error.bind(console,Xa("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Xa("FATAL"))),e<=Ru.error&&(yt.error=console.error?console.error.bind(console,Xa("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Xa("ERROR"))),e<=Ru.warn&&(yt.warn=console.warn?console.warn.bind(console,Xa("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Xa("WARN"))),e<=Ru.info&&(yt.info=console.info?console.info.bind(console,Xa("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Xa("INFO"))),e<=Ru.debug&&(yt.debug=console.debug?console.debug.bind(console,Xa("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Xa("DEBUG"))),e<=Ru.trace&&(yt.trace=console.debug?console.debug.bind(console,Xa("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Xa("TRACE")))},"setLogLevel"),Xa=V(n=>`%c${age().format("ss.SSS")} : ${n} : `,"format"),KH=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,dx=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Nge=/\s*%%.*\n/gm,ug,JH=(ug=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},V(ug,"UnknownDiagramError"),ug),kg={},rk=V(function(n,e){n=n.replace(KH,"").replace(dx,"").replace(Nge,`
`);for(const[t,{detector:r}]of Object.entries(kg))if(r(n,e))return t;throw new JH(`No diagram type detected matching given configuration for text: ${n}`)},"detectType"),ZH=V((...n)=>{for(const{id:e,detector:t,loader:r}of n)QH(e,t,r)},"registerLazyLoadedDiagrams"),QH=V((n,e,t)=>{kg[n]&&yt.warn(`Detector with key ${n} already exists. Overwriting.`),kg[n]={detector:e,loader:t},yt.debug(`Detector with key ${n} added${t?" with loader":""}`)},"addDetector"),Oge=V(n=>kg[n].loader,"getDiagramLoader"),WM=V((n,e,{depth:t=2,clobber:r=!1}={})=>{const i={depth:t,clobber:r};return Array.isArray(e)&&!Array.isArray(n)?(e.forEach(s=>WM(n,s,i)),n):Array.isArray(e)&&Array.isArray(n)?(e.forEach(s=>{n.includes(s)||n.push(s)}),n):n===void 0||t<=0?n!=null&&typeof n=="object"&&typeof e=="object"?Object.assign(n,e):e:(e!==void 0&&typeof n=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(n[s]===void 0||typeof n[s]=="object")?(n[s]===void 0&&(n[s]=Array.isArray(e[s])?[]:{}),n[s]=WM(n[s],e[s],{depth:t-1,clobber:r})):(r||typeof n[s]!="object"&&typeof e[s]!="object")&&(n[s]=e[s])}),n)},"assignWithDepth"),$s=WM,uS="#ffffff",hS="#f2f2f2",Bo=V((n,e)=>e?Ve(n,{s:-40,l:10}):Ve(n,{s:-40,l:-10}),"mkBorder"),hg,Uge=(hg=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var t,r,i,s,o,a,l,c,u,h,d;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Ve(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Ve(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Bo(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Bo(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Xt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Xt(this.tertiaryColor),this.lineColor=this.lineColor||Xt(this.background),this.arrowheadColor=this.arrowheadColor||Xt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Bn(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Bn(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Xt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||wn(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ve(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ve(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ve(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ve(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ve(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ve(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Ve(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ve(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ve(this.primaryColor,{h:330}),this.darkMode)for(let m=0;m<this.THEME_COLOR_LIMIT;m++)this["cScale"+m]=Bn(this["cScale"+m],75);else for(let m=0;m<this.THEME_COLOR_LIMIT;m++)this["cScale"+m]=Bn(this["cScale"+m],25);for(let m=0;m<this.THEME_COLOR_LIMIT;m++)this["cScaleInv"+m]=this["cScaleInv"+m]||Xt(this["cScale"+m]);for(let m=0;m<this.THEME_COLOR_LIMIT;m++)this.darkMode?this["cScalePeer"+m]=this["cScalePeer"+m]||wn(this["cScale"+m],10):this["cScalePeer"+m]=this["cScalePeer"+m]||Bn(this["cScale"+m],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let m=0;m<this.THEME_COLOR_LIMIT;m++)this["cScaleLabel"+m]=this["cScaleLabel"+m]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let m=0;m<5;m++)this["surface"+m]=this["surface"+m]||Ve(this.mainBkg,{h:180,s:-15,l:e*(5+m*3)}),this["surfacePeer"+m]=this["surfacePeer"+m]||Ve(this.mainBkg,{h:180,s:-15,l:e*(8+m*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Ve(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Ve(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Ve(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Ve(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Ve(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Ve(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Ve(this.primaryColor,{l:-10}),this.pie5=this.pie5||Ve(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Ve(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Ve(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Ve(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Ve(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Ve(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Ve(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Ve(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ve(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ve(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ve(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ve(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ve(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ve(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Dv(this.quadrant1Fill)?wn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((c=this.xyChart)==null?void 0:c.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Bn(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ve(this.primaryColor,{h:-30}),this.git4=this.git4||Ve(this.primaryColor,{h:-60}),this.git5=this.git5||Ve(this.primaryColor,{h:-90}),this.git6=this.git6||Ve(this.primaryColor,{h:60}),this.git7=this.git7||Ve(this.primaryColor,{h:120}),this.darkMode?(this.git0=wn(this.git0,25),this.git1=wn(this.git1,25),this.git2=wn(this.git2,25),this.git3=wn(this.git3,25),this.git4=wn(this.git4,25),this.git5=wn(this.git5,25),this.git6=wn(this.git6,25),this.git7=wn(this.git7,25)):(this.git0=Bn(this.git0,25),this.git1=Bn(this.git1,25),this.git2=Bn(this.git2,25),this.git3=Bn(this.git3,25),this.git4=Bn(this.git4,25),this.git5=Bn(this.git5,25),this.git6=Bn(this.git6,25),this.git7=Bn(this.git7,25)),this.gitInv0=this.gitInv0||Xt(this.git0),this.gitInv1=this.gitInv1||Xt(this.git1),this.gitInv2=this.gitInv2||Xt(this.git2),this.gitInv3=this.gitInv3||Xt(this.git3),this.gitInv4=this.gitInv4||Xt(this.git4),this.gitInv5=this.gitInv5||Xt(this.git5),this.gitInv6=this.gitInv6||Xt(this.git6),this.gitInv7=this.gitInv7||Xt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||uS,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||hS}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},V(hg,"Theme"),hg),zge=V(n=>{const e=new Uge;return e.calculate(n),e},"getThemeVariables"),fg,Hge=(fg=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=wn(this.primaryColor,16),this.tertiaryColor=Ve(this.primaryColor,{h:-160}),this.primaryBorderColor=Xt(this.background),this.secondaryBorderColor=Bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Xt(this.primaryColor),this.secondaryTextColor=Xt(this.secondaryColor),this.tertiaryTextColor=Xt(this.tertiaryColor),this.lineColor=Xt(this.background),this.textColor=Xt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=wn(Xt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=fx(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Bn("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Bn(this.sectionBkgColor,10),this.taskBorderColor=fx(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=fx(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,t,r,i,s,o,a,l,c,u,h;this.secondBkg=wn(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=wn(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=wn(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ve(this.primaryColor,{h:64}),this.fillType3=Ve(this.secondaryColor,{h:64}),this.fillType4=Ve(this.primaryColor,{h:-64}),this.fillType5=Ve(this.secondaryColor,{h:-64}),this.fillType6=Ve(this.primaryColor,{h:128}),this.fillType7=Ve(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ve(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ve(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ve(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ve(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ve(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ve(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ve(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ve(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ve(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Xt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||wn(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Ve(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Ve(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ve(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ve(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ve(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ve(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ve(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ve(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Dv(this.quadrant1Fill)?wn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((t=this.xyChart)==null?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Bn(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=wn(this.secondaryColor,20),this.git1=wn(this.pie2||this.secondaryColor,20),this.git2=wn(this.pie3||this.tertiaryColor,20),this.git3=wn(this.pie4||Ve(this.primaryColor,{h:-30}),20),this.git4=wn(this.pie5||Ve(this.primaryColor,{h:-60}),20),this.git5=wn(this.pie6||Ve(this.primaryColor,{h:-90}),10),this.git6=wn(this.pie7||Ve(this.primaryColor,{h:60}),10),this.git7=wn(this.pie8||Ve(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Xt(this.git0),this.gitInv1=this.gitInv1||Xt(this.git1),this.gitInv2=this.gitInv2||Xt(this.git2),this.gitInv3=this.gitInv3||Xt(this.git3),this.gitInv4=this.gitInv4||Xt(this.git4),this.gitInv5=this.gitInv5||Xt(this.git5),this.gitInv6=this.gitInv6||Xt(this.git6),this.gitInv7=this.gitInv7||Xt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Xt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Xt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||wn(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||wn(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},V(fg,"Theme"),fg),jge=V(n=>{const e=new Hge;return e.calculate(n),e},"getThemeVariables"),dg,Gge=(dg=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Ve(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Ve(this.primaryColor,{h:-160}),this.primaryBorderColor=Bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=Bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Xt(this.primaryColor),this.secondaryTextColor=Xt(this.secondaryColor),this.tertiaryTextColor=Xt(this.tertiaryColor),this.lineColor=Xt(this.background),this.textColor=Xt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=fx(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,t,r,i,s,o,a,l,c,u,h;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ve(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ve(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ve(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ve(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ve(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ve(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ve(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ve(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ve(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Bn(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Bn(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=Bn(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||Bn(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Ve(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Ve(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Ve(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Xt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Xt(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=wn(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ve(this.primaryColor,{h:64}),this.fillType3=Ve(this.secondaryColor,{h:64}),this.fillType4=Ve(this.primaryColor,{h:-64}),this.fillType5=Ve(this.secondaryColor,{h:-64}),this.fillType6=Ve(this.primaryColor,{h:128}),this.fillType7=Ve(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Ve(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Ve(this.primaryColor,{l:-10}),this.pie5=this.pie5||Ve(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Ve(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Ve(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Ve(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Ve(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Ve(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Ve(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Ve(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ve(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ve(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ve(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ve(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ve(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ve(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Dv(this.quadrant1Fill)?wn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((t=this.xyChart)==null?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ve(this.primaryColor,{h:-30}),this.git4=this.git4||Ve(this.primaryColor,{h:-60}),this.git5=this.git5||Ve(this.primaryColor,{h:-90}),this.git6=this.git6||Ve(this.primaryColor,{h:60}),this.git7=this.git7||Ve(this.primaryColor,{h:120}),this.darkMode?(this.git0=wn(this.git0,25),this.git1=wn(this.git1,25),this.git2=wn(this.git2,25),this.git3=wn(this.git3,25),this.git4=wn(this.git4,25),this.git5=wn(this.git5,25),this.git6=wn(this.git6,25),this.git7=wn(this.git7,25)):(this.git0=Bn(this.git0,25),this.git1=Bn(this.git1,25),this.git2=Bn(this.git2,25),this.git3=Bn(this.git3,25),this.git4=Bn(this.git4,25),this.git5=Bn(this.git5,25),this.git6=Bn(this.git6,25),this.git7=Bn(this.git7,25)),this.gitInv0=this.gitInv0||Bn(Xt(this.git0),25),this.gitInv1=this.gitInv1||Xt(this.git1),this.gitInv2=this.gitInv2||Xt(this.git2),this.gitInv3=this.gitInv3||Xt(this.git3),this.gitInv4=this.gitInv4||Xt(this.git4),this.gitInv5=this.gitInv5||Xt(this.git5),this.gitInv6=this.gitInv6||Xt(this.git6),this.gitInv7=this.gitInv7||Xt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Xt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Xt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||uS,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||hS}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},V(dg,"Theme"),dg),Vge=V(n=>{const e=new Gge;return e.calculate(n),e},"getThemeVariables"),pg,Wge=(pg=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=wn("#cde498",10),this.primaryBorderColor=Bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=Bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Xt(this.primaryColor),this.secondaryTextColor=Xt(this.secondaryColor),this.tertiaryTextColor=Xt(this.primaryColor),this.lineColor=Xt(this.background),this.textColor=Xt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,t,r,i,s,o,a,l,c,u,h;this.actorBorder=Bn(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ve(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ve(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ve(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ve(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ve(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ve(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ve(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ve(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ve(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Bn(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Bn(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=Bn(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||Bn(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Ve(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Ve(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Ve(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ve(this.primaryColor,{h:64}),this.fillType3=Ve(this.secondaryColor,{h:64}),this.fillType4=Ve(this.primaryColor,{h:-64}),this.fillType5=Ve(this.secondaryColor,{h:-64}),this.fillType6=Ve(this.primaryColor,{h:128}),this.fillType7=Ve(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Ve(this.primaryColor,{l:-30}),this.pie5=this.pie5||Ve(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Ve(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Ve(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Ve(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Ve(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Ve(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Ve(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Ve(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ve(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ve(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ve(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ve(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ve(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ve(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Dv(this.quadrant1Fill)?wn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((t=this.xyChart)==null?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ve(this.primaryColor,{h:-30}),this.git4=this.git4||Ve(this.primaryColor,{h:-60}),this.git5=this.git5||Ve(this.primaryColor,{h:-90}),this.git6=this.git6||Ve(this.primaryColor,{h:60}),this.git7=this.git7||Ve(this.primaryColor,{h:120}),this.darkMode?(this.git0=wn(this.git0,25),this.git1=wn(this.git1,25),this.git2=wn(this.git2,25),this.git3=wn(this.git3,25),this.git4=wn(this.git4,25),this.git5=wn(this.git5,25),this.git6=wn(this.git6,25),this.git7=wn(this.git7,25)):(this.git0=Bn(this.git0,25),this.git1=Bn(this.git1,25),this.git2=Bn(this.git2,25),this.git3=Bn(this.git3,25),this.git4=Bn(this.git4,25),this.git5=Bn(this.git5,25),this.git6=Bn(this.git6,25),this.git7=Bn(this.git7,25)),this.gitInv0=this.gitInv0||Xt(this.git0),this.gitInv1=this.gitInv1||Xt(this.git1),this.gitInv2=this.gitInv2||Xt(this.git2),this.gitInv3=this.gitInv3||Xt(this.git3),this.gitInv4=this.gitInv4||Xt(this.git4),this.gitInv5=this.gitInv5||Xt(this.git5),this.gitInv6=this.gitInv6||Xt(this.git6),this.gitInv7=this.gitInv7||Xt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Xt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Xt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||uS,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||hS}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},V(pg,"Theme"),pg),$ge=V(n=>{const e=new Wge;return e.calculate(n),e},"getThemeVariables"),mg,Xge=(mg=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=wn(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Ve(this.primaryColor,{h:-160}),this.primaryBorderColor=Bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=Bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=Xt(this.primaryColor),this.secondaryTextColor=Xt(this.secondaryColor),this.tertiaryTextColor=Xt(this.tertiaryColor),this.lineColor=Xt(this.background),this.textColor=Xt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,t,r,i,s,o,a,l,c,u,h;this.secondBkg=wn(this.contrast,55),this.border2=this.contrast,this.actorBorder=wn(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Xt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||wn(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||Bn(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Ve(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Ve(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=wn(this.contrast,30),this.sectionBkgColor2=wn(this.contrast,30),this.taskBorderColor=Bn(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=wn(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Bn(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ve(this.primaryColor,{h:64}),this.fillType3=Ve(this.secondaryColor,{h:64}),this.fillType4=Ve(this.primaryColor,{h:-64}),this.fillType5=Ve(this.secondaryColor,{h:-64}),this.fillType6=Ve(this.primaryColor,{h:128}),this.fillType7=Ve(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ve(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ve(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ve(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ve(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ve(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ve(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Dv(this.quadrant1Fill)?wn(this.quadrant1Fill):Bn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((t=this.xyChart)==null?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((a=this.xyChart)==null?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Bn(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Ve(this.primaryColor,{h:-30}),this.git4=this.pie5||Ve(this.primaryColor,{h:-60}),this.git5=this.pie6||Ve(this.primaryColor,{h:-90}),this.git6=this.pie7||Ve(this.primaryColor,{h:60}),this.git7=this.pie8||Ve(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Xt(this.git0),this.gitInv1=this.gitInv1||Xt(this.git1),this.gitInv2=this.gitInv2||Xt(this.git2),this.gitInv3=this.gitInv3||Xt(this.git3),this.gitInv4=this.gitInv4||Xt(this.git4),this.gitInv5=this.gitInv5||Xt(this.git5),this.gitInv6=this.gitInv6||Xt(this.git6),this.gitInv7=this.gitInv7||Xt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||uS,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||hS}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},V(mg,"Theme"),mg),qge=V(n=>{const e=new Xge;return e.calculate(n),e},"getThemeVariables"),ju={base:{getThemeVariables:zge},dark:{getThemeVariables:jge},default:{getThemeVariables:Vge},forest:{getThemeVariables:$ge},neutral:{getThemeVariables:qge}},Xh={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},e8={...Xh,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:ju.default.getThemeVariables(),sequence:{...Xh.sequence,messageFont:V(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:V(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:V(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Xh.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Xh.c4,useWidth:void 0,personFont:V(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:V(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:V(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:V(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:V(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:V(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:V(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:V(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:V(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:V(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:V(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:V(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:V(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:V(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:V(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:V(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:V(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:V(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:V(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:V(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:V(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:V(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Xh.pie,useWidth:984},xyChart:{...Xh.xyChart,useWidth:void 0},requirement:{...Xh.requirement,useWidth:void 0},packet:{...Xh.packet}},t8=V((n,e="")=>Object.keys(n).reduce((t,r)=>Array.isArray(n[r])?t:typeof n[r]=="object"&&n[r]!==null?[...t,e+r,...t8(n[r],"")]:[...t,e+r],[]),"keyify"),Yge=new Set(t8(e8,"")),n8=e8,bb=V(n=>{if(yt.debug("sanitizeDirective called with",n),!(typeof n!="object"||n==null)){if(Array.isArray(n)){n.forEach(e=>bb(e));return}for(const e of Object.keys(n)){if(yt.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!Yge.has(e)||n[e]==null){yt.debug("sanitize deleting key: ",e),delete n[e];continue}if(typeof n[e]=="object"){yt.debug("sanitizing object",e),bb(n[e]);continue}const t=["themeCSS","fontFamily","altFontFamily"];for(const r of t)e.includes(r)&&(yt.debug("sanitizing css option",e),n[e]=Kge(n[e]))}if(n.themeVariables)for(const e of Object.keys(n.themeVariables)){const t=n.themeVariables[e];t!=null&&t.match&&!t.match(/^[\d "#%(),.;A-Za-z]+$/)&&(n.themeVariables[e]="")}yt.debug("After sanitization",n)}},"sanitizeDirective"),Kge=V(n=>{let e=0,t=0;for(const r of n){if(e<t)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&t++}return e!==t?"{ /* ERROR: Unbalanced CSS */ }":n},"sanitizeCss"),Bg=Object.freeze(n8),Zo=$s({},Bg),r8,Ig=[],px=$s({},Bg),fS=V((n,e)=>{let t=$s({},n),r={};for(const i of e)o8(i),r=$s(r,i);if(t=$s(t,r),r.theme&&r.theme in ju){const i=$s({},r8),s=$s(i.themeVariables||{},r.themeVariables);t.theme&&t.theme in ju&&(t.themeVariables=ju[t.theme].getThemeVariables(s))}return px=t,a8(px),px},"updateCurrentConfig"),Jge=V(n=>(Zo=$s({},Bg),Zo=$s(Zo,n),n.theme&&ju[n.theme]&&(Zo.themeVariables=ju[n.theme].getThemeVariables(n.themeVariables)),fS(Zo,Ig),Zo),"setSiteConfig"),Zge=V(n=>{r8=$s({},n)},"saveConfigFromInitialize"),Qge=V(n=>(Zo=$s(Zo,n),fS(Zo,Ig),Zo),"updateSiteConfig"),i8=V(()=>$s({},Zo),"getSiteConfig"),s8=V(n=>(a8(n),$s(px,n),rc()),"setConfig"),rc=V(()=>$s({},px),"getConfig"),o8=V(n=>{n&&(["secure",...Zo.secure??[]].forEach(e=>{Object.hasOwn(n,e)&&(yt.debug(`Denied attempt to modify a secure key ${e}`,n[e]),delete n[e])}),Object.keys(n).forEach(e=>{e.startsWith("__")&&delete n[e]}),Object.keys(n).forEach(e=>{typeof n[e]=="string"&&(n[e].includes("<")||n[e].includes(">")||n[e].includes("url(data:"))&&delete n[e],typeof n[e]=="object"&&o8(n[e])}))},"sanitize"),eye=V(n=>{var e;bb(n),n.fontFamily&&!((e=n.themeVariables)!=null&&e.fontFamily)&&(n.themeVariables={...n.themeVariables,fontFamily:n.fontFamily}),Ig.push(n),fS(Zo,Ig)},"addDirective"),Ab=V((n=Zo)=>{Ig=[],fS(n,Ig)},"reset"),tye={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},CN={},nye=V(n=>{CN[n]||(yt.warn(tye[n]),CN[n]=!0)},"issueWarning"),a8=V(n=>{n&&(n.lazyLoadedDiagrams||n.loadExternalDiagramsAtStartup)&&nye("LAZY_LOAD_DEPRECATED")},"checkConfig"),Fv=/<br\s*\/?>/gi,rye=V(n=>n?u8(n).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),iye=(()=>{let n=!1;return()=>{n||(l8(),n=!0)}})();function l8(){const n="data-temp-href-target";Pg.addHook("beforeSanitizeAttributes",e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(n,e.getAttribute("target")??"")}),Pg.addHook("afterSanitizeAttributes",e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute(n)&&(e.setAttribute("target",e.getAttribute(n)??""),e.removeAttribute(n),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}V(l8,"setupDompurifyHooks");var c8=V(n=>(iye(),Pg.sanitize(n)),"removeScript"),TN=V((n,e)=>{var t;if(((t=e.flowchart)==null?void 0:t.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?n=c8(n):r!=="loose"&&(n=u8(n),n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"),n=n.replace(/=/g,"&equals;"),n=lye(n))}return n},"sanitizeMore"),gp=V((n,e)=>n&&(e.dompurifyConfig?n=Pg.sanitize(TN(n,e),e.dompurifyConfig).toString():n=Pg.sanitize(TN(n,e),{FORBID_TAGS:["style"]}).toString(),n),"sanitizeText"),sye=V((n,e)=>typeof n=="string"?gp(n,e):n.flat().map(t=>gp(t,e)),"sanitizeTextOrArray"),oye=V(n=>Fv.test(n),"hasBreaks"),aye=V(n=>n.split(Fv),"splitBreaks"),lye=V(n=>n.replace(/#br#/g,"<br/>"),"placeholderToBreak"),u8=V(n=>n.replace(Fv,"#br#"),"breakToPlaceholder"),cye=V(n=>{let e="";return n&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},"getUrl"),qs=V(n=>!(n===!1||["false","null","0"].includes(String(n).trim().toLowerCase())),"evaluate"),uye=V(function(...n){const e=n.filter(t=>!isNaN(t));return Math.max(...e)},"getMax"),hye=V(function(...n){const e=n.filter(t=>!isNaN(t));return Math.min(...e)},"getMin"),m2e=V(function(n){const e=n.split(/(,)/),t=[];for(let r=0;r<e.length;r++){let i=e[r];if(i===","&&r>0&&r+1<e.length){const s=e[r-1],o=e[r+1];fye(s,o)&&(i=s+","+o,r++,t.pop())}t.push(dye(i))}return t.join("")},"parseGenericTypes"),$M=V((n,e)=>Math.max(0,n.split(e).length-1),"countOccurrence"),fye=V((n,e)=>{const t=$M(n,"~"),r=$M(e,"~");return t===1&&r===1},"shouldCombineSets"),dye=V(n=>{const e=$M(n,"~");let t=!1;if(e<=1)return n;e%2!==0&&n.startsWith("~")&&(n=n.substring(1),t=!0);const r=[...n];let i=r.indexOf("~"),s=r.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)r[i]="<",r[s]=">",i=r.indexOf("~"),s=r.lastIndexOf("~");return t&&r.unshift("~"),r.join("")},"processSet"),EN=V(()=>window.MathMLElement!==void 0,"isMathMLSupported"),XM=/\$\$(.*)\$\$/g,Lg=V(n=>{var e;return(((e=n.match(XM))==null?void 0:e.length)??0)>0},"hasKatex"),g2e=V(async(n,e)=>{n=await ik(n,e);const t=document.createElement("div");t.innerHTML=n,t.id="katex-temp",t.style.visibility="hidden",t.style.position="absolute",t.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",t);const i={width:t.clientWidth,height:t.clientHeight};return t.remove(),i},"calculateMathMLDimensions"),ik=V(async(n,e)=>{if(!Lg(n))return n;if(!(EN()||e.legacyMathML||e.forceLegacyMathML))return n.replace(XM,"MathML is unsupported in this environment.");const{default:t}=await Yr(async()=>{const{default:i}=await import("./katex-DCmpTppl.js");return{default:i}},[]),r=e.forceLegacyMathML||!EN()&&e.legacyMathML?"htmlAndMathml":"mathml";return n.split(Fv).map(i=>Lg(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(XM,(i,s)=>t.renderToString(s,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),iy={getRows:rye,sanitizeText:gp,sanitizeTextOrArray:sye,hasBreaks:oye,splitBreaks:aye,lineBreakRegex:Fv,removeScript:c8,getUrl:cye,evaluate:qs,getMax:uye,getMin:hye},pye=V(function(n,e){for(let t of e)n.attr(t[0],t[1])},"d3Attrs"),mye=V(function(n,e,t){let r=new Map;return t?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",n),r.set("width",e)),r},"calculateSvgSizeAttrs"),h8=V(function(n,e,t,r){const i=mye(e,t,r);pye(n,i)},"configureSvgSize"),gye=V(function(n,e,t,r){const i=e.node().getBBox(),s=i.width,o=i.height;yt.info(`SVG bounds: ${s}x${o}`,i);let a=0,l=0;yt.info(`Graph bounds: ${a}x${l}`,n),a=s+t*2,l=o+t*2,yt.info(`Calculated bounds: ${a}x${l}`),h8(e,l,a,r);const c=`${i.x-t} ${i.y-t} ${i.width+2*t} ${i.height+2*t}`;e.attr("viewBox",c)},"setupGraphViewbox"),dw={},yye=V((n,e,t)=>{let r="";return n in dw&&dw[n]?r=dw[n](t):yt.warn(`No theme found for ${n}`),` & {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
    fill: ${t.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${t.errorBkgColor};
  }
  & .error-text {
    fill: ${t.errorTextColor};
    stroke: ${t.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${t.lineColor};
    stroke: ${t.lineColor};
  }
  & .marker.cross {
    stroke: ${t.lineColor};
  }

  & svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${e}
`},"getStyles"),xye=V((n,e)=>{e!==void 0&&(dw[n]=e)},"addStylesForDiagram"),vye=yye,f8={};Fge(f8,{clear:()=>_ye,getAccDescription:()=>Sye,getAccTitle:()=>bye,getDiagramTitle:()=>Tye,setAccDescription:()=>Aye,setAccTitle:()=>wye,setDiagramTitle:()=>Cye});var sk="",ok="",ak="",lk=V(n=>gp(n,rc()),"sanitizeText"),_ye=V(()=>{sk="",ak="",ok=""},"clear"),wye=V(n=>{sk=lk(n).replace(/^\s+/g,"")},"setAccTitle"),bye=V(()=>sk,"getAccTitle"),Aye=V(n=>{ak=lk(n).replace(/\n\s+/g,`
`)},"setAccDescription"),Sye=V(()=>ak,"getAccDescription"),Cye=V(n=>{ok=lk(n)},"setDiagramTitle"),Tye=V(()=>ok,"getDiagramTitle"),MN=yt,Eye=nk,Fr=rc,y2e=s8,x2e=Bg,d8=V(n=>gp(n,Fr()),"sanitizeText"),Mye=gye,Rye=V(()=>f8,"getCommonDb"),Sb={},Cb=V((n,e,t)=>{var r;Sb[n]&&MN.warn(`Diagram with id ${n} already registered. Overwriting.`),Sb[n]=e,t&&QH(n,t),xye(n,e.styles),(r=e.injectUtils)==null||r.call(e,MN,Eye,Fr,d8,Mye,Rye(),()=>{})},"registerDiagram"),qM=V(n=>{if(n in Sb)return Sb[n];throw new Pye(n)},"getDiagram"),gg,Pye=(gg=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},V(gg,"DiagramNotFoundError"),gg);function ck(n){return typeof n>"u"||n===null}V(ck,"isNothing");function p8(n){return typeof n=="object"&&n!==null}V(p8,"isObject");function m8(n){return Array.isArray(n)?n:ck(n)?[]:[n]}V(m8,"toArray");function g8(n,e){var t,r,i,s;if(e)for(s=Object.keys(e),t=0,r=s.length;t<r;t+=1)i=s[t],n[i]=e[i];return n}V(g8,"extend");function y8(n,e){var t="",r;for(r=0;r<e;r+=1)t+=n;return t}V(y8,"repeat");function x8(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}V(x8,"isNegativeZero");var kye=ck,Bye=p8,Iye=m8,Lye=y8,Dye=x8,Fye=g8,ys={isNothing:kye,isObject:Bye,toArray:Iye,repeat:Lye,isNegativeZero:Dye,extend:Fye};function uk(n,e){var t="",r=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),r+" "+t):r}V(uk,"formatError");function Dg(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=uk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}V(Dg,"YAMLException$1");Dg.prototype=Object.create(Error.prototype);Dg.prototype.constructor=Dg;Dg.prototype.toString=V(function(e){return this.name+": "+uk(this,e)},"toString");var ea=Dg;function pw(n,e,t,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),t-r>a&&(o=" ...",t=r+a-o.length),{str:s+n.slice(e,t).replace(/\t/g,"→")+o,pos:r-e+s.length}}V(pw,"getLine");function mw(n,e){return ys.repeat(" ",e-n.length)+n}V(mw,"padStart");function v8(n,e){if(e=Object.create(e||null),!n.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=t.exec(n.buffer);)i.push(s.index),r.push(s.index+s[0].length),n.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,c,u=Math.min(n.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=pw(n.buffer,r[o-l],i[o-l],n.position-(r[o]-r[o-l]),h),a=ys.repeat(" ",e.indent)+mw((n.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=pw(n.buffer,r[o],i[o],n.position,h),a+=ys.repeat(" ",e.indent)+mw((n.line+1).toString(),u)+" | "+c.str+`
`,a+=ys.repeat("-",e.indent+u+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=i.length);l++)c=pw(n.buffer,r[o+l],i[o+l],n.position-(r[o]-r[o+l]),h),a+=ys.repeat(" ",e.indent)+mw((n.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}V(v8,"makeSnippet");var Nye=v8,Oye=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Uye=["scalar","sequence","mapping"];function _8(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(r){e[String(r)]=t})}),e}V(_8,"compileStyleAliases");function w8(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(Oye.indexOf(t)===-1)throw new ea('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=_8(e.styleAliases||null),Uye.indexOf(this.kind)===-1)throw new ea('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}V(w8,"Type$1");var mo=w8;function YM(n,e){var t=[];return n[e].forEach(function(r){var i=t.length;t.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),t[i]=r}),t}V(YM,"compileList");function b8(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function r(i){i.multi?(n.multi[i.kind].push(i),n.multi.fallback.push(i)):n[i.kind][i.tag]=n.fallback[i.tag]=i}for(V(r,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}V(b8,"compileMap");function Tb(n){return this.extend(n)}V(Tb,"Schema$1");Tb.prototype.extend=V(function(e){var t=[],r=[];if(e instanceof mo)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new ea("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof mo))throw new ea("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ea("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ea("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof mo))throw new ea("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Tb.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=YM(i,"implicit"),i.compiledExplicit=YM(i,"explicit"),i.compiledTypeMap=b8(i.compiledImplicit,i.compiledExplicit),i},"extend");var zye=Tb,Hye=new mo("tag:yaml.org,2002:str",{kind:"scalar",construct:V(function(n){return n!==null?n:""},"construct")}),jye=new mo("tag:yaml.org,2002:seq",{kind:"sequence",construct:V(function(n){return n!==null?n:[]},"construct")}),Gye=new mo("tag:yaml.org,2002:map",{kind:"mapping",construct:V(function(n){return n!==null?n:{}},"construct")}),Vye=new zye({explicit:[Hye,jye,Gye]});function A8(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}V(A8,"resolveYamlNull");function S8(){return null}V(S8,"constructYamlNull");function C8(n){return n===null}V(C8,"isNull");var Wye=new mo("tag:yaml.org,2002:null",{kind:"scalar",resolve:A8,construct:S8,predicate:C8,represent:{canonical:V(function(){return"~"},"canonical"),lowercase:V(function(){return"null"},"lowercase"),uppercase:V(function(){return"NULL"},"uppercase"),camelcase:V(function(){return"Null"},"camelcase"),empty:V(function(){return""},"empty")},defaultStyle:"lowercase"});function T8(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}V(T8,"resolveYamlBoolean");function E8(n){return n==="true"||n==="True"||n==="TRUE"}V(E8,"constructYamlBoolean");function M8(n){return Object.prototype.toString.call(n)==="[object Boolean]"}V(M8,"isBoolean");var $ye=new mo("tag:yaml.org,2002:bool",{kind:"scalar",resolve:T8,construct:E8,predicate:M8,represent:{lowercase:V(function(n){return n?"true":"false"},"lowercase"),uppercase:V(function(n){return n?"TRUE":"FALSE"},"uppercase"),camelcase:V(function(n){return n?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function R8(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}V(R8,"isHexCode");function P8(n){return 48<=n&&n<=55}V(P8,"isOctCode");function k8(n){return 48<=n&&n<=57}V(k8,"isDecCode");function B8(n){if(n===null)return!1;var e=n.length,t=0,r=!1,i;if(!e)return!1;if(i=n[t],(i==="-"||i==="+")&&(i=n[++t]),i==="0"){if(t+1===e)return!0;if(i=n[++t],i==="b"){for(t++;t<e;t++)if(i=n[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(t++;t<e;t++)if(i=n[t],i!=="_"){if(!R8(n.charCodeAt(t)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(t++;t<e;t++)if(i=n[t],i!=="_"){if(!P8(n.charCodeAt(t)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;t<e;t++)if(i=n[t],i!=="_"){if(!k8(n.charCodeAt(t)))return!1;r=!0}return!(!r||i==="_")}V(B8,"resolveYamlInteger");function I8(n){var e=n,t=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}V(I8,"constructYamlInteger");function L8(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!ys.isNegativeZero(n)}V(L8,"isInteger");var Xye=new mo("tag:yaml.org,2002:int",{kind:"scalar",resolve:B8,construct:I8,predicate:L8,represent:{binary:V(function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},"binary"),octal:V(function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},"octal"),decimal:V(function(n){return n.toString(10)},"decimal"),hexadecimal:V(function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),qye=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function D8(n){return!(n===null||!qye.test(n)||n[n.length-1]==="_")}V(D8,"resolveYamlFloat");function F8(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}V(F8,"constructYamlFloat");var Yye=/^[-+]?[0-9]+e/;function N8(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ys.isNegativeZero(n))return"-0.0";return t=n.toString(10),Yye.test(t)?t.replace("e",".e"):t}V(N8,"representYamlFloat");function O8(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||ys.isNegativeZero(n))}V(O8,"isFloat");var Kye=new mo("tag:yaml.org,2002:float",{kind:"scalar",resolve:D8,construct:F8,predicate:O8,represent:N8,defaultStyle:"lowercase"}),U8=Vye.extend({implicit:[Wye,$ye,Xye,Kye]}),Jye=U8,z8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),H8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function j8(n){return n===null?!1:z8.exec(n)!==null||H8.exec(n)!==null}V(j8,"resolveYamlTimestamp");function G8(n){var e,t,r,i,s,o,a,l=0,c=null,u,h,d;if(e=z8.exec(n),e===null&&(e=H8.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(t,r,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],h=+(e[11]||0),c=(u*60+h)*6e4,e[9]==="-"&&(c=-c)),d=new Date(Date.UTC(t,r,i,s,o,a,l)),c&&d.setTime(d.getTime()-c),d}V(G8,"constructYamlTimestamp");function V8(n){return n.toISOString()}V(V8,"representYamlTimestamp");var Zye=new mo("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:j8,construct:G8,instanceOf:Date,represent:V8});function W8(n){return n==="<<"||n===null}V(W8,"resolveYamlMerge");var Qye=new mo("tag:yaml.org,2002:merge",{kind:"scalar",resolve:W8}),hk=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $8(n){if(n===null)return!1;var e,t,r=0,i=n.length,s=hk;for(t=0;t<i;t++)if(e=s.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}V($8,"resolveYamlBinary");function X8(n){var e,t,r=n.replace(/[\r\n=]/g,""),i=r.length,s=hk,o=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return t=i%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}V(X8,"constructYamlBinary");function q8(n){var e="",t=0,r,i,s=n.length,o=hk;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+n[r];return i=s%3,i===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):i===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):i===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}V(q8,"representYamlBinary");function Y8(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}V(Y8,"isBinary");var e0e=new mo("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$8,construct:X8,predicate:Y8,represent:q8}),t0e=Object.prototype.hasOwnProperty,n0e=Object.prototype.toString;function K8(n){if(n===null)return!0;var e=[],t,r,i,s,o,a=n;for(t=0,r=a.length;t<r;t+=1){if(i=a[t],o=!1,n0e.call(i)!=="[object Object]")return!1;for(s in i)if(t0e.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}V(K8,"resolveYamlOmap");function J8(n){return n!==null?n:[]}V(J8,"constructYamlOmap");var r0e=new mo("tag:yaml.org,2002:omap",{kind:"sequence",resolve:K8,construct:J8}),i0e=Object.prototype.toString;function Z8(n){if(n===null)return!0;var e,t,r,i,s,o=n;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(r=o[e],i0e.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}V(Z8,"resolveYamlPairs");function Q8(n){if(n===null)return[];var e,t,r,i,s,o=n;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1)r=o[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}V(Q8,"constructYamlPairs");var s0e=new mo("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Z8,construct:Q8}),o0e=Object.prototype.hasOwnProperty;function ej(n){if(n===null)return!0;var e,t=n;for(e in t)if(o0e.call(t,e)&&t[e]!==null)return!1;return!0}V(ej,"resolveYamlSet");function tj(n){return n!==null?n:{}}V(tj,"constructYamlSet");var a0e=new mo("tag:yaml.org,2002:set",{kind:"mapping",resolve:ej,construct:tj}),nj=Jye.extend({implicit:[Zye,Qye],explicit:[e0e,r0e,s0e,a0e]}),df=Object.prototype.hasOwnProperty,Eb=1,rj=2,ij=3,Mb=4,dE=1,l0e=2,RN=3,c0e=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,u0e=/[\x85\u2028\u2029]/,h0e=/[,\[\]\{\}]/,sj=/^(?:!|!!|![a-z\-]+!)$/i,oj=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function KM(n){return Object.prototype.toString.call(n)}V(KM,"_class");function Yl(n){return n===10||n===13}V(Yl,"is_EOL");function rf(n){return n===9||n===32}V(rf,"is_WHITE_SPACE");function Io(n){return n===9||n===32||n===10||n===13}V(Io,"is_WS_OR_EOL");function Gd(n){return n===44||n===91||n===93||n===123||n===125}V(Gd,"is_FLOW_INDICATOR");function aj(n){var e;return 48<=n&&n<=57?n-48:(e=n|32,97<=e&&e<=102?e-97+10:-1)}V(aj,"fromHexCode");function lj(n){return n===120?2:n===117?4:n===85?8:0}V(lj,"escapedHexLen");function cj(n){return 48<=n&&n<=57?n-48:-1}V(cj,"fromDecimalCode");function JM(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?" ":n===76?"\u2028":n===80?"\u2029":""}V(JM,"simpleEscapeSequence");function uj(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}V(uj,"charFromCodepoint");var hj=new Array(256),fj=new Array(256);for(_d=0;_d<256;_d++)hj[_d]=JM(_d)?1:0,fj[_d]=JM(_d);var _d;function dj(n,e){this.input=n,this.filename=e.filename||null,this.schema=e.schema||nj,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}V(dj,"State$1");function fk(n,e){var t={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return t.snippet=Nye(t),new ea(e,t)}V(fk,"generateError");function _n(n,e){throw fk(n,e)}V(_n,"throwError");function $x(n,e){n.onWarning&&n.onWarning.call(null,fk(n,e))}V($x,"throwWarning");var PN={YAML:V(function(e,t,r){var i,s,o;e.version!==null&&_n(e,"duplication of %YAML directive"),r.length!==1&&_n(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&_n(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&_n(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&$x(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:V(function(e,t,r){var i,s;r.length!==2&&_n(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],sj.test(i)||_n(e,"ill-formed tag handle (first argument) of the TAG directive"),df.call(e.tagMap,i)&&_n(e,'there is a previously declared suffix for "'+i+'" tag handle'),oj.test(s)||_n(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{_n(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s},"handleTagDirective")};function Gu(n,e,t,r){var i,s,o,a;if(e<t){if(a=n.input.slice(e,t),r)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||_n(n,"expected valid JSON character");else c0e.test(a)&&_n(n,"the stream contains non-printable characters");n.result+=a}}V(Gu,"captureSegment");function ZM(n,e,t,r){var i,s,o,a;for(ys.isObject(t)||_n(n,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),o=0,a=i.length;o<a;o+=1)s=i[o],df.call(e,s)||(e[s]=t[s],r[s]=!0)}V(ZM,"mergeMappings");function Vd(n,e,t,r,i,s,o,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&_n(n,"nested arrays are not supported inside keys"),typeof i=="object"&&KM(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&KM(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)ZM(n,e,s[c],t);else ZM(n,e,s,t);else!n.json&&!df.call(t,i)&&df.call(e,i)&&(n.line=o||n.line,n.lineStart=a||n.lineStart,n.position=l||n.position,_n(n,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete t[i];return e}V(Vd,"storeMappingPair");function dS(n){var e;e=n.input.charCodeAt(n.position),e===10?n.position++:e===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):_n(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}V(dS,"readLineBreak");function Wi(n,e,t){for(var r=0,i=n.input.charCodeAt(n.position);i!==0;){for(;rf(i);)i===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),i=n.input.charCodeAt(++n.position);if(e&&i===35)do i=n.input.charCodeAt(++n.position);while(i!==10&&i!==13&&i!==0);if(Yl(i))for(dS(n),i=n.input.charCodeAt(n.position),r++,n.lineIndent=0;i===32;)n.lineIndent++,i=n.input.charCodeAt(++n.position);else break}return t!==-1&&r!==0&&n.lineIndent<t&&$x(n,"deficient indentation"),r}V(Wi,"skipSeparationSpace");function Nv(n){var e=n.position,t;return t=n.input.charCodeAt(e),!!((t===45||t===46)&&t===n.input.charCodeAt(e+1)&&t===n.input.charCodeAt(e+2)&&(e+=3,t=n.input.charCodeAt(e),t===0||Io(t)))}V(Nv,"testDocumentSeparator");function pS(n,e){e===1?n.result+=" ":e>1&&(n.result+=ys.repeat(`
`,e-1))}V(pS,"writeFoldedLines");function pj(n,e,t){var r,i,s,o,a,l,c,u,h=n.kind,d=n.result,m;if(m=n.input.charCodeAt(n.position),Io(m)||Gd(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=n.input.charCodeAt(n.position+1),Io(i)||t&&Gd(i)))return!1;for(n.kind="scalar",n.result="",s=o=n.position,a=!1;m!==0;){if(m===58){if(i=n.input.charCodeAt(n.position+1),Io(i)||t&&Gd(i))break}else if(m===35){if(r=n.input.charCodeAt(n.position-1),Io(r))break}else{if(n.position===n.lineStart&&Nv(n)||t&&Gd(m))break;if(Yl(m))if(l=n.line,c=n.lineStart,u=n.lineIndent,Wi(n,!1,-1),n.lineIndent>=e){a=!0,m=n.input.charCodeAt(n.position);continue}else{n.position=o,n.line=l,n.lineStart=c,n.lineIndent=u;break}}a&&(Gu(n,s,o,!1),pS(n,n.line-l),s=o=n.position,a=!1),rf(m)||(o=n.position+1),m=n.input.charCodeAt(++n.position)}return Gu(n,s,o,!1),n.result?!0:(n.kind=h,n.result=d,!1)}V(pj,"readPlainScalar");function mj(n,e){var t,r,i;if(t=n.input.charCodeAt(n.position),t!==39)return!1;for(n.kind="scalar",n.result="",n.position++,r=i=n.position;(t=n.input.charCodeAt(n.position))!==0;)if(t===39)if(Gu(n,r,n.position,!0),t=n.input.charCodeAt(++n.position),t===39)r=n.position,n.position++,i=n.position;else return!0;else Yl(t)?(Gu(n,r,i,!0),pS(n,Wi(n,!1,e)),r=i=n.position):n.position===n.lineStart&&Nv(n)?_n(n,"unexpected end of the document within a single quoted scalar"):(n.position++,i=n.position);_n(n,"unexpected end of the stream within a single quoted scalar")}V(mj,"readSingleQuotedScalar");function gj(n,e){var t,r,i,s,o,a;if(a=n.input.charCodeAt(n.position),a!==34)return!1;for(n.kind="scalar",n.result="",n.position++,t=r=n.position;(a=n.input.charCodeAt(n.position))!==0;){if(a===34)return Gu(n,t,n.position,!0),n.position++,!0;if(a===92){if(Gu(n,t,n.position,!0),a=n.input.charCodeAt(++n.position),Yl(a))Wi(n,!1,e);else if(a<256&&hj[a])n.result+=fj[a],n.position++;else if((o=lj(a))>0){for(i=o,s=0;i>0;i--)a=n.input.charCodeAt(++n.position),(o=aj(a))>=0?s=(s<<4)+o:_n(n,"expected hexadecimal character");n.result+=uj(s),n.position++}else _n(n,"unknown escape sequence");t=r=n.position}else Yl(a)?(Gu(n,t,r,!0),pS(n,Wi(n,!1,e)),t=r=n.position):n.position===n.lineStart&&Nv(n)?_n(n,"unexpected end of the document within a double quoted scalar"):(n.position++,r=n.position)}_n(n,"unexpected end of the stream within a double quoted scalar")}V(gj,"readDoubleQuotedScalar");function yj(n,e){var t=!0,r,i,s,o=n.tag,a,l=n.anchor,c,u,h,d,m,g=Object.create(null),v,w,_,A;if(A=n.input.charCodeAt(n.position),A===91)u=93,m=!1,a=[];else if(A===123)u=125,m=!0,a={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=a),A=n.input.charCodeAt(++n.position);A!==0;){if(Wi(n,!0,e),A=n.input.charCodeAt(n.position),A===u)return n.position++,n.tag=o,n.anchor=l,n.kind=m?"mapping":"sequence",n.result=a,!0;t?A===44&&_n(n,"expected the node content, but found ','"):_n(n,"missed comma between flow collection entries"),w=v=_=null,h=d=!1,A===63&&(c=n.input.charCodeAt(n.position+1),Io(c)&&(h=d=!0,n.position++,Wi(n,!0,e))),r=n.line,i=n.lineStart,s=n.position,yp(n,e,Eb,!1,!0),w=n.tag,v=n.result,Wi(n,!0,e),A=n.input.charCodeAt(n.position),(d||n.line===r)&&A===58&&(h=!0,A=n.input.charCodeAt(++n.position),Wi(n,!0,e),yp(n,e,Eb,!1,!0),_=n.result),m?Vd(n,a,g,w,v,_,r,i,s):h?a.push(Vd(n,null,g,w,v,_,r,i,s)):a.push(v),Wi(n,!0,e),A=n.input.charCodeAt(n.position),A===44?(t=!0,A=n.input.charCodeAt(++n.position)):t=!1}_n(n,"unexpected end of the stream within a flow collection")}V(yj,"readFlowCollection");function xj(n,e){var t,r,i=dE,s=!1,o=!1,a=e,l=0,c=!1,u,h;if(h=n.input.charCodeAt(n.position),h===124)r=!1;else if(h===62)r=!0;else return!1;for(n.kind="scalar",n.result="";h!==0;)if(h=n.input.charCodeAt(++n.position),h===43||h===45)dE===i?i=h===43?RN:l0e:_n(n,"repeat of a chomping mode identifier");else if((u=cj(h))>=0)u===0?_n(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?_n(n,"repeat of an indentation width identifier"):(a=e+u-1,o=!0);else break;if(rf(h)){do h=n.input.charCodeAt(++n.position);while(rf(h));if(h===35)do h=n.input.charCodeAt(++n.position);while(!Yl(h)&&h!==0)}for(;h!==0;){for(dS(n),n.lineIndent=0,h=n.input.charCodeAt(n.position);(!o||n.lineIndent<a)&&h===32;)n.lineIndent++,h=n.input.charCodeAt(++n.position);if(!o&&n.lineIndent>a&&(a=n.lineIndent),Yl(h)){l++;continue}if(n.lineIndent<a){i===RN?n.result+=ys.repeat(`
`,s?1+l:l):i===dE&&s&&(n.result+=`
`);break}for(r?rf(h)?(c=!0,n.result+=ys.repeat(`
`,s?1+l:l)):c?(c=!1,n.result+=ys.repeat(`
`,l+1)):l===0?s&&(n.result+=" "):n.result+=ys.repeat(`
`,l):n.result+=ys.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,t=n.position;!Yl(h)&&h!==0;)h=n.input.charCodeAt(++n.position);Gu(n,t,n.position,!1)}return!0}V(xj,"readBlockScalar");function QM(n,e){var t,r=n.tag,i=n.anchor,s=[],o,a=!1,l;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=s),l=n.input.charCodeAt(n.position);l!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,_n(n,"tab characters must not be used in indentation")),!(l!==45||(o=n.input.charCodeAt(n.position+1),!Io(o))));){if(a=!0,n.position++,Wi(n,!0,-1)&&n.lineIndent<=e){s.push(null),l=n.input.charCodeAt(n.position);continue}if(t=n.line,yp(n,e,ij,!1,!0),s.push(n.result),Wi(n,!0,-1),l=n.input.charCodeAt(n.position),(n.line===t||n.lineIndent>e)&&l!==0)_n(n,"bad indentation of a sequence entry");else if(n.lineIndent<e)break}return a?(n.tag=r,n.anchor=i,n.kind="sequence",n.result=s,!0):!1}V(QM,"readBlockSequence");function vj(n,e,t){var r,i,s,o,a,l,c=n.tag,u=n.anchor,h={},d=Object.create(null),m=null,g=null,v=null,w=!1,_=!1,A;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=h),A=n.input.charCodeAt(n.position);A!==0;){if(!w&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,_n(n,"tab characters must not be used in indentation")),r=n.input.charCodeAt(n.position+1),s=n.line,(A===63||A===58)&&Io(r))A===63?(w&&(Vd(n,h,d,m,g,null,o,a,l),m=g=v=null),_=!0,w=!0,i=!0):w?(w=!1,i=!0):_n(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,A=r;else{if(o=n.line,a=n.lineStart,l=n.position,!yp(n,t,rj,!1,!0))break;if(n.line===s){for(A=n.input.charCodeAt(n.position);rf(A);)A=n.input.charCodeAt(++n.position);if(A===58)A=n.input.charCodeAt(++n.position),Io(A)||_n(n,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(Vd(n,h,d,m,g,null,o,a,l),m=g=v=null),_=!0,w=!1,i=!1,m=n.tag,g=n.result;else if(_)_n(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=c,n.anchor=u,!0}else if(_)_n(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=c,n.anchor=u,!0}if((n.line===s||n.lineIndent>e)&&(w&&(o=n.line,a=n.lineStart,l=n.position),yp(n,e,Mb,!0,i)&&(w?g=n.result:v=n.result),w||(Vd(n,h,d,m,g,v,o,a,l),m=g=v=null),Wi(n,!0,-1),A=n.input.charCodeAt(n.position)),(n.line===s||n.lineIndent>e)&&A!==0)_n(n,"bad indentation of a mapping entry");else if(n.lineIndent<e)break}return w&&Vd(n,h,d,m,g,null,o,a,l),_&&(n.tag=c,n.anchor=u,n.kind="mapping",n.result=h),_}V(vj,"readBlockMapping");function _j(n){var e,t=!1,r=!1,i,s,o;if(o=n.input.charCodeAt(n.position),o!==33)return!1;if(n.tag!==null&&_n(n,"duplication of a tag property"),o=n.input.charCodeAt(++n.position),o===60?(t=!0,o=n.input.charCodeAt(++n.position)):o===33?(r=!0,i="!!",o=n.input.charCodeAt(++n.position)):i="!",e=n.position,t){do o=n.input.charCodeAt(++n.position);while(o!==0&&o!==62);n.position<n.length?(s=n.input.slice(e,n.position),o=n.input.charCodeAt(++n.position)):_n(n,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Io(o);)o===33&&(r?_n(n,"tag suffix cannot contain exclamation marks"):(i=n.input.slice(e-1,n.position+1),sj.test(i)||_n(n,"named tag handle cannot contain such characters"),r=!0,e=n.position+1)),o=n.input.charCodeAt(++n.position);s=n.input.slice(e,n.position),h0e.test(s)&&_n(n,"tag suffix cannot contain flow indicator characters")}s&&!oj.test(s)&&_n(n,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{_n(n,"tag name is malformed: "+s)}return t?n.tag=s:df.call(n.tagMap,i)?n.tag=n.tagMap[i]+s:i==="!"?n.tag="!"+s:i==="!!"?n.tag="tag:yaml.org,2002:"+s:_n(n,'undeclared tag handle "'+i+'"'),!0}V(_j,"readTagProperty");function wj(n){var e,t;if(t=n.input.charCodeAt(n.position),t!==38)return!1;for(n.anchor!==null&&_n(n,"duplication of an anchor property"),t=n.input.charCodeAt(++n.position),e=n.position;t!==0&&!Io(t)&&!Gd(t);)t=n.input.charCodeAt(++n.position);return n.position===e&&_n(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(e,n.position),!0}V(wj,"readAnchorProperty");function bj(n){var e,t,r;if(r=n.input.charCodeAt(n.position),r!==42)return!1;for(r=n.input.charCodeAt(++n.position),e=n.position;r!==0&&!Io(r)&&!Gd(r);)r=n.input.charCodeAt(++n.position);return n.position===e&&_n(n,"name of an alias node must contain at least one character"),t=n.input.slice(e,n.position),df.call(n.anchorMap,t)||_n(n,'unidentified alias "'+t+'"'),n.result=n.anchorMap[t],Wi(n,!0,-1),!0}V(bj,"readAlias");function yp(n,e,t,r,i){var s,o,a,l=1,c=!1,u=!1,h,d,m,g,v,w;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,s=o=a=Mb===t||ij===t,r&&Wi(n,!0,-1)&&(c=!0,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)),l===1)for(;_j(n)||wj(n);)Wi(n,!0,-1)?(c=!0,a=s,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||Mb===t)&&(Eb===t||rj===t?v=e:v=e+1,w=n.position-n.lineStart,l===1?a&&(QM(n,w)||vj(n,w,v))||yj(n,v)?u=!0:(o&&xj(n,v)||mj(n,v)||gj(n,v)?u=!0:bj(n)?(u=!0,(n.tag!==null||n.anchor!==null)&&_n(n,"alias node should not have any properties")):pj(n,v,Eb===t)&&(u=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):l===0&&(u=a&&QM(n,w))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&_n(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),h=0,d=n.implicitTypes.length;h<d;h+=1)if(g=n.implicitTypes[h],g.resolve(n.result)){n.result=g.construct(n.result),n.tag=g.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(df.call(n.typeMap[n.kind||"fallback"],n.tag))g=n.typeMap[n.kind||"fallback"][n.tag];else for(g=null,m=n.typeMap.multi[n.kind||"fallback"],h=0,d=m.length;h<d;h+=1)if(n.tag.slice(0,m[h].tag.length)===m[h].tag){g=m[h];break}g||_n(n,"unknown tag !<"+n.tag+">"),n.result!==null&&g.kind!==n.kind&&_n(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+g.kind+'", not "'+n.kind+'"'),g.resolve(n.result,n.tag)?(n.result=g.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):_n(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||u}V(yp,"composeNode");function Aj(n){var e=n.position,t,r,i,s=!1,o;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(o=n.input.charCodeAt(n.position))!==0&&(Wi(n,!0,-1),o=n.input.charCodeAt(n.position),!(n.lineIndent>0||o!==37));){for(s=!0,o=n.input.charCodeAt(++n.position),t=n.position;o!==0&&!Io(o);)o=n.input.charCodeAt(++n.position);for(r=n.input.slice(t,n.position),i=[],r.length<1&&_n(n,"directive name must not be less than one character in length");o!==0;){for(;rf(o);)o=n.input.charCodeAt(++n.position);if(o===35){do o=n.input.charCodeAt(++n.position);while(o!==0&&!Yl(o));break}if(Yl(o))break;for(t=n.position;o!==0&&!Io(o);)o=n.input.charCodeAt(++n.position);i.push(n.input.slice(t,n.position))}o!==0&&dS(n),df.call(PN,r)?PN[r](n,r,i):$x(n,'unknown document directive "'+r+'"')}if(Wi(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,Wi(n,!0,-1)):s&&_n(n,"directives end mark is expected"),yp(n,n.lineIndent-1,Mb,!1,!0),Wi(n,!0,-1),n.checkLineBreaks&&u0e.test(n.input.slice(e,n.position))&&$x(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&Nv(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,Wi(n,!0,-1));return}if(n.position<n.length-1)_n(n,"end of the stream or a document separator is expected");else return}V(Aj,"readDocument");function dk(n,e){n=String(n),e=e||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var t=new dj(n,e),r=n.indexOf("\0");for(r!==-1&&(t.position=r,_n(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Aj(t);return t.documents}V(dk,"loadDocuments");function Sj(n,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var r=dk(n,t);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}V(Sj,"loadAll$1");function Cj(n,e){var t=dk(n,e);if(t.length!==0){if(t.length===1)return t[0];throw new ea("expected a single document in the stream, but found more")}}V(Cj,"load$1");var f0e=Sj,d0e=Cj,p0e={loadAll:f0e,load:d0e},Tj=Object.prototype.toString,Ej=Object.prototype.hasOwnProperty,pk=65279,m0e=9,Xx=10,g0e=13,y0e=32,x0e=33,v0e=34,e2=35,_0e=37,w0e=38,b0e=39,A0e=42,Mj=44,S0e=45,Rb=58,C0e=61,T0e=62,E0e=63,M0e=64,Rj=91,Pj=93,R0e=96,kj=123,P0e=124,Bj=125,go={};go[0]="\\0";go[7]="\\a";go[8]="\\b";go[9]="\\t";go[10]="\\n";go[11]="\\v";go[12]="\\f";go[13]="\\r";go[27]="\\e";go[34]='\\"';go[92]="\\\\";go[133]="\\N";go[160]="\\_";go[8232]="\\L";go[8233]="\\P";var k0e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],B0e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ij(n,e){var t,r,i,s,o,a,l;if(e===null)return{};for(t={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)o=r[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=n.compiledTypeMap.fallback[o],l&&Ej.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}V(Ij,"compileStyleMap");function Lj(n){var e,t,r;if(e=n.toString(16).toUpperCase(),n<=255)t="x",r=2;else if(n<=65535)t="u",r=4;else if(n<=4294967295)t="U",r=8;else throw new ea("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+ys.repeat("0",r-e.length)+e}V(Lj,"encodeHex");var I0e=1,qx=2;function Dj(n){this.schema=n.schema||nj,this.indent=Math.max(1,n.indent||2),this.noArrayIndent=n.noArrayIndent||!1,this.skipInvalid=n.skipInvalid||!1,this.flowLevel=ys.isNothing(n.flowLevel)?-1:n.flowLevel,this.styleMap=Ij(this.schema,n.styles||null),this.sortKeys=n.sortKeys||!1,this.lineWidth=n.lineWidth||80,this.noRefs=n.noRefs||!1,this.noCompatMode=n.noCompatMode||!1,this.condenseFlow=n.condenseFlow||!1,this.quotingType=n.quotingType==='"'?qx:I0e,this.forceQuotes=n.forceQuotes||!1,this.replacer=typeof n.replacer=="function"?n.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}V(Dj,"State");function t2(n,e){for(var t=ys.repeat(" ",e),r=0,i=-1,s="",o,a=n.length;r<a;)i=n.indexOf(`
`,r),i===-1?(o=n.slice(r),r=a):(o=n.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=t),s+=o;return s}V(t2,"indentString");function Pb(n,e){return`
`+ys.repeat(" ",n.indent*e)}V(Pb,"generateNextLine");function Fj(n,e){var t,r,i;for(t=0,r=n.implicitTypes.length;t<r;t+=1)if(i=n.implicitTypes[t],i.resolve(e))return!0;return!1}V(Fj,"testImplicitResolving");function Yx(n){return n===y0e||n===m0e}V(Yx,"isWhitespace");function Fg(n){return 32<=n&&n<=126||161<=n&&n<=55295&&n!==8232&&n!==8233||57344<=n&&n<=65533&&n!==pk||65536<=n&&n<=1114111}V(Fg,"isPrintable");function n2(n){return Fg(n)&&n!==pk&&n!==g0e&&n!==Xx}V(n2,"isNsCharOrWhitespace");function r2(n,e,t){var r=n2(n),i=r&&!Yx(n);return(t?r:r&&n!==Mj&&n!==Rj&&n!==Pj&&n!==kj&&n!==Bj)&&n!==e2&&!(e===Rb&&!i)||n2(e)&&!Yx(e)&&n===e2||e===Rb&&i}V(r2,"isPlainSafe");function Nj(n){return Fg(n)&&n!==pk&&!Yx(n)&&n!==S0e&&n!==E0e&&n!==Rb&&n!==Mj&&n!==Rj&&n!==Pj&&n!==kj&&n!==Bj&&n!==e2&&n!==w0e&&n!==A0e&&n!==x0e&&n!==P0e&&n!==C0e&&n!==T0e&&n!==b0e&&n!==v0e&&n!==_0e&&n!==M0e&&n!==R0e}V(Nj,"isPlainSafeFirst");function Oj(n){return!Yx(n)&&n!==Rb}V(Oj,"isPlainSafeLast");function eg(n,e){var t=n.charCodeAt(e),r;return t>=55296&&t<=56319&&e+1<n.length&&(r=n.charCodeAt(e+1),r>=56320&&r<=57343)?(t-55296)*1024+r-56320+65536:t}V(eg,"codePointAt");function mk(n){var e=/^\n* /;return e.test(n)}V(mk,"needIndentIndicator");var Uj=1,i2=2,zj=3,Hj=4,Vm=5;function jj(n,e,t,r,i,s,o,a){var l,c=0,u=null,h=!1,d=!1,m=r!==-1,g=-1,v=Nj(eg(n,0))&&Oj(eg(n,n.length-1));if(e||o)for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=eg(n,l),!Fg(c))return Vm;v=v&&r2(c,u,a),u=c}else{for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=eg(n,l),c===Xx)h=!0,m&&(d=d||l-g-1>r&&n[g+1]!==" ",g=l);else if(!Fg(c))return Vm;v=v&&r2(c,u,a),u=c}d=d||m&&l-g-1>r&&n[g+1]!==" "}return!h&&!d?v&&!o&&!i(n)?Uj:s===qx?Vm:i2:t>9&&mk(n)?Vm:o?s===qx?Vm:i2:d?Hj:zj}V(jj,"chooseScalarStyle");function Gj(n,e,t,r,i){n.dump=function(){if(e.length===0)return n.quotingType===qx?'""':"''";if(!n.noCompatMode&&(k0e.indexOf(e)!==-1||B0e.test(e)))return n.quotingType===qx?'"'+e+'"':"'"+e+"'";var s=n.indent*Math.max(1,t),o=n.lineWidth===-1?-1:Math.max(Math.min(n.lineWidth,40),n.lineWidth-s),a=r||n.flowLevel>-1&&t>=n.flowLevel;function l(c){return Fj(n,c)}switch(V(l,"testAmbiguity"),jj(e,a,n.indent,o,l,n.quotingType,n.forceQuotes&&!r,i)){case Uj:return e;case i2:return"'"+e.replace(/'/g,"''")+"'";case zj:return"|"+s2(e,n.indent)+o2(t2(e,s));case Hj:return">"+s2(e,n.indent)+o2(t2(Vj(e,o),s));case Vm:return'"'+Wj(e)+'"';default:throw new ea("impossible error: invalid scalar style")}}()}V(Gj,"writeScalar");function s2(n,e){var t=mk(n)?String(e):"",r=n[n.length-1]===`
`,i=r&&(n[n.length-2]===`
`||n===`
`),s=i?"+":r?"":"-";return t+s+`
`}V(s2,"blockHeader");function o2(n){return n[n.length-1]===`
`?n.slice(0,-1):n}V(o2,"dropEndingNewline");function Vj(n,e){for(var t=/(\n+)([^\n]*)/g,r=function(){var c=n.indexOf(`
`);return c=c!==-1?c:n.length,t.lastIndex=c,a2(n.slice(0,c),e)}(),i=n[0]===`
`||n[0]===" ",s,o;o=t.exec(n);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!i&&!s&&l!==""?`
`:"")+a2(l,e),i=s}return r}V(Vj,"foldString");function a2(n,e){if(n===""||n[0]===" ")return n;for(var t=/ [^ ]/g,r,i=0,s,o=0,a=0,l="";r=t.exec(n);)a=r.index,a-i>e&&(s=o>i?o:a,l+=`
`+n.slice(i,s),i=s+1),o=a;return l+=`
`,n.length-i>e&&o>i?l+=n.slice(i,o)+`
`+n.slice(o+1):l+=n.slice(i),l.slice(1)}V(a2,"foldLine");function Wj(n){for(var e="",t=0,r,i=0;i<n.length;t>=65536?i+=2:i++)t=eg(n,i),r=go[t],!r&&Fg(t)?(e+=n[i],t>=65536&&(e+=n[i+1])):e+=r||Lj(t);return e}V(Wj,"escapeString");function $j(n,e,t){var r="",i=n.tag,s,o,a;for(s=0,o=t.length;s<o;s+=1)a=t[s],n.replacer&&(a=n.replacer.call(t,String(s),a)),(Wc(n,e,a,!1,!1)||typeof a>"u"&&Wc(n,e,null,!1,!1))&&(r!==""&&(r+=","+(n.condenseFlow?"":" ")),r+=n.dump);n.tag=i,n.dump="["+r+"]"}V($j,"writeFlowSequence");function l2(n,e,t,r){var i="",s=n.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],n.replacer&&(l=n.replacer.call(t,String(o),l)),(Wc(n,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Wc(n,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Pb(n,e)),n.dump&&Xx===n.dump.charCodeAt(0)?i+="-":i+="- ",i+=n.dump);n.tag=s,n.dump=i||"[]"}V(l2,"writeBlockSequence");function Xj(n,e,t){var r="",i=n.tag,s=Object.keys(t),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",r!==""&&(u+=", "),n.condenseFlow&&(u+='"'),l=s[o],c=t[l],n.replacer&&(c=n.replacer.call(t,l,c)),Wc(n,e,l,!1,!1)&&(n.dump.length>1024&&(u+="? "),u+=n.dump+(n.condenseFlow?'"':"")+":"+(n.condenseFlow?"":" "),Wc(n,e,c,!1,!1)&&(u+=n.dump,r+=u));n.tag=i,n.dump="{"+r+"}"}V(Xj,"writeFlowMapping");function qj(n,e,t,r){var i="",s=n.tag,o=Object.keys(t),a,l,c,u,h,d;if(n.sortKeys===!0)o.sort();else if(typeof n.sortKeys=="function")o.sort(n.sortKeys);else if(n.sortKeys)throw new ea("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!r||i!=="")&&(d+=Pb(n,e)),c=o[a],u=t[c],n.replacer&&(u=n.replacer.call(t,c,u)),Wc(n,e+1,c,!0,!0,!0)&&(h=n.tag!==null&&n.tag!=="?"||n.dump&&n.dump.length>1024,h&&(n.dump&&Xx===n.dump.charCodeAt(0)?d+="?":d+="? "),d+=n.dump,h&&(d+=Pb(n,e)),Wc(n,e+1,u,!0,h)&&(n.dump&&Xx===n.dump.charCodeAt(0)?d+=":":d+=": ",d+=n.dump,i+=d));n.tag=s,n.dump=i||"{}"}V(qj,"writeBlockMapping");function c2(n,e,t){var r,i,s,o,a,l;for(i=t?n.explicitTypes:n.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?n.tag=a.representName(e):n.tag=a.tag:n.tag="?",a.represent){if(l=n.styleMap[a.tag]||a.defaultStyle,Tj.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(Ej.call(a.represent,l))r=a.represent[l](e,l);else throw new ea("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');n.dump=r}return!0}return!1}V(c2,"detectType");function Wc(n,e,t,r,i,s,o){n.tag=null,n.dump=t,c2(n,t,!1)||c2(n,t,!0);var a=Tj.call(n.dump),l=r,c;r&&(r=n.flowLevel<0||n.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",h,d;if(u&&(h=n.duplicates.indexOf(t),d=h!==-1),(n.tag!==null&&n.tag!=="?"||d||n.indent!==2&&e>0)&&(i=!1),d&&n.usedDuplicates[h])n.dump="*ref_"+h;else{if(u&&d&&!n.usedDuplicates[h]&&(n.usedDuplicates[h]=!0),a==="[object Object]")r&&Object.keys(n.dump).length!==0?(qj(n,e,n.dump,i),d&&(n.dump="&ref_"+h+n.dump)):(Xj(n,e,n.dump),d&&(n.dump="&ref_"+h+" "+n.dump));else if(a==="[object Array]")r&&n.dump.length!==0?(n.noArrayIndent&&!o&&e>0?l2(n,e-1,n.dump,i):l2(n,e,n.dump,i),d&&(n.dump="&ref_"+h+n.dump)):($j(n,e,n.dump),d&&(n.dump="&ref_"+h+" "+n.dump));else if(a==="[object String]")n.tag!=="?"&&Gj(n,n.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(n.skipInvalid)return!1;throw new ea("unacceptable kind of an object to dump "+a)}n.tag!==null&&n.tag!=="?"&&(c=encodeURI(n.tag[0]==="!"?n.tag.slice(1):n.tag).replace(/!/g,"%21"),n.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",n.dump=c+" "+n.dump)}return!0}V(Wc,"writeNode");function Yj(n,e){var t=[],r=[],i,s;for(kb(n,t,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(t[r[i]]);e.usedDuplicates=new Array(s)}V(Yj,"getDuplicateReferences");function kb(n,e,t){var r,i,s;if(n!==null&&typeof n=="object")if(i=e.indexOf(n),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(e.push(n),Array.isArray(n))for(i=0,s=n.length;i<s;i+=1)kb(n[i],e,t);else for(r=Object.keys(n),i=0,s=r.length;i<s;i+=1)kb(n[r[i]],e,t)}V(kb,"inspectNode");function L0e(n,e){e=e||{};var t=new Dj(e);t.noRefs||Yj(n,t);var r=n;return t.replacer&&(r=t.replacer.call({"":r},"",r)),Wc(t,0,r,!0,!0)?t.dump+`
`:""}V(L0e,"dump$1");function D0e(n,e){return function(){throw new Error("Function yaml."+n+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}V(D0e,"renamed");var F0e=U8,N0e=p0e.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/const O0e=Object.freeze({left:0,top:0,width:16,height:16}),Bb=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Kj=Object.freeze({...O0e,...Bb}),U0e=Object.freeze({...Kj,body:"",hidden:!1}),z0e=Object.freeze({width:null,height:null}),H0e=Object.freeze({...z0e,...Bb}),j0e=(n,e,t,r="")=>{const i=n.split(":");if(n.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:r,prefix:l,name:a};return pE(c)?c:null}const s=i[0],o=s.split("-");if(o.length>1){const a={provider:r,prefix:o.shift(),name:o.join("-")};return pE(a)?a:null}if(t&&r===""){const a={provider:r,prefix:"",name:s};return pE(a,t)?a:null}return null},pE=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1;function G0e(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const r=((n.rotate||0)+(e.rotate||0))%4;return r&&(t.rotate=r),t}function kN(n,e){const t=G0e(n,e);for(const r in U0e)r in Bb?r in n&&!(r in t)&&(t[r]=Bb[r]):r in e?t[r]=e[r]:r in n&&(t[r]=n[r]);return t}function V0e(n,e){const t=n.icons,r=n.aliases||Object.create(null),i=Object.create(null);function s(o){if(t[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=r[o]&&r[o].parent,l=a&&s(a);l&&(i[o]=[a].concat(l))}return i[o]}return e.forEach(s),i}function BN(n,e,t){const r=n.icons,i=n.aliases||Object.create(null);let s={};function o(a){s=kN(r[a]||i[a],s)}return o(e),t.forEach(o),kN(n,s)}function W0e(n,e){if(n.icons[e])return BN(n,e,[]);const t=V0e(n,[e])[e];return t?BN(n,e,t):null}const $0e=/(-?[0-9.]*[0-9]+[0-9.]*)/g,X0e=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function IN(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const r=n.split($0e);if(r===null||!r.length)return n;const i=[];let s=r.shift(),o=X0e.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?i.push(s):i.push(Math.ceil(a*e*t)/t)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");o=!o}}function q0e(n,e="defs"){let t="";const r=n.indexOf("<"+e);for(;r>=0;){const i=n.indexOf(">",r),s=n.indexOf("</"+e);if(i===-1||s===-1)break;const o=n.indexOf(">",s);if(o===-1)break;t+=n.slice(i+1,s).trim(),n=n.slice(0,r).trim()+n.slice(o+1)}return{defs:t,content:n}}function Y0e(n,e){return n?"<defs>"+n+"</defs>"+e:e}function K0e(n,e,t){const r=q0e(n);return Y0e(r.defs,e+r.content+t)}const J0e=n=>n==="unset"||n==="undefined"||n==="none";function Z0e(n,e){const t={...Kj,...n},r={...H0e,...e},i={left:t.left,top:t.top,width:t.width,height:t.height};let s=t.body;[t,r].forEach(v=>{const w=[],_=v.hFlip,A=v.vFlip;let S=v.rotate;_?A?S+=2:(w.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),w.push("scale(-1 1)"),i.top=i.left=0):A&&(w.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),w.push("scale(1 -1)"),i.top=i.left=0);let R;switch(S<0&&(S-=Math.floor(S/4)*4),S=S%4,S){case 1:R=i.height/2+i.top,w.unshift("rotate(90 "+R.toString()+" "+R.toString()+")");break;case 2:w.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:R=i.width/2+i.left,w.unshift("rotate(-90 "+R.toString()+" "+R.toString()+")");break}S%2===1&&(i.left!==i.top&&(R=i.left,i.left=i.top,i.top=R),i.width!==i.height&&(R=i.width,i.width=i.height,i.height=R)),w.length&&(s=K0e(s,'<g transform="'+w.join(" ")+'">',"</g>"))});const o=r.width,a=r.height,l=i.width,c=i.height;let u,h;o===null?(h=a===null?"1em":a==="auto"?c:a,u=IN(h,l/c)):(u=o==="auto"?l:o,h=a===null?IN(u,c/l):a==="auto"?c:a);const d={},m=(v,w)=>{J0e(w)||(d[v]=w.toString())};m("width",u),m("height",h);const g=[i.left,i.top,l,c];return d.viewBox=g.join(" "),{attributes:d,viewBox:g,body:s}}const Q0e=/\sid="(\S+)"/g,exe="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let txe=0;function nxe(n,e=exe){const t=[];let r;for(;r=Q0e.exec(n);)t.push(r[1]);if(!t.length)return n;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(s=>{const o=typeof e=="function"?e(s):e+(txe++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+i+"$3")}),n=n.replace(new RegExp(i,"g"),""),n}function rxe(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)t+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}var ixe={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},u2=new Map,Jj=new Map,sxe=V(n=>{for(const e of n){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(yt.debug("Registering icon pack:",e.name),"loader"in e)Jj.set(e.name,e.loader);else if("icons"in e)u2.set(e.name,e.icons);else throw yt.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),oxe=V(async(n,e)=>{const t=j0e(n,!0,e!==void 0);if(!t)throw new Error(`Invalid icon name: ${n}`);const r=t.prefix||e;if(!r)throw new Error(`Icon name must contain a prefix: ${n}`);let i=u2.get(r);if(!i){const o=Jj.get(r);if(!o)throw new Error(`Icon set not found: ${t.prefix}`);try{i={...await o(),prefix:r},u2.set(r,i)}catch(a){throw yt.error(a),new Error(`Failed to load icon set: ${t.prefix}`)}}const s=W0e(i,t.name);if(!s)throw new Error(`Icon not found: ${n}`);return s},"getRegisteredIconData"),mS=V(async(n,e)=>{let t;try{t=await oxe(n,e==null?void 0:e.fallbackPrefix)}catch(s){yt.error(s),t=ixe}const r=Z0e(t,e);return rxe(nxe(r.body),r.attributes)},"getIconSVG"),gk=V(({flowchart:n})=>{var i,s;const e=((i=n==null?void 0:n.subGraphTitleMargin)==null?void 0:i.top)??0,t=((s=n==null?void 0:n.subGraphTitleMargin)==null?void 0:s.bottom)??0,r=e+t;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:t,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins"),T0={},ms={},LN;function axe(){return LN||(LN=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.BLANK_URL=ms.relativeFirstCharacters=ms.whitespaceEscapeCharsRegex=ms.urlSchemeRegex=ms.ctrlCharactersRegex=ms.htmlCtrlEntityRegex=ms.htmlEntitiesRegex=ms.invalidProtocolRegex=void 0,ms.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,ms.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,ms.htmlCtrlEntityRegex=/&(newline|tab);/gi,ms.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ms.urlSchemeRegex=/^.+(:|&colon;)/gim,ms.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,ms.relativeFirstCharacters=[".","/"],ms.BLANK_URL="about:blank"),ms}var DN;function lxe(){if(DN)return T0;DN=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.sanitizeUrl=void 0;var n=axe();function e(o){return n.relativeFirstCharacters.indexOf(o[0])>-1}function t(o){var a=o.replace(n.ctrlCharactersRegex,"");return a.replace(n.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function r(o){return URL.canParse(o)}function i(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return n.BLANK_URL;var a,l=i(o.trim());do l=t(l).replace(n.htmlCtrlEntityRegex,"").replace(n.ctrlCharactersRegex,"").replace(n.whitespaceEscapeCharsRegex,"").trim(),l=i(l),a=l.match(n.ctrlCharactersRegex)||l.match(n.htmlEntitiesRegex)||l.match(n.htmlCtrlEntityRegex)||l.match(n.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return n.BLANK_URL;if(e(c))return c;var u=c.trimStart(),h=u.match(n.urlSchemeRegex);if(!h)return c;var d=h[0].toLowerCase().trim();if(n.invalidProtocolRegex.test(d))return n.BLANK_URL;var m=u.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return m;if(d==="http:"||d==="https:"){if(!r(m))return n.BLANK_URL;var g=new URL(m);return g.protocol=g.protocol.toLowerCase(),g.hostname=g.hostname.toLowerCase(),g.toString()}return m}return T0.sanitizeUrl=s,T0}var cxe=lxe(),uxe={value:()=>{}};function Zj(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new gw(t)}function gw(n){this._=n}function hxe(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}gw.prototype=Zj.prototype={constructor:gw,on:function(n,e){var t=this._,r=hxe(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=fxe(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=FN(t[i],n.name,e);else if(e==null)for(i in t)t[i]=FN(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new gw(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function fxe(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function FN(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=uxe,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var h2="http://www.w3.org/1999/xhtml";const NN={svg:"http://www.w3.org/2000/svg",xhtml:h2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gS(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),NN.hasOwnProperty(e)?{space:NN[e],local:n}:n}function dxe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===h2&&e.documentElement.namespaceURI===h2?e.createElement(n):e.createElementNS(t,n)}}function pxe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Qj(n){var e=gS(n);return(e.local?pxe:dxe)(e)}function mxe(){}function yk(n){return n==null?mxe:function(){return this.querySelector(n)}}function gxe(n){typeof n!="function"&&(n=yk(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=n.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ta(r,this._parents)}function yxe(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function xxe(){return[]}function eG(n){return n==null?xxe:function(){return this.querySelectorAll(n)}}function vxe(n){return function(){return yxe(n.apply(this,arguments))}}function _xe(n){typeof n=="function"?n=vxe(n):n=eG(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(n.call(l,l.__data__,c,o)),i.push(l));return new Ta(r,i)}function tG(n){return function(){return this.matches(n)}}function nG(n){return function(e){return e.matches(n)}}var wxe=Array.prototype.find;function bxe(n){return function(){return wxe.call(this.children,n)}}function Axe(){return this.firstElementChild}function Sxe(n){return this.select(n==null?Axe:bxe(typeof n=="function"?n:nG(n)))}var Cxe=Array.prototype.filter;function Txe(){return Array.from(this.children)}function Exe(n){return function(){return Cxe.call(this.children,n)}}function Mxe(n){return this.selectAll(n==null?Txe:Exe(typeof n=="function"?n:nG(n)))}function Rxe(n){typeof n!="function"&&(n=tG(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new Ta(r,this._parents)}function rG(n){return new Array(n.length)}function Pxe(){return new Ta(this._enter||this._groups.map(rG),this._parents)}function Ib(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Ib.prototype={constructor:Ib,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function kxe(n){return function(){return n}}function Bxe(n,e,t,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new Ib(n,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function Ixe(n,e,t,r,i,s,o){var a,l,c=new Map,u=e.length,h=s.length,d=new Array(u),m;for(a=0;a<u;++a)(l=e[a])&&(d[a]=m=o.call(l,l.__data__,a,e)+"",c.has(m)?i[a]=l:c.set(m,l));for(a=0;a<h;++a)m=o.call(n,s[a],a,s)+"",(l=c.get(m))?(r[a]=l,l.__data__=s[a],c.delete(m)):t[a]=new Ib(n,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(d[a])===l&&(i[a]=l)}function Lxe(n){return n.__data__}function Dxe(n,e){if(!arguments.length)return Array.from(this,Lxe);var t=e?Ixe:Bxe,r=this._parents,i=this._groups;typeof n!="function"&&(n=kxe(n));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],d=h.length,m=Fxe(n.call(u,u&&u.__data__,c,r)),g=m.length,v=a[c]=new Array(g),w=o[c]=new Array(g),_=l[c]=new Array(d);t(u,h,v,w,_,m,e);for(var A=0,S=0,R,B;A<g;++A)if(R=v[A]){for(A>=S&&(S=A+1);!(B=w[S])&&++S<g;);R._next=B||null}}return o=new Ta(o,r),o._enter=a,o._exit=l,o}function Fxe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Nxe(){return new Ta(this._exit||this._groups.map(rG),this._parents)}function Oxe(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function Uxe(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=t[l],u=r[l],h=c.length,d=a[l]=new Array(h),m,g=0;g<h;++g)(m=c[g]||u[g])&&(d[g]=m);for(;l<i;++l)a[l]=t[l];return new Ta(a,this._parents)}function zxe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Hxe(n){n||(n=jxe);function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Ta(i,this._parents).order()}function jxe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Gxe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Vxe(){return Array.from(this)}function Wxe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function $xe(){let n=0;for(const e of this)++n;return n}function Xxe(){return!this.node()}function qxe(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,o=i.length,a;s<o;++s)(a=i[s])&&n.call(a,a.__data__,s,i);return this}function Yxe(n){return function(){this.removeAttribute(n)}}function Kxe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Jxe(n,e){return function(){this.setAttribute(n,e)}}function Zxe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Qxe(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function eve(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function tve(n,e){var t=gS(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Kxe:Yxe:typeof e=="function"?t.local?eve:Qxe:t.local?Zxe:Jxe)(t,e))}function iG(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function nve(n){return function(){this.style.removeProperty(n)}}function rve(n,e,t){return function(){this.style.setProperty(n,e,t)}}function ive(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function sve(n,e,t){return arguments.length>1?this.each((e==null?nve:typeof e=="function"?ive:rve)(n,e,t??"")):Ng(this.node(),n)}function Ng(n,e){return n.style.getPropertyValue(e)||iG(n).getComputedStyle(n,null).getPropertyValue(e)}function ove(n){return function(){delete this[n]}}function ave(n,e){return function(){this[n]=e}}function lve(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function cve(n,e){return arguments.length>1?this.each((e==null?ove:typeof e=="function"?lve:ave)(n,e)):this.node()[n]}function sG(n){return n.trim().split(/^|\s+/)}function xk(n){return n.classList||new oG(n)}function oG(n){this._node=n,this._names=sG(n.getAttribute("class")||"")}oG.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function aG(n,e){for(var t=xk(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function lG(n,e){for(var t=xk(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function uve(n){return function(){aG(this,n)}}function hve(n){return function(){lG(this,n)}}function fve(n,e){return function(){(e.apply(this,arguments)?aG:lG)(this,n)}}function dve(n,e){var t=sG(n+"");if(arguments.length<2){for(var r=xk(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?fve:e?uve:hve)(t,e))}function pve(){this.textContent=""}function mve(n){return function(){this.textContent=n}}function gve(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function yve(n){return arguments.length?this.each(n==null?pve:(typeof n=="function"?gve:mve)(n)):this.node().textContent}function xve(){this.innerHTML=""}function vve(n){return function(){this.innerHTML=n}}function _ve(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function wve(n){return arguments.length?this.each(n==null?xve:(typeof n=="function"?_ve:vve)(n)):this.node().innerHTML}function bve(){this.nextSibling&&this.parentNode.appendChild(this)}function Ave(){return this.each(bve)}function Sve(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cve(){return this.each(Sve)}function Tve(n){var e=typeof n=="function"?n:Qj(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Eve(){return null}function Mve(n,e){var t=typeof n=="function"?n:Qj(n),r=e==null?Eve:typeof e=="function"?e:yk(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function Rve(){var n=this.parentNode;n&&n.removeChild(this)}function Pve(){return this.each(Rve)}function kve(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Bve(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Ive(n){return this.select(n?Bve:kve)}function Lve(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Dve(n){return function(e){n.call(this,e,this.__data__)}}function Fve(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Nve(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Ove(n,e,t){return function(){var r=this.__on,i,s=Dve(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function Uve(n,e,t){var r=Fve(n+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?Ove:Nve,i=0;i<s;++i)this.each(a(r[i],e,t));return this}function cG(n,e,t){var r=iG(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function zve(n,e){return function(){return cG(this,n,e)}}function Hve(n,e){return function(){return cG(this,n,e.apply(this,arguments))}}function jve(n,e){return this.each((typeof e=="function"?Hve:zve)(n,e))}function*Gve(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var uG=[null];function Ta(n,e){this._groups=n,this._parents=e}function Ov(){return new Ta([[document.documentElement]],uG)}function Vve(){return this}Ta.prototype=Ov.prototype={constructor:Ta,select:gxe,selectAll:_xe,selectChild:Sxe,selectChildren:Mxe,filter:Rxe,data:Dxe,enter:Pxe,exit:Nxe,join:Oxe,merge:Uxe,selection:Vve,order:zxe,sort:Hxe,call:Gxe,nodes:Vxe,node:Wxe,size:$xe,empty:Xxe,each:qxe,attr:tve,style:sve,property:cve,classed:dve,text:yve,html:wve,raise:Ave,lower:Cve,append:Tve,insert:Mve,remove:Pve,clone:Ive,datum:Lve,on:Uve,dispatch:jve,[Symbol.iterator]:Gve};function Dr(n){return typeof n=="string"?new Ta([[document.querySelector(n)]],[document.documentElement]):new Ta([[n]],uG)}function vk(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function hG(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Uv(){}var Kx=.7,Lb=1/Kx,lg="\\s*([+-]?\\d+)\\s*",Jx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wve=/^#([0-9a-f]{3,8})$/,$ve=new RegExp(`^rgb\\(${lg},${lg},${lg}\\)$`),Xve=new RegExp(`^rgb\\(${Nc},${Nc},${Nc}\\)$`),qve=new RegExp(`^rgba\\(${lg},${lg},${lg},${Jx}\\)$`),Yve=new RegExp(`^rgba\\(${Nc},${Nc},${Nc},${Jx}\\)$`),Kve=new RegExp(`^hsl\\(${Jx},${Nc},${Nc}\\)$`),Jve=new RegExp(`^hsla\\(${Jx},${Nc},${Nc},${Jx}\\)$`),ON={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vk(Uv,Zx,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:UN,formatHex:UN,formatHex8:Zve,formatHsl:Qve,formatRgb:zN,toString:zN});function UN(){return this.rgb().formatHex()}function Zve(){return this.rgb().formatHex8()}function Qve(){return fG(this).formatHsl()}function zN(){return this.rgb().formatRgb()}function Zx(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Wve.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?HN(e):t===3?new ra(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?H_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?H_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$ve.exec(n))?new ra(e[1],e[2],e[3],1):(e=Xve.exec(n))?new ra(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qve.exec(n))?H_(e[1],e[2],e[3],e[4]):(e=Yve.exec(n))?H_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kve.exec(n))?VN(e[1],e[2]/100,e[3]/100,1):(e=Jve.exec(n))?VN(e[1],e[2]/100,e[3]/100,e[4]):ON.hasOwnProperty(n)?HN(ON[n]):n==="transparent"?new ra(NaN,NaN,NaN,0):null}function HN(n){return new ra(n>>16&255,n>>8&255,n&255,1)}function H_(n,e,t,r){return r<=0&&(n=e=t=NaN),new ra(n,e,t,r)}function e1e(n){return n instanceof Uv||(n=Zx(n)),n?(n=n.rgb(),new ra(n.r,n.g,n.b,n.opacity)):new ra}function f2(n,e,t,r){return arguments.length===1?e1e(n):new ra(n,e,t,r??1)}function ra(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}vk(ra,f2,hG(Uv,{brighter(n){return n=n==null?Lb:Math.pow(Lb,n),new ra(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Kx:Math.pow(Kx,n),new ra(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ra(tp(this.r),tp(this.g),tp(this.b),Db(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jN,formatHex:jN,formatHex8:t1e,formatRgb:GN,toString:GN}));function jN(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}`}function t1e(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}${Wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function GN(){const n=Db(this.opacity);return`${n===1?"rgb(":"rgba("}${tp(this.r)}, ${tp(this.g)}, ${tp(this.b)}${n===1?")":`, ${n})`}`}function Db(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function tp(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Wd(n){return n=tp(n),(n<16?"0":"")+n.toString(16)}function VN(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Gl(n,e,t,r)}function fG(n){if(n instanceof Gl)return new Gl(n.h,n.s,n.l,n.opacity);if(n instanceof Uv||(n=Zx(n)),!n)return new Gl;if(n instanceof Gl)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Gl(o,a,l,n.opacity)}function n1e(n,e,t,r){return arguments.length===1?fG(n):new Gl(n,e,t,r??1)}function Gl(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}vk(Gl,n1e,hG(Uv,{brighter(n){return n=n==null?Lb:Math.pow(Lb,n),new Gl(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Kx:Math.pow(Kx,n),new Gl(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new ra(mE(n>=240?n-240:n+120,i,r),mE(n,i,r),mE(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Gl(WN(this.h),j_(this.s),j_(this.l),Db(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Db(this.opacity);return`${n===1?"hsl(":"hsla("}${WN(this.h)}, ${j_(this.s)*100}%, ${j_(this.l)*100}%${n===1?")":`, ${n})`}`}}));function WN(n){return n=(n||0)%360,n<0?n+360:n}function j_(n){return Math.max(0,Math.min(1,n||0))}function mE(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const _k=n=>()=>n;function dG(n,e){return function(t){return n+t*e}}function r1e(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function v2e(n,e){var t=e-n;return t?dG(n,t>180||t<-180?t-360*Math.round(t/360):t):_k(isNaN(n)?e:n)}function i1e(n){return(n=+n)==1?pG:function(e,t){return t-e?r1e(e,t,n):_k(isNaN(e)?t:e)}}function pG(n,e){var t=e-n;return t?dG(n,t):_k(isNaN(n)?e:n)}const $N=function n(e){var t=i1e(e);function r(i,s){var o=t((i=f2(i)).r,(s=f2(s)).r),a=t(i.g,s.g),l=t(i.b,s.b),c=pG(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function Qh(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var d2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gE=new RegExp(d2.source,"g");function s1e(n){return function(){return n}}function o1e(n){return function(e){return n(e)+""}}function a1e(n,e){var t=d2.lastIndex=gE.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(r=d2.exec(n))&&(i=gE.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Qh(r,i)})),t=gE.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?o1e(l[0].x):s1e(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var XN=180/Math.PI,p2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mG(n,e,t,r,i,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),n*r<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*XN,skewX:Math.atan(l)*XN,scaleX:o,scaleY:a}}var G_;function l1e(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?p2:mG(e.a,e.b,e.c,e.d,e.e,e.f)}function c1e(n){return n==null||(G_||(G_=document.createElementNS("http://www.w3.org/2000/svg","g")),G_.setAttribute("transform",n),!(n=G_.transform.baseVal.consolidate()))?p2:(n=n.matrix,mG(n.a,n.b,n.c,n.d,n.e,n.f))}function gG(n,e,t,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,m,g){if(c!==h||u!==d){var v=m.push("translate(",null,e,null,t);g.push({i:v-4,x:Qh(c,h)},{i:v-2,x:Qh(u,d)})}else(h||d)&&m.push("translate("+h+e+d+t)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Qh(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(c,u,h,d){c!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Qh(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,d,m,g){if(c!==h||u!==d){var v=m.push(i(m)+"scale(",null,",",null,")");g.push({i:v-4,x:Qh(c,h)},{i:v-2,x:Qh(u,d)})}else(h!==1||d!==1)&&m.push(i(m)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=n(c),u=n(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),a(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(m){for(var g=-1,v=d.length,w;++g<v;)h[(w=d[g]).i]=w.x(m);return h.join("")}}}var u1e=gG(l1e,"px, ","px)","deg)"),h1e=gG(c1e,", ",")",")"),Og=0,z0=0,E0=0,yG=1e3,Fb,H0,Nb=0,xp=0,yS=0,Qx=typeof performance=="object"&&performance.now?performance:Date,xG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function wk(){return xp||(xG(f1e),xp=Qx.now()+yS)}function f1e(){xp=0}function Ob(){this._call=this._time=this._next=null}Ob.prototype=vG.prototype={constructor:Ob,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?wk():+t)+(e==null?0:+e),!this._next&&H0!==this&&(H0?H0._next=this:Fb=this,H0=this),this._call=n,this._time=t,m2()},stop:function(){this._call&&(this._call=null,this._time=1/0,m2())}};function vG(n,e,t){var r=new Ob;return r.restart(n,e,t),r}function d1e(){wk(),++Og;for(var n=Fb,e;n;)(e=xp-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Og}function qN(){xp=(Nb=Qx.now())+yS,Og=z0=0;try{d1e()}finally{Og=0,m1e(),xp=0}}function p1e(){var n=Qx.now(),e=n-Nb;e>yG&&(yS-=e,Nb=n)}function m1e(){for(var n,e=Fb,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Fb=t);H0=n,m2(r)}function m2(n){if(!Og){z0&&(z0=clearTimeout(z0));var e=n-xp;e>24?(n<1/0&&(z0=setTimeout(qN,n-Qx.now()-yS)),E0&&(E0=clearInterval(E0))):(E0||(Nb=Qx.now(),E0=setInterval(p1e,yG)),Og=1,xG(qN))}}function YN(n,e,t){var r=new Ob;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var g1e=Zj("start","end","cancel","interrupt"),y1e=[],_G=0,KN=1,g2=2,yw=3,JN=4,y2=5,xw=6;function xS(n,e,t,r,i,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;x1e(n,t,{name:e,index:r,group:i,on:g1e,tween:y1e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_G})}function bk(n,e){var t=ic(n,e);if(t.state>_G)throw new Error("too late; already scheduled");return t}function qc(n,e){var t=ic(n,e);if(t.state>yw)throw new Error("too late; already running");return t}function ic(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function x1e(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=vG(s,0,t.time);function s(c){t.state=KN,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var u,h,d,m;if(t.state!==KN)return l();for(u in r)if(m=r[u],m.name===t.name){if(m.state===yw)return YN(o);m.state===JN?(m.state=xw,m.timer.stop(),m.on.call("interrupt",n,n.__data__,m.index,m.group),delete r[u]):+u<e&&(m.state=xw,m.timer.stop(),m.on.call("cancel",n,n.__data__,m.index,m.group),delete r[u])}if(YN(function(){t.state===yw&&(t.state=JN,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=g2,t.on.call("start",n,n.__data__,t.index,t.group),t.state===g2){for(t.state=yw,i=new Array(d=t.tween.length),u=0,h=-1;u<d;++u)(m=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(i[++h]=m);i.length=h+1}}function a(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=y2,1),h=-1,d=i.length;++h<d;)i[h].call(n,u);t.state===y2&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=xw,t.timer.stop(),delete r[e];for(var c in r)return;delete n.__transition}}function v1e(n,e){var t=n.__transition,r,i,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}i=r.state>g2&&r.state<y2,r.state=xw,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}s&&delete n.__transition}}function _1e(n){return this.each(function(){v1e(this,n)})}function w1e(n,e){var t,r;return function(){var i=qc(this,n),s=i.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function b1e(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=qc(this,n),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:t},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function A1e(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=ic(this.node(),t).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?w1e:b1e)(t,n,e))}function Ak(n,e,t){var r=n._id;return n.each(function(){var i=qc(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return ic(i,r).value[e]}}function wG(n,e){var t;return(typeof e=="number"?Qh:e instanceof Zx?$N:(t=Zx(e))?(e=t,$N):a1e)(n,e)}function S1e(n){return function(){this.removeAttribute(n)}}function C1e(n){return function(){this.removeAttributeNS(n.space,n.local)}}function T1e(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttribute(n);return o===i?null:o===r?s:s=e(r=o,t)}}function E1e(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?s:s=e(r=o,t)}}function M1e(n,e,t){var r,i,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function R1e(n,e,t){var r,i,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function P1e(n,e){var t=gS(n),r=t==="transform"?h1e:wG;return this.attrTween(n,typeof e=="function"?(t.local?R1e:M1e)(t,r,Ak(this,"attr."+n,e)):e==null?(t.local?C1e:S1e)(t):(t.local?E1e:T1e)(t,r,e))}function k1e(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function B1e(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function I1e(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&B1e(n,s)),t}return i._value=e,i}function L1e(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&k1e(n,s)),t}return i._value=e,i}function D1e(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=gS(n);return this.tween(t,(r.local?I1e:L1e)(r,e))}function F1e(n,e){return function(){bk(this,n).delay=+e.apply(this,arguments)}}function N1e(n,e){return e=+e,function(){bk(this,n).delay=e}}function O1e(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?F1e:N1e)(e,n)):ic(this.node(),e).delay}function U1e(n,e){return function(){qc(this,n).duration=+e.apply(this,arguments)}}function z1e(n,e){return e=+e,function(){qc(this,n).duration=e}}function H1e(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?U1e:z1e)(e,n)):ic(this.node(),e).duration}function j1e(n,e){if(typeof e!="function")throw new Error;return function(){qc(this,n).ease=e}}function G1e(n){var e=this._id;return arguments.length?this.each(j1e(e,n)):ic(this.node(),e).ease}function V1e(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;qc(this,n).ease=t}}function W1e(n){if(typeof n!="function")throw new Error;return this.each(V1e(this._id,n))}function $1e(n){typeof n!="function"&&(n=tG(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new qu(r,this._parents,this._name,this._id)}function X1e(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=t[a],u=l.length,h=o[a]=new Array(u),d,m=0;m<u;++m)(d=l[m]||c[m])&&(h[m]=d);for(;a<r;++a)o[a]=e[a];return new qu(o,this._parents,this._name,this._id)}function q1e(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Y1e(n,e,t){var r,i,s=q1e(e)?bk:qc;return function(){var o=s(this,n),a=o.on;a!==r&&(i=(r=a).copy()).on(e,t),o.on=i}}function K1e(n,e){var t=this._id;return arguments.length<2?ic(this.node(),t).on.on(n):this.each(Y1e(t,n,e))}function J1e(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function Z1e(){return this.on("end.remove",J1e(this._id))}function Q1e(n){var e=this._name,t=this._id;typeof n!="function"&&(n=yk(n));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h,d=0;d<l;++d)(u=a[d])&&(h=n.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,xS(c[d],e,t,d,c,ic(u,t)));return new qu(s,this._parents,e,t)}function e_e(n){var e=this._name,t=this._id;typeof n!="function"&&(n=eG(n));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=n.call(u,u.__data__,h,l),m,g=ic(u,t),v=0,w=d.length;v<w;++v)(m=d[v])&&xS(m,e,t,v,d,g);s.push(d),o.push(u)}return new qu(s,o,e,t)}var t_e=Ov.prototype.constructor;function n_e(){return new t_e(this._groups,this._parents)}function r_e(n,e){var t,r,i;return function(){var s=Ng(this,n),o=(this.style.removeProperty(n),Ng(this,n));return s===o?null:s===t&&o===r?i:i=e(t=s,r=o)}}function bG(n){return function(){this.style.removeProperty(n)}}function i_e(n,e,t){var r,i=t+"",s;return function(){var o=Ng(this,n);return o===i?null:o===r?s:s=e(r=o,t)}}function s_e(n,e,t){var r,i,s;return function(){var o=Ng(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),Ng(this,n))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function o_e(n,e){var t,r,i,s="style."+e,o="end."+s,a;return function(){var l=qc(this,n),c=l.on,u=l.value[s]==null?a||(a=bG(e)):void 0;(c!==t||i!==u)&&(r=(t=c).copy()).on(o,i=u),l.on=r}}function a_e(n,e,t){var r=(n+="")=="transform"?u1e:wG;return e==null?this.styleTween(n,r_e(n,r)).on("end.style."+n,bG(n)):typeof e=="function"?this.styleTween(n,s_e(n,r,Ak(this,"style."+n,e))).each(o_e(this._id,n)):this.styleTween(n,i_e(n,r,e),t).on("end.style."+n,null)}function l_e(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function c_e(n,e,t){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&l_e(n,o,t)),r}return s._value=e,s}function u_e(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,c_e(n,e,t??""))}function h_e(n){return function(){this.textContent=n}}function f_e(n){return function(){var e=n(this);this.textContent=e??""}}function d_e(n){return this.tween("text",typeof n=="function"?f_e(Ak(this,"text",n)):h_e(n==null?"":n+""))}function p_e(n){return function(e){this.textContent=n.call(this,e)}}function m_e(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&p_e(i)),e}return r._value=n,r}function g_e(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,m_e(n))}function y_e(){for(var n=this._name,e=this._id,t=AG(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=ic(l,e);xS(l,n,t,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qu(r,this._parents,n,t)}function x_e(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};t.each(function(){var c=qc(this,r),u=c.on;u!==n&&(e=(n=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var v_e=0;function qu(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function AG(){return++v_e}var Pu=Ov.prototype;qu.prototype={constructor:qu,select:Q1e,selectAll:e_e,selectChild:Pu.selectChild,selectChildren:Pu.selectChildren,filter:$1e,merge:X1e,selection:n_e,transition:y_e,call:Pu.call,nodes:Pu.nodes,node:Pu.node,size:Pu.size,empty:Pu.empty,each:Pu.each,on:K1e,attr:P1e,attrTween:D1e,style:a_e,styleTween:u_e,text:d_e,textTween:g_e,remove:Z1e,tween:A1e,delay:O1e,duration:H1e,ease:G1e,easeVarying:W1e,end:x_e,[Symbol.iterator]:Pu[Symbol.iterator]};function __e(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var w_e={time:null,delay:0,duration:250,ease:__e};function b_e(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function A_e(n){var e,t;n instanceof qu?(e=n._id,n=n._name):(e=AG(),(t=w_e).time=wk(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&xS(l,n,e,c,o,t||b_e(l,e));return new qu(r,this._parents,n,e)}Ov.prototype.interrupt=_1e;Ov.prototype.transition=A_e;const x2=Math.PI,v2=2*x2,Ed=1e-6,S_e=v2-Ed;function SG(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function C_e(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return SG;const t=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class T_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?SG:C_e(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,s,o){this._append`C${+e},${+t},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-t,u=o-e,h=a-t,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>Ed)if(!(Math.abs(h*l-c*u)>Ed)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let m=r-o,g=i-a,v=l*l+c*c,w=m*m+g*g,_=Math.sqrt(v),A=Math.sqrt(d),S=s*Math.tan((x2-Math.acos((v+d-w)/(2*_*A)))/2),R=S/A,B=S/_;Math.abs(R-1)>Ed&&this._append`L${e+R*u},${t+R*h}`,this._append`A${s},${s},0,0,${+(h*m>u*g)},${this._x1=e+B*l},${this._y1=t+B*c}`}}arc(e,t,r,i,s,o){if(e=+e,t=+t,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=t+l,h=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ed||Math.abs(this._y1-u)>Ed)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%v2+v2),d>S_e?this._append`A${r},${r},0,1,${h},${e-a},${t-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:d>Ed&&this._append`A${r},${r},0,${+(d>=x2)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Um(n){return function(){return n}}const _2e=Math.abs,w2e=Math.atan2,b2e=Math.cos,A2e=Math.max,S2e=Math.min,C2e=Math.sin,T2e=Math.sqrt,ZN=1e-12,Sk=Math.PI,QN=Sk/2,E2e=2*Sk;function M2e(n){return n>1?0:n<-1?Sk:Math.acos(n)}function R2e(n){return n>=1?QN:n<=-1?-QN:Math.asin(n)}function E_e(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new T_e(e)}function M_e(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function CG(n){this._context=n}CG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function TG(n){return new CG(n)}function R_e(n){return n[0]}function P_e(n){return n[1]}function k_e(n,e){var t=Um(!0),r=null,i=TG,s=null,o=E_e(a);n=typeof n=="function"?n:n===void 0?R_e:Um(n),e=typeof e=="function"?e:e===void 0?P_e:Um(e);function a(l){var c,u=(l=M_e(l)).length,h,d=!1,m;for(r==null&&(s=i(m=o())),c=0;c<=u;++c)!(c<u&&t(h=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+n(h,c,l),+e(h,c,l));if(m)return s=null,m+""||null}return a.x=function(l){return arguments.length?(n=typeof l=="function"?l:Um(+l),a):n},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Um(+l),a):e},a.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Um(!!l),a):t},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}class EG{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function B_e(n){return new EG(n,!0)}function I_e(n){return new EG(n,!1)}function pf(){}function Ub(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function vS(n){this._context=n}vS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ub(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ub(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function MG(n){return new vS(n)}function RG(n){this._context=n}RG.prototype={areaStart:pf,areaEnd:pf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:Ub(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function L_e(n){return new RG(n)}function PG(n){this._context=n}PG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:Ub(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function D_e(n){return new PG(n)}function kG(n,e){this._basis=new vS(n),this._beta=e}kG.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,e=this._y,t=n.length-1;if(t>0)for(var r=n[0],i=e[0],s=n[t]-r,o=e[t]-i,a=-1,l;++a<=t;)l=a/t,this._basis.point(this._beta*n[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(n,e){this._x.push(+n),this._y.push(+e)}};const F_e=function n(e){function t(r){return e===1?new vS(r):new kG(r,e)}return t.beta=function(r){return n(+r)},t}(.85);function zb(n,e,t){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-e),n._y2+n._k*(n._y1-t),n._x2,n._y2)}function Ck(n,e){this._context=n,this._k=(1-e)/6}Ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zb(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2,this._x1=n,this._y1=e;break;case 2:this._point=3;default:zb(this,n,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const N_e=function n(e){function t(r){return new Ck(r,e)}return t.tension=function(r){return n(+r)},t}(0);function Tk(n,e){this._context=n,this._k=(1-e)/6}Tk.prototype={areaStart:pf,areaEnd:pf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x3=n,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=e);break;case 2:this._point=3,this._x5=n,this._y5=e;break;default:zb(this,n,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const O_e=function n(e){function t(r){return new Tk(r,e)}return t.tension=function(r){return n(+r)},t}(0);function Ek(n,e){this._context=n,this._k=(1-e)/6}Ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zb(this,n,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const U_e=function n(e){function t(r){return new Ek(r,e)}return t.tension=function(r){return n(+r)},t}(0);function Mk(n,e,t){var r=n._x1,i=n._y1,s=n._x2,o=n._y2;if(n._l01_a>ZN){var a=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,l=3*n._l01_a*(n._l01_a+n._l12_a);r=(r*a-n._x0*n._l12_2a+n._x2*n._l01_2a)/l,i=(i*a-n._y0*n._l12_2a+n._y2*n._l01_2a)/l}if(n._l23_a>ZN){var c=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,u=3*n._l23_a*(n._l23_a+n._l12_a);s=(s*c+n._x1*n._l23_2a-e*n._l12_2a)/u,o=(o*c+n._y1*n._l23_2a-t*n._l12_2a)/u}n._context.bezierCurveTo(r,i,s,o,n._x2,n._y2)}function BG(n,e){this._context=n,this._alpha=e}BG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Mk(this,n,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const z_e=function n(e){function t(r){return e?new BG(r,e):new Ck(r,0)}return t.alpha=function(r){return n(+r)},t}(.5);function IG(n,e){this._context=n,this._alpha=e}IG.prototype={areaStart:pf,areaEnd:pf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=n,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=e);break;case 2:this._point=3,this._x5=n,this._y5=e;break;default:Mk(this,n,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const H_e=function n(e){function t(r){return e?new IG(r,e):new Tk(r,0)}return t.alpha=function(r){return n(+r)},t}(.5);function LG(n,e){this._context=n,this._alpha=e}LG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mk(this,n,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const j_e=function n(e){function t(r){return e?new LG(r,e):new Ek(r,0)}return t.alpha=function(r){return n(+r)},t}(.5);function DG(n){this._context=n}DG.prototype={areaStart:pf,areaEnd:pf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function G_e(n){return new DG(n)}function e3(n){return n<0?-1:1}function t3(n,e,t){var r=n._x1-n._x0,i=e-n._x1,s=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(e3(s)+e3(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function n3(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function yE(n,e,t){var r=n._x0,i=n._y0,s=n._x1,o=n._y1,a=(s-r)/3;n._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*t,s,o)}function Hb(n){this._context=n}Hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yE(this,this._t0,n3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,yE(this,n3(this,t=t3(this,n,e)),t);break;default:yE(this,this._t0,t=t3(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function FG(n){this._context=new NG(n)}(FG.prototype=Object.create(Hb.prototype)).point=function(n,e){Hb.prototype.point.call(this,e,n)};function NG(n){this._context=n}NG.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,s){this._context.bezierCurveTo(e,n,r,t,s,i)}};function V_e(n){return new Hb(n)}function W_e(n){return new FG(n)}function OG(n){this._context=n}OG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=r3(n),i=r3(e),s=0,o=1;o<t;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function r3(n){var e,t=n.length-1,r,i=new Array(t),s=new Array(t),o=new Array(t);for(i[0]=0,s[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,s[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[t-1]=o[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*n[e+1]-i[e+1];return[i,s]}function $_e(n){return new OG(n)}function _S(n,e){this._context=n,this._t=e}_S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function X_e(n){return new _S(n,.5)}function q_e(n){return new _S(n,0)}function Y_e(n){return new _S(n,1)}function j0(n,e,t){this.k=n,this.x=e,this.y=t}j0.prototype={constructor:j0,scale:function(n){return n===1?this:new j0(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new j0(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};j0.prototype;var UG=typeof global=="object"&&global&&global.Object===Object&&global,K_e=typeof self=="object"&&self&&self.Object===Object&&self,Yc=UG||K_e||Function("return this")(),jb=Yc.Symbol,zG=Object.prototype,J_e=zG.hasOwnProperty,Z_e=zG.toString,M0=jb?jb.toStringTag:void 0;function Q_e(n){var e=J_e.call(n,M0),t=n[M0];try{n[M0]=void 0;var r=!0}catch{}var i=Z_e.call(n);return r&&(e?n[M0]=t:delete n[M0]),i}var ewe=Object.prototype,twe=ewe.toString;function nwe(n){return twe.call(n)}var rwe="[object Null]",iwe="[object Undefined]",i3=jb?jb.toStringTag:void 0;function sy(n){return n==null?n===void 0?iwe:rwe:i3&&i3 in Object(n)?Q_e(n):nwe(n)}function Tp(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var swe="[object AsyncFunction]",owe="[object Function]",awe="[object GeneratorFunction]",lwe="[object Proxy]";function Rk(n){if(!Tp(n))return!1;var e=sy(n);return e==owe||e==awe||e==swe||e==lwe}var xE=Yc["__core-js_shared__"],s3=function(){var n=/[^.]+$/.exec(xE&&xE.keys&&xE.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function cwe(n){return!!s3&&s3 in n}var uwe=Function.prototype,hwe=uwe.toString;function Ep(n){if(n!=null){try{return hwe.call(n)}catch{}try{return n+""}catch{}}return""}var fwe=/[\\^$.*+?()[\]{}|]/g,dwe=/^\[object .+?Constructor\]$/,pwe=Function.prototype,mwe=Object.prototype,gwe=pwe.toString,ywe=mwe.hasOwnProperty,xwe=RegExp("^"+gwe.call(ywe).replace(fwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vwe(n){if(!Tp(n)||cwe(n))return!1;var e=Rk(n)?xwe:dwe;return e.test(Ep(n))}function _we(n,e){return n==null?void 0:n[e]}function Mp(n,e){var t=_we(n,e);return vwe(t)?t:void 0}var ev=Mp(Object,"create");function wwe(){this.__data__=ev?ev(null):{},this.size=0}function bwe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Awe="__lodash_hash_undefined__",Swe=Object.prototype,Cwe=Swe.hasOwnProperty;function Twe(n){var e=this.__data__;if(ev){var t=e[n];return t===Awe?void 0:t}return Cwe.call(e,n)?e[n]:void 0}var Ewe=Object.prototype,Mwe=Ewe.hasOwnProperty;function Rwe(n){var e=this.__data__;return ev?e[n]!==void 0:Mwe.call(e,n)}var Pwe="__lodash_hash_undefined__";function kwe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ev&&e===void 0?Pwe:e,this}function vp(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}vp.prototype.clear=wwe;vp.prototype.delete=bwe;vp.prototype.get=Twe;vp.prototype.has=Rwe;vp.prototype.set=kwe;function Bwe(){this.__data__=[],this.size=0}function wS(n,e){return n===e||n!==n&&e!==e}function bS(n,e){for(var t=n.length;t--;)if(wS(n[t][0],e))return t;return-1}var Iwe=Array.prototype,Lwe=Iwe.splice;function Dwe(n){var e=this.__data__,t=bS(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Lwe.call(e,t,1),--this.size,!0}function Fwe(n){var e=this.__data__,t=bS(e,n);return t<0?void 0:e[t][1]}function Nwe(n){return bS(this.__data__,n)>-1}function Owe(n,e){var t=this.__data__,r=bS(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Ju(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ju.prototype.clear=Bwe;Ju.prototype.delete=Dwe;Ju.prototype.get=Fwe;Ju.prototype.has=Nwe;Ju.prototype.set=Owe;var tv=Mp(Yc,"Map");function Uwe(){this.size=0,this.__data__={hash:new vp,map:new(tv||Ju),string:new vp}}function zwe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function AS(n,e){var t=n.__data__;return zwe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Hwe(n){var e=AS(this,n).delete(n);return this.size-=e?1:0,e}function jwe(n){return AS(this,n).get(n)}function Gwe(n){return AS(this,n).has(n)}function Vwe(n,e){var t=AS(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function bf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bf.prototype.clear=Uwe;bf.prototype.delete=Hwe;bf.prototype.get=jwe;bf.prototype.has=Gwe;bf.prototype.set=Vwe;var Wwe="Expected a function";function zv(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Wwe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(zv.Cache||bf),t}zv.Cache=bf;function $we(){this.__data__=new Ju,this.size=0}function Xwe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function qwe(n){return this.__data__.get(n)}function Ywe(n){return this.__data__.has(n)}var Kwe=200;function Jwe(n,e){var t=this.__data__;if(t instanceof Ju){var r=t.__data__;if(!tv||r.length<Kwe-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new bf(r)}return t.set(n,e),this.size=t.size,this}function oy(n){var e=this.__data__=new Ju(n);this.size=e.size}oy.prototype.clear=$we;oy.prototype.delete=Xwe;oy.prototype.get=qwe;oy.prototype.has=Ywe;oy.prototype.set=Jwe;var Gb=function(){try{var n=Mp(Object,"defineProperty");return n({},"",{}),n}catch{}}();function Pk(n,e,t){e=="__proto__"&&Gb?Gb(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function _2(n,e,t){(t!==void 0&&!wS(n[e],t)||t===void 0&&!(e in n))&&Pk(n,e,t)}function Zwe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(t(s[l],l,s)===!1)break}return e}}var Qwe=Zwe(),HG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,o3=HG&&typeof module=="object"&&module&&!module.nodeType&&module,ebe=o3&&o3.exports===HG,a3=ebe?Yc.Buffer:void 0,l3=a3?a3.allocUnsafe:void 0;function tbe(n,e){if(e)return n.slice();var t=n.length,r=l3?l3(t):new n.constructor(t);return n.copy(r),r}var c3=Yc.Uint8Array;function nbe(n){var e=new n.constructor(n.byteLength);return new c3(e).set(new c3(n)),e}function rbe(n,e){var t=e?nbe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function ibe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var u3=Object.create,sbe=function(){function n(){}return function(e){if(!Tp(e))return{};if(u3)return u3(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function jG(n,e){return function(t){return n(e(t))}}var GG=jG(Object.getPrototypeOf,Object),obe=Object.prototype;function SS(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||obe;return n===t}function abe(n){return typeof n.constructor=="function"&&!SS(n)?sbe(GG(n)):{}}function Hv(n){return n!=null&&typeof n=="object"}var lbe="[object Arguments]";function h3(n){return Hv(n)&&sy(n)==lbe}var VG=Object.prototype,cbe=VG.hasOwnProperty,ube=VG.propertyIsEnumerable,Vb=h3(function(){return arguments}())?h3:function(n){return Hv(n)&&cbe.call(n,"callee")&&!ube.call(n,"callee")},Wb=Array.isArray,hbe=9007199254740991;function WG(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=hbe}function CS(n){return n!=null&&WG(n.length)&&!Rk(n)}function fbe(n){return Hv(n)&&CS(n)}function dbe(){return!1}var $G=typeof exports=="object"&&exports&&!exports.nodeType&&exports,f3=$G&&typeof module=="object"&&module&&!module.nodeType&&module,pbe=f3&&f3.exports===$G,d3=pbe?Yc.Buffer:void 0,mbe=d3?d3.isBuffer:void 0,kk=mbe||dbe,gbe="[object Object]",ybe=Function.prototype,xbe=Object.prototype,XG=ybe.toString,vbe=xbe.hasOwnProperty,_be=XG.call(Object);function wbe(n){if(!Hv(n)||sy(n)!=gbe)return!1;var e=GG(n);if(e===null)return!0;var t=vbe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&XG.call(t)==_be}var bbe="[object Arguments]",Abe="[object Array]",Sbe="[object Boolean]",Cbe="[object Date]",Tbe="[object Error]",Ebe="[object Function]",Mbe="[object Map]",Rbe="[object Number]",Pbe="[object Object]",kbe="[object RegExp]",Bbe="[object Set]",Ibe="[object String]",Lbe="[object WeakMap]",Dbe="[object ArrayBuffer]",Fbe="[object DataView]",Nbe="[object Float32Array]",Obe="[object Float64Array]",Ube="[object Int8Array]",zbe="[object Int16Array]",Hbe="[object Int32Array]",jbe="[object Uint8Array]",Gbe="[object Uint8ClampedArray]",Vbe="[object Uint16Array]",Wbe="[object Uint32Array]",ci={};ci[Nbe]=ci[Obe]=ci[Ube]=ci[zbe]=ci[Hbe]=ci[jbe]=ci[Gbe]=ci[Vbe]=ci[Wbe]=!0;ci[bbe]=ci[Abe]=ci[Dbe]=ci[Sbe]=ci[Fbe]=ci[Cbe]=ci[Tbe]=ci[Ebe]=ci[Mbe]=ci[Rbe]=ci[Pbe]=ci[kbe]=ci[Bbe]=ci[Ibe]=ci[Lbe]=!1;function $be(n){return Hv(n)&&WG(n.length)&&!!ci[sy(n)]}function Xbe(n){return function(e){return n(e)}}var qG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mx=qG&&typeof module=="object"&&module&&!module.nodeType&&module,qbe=mx&&mx.exports===qG,vE=qbe&&UG.process,p3=function(){try{var n=mx&&mx.require&&mx.require("util").types;return n||vE&&vE.binding&&vE.binding("util")}catch{}}(),m3=p3&&p3.isTypedArray,Bk=m3?Xbe(m3):$be;function w2(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var Ybe=Object.prototype,Kbe=Ybe.hasOwnProperty;function Jbe(n,e,t){var r=n[e];(!(Kbe.call(n,e)&&wS(r,t))||t===void 0&&!(e in n))&&Pk(n,e,t)}function Zbe(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),i?Pk(t,a,l):Jbe(t,a,l)}return t}function Qbe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var eAe=9007199254740991,tAe=/^(?:0|[1-9]\d*)$/;function YG(n,e){var t=typeof n;return e=e??eAe,!!e&&(t=="number"||t!="symbol"&&tAe.test(n))&&n>-1&&n%1==0&&n<e}var nAe=Object.prototype,rAe=nAe.hasOwnProperty;function iAe(n,e){var t=Wb(n),r=!t&&Vb(n),i=!t&&!r&&kk(n),s=!t&&!r&&!i&&Bk(n),o=t||r||i||s,a=o?Qbe(n.length,String):[],l=a.length;for(var c in n)(e||rAe.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||YG(c,l)))&&a.push(c);return a}function sAe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var oAe=Object.prototype,aAe=oAe.hasOwnProperty;function lAe(n){if(!Tp(n))return sAe(n);var e=SS(n),t=[];for(var r in n)r=="constructor"&&(e||!aAe.call(n,r))||t.push(r);return t}function KG(n){return CS(n)?iAe(n,!0):lAe(n)}function cAe(n){return Zbe(n,KG(n))}function uAe(n,e,t,r,i,s,o){var a=w2(n,t),l=w2(e,t),c=o.get(l);if(c){_2(n,t,c);return}var u=s?s(a,l,t+"",n,e,o):void 0,h=u===void 0;if(h){var d=Wb(l),m=!d&&kk(l),g=!d&&!m&&Bk(l);u=l,d||m||g?Wb(a)?u=a:fbe(a)?u=ibe(a):m?(h=!1,u=tbe(l,!0)):g?(h=!1,u=rbe(l,!0)):u=[]:wbe(l)||Vb(l)?(u=a,Vb(a)?u=cAe(a):(!Tp(a)||Rk(a))&&(u=abe(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),_2(n,t,u)}function JG(n,e,t,r,i){n!==e&&Qwe(e,function(s,o){if(i||(i=new oy),Tp(s))uAe(n,e,o,t,JG,r,i);else{var a=r?r(w2(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),_2(n,o,a)}},KG)}function ZG(n){return n}function hAe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var g3=Math.max;function fAe(n,e,t){return e=g3(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=g3(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),hAe(n,this,a)}}function dAe(n){return function(){return n}}var pAe=Gb?function(n,e){return Gb(n,"toString",{configurable:!0,enumerable:!1,value:dAe(e),writable:!0})}:ZG,mAe=800,gAe=16,yAe=Date.now;function xAe(n){var e=0,t=0;return function(){var r=yAe(),i=gAe-(r-t);if(t=r,i>0){if(++e>=mAe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var vAe=xAe(pAe);function _Ae(n,e){return vAe(fAe(n,e,ZG),n+"")}function wAe(n,e,t){if(!Tp(t))return!1;var r=typeof e;return(r=="number"?CS(t)&&YG(e,t.length):r=="string"&&e in t)?wS(t[e],n):!1}function bAe(n){return _Ae(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&wAe(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var AAe=bAe(function(n,e,t){JG(n,e,t)}),SAe="​",CAe={curveBasis:MG,curveBasisClosed:L_e,curveBasisOpen:D_e,curveBumpX:B_e,curveBumpY:I_e,curveBundle:F_e,curveCardinalClosed:O_e,curveCardinalOpen:U_e,curveCardinal:N_e,curveCatmullRomClosed:H_e,curveCatmullRomOpen:j_e,curveCatmullRom:z_e,curveLinear:TG,curveLinearClosed:G_e,curveMonotoneX:V_e,curveMonotoneY:W_e,curveNatural:$_e,curveStep:X_e,curveStepAfter:Y_e,curveStepBefore:q_e},TAe=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,EAe=V(function(n,e){const t=QG(n,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(t)){const o=t.map(a=>a.args);bb(o),r=$s(r,[...o])}else r=t.args;if(!r)return;let i=rk(n,e);const s="config";return r[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[s],delete r[s]),r},"detectInit"),QG=V(function(n,e=null){var t,r;try{const i=new RegExp(`[%]{2}(?![{]${TAe.source})(?=[}][%]{2}).*
`,"ig");n=n.trim().replace(i,"").replace(/'/gm,'"'),yt.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${n}`);let s;const o=[];for(;(s=dx.exec(n))!==null;)if(s.index===dx.lastIndex&&dx.lastIndex++,s&&!e||e&&((t=s[1])!=null&&t.match(e))||e&&((r=s[2])!=null&&r.match(e))){const a=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:a,args:l})}return o.length===0?{type:n,args:null}:o.length===1?o[0]:o}catch(i){return yt.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${n}'`),{type:void 0,args:null}}},"detectDirective"),MAe=V(function(n){return n.replace(dx,"")},"removeDirectives"),RAe=V(function(n,e){for(const[t,r]of e.entries())if(r.match(n))return t;return-1},"isSubstringInArray");function Ik(n,e){if(!n)return e;const t=`curve${n.charAt(0).toUpperCase()+n.slice(1)}`;return CAe[t]??e}V(Ik,"interpolateToCurve");function e9(n,e){const t=n.trim();if(t)return e.securityLevel!=="loose"?cxe.sanitizeUrl(t):t}V(e9,"formatUrl");var PAe=V((n,...e)=>{const t=n.split("."),r=t.length-1,i=t[r];let s=window;for(let o=0;o<r;o++)if(s=s[t[o]],!s){yt.error(`Function name: ${n} not found in window`);return}s[i](...e)},"runFunc");function Lk(n,e){return!n||!e?0:Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}V(Lk,"distance");function t9(n){let e,t=0;n.forEach(i=>{t+=Lk(i,e),e=i});const r=t/2;return Dk(n,r)}V(t9,"traverseEdge");function n9(n){return n.length===1?n[0]:t9(n)}V(n9,"calcLabelPosition");var y3=V((n,e=2)=>{const t=Math.pow(10,e);return Math.round(n*t)/t},"roundNumber"),Dk=V((n,e)=>{let t,r=e;for(const i of n){if(t){const s=Lk(i,t);if(s<r)r-=s;else{const o=r/s;if(o<=0)return t;if(o>=1)return{x:i.x,y:i.y};if(o>0&&o<1)return{x:y3((1-o)*t.x+o*i.x,5),y:y3((1-o)*t.y+o*i.y,5)}}}t=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),kAe=V((n,e,t)=>{yt.info(`our points ${JSON.stringify(e)}`),e[0]!==t&&(e=e.reverse());const i=Dk(e,25),s=n?10:5,o=Math.atan2(e[0].y-i.y,e[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(e[0].x+i.x)/2,a.y=-Math.cos(o)*s+(e[0].y+i.y)/2,a},"calcCardinalityPosition");function r9(n,e,t){const r=structuredClone(t);yt.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const i=25+n,s=Dk(r,i),o=10+n*.5,a=Math.atan2(r[0].y-s.y,r[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(r[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(r[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(r[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(r[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*o+(r[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(r[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(r[0].x+s.x)/2,l.y=-Math.cos(a)*o+(r[0].y+s.y)/2),l}V(r9,"calcTerminalLabelPosition");function i9(n){let e="",t="";for(const r of n)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?t=t+r+";":e=e+r+";");return{style:e,labelStyle:t}}V(i9,"getStylesFromArray");var x3=0,BAe=V(()=>(x3++,"id-"+Math.random().toString(36).substr(2,12)+"-"+x3),"generateId");function s9(n){let e="";const t="0123456789abcdef",r=t.length;for(let i=0;i<n;i++)e+=t.charAt(Math.floor(Math.random()*r));return e}V(s9,"makeRandomHex");var IAe=V(n=>s9(n.length),"random"),LAe=V(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),DAe=V(function(n,e){const t=e.text.replace(iy.lineBreakRegex," "),[,r]=TS(e.fontSize),i=n.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",r),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const s=i.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(t),i},"drawSimpleText"),FAe=zv((n,e,t)=>{if(!n||(t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},t),iy.lineBreakRegex.test(n)))return n;const r=n.split(" ").filter(Boolean),i=[];let s="";return r.forEach((o,a)=>{const l=Ug(`${o} `,t),c=Ug(s,t);if(l>e){const{hyphenatedStrings:d,remainingWord:m}=NAe(o,e,"-",t);i.push(s,...d),s=m}else c+l>=e?(i.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===r.length&&i.push(s)}),i.filter(o=>o!=="").join(t.joinWith)},(n,e,t)=>`${n}${e}${t.fontSize}${t.fontWeight}${t.fontFamily}${t.joinWith}`),NAe=zv((n,e,t="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...n],s=[];let o="";return i.forEach((a,l)=>{const c=`${o}${a}`;if(Ug(c,r)>=e){const h=l+1,d=i.length===h,m=`${c}${t}`;s.push(d?c:m),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(n,e,t="-",r)=>`${n}${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function o9(n,e){return Fk(n,e).height}V(o9,"calculateTextHeight");function Ug(n,e){return Fk(n,e).width}V(Ug,"calculateTextWidth");var Fk=zv((n,e)=>{const{fontSize:t=12,fontFamily:r="Arial",fontWeight:i=400}=e;if(!n)return{width:0,height:0};const[,s]=TS(t),o=["sans-serif",r],a=n.split(iy.lineBreakRegex),l=[],c=Dr("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const d of o){let m=0;const g={width:0,height:0,lineHeight:0};for(const v of a){const w=LAe();w.text=v||SAe;const _=DAe(u,w).style("font-size",s).style("font-weight",i).style("font-family",d),A=(_._groups||_)[0][0].getBBox();if(A.width===0&&A.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,A.width)),m=Math.round(A.height),g.height+=m,g.lineHeight=Math.round(Math.max(g.lineHeight,m))}l.push(g)}u.remove();const h=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[h]},(n,e)=>`${n}${e.fontSize}${e.fontWeight}${e.fontFamily}`),yg,OAe=(yg=class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}},V(yg,"InitIDGenerator"),yg),V_,UAe=V(function(n){return V_=V_||document.createElement("div"),n=escape(n).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),V_.innerHTML=n,unescape(V_.textContent)},"entityDecode");function Nk(n){return"str"in n}V(Nk,"isDetailedError");var zAe=V((n,e,t,r)=>{var s;if(!r)return;const i=(s=n.node())==null?void 0:s.getBBox();i&&n.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-t).attr("class",e)},"insertTitle"),TS=V(n=>{if(typeof n=="number")return[n,n+"px"];const e=parseInt(n??"",10);return Number.isNaN(e)?[void 0,void 0]:n===String(e)?[e,n+"px"]:[e,n]},"parseFontSize");function Ok(n,e){return AAe({},n,e)}V(Ok,"cleanAndMerge");var Rc={assignWithDepth:$s,wrapLabel:FAe,calculateTextHeight:o9,calculateTextWidth:Ug,calculateTextDimensions:Fk,cleanAndMerge:Ok,detectInit:EAe,detectDirective:QG,isSubstringInArray:RAe,interpolateToCurve:Ik,calcLabelPosition:n9,calcCardinalityPosition:kAe,calcTerminalLabelPosition:r9,formatUrl:e9,getStylesFromArray:i9,generateId:BAe,random:IAe,runFunc:PAe,entityDecode:UAe,insertTitle:zAe,parseFontSize:TS,InitIDGenerator:OAe},HAe=V(function(n){let e=n;return e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),e=e.replace(/#\w+;/g,function(t){const r=t.substring(1,t.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),e},"encodeEntities"),ay=V(function(n){return n.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),P2e=V((n,e,{counter:t=0,prefix:r,suffix:i})=>`${r?`${r}_`:""}${n}_${e}_${t}${i?`_${i}`:""}`,"getEdgeId");function Do(n){return n??null}V(Do,"handleUndefinedAttr");function Uk(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Rp=Uk();function a9(n){Rp=n}const l9=/[&<>"']/,jAe=new RegExp(l9.source,"g"),c9=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,GAe=new RegExp(c9.source,"g"),VAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v3=n=>VAe[n];function _a(n,e){if(e){if(l9.test(n))return n.replace(jAe,v3)}else if(c9.test(n))return n.replace(GAe,v3);return n}const WAe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function $Ae(n){return n.replace(WAe,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const XAe=/(^|[^\[])\^/g;function qr(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(XAe,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function _3(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const gx={exec:()=>null};function w3(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function R0(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function qAe(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function b3(n,e,t,r){const i=e.href,s=e.title?_a(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:_a(o)}}function YAe(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class $b{constructor(e){ei(this,"options");ei(this,"rules");ei(this,"lexer");this.options=e||Rp}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:R0(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=YAe(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=R0(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:R0(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=R0(t[0],`
`).split(`
`),i="",s="";const o=[];for(;r.length>0;){let a=!1;const l=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);const u=l.join(`
`),h=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${u}`:u,s=s?`${s}
${h}`:h;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=d,r.length===0)break;const m=o[o.length-1];if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){const g=m,v=g.raw+`
`+r.join(`
`),w=this.blockquote(v);o[o.length-1]=w,i=i.substring(0,i.length-g.raw.length)+w.raw,s=s.substring(0,s.length-g.text.length)+w.text;break}else if((m==null?void 0:m.type)==="list"){const g=m,v=g.raw+`
`+r.join(`
`),w=this.list(v);o[o.length-1]=w,i=i.substring(0,i.length-m.raw.length)+w.raw,s=s.substring(0,s.length-g.raw.length)+w.raw,r=v.substring(o[o.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,c="",u="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),d=e.split(`
`,1)[0],m=!h.trim(),g=0;if(this.options.pedantic?(g=2,u=h.trimStart()):m?g=t[1].length+1:(g=t[2].search(/[^ ]/),g=g>4?1:g,u=h.slice(g),g+=t[1].length),m&&/^ *$/.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),l=!0),!l){const _=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),A=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const B=e.split(`
`,1)[0];if(d=B,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),S.test(d)||R.test(d)||_.test(d)||A.test(e))break;if(d.search(/[^ ]/)>=g||!d.trim())u+=`
`+d.slice(g);else{if(m||h.search(/[^ ]/)>=4||S.test(h)||R.test(h)||A.test(h))break;u+=`
`+d}!m&&!d.trim()&&(m=!0),c+=B+`
`,e=e.substring(B.length+1),h=d.slice(g)}}s.loose||(a?s.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let v=null,w;this.options.gfm&&(v=/^\[[ xX]\] /.exec(u),v&&(w=v[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!v,checked:w,loose:!1,text:u,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>/\n.*\n/.test(h.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const r=w3(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(const a of s)o.rows.push(w3(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:_a(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=R0(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=qAe(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),b3(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return b3(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,c=o,u=0;const h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const d=[...i[0]][0].length,m=e.slice(0,o+i.index+d+l);if(Math.min(o,l)%2){const v=m.slice(1,-1);return{type:"em",raw:m,text:v,tokens:this.lexer.inlineTokens(v)}}const g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=_a(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=_a(t[1]),i="mailto:"+r):(r=_a(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let i,s;if(t[2]==="@")i=_a(t[0]),s="mailto:"+i;else{let o;do o=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(o!==t[0]);i=_a(t[0]),t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=_a(t[0]),{type:"text",raw:t[0],text:r}}}}const KAe=/^(?: *(?:\n|$))+/,JAe=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,ZAe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,jv=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,QAe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,u9=/(?:[*+-]|\d{1,9}[.)])/,h9=qr(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,u9).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),zk=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eSe=/^[^\n]+/,Hk=/(?!\s*\])(?:\\.|[^\[\]\\])+/,tSe=qr(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Hk).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nSe=qr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,u9).getRegex(),ES="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jk=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,rSe=qr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",jk).replace("tag",ES).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),f9=qr(zk).replace("hr",jv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ES).getRegex(),iSe=qr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",f9).getRegex(),Gk={blockquote:iSe,code:JAe,def:tSe,fences:ZAe,heading:QAe,hr:jv,html:rSe,lheading:h9,list:nSe,newline:KAe,paragraph:f9,table:gx,text:eSe},A3=qr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",jv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ES).getRegex(),sSe={...Gk,table:A3,paragraph:qr(zk).replace("hr",jv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",A3).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ES).getRegex()},oSe={...Gk,html:qr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jk).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:gx,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:qr(zk).replace("hr",jv).replace("heading",` *#{1,6} *[^
]`).replace("lheading",h9).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},d9=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,aSe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,p9=/^( {2,}|\\)\n(?!\s*$)/,lSe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Gv="\\p{P}\\p{S}",cSe=qr(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Gv).getRegex(),uSe=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,hSe=qr(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Gv).getRegex(),fSe=qr("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Gv).getRegex(),dSe=qr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Gv).getRegex(),pSe=qr(/\\([punct])/,"gu").replace(/punct/g,Gv).getRegex(),mSe=qr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gSe=qr(jk).replace("(?:-->|$)","-->").getRegex(),ySe=qr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gSe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Xb=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xSe=qr(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Xb).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),m9=qr(/^!?\[(label)\]\[(ref)\]/).replace("label",Xb).replace("ref",Hk).getRegex(),g9=qr(/^!?\[(ref)\](?:\[\])?/).replace("ref",Hk).getRegex(),vSe=qr("reflink|nolink(?!\\()","g").replace("reflink",m9).replace("nolink",g9).getRegex(),Vk={_backpedal:gx,anyPunctuation:pSe,autolink:mSe,blockSkip:uSe,br:p9,code:aSe,del:gx,emStrongLDelim:hSe,emStrongRDelimAst:fSe,emStrongRDelimUnd:dSe,escape:d9,link:xSe,nolink:g9,punctuation:cSe,reflink:m9,reflinkSearch:vSe,tag:ySe,text:lSe,url:gx},_Se={...Vk,link:qr(/^!?\[(label)\]\((.*?)\)/).replace("label",Xb).getRegex(),reflink:qr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Xb).getRegex()},b2={...Vk,escape:qr(d9).replace("])","~|])").getRegex(),url:qr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},wSe={...b2,br:qr(p9).replace("{2,}","*").getRegex(),text:qr(b2.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},W_={normal:Gk,gfm:sSe,pedantic:oSe},P0={normal:Vk,gfm:b2,breaks:wSe,pedantic:_Se};class Pc{constructor(e){ei(this,"tokens");ei(this,"options");ei(this,"state");ei(this,"tokenizer");ei(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rp,this.options.tokenizer=this.options.tokenizer||new $b,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:W_.normal,inline:P0.normal};this.options.pedantic?(t.block=W_.pedantic,t.inline=P0.pedantic):this.options.gfm&&(t.block=W_.gfm,this.options.breaks?t.inline=P0.breaks:t.inline=P0.gfm),this.tokenizer.rules=t}static get rules(){return{block:W_,inline:P0}}static lex(e,t){return new Pc(t).lex(e)}static lexInline(e,t){return new Pc(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){s=t[t.length-1],r&&(s==null?void 0:s.type)==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i),r=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,c)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let d;this.options.extensions.startInline.forEach(m=>{d=m.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class qb{constructor(e){ei(this,"options");ei(this,"parser");this.options=e||Rp}space(e){return""}code({text:e,lang:t,escaped:r}){var o;const i=(o=(t||"").match(/^\S*/))==null?void 0:o[0],s=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+_a(i)+'">'+(r?s:_a(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:_a(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const l=e.items[a];i+=this.listitem(l)}const s=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const o=e.rows[s];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=_3(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:r}){const i=_3(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Wk{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class kc{constructor(e){ei(this,"options");ei(this,"renderer");ei(this,"textRenderer");this.options=e||Rp,this.options.renderer=this.options.renderer||new qb,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Wk}static parse(e,t){return new kc(t).parse(e)}static parseInline(e,t){return new kc(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}const o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):r+=l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}const o=s;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}}class yx{constructor(e){ei(this,"options");this.options=e||Rp}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}ei(yx,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Yu,y9,A2,x9;class bSe{constructor(...e){BB(this,Yu);ei(this,"defaults",Uk());ei(this,"options",this.setOptions);ei(this,"parse",Ky(this,Yu,A2).call(this,Pc.lex,kc.parse));ei(this,"parseInline",Ky(this,Yu,A2).call(this,Pc.lexInline,kc.parseInline));ei(this,"Parser",kc);ei(this,"Renderer",qb);ei(this,"TextRenderer",Wk);ei(this,"Lexer",Pc);ei(this,"Tokenizer",$b);ei(this,"Hooks",yx);this.use(...e)}walkTokens(e,t){var i,s;let r=[];for(const o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new qb(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o;let l=r.renderer[a];r.useNewRenderer||(l=Ky(this,Yu,y9).call(this,l,a,s));const c=s[a];s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new $b(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],c=s[a];s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new yx;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.hooks[a],c=s[a];yx.passThroughHooks.has(o)?s[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(d=>c.call(s,d));const h=l.call(s,u);return c.call(s,h)}:s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Pc.lex(e,t??this.defaults)}parser(e,t){return kc.parse(e,t??this.defaults)}}Yu=new WeakSet,y9=function(e,t,r){switch(t){case"heading":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,r.parser.parseInline(i.tokens),i.depth,$Ae(r.parser.parseInline(i.tokens,r.parser.textRenderer)))};case"code":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text,i.lang,!!i.escaped)};case"table":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);let s="",o="";for(let l=0;l<i.header.length;l++)o+=this.tablecell({text:i.header[l].text,tokens:i.header[l].tokens,header:!0,align:i.align[l]});s+=this.tablerow({text:o});let a="";for(let l=0;l<i.rows.length;l++){const c=i.rows[l];o="";for(let u=0;u<c.length;u++)o+=this.tablecell({text:c[u].text,tokens:c[u].tokens,header:!1,align:i.align[u]});a+=this.tablerow({text:o})}return e.call(this,s,a)};case"blockquote":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);const s=this.parser.parse(i.tokens);return e.call(this,s)};case"list":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);const s=i.ordered,o=i.start,a=i.loose;let l="";for(let c=0;c<i.items.length;c++){const u=i.items[c],h=u.checked,d=u.task;let m="";if(u.task){const g=this.checkbox({checked:!!h});a?u.tokens.length>0&&u.tokens[0].type==="paragraph"?(u.tokens[0].text=g+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&u.tokens[0].tokens[0].type==="text"&&(u.tokens[0].tokens[0].text=g+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:g+" "}):m+=g+" "}m+=this.parser.parse(u.tokens,a),l+=this.listitem({type:"list_item",raw:m,text:m,task:d,checked:!!h,loose:a,tokens:u.tokens})}return e.call(this,l,s,o)};case"html":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text,i.block)};case"paragraph":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"escape":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)};case"link":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.href,i.title,this.parser.parseInline(i.tokens))};case"image":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.href,i.title,i.text)};case"strong":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"em":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"codespan":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)};case"del":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"text":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)}}return e},A2=function(e,t){return(r,i)=>{const s={...i},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=Ky(this,Yu,x9).call(this,!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let l=e(r,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=t(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}},x9=function(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+_a(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}};const _p=new bSe;function Nr(n,e){return _p.parse(n,e)}Nr.options=Nr.setOptions=function(n){return _p.setOptions(n),Nr.defaults=_p.defaults,a9(Nr.defaults),Nr};Nr.getDefaults=Uk;Nr.defaults=Rp;Nr.use=function(...n){return _p.use(...n),Nr.defaults=_p.defaults,a9(Nr.defaults),Nr};Nr.walkTokens=function(n,e){return _p.walkTokens(n,e)};Nr.parseInline=_p.parseInline;Nr.Parser=kc;Nr.parser=kc.parse;Nr.Renderer=qb;Nr.TextRenderer=Wk;Nr.Lexer=Pc;Nr.lexer=Pc.lex;Nr.Tokenizer=$b;Nr.Hooks=yx;Nr.parse=Nr;Nr.options;Nr.setOptions;Nr.use;Nr.walkTokens;Nr.parseInline;kc.parse;Pc.lex;function v9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=Array.from(typeof n=="string"?[n]:n);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(u){var h,d;return(d=(h=u.match(/[\t ]/g))===null||h===void 0?void 0:h.length)!==null&&d!==void 0?d:0})):a},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(a){return a.replace(s,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var o=r[0];return e.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),u=c?c[1]:"",h=a;typeof a=="string"&&a.includes(`
`)&&(h=String(a).split(`
`).map(function(d,m){return m===0?d:""+u+d}).join(`
`)),o+=h+r[l+1]}),o}function _9(n,{markdownAutoWrap:e}){const r=n.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=v9(r);return e===!1?i.replace(/ /g,"&nbsp;"):i}V(_9,"preprocessMarkdown");function w9(n,e={}){const t=_9(n,e),r=Nr.lexer(t),i=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((u,h)=>{h!==0&&(s++,i.push([])),u.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&i[s].push({content:d,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&i[s].push({content:a.text,type:"normal"})}return V(o,"processNode"),r.forEach(a=>{var l;a.type==="paragraph"?(l=a.tokens)==null||l.forEach(c=>{o(c)}):a.type==="html"&&i[s].push({content:a.text,type:"normal"})}),i}V(w9,"markdownToLines");function b9(n,{markdownAutoWrap:e}={}){const t=Nr.lexer(n);function r(i){var s,o,a;return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(r).join("")}</strong>`:i.type==="em"?`<em>${(o=i.tokens)==null?void 0:o.map(r).join("")}</em>`:i.type==="paragraph"?`<p>${(a=i.tokens)==null?void 0:a.map(r).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return V(r,"output"),t.map(r).join("")}V(b9,"markdownToHTML");function A9(n){return Intl.Segmenter?[...new Intl.Segmenter().segment(n)].map(e=>e.segment):[...n]}V(A9,"splitTextToChars");function S9(n,e){const t=A9(e.content);return $k(n,[],t,e.type)}V(S9,"splitWordToFitWidth");function $k(n,e,t,r){if(t.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[i,...s]=t,o=[...e,i];return n([{content:o.join(""),type:r}])?$k(n,o,s,r):(e.length===0&&i&&(e.push(i),t.shift()),[{content:e.join(""),type:r},{content:t.join(""),type:r}])}V($k,"splitWordToFitWidthRecursion");function C9(n,e){if(n.some(({content:t})=>t.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Yb(n,e)}V(C9,"splitLineToFitWidth");function Yb(n,e,t=[],r=[]){if(n.length===0)return r.length>0&&t.push(r),t.length>0?t:[];let i="";n[0].content===" "&&(i=" ",n.shift());const s=n.shift()??{content:" ",type:"normal"},o=[...r];if(i!==""&&o.push({content:i,type:"normal"}),o.push(s),e(o))return Yb(n,e,t,o);if(r.length>0)t.push(r),n.unshift(s);else if(s.content){const[a,l]=S9(e,s);t.push([a]),l.content&&n.unshift(l)}return Yb(n,e,t)}V(Yb,"splitLineToFitWidthRecursion");function S2(n,e){e&&n.attr("style",e)}V(S2,"applyStyle");async function T9(n,e,t,r,i=!1){const s=n.append("foreignObject");s.attr("width",`${10*t}px`),s.attr("height",`${10*t}px`);const o=s.append("xhtml:div");let a=e.label;e.label&&Lg(e.label)&&(a=await ik(e.label.replace(iy.lineBreakRegex,`
`),Fr()));const l=e.isNode?"nodeLabel":"edgeLabel",c=o.append("span");c.html(a),S2(c,e.labelStyle),c.attr("class",`${l} ${r}`),S2(o,e.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",t+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&o.attr("class","labelBkg");let u=o.node().getBoundingClientRect();return u.width===t&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",t+"px"),u=o.node().getBoundingClientRect()),s.node()}V(T9,"addHtmlSpan");function MS(n,e,t){return n.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*t-.1+"em").attr("dy",t+"em")}V(MS,"createTspan");function E9(n,e,t){const r=n.append("text"),i=MS(r,1,e);RS(i,t);const s=i.node().getComputedTextLength();return r.remove(),s}V(E9,"computeWidthOfText");function ASe(n,e,t){var o;const r=n.append("text"),i=MS(r,1,e);RS(i,[{content:t,type:"normal"}]);const s=(o=i.node())==null?void 0:o.getBoundingClientRect();return s&&r.remove(),s}V(ASe,"computeDimensionOfText");function M9(n,e,t,r=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of t){const u=V(d=>E9(s,1.1,d)<=n,"checkWidth"),h=u(c)?[c]:C9(c,u);for(const d of h){const m=MS(a,l,1.1);RS(m,d),l++}}if(r){const c=a.node().getBBox(),u=2;return o.attr("x",c.x-u).attr("y",c.y-u).attr("width",c.width+2*u).attr("height",c.height+2*u),s.node()}else return a.node()}V(M9,"createFormattedText");function RS(n,e){n.text(""),e.forEach((t,r)=>{const i=n.append("tspan").attr("font-style",t.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",t.type==="strong"?"bold":"normal");r===0?i.text(t.content):i.text(" "+t.content)})}V(RS,"updateTextContentAndStyles");function R9(n){return n.replace(/fa[bklrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)}V(R9,"replaceIconSubstring");var ly=V(async(n,e="",{style:t="",isTitle:r=!1,classes:i="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(yt.debug("XYZ createText",e,t,r,i,s,o,"addSvgBackground: ",l),s){const u=b9(e,c),h=R9(ay(u)),d=e.replace(/\\\\/g,"\\"),m={isNode:o,label:Lg(e)?d:h,labelStyle:t.replace("fill:","color:")};return await T9(n,m,a,i,l)}else{const u=e.replace(/<br\s*\/?>/g,"<br/>"),h=w9(u.replace("<br>","<br/>"),c),d=M9(a,n,h,e?l:!1);if(o){/stroke:/.exec(t)&&(t=t.replace("stroke:","lineColor:"));const m=t.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Dr(d).attr("style",m)}else{const m=t.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Dr(d).select("rect").attr("style",m.replace(/background:/g,"fill:"));const g=t.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Dr(d).select("text").attr("style",g)}return d}},"createText");function _E(n,e,t){if(n&&n.length){const[r,i]=e,s=Math.PI/180*t,o=Math.cos(s),a=Math.sin(s);for(const l of n){const[c,u]=l;l[0]=(c-r)*o-(u-i)*a+r,l[1]=(c-r)*a+(u-i)*o+i}}}function SSe(n,e){return n[0]===e[0]&&n[1]===e[1]}function CSe(n,e,t,r=1){const i=t,s=Math.max(e,.1),o=n[0]&&n[0][0]&&typeof n[0][0]=="number"?[n]:n,a=[0,0];if(i)for(const c of o)_E(c,a,i);const l=function(c,u,h){const d=[];for(const A of c){const S=[...A];SSe(S[0],S[S.length-1])||S.push([S[0][0],S[0][1]]),S.length>2&&d.push(S)}const m=[];u=Math.max(u,.1);const g=[];for(const A of d)for(let S=0;S<A.length-1;S++){const R=A[S],B=A[S+1];if(R[1]!==B[1]){const I=Math.min(R[1],B[1]);g.push({ymin:I,ymax:Math.max(R[1],B[1]),x:I===R[1]?R[0]:B[0],islope:(B[0]-R[0])/(B[1]-R[1])})}}if(g.sort((A,S)=>A.ymin<S.ymin?-1:A.ymin>S.ymin?1:A.x<S.x?-1:A.x>S.x?1:A.ymax===S.ymax?0:(A.ymax-S.ymax)/Math.abs(A.ymax-S.ymax)),!g.length)return m;let v=[],w=g[0].ymin,_=0;for(;v.length||g.length;){if(g.length){let A=-1;for(let S=0;S<g.length&&!(g[S].ymin>w);S++)A=S;g.splice(0,A+1).forEach(S=>{v.push({s:w,edge:S})})}if(v=v.filter(A=>!(A.edge.ymax<=w)),v.sort((A,S)=>A.edge.x===S.edge.x?0:(A.edge.x-S.edge.x)/Math.abs(A.edge.x-S.edge.x)),(h!==1||_%u==0)&&v.length>1)for(let A=0;A<v.length;A+=2){const S=A+1;if(S>=v.length)break;const R=v[A].edge,B=v[S].edge;m.push([[Math.round(R.x),w],[Math.round(B.x),w]])}w+=h,v.forEach(A=>{A.edge.x=A.edge.x+h*A.edge.islope}),_++}return m}(o,s,r);if(i){for(const c of o)_E(c,a,-i);(function(c,u,h){const d=[];c.forEach(m=>d.push(...m)),_E(d,u,h)})(l,a,-i)}return l}function Vv(n,e){var t;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((t=e.randomizer)===null||t===void 0?void 0:t.next())||Math.random())>.7&&(s=i),CSe(n,i,r,s||1)}class Xk{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const r=Vv(e,t);return{type:"fillSketch",ops:this.renderLines(r,t)}}renderLines(e,t){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],t));return r}}function PS(n){const e=n[0],t=n[1];return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}class TSe extends Xk{fillPolygons(e,t){let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);const i=Vv(e,Object.assign({},t,{hachureGap:r})),s=Math.PI/180*t.hachureAngle,o=[],a=.5*r*Math.cos(s),l=.5*r*Math.sin(s);for(const[c,u]of i)PS([c,u])&&o.push([[c[0]-a,c[1]+l],[...u]],[[c[0]+a,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(o,t)}}}class ESe extends Xk{fillPolygons(e,t){const r=this._fillPolygons(e,t),i=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),s=this._fillPolygons(e,i);return r.ops=r.ops.concat(s.ops),r}}class MSe{constructor(e){this.helper=e}fillPolygons(e,t){const r=Vv(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(r,t)}dotsOnLines(e,t){const r=[];let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.max(i,.1);let s=t.fillWeight;s<0&&(s=t.strokeWidth/2);const o=i/4;for(const a of e){const l=PS(a),c=l/i,u=Math.ceil(c)-1,h=l-u*i,d=(a[0][0]+a[1][0])/2-i/4,m=Math.min(a[0][1],a[1][1]);for(let g=0;g<u;g++){const v=m+h+g*i,w=d-o+2*Math.random()*o,_=v-o+2*Math.random()*o,A=this.helper.ellipse(w,_,s,s,t);r.push(...A.ops)}}return{type:"fillSketch",ops:r}}}class RSe{constructor(e){this.helper=e}fillPolygons(e,t){const r=Vv(e,t);return{type:"fillSketch",ops:this.dashedLine(r,t)}}dashedLine(e,t){const r=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,i=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,s=[];return e.forEach(o=>{const a=PS(o),l=Math.floor(a/(r+i)),c=(a+i-l*(r+i))/2;let u=o[0],h=o[1];u[0]>h[0]&&(u=o[1],h=o[0]);const d=Math.atan((h[1]-u[1])/(h[0]-u[0]));for(let m=0;m<l;m++){const g=m*(r+i),v=g+r,w=[u[0]+g*Math.cos(d)+c*Math.cos(d),u[1]+g*Math.sin(d)+c*Math.sin(d)],_=[u[0]+v*Math.cos(d)+c*Math.cos(d),u[1]+v*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(w[0],w[1],_[0],_[1],t))}}),s}}class PSe{constructor(e){this.helper=e}fillPolygons(e,t){const r=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,i=t.zigzagOffset<0?r:t.zigzagOffset,s=Vv(e,t=Object.assign({},t,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,t)}}zigzagLines(e,t,r){const i=[];return e.forEach(s=>{const o=PS(s),a=Math.round(o/(2*t));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let h=0;h<a;h++){const d=2*h*t,m=2*(h+1)*t,g=Math.sqrt(2*Math.pow(t,2)),v=[l[0]+d*Math.cos(u),l[1]+d*Math.sin(u)],w=[l[0]+m*Math.cos(u),l[1]+m*Math.sin(u)],_=[v[0]+g*Math.cos(u+Math.PI/4),v[1]+g*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(v[0],v[1],_[0],_[1],r),...this.helper.doubleLineOps(_[0],_[1],w[0],w[1],r))}}),i}}const Ko={};class kSe{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const BSe=0,wE=1,S3=2,$_={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function bE(n,e){return n.type===e}function qk(n){const e=[],t=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:BSe,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:wE,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:S3,text:""},a}(n);let r="BOD",i=0,s=t[i];for(;!bE(s,S3);){let o=0;const a=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return qk("M0,0"+n);i++,o=$_[s.text],r=s.text}else bE(s,wE)?o=$_[r]:(i++,o=$_[s.text],r=s.text);if(!(i+o<t.length))throw new Error("Path data ended short");for(let l=i;l<i+o;l++){const c=t[l];if(!bE(c,wE))throw new Error("Param not a number: "+r+","+c.text);a[a.length]=+c.text}if(typeof $_[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:a};e.push(l),i+=o,s=t[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function P9(n){let e=0,t=0,r=0,i=0;const s=[];for(const{key:o,data:a}of n)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,t]=a,[r,i]=a;break;case"m":e+=a[0],t+=a[1],s.push({key:"M",data:[e,t]}),r=e,i=t;break;case"L":s.push({key:"L",data:[...a]}),[e,t]=a;break;case"l":e+=a[0],t+=a[1],s.push({key:"L",data:[e,t]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],t=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+t:c+e);s.push({key:"C",data:l}),e=l[4],t=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],t=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+t:c+e);s.push({key:"Q",data:l}),e=l[2],t=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],t=a[6];break;case"a":e+=a[5],t+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,t]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),t=a[0];break;case"v":t+=a[0],s.push({key:"V",data:[t]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],t=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+t:c+e);s.push({key:"S",data:l}),e=l[2],t=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],t=a[1];break;case"t":e+=a[0],t+=a[1],s.push({key:"T",data:[e,t]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=r,t=i}return s}function k9(n){const e=[];let t="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of n){switch(c){case"M":e.push({key:"M",data:[...u]}),[r,i]=u,[s,o]=u;break;case"C":e.push({key:"C",data:[...u]}),r=u[4],i=u[5],a=u[2],l=u[3];break;case"L":e.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],e.push({key:"L",data:[r,i]});break;case"V":i=u[0],e.push({key:"L",data:[r,i]});break;case"S":{let h=0,d=0;t==="C"||t==="S"?(h=r+(r-a),d=i+(i-l)):(h=r,d=i),e.push({key:"C",data:[h,d,...u]}),a=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[h,d]=u;let m=0,g=0;t==="Q"||t==="T"?(m=r+(r-a),g=i+(i-l)):(m=r,g=i);const v=r+2*(m-r)/3,w=i+2*(g-i)/3,_=h+2*(m-h)/3,A=d+2*(g-d)/3;e.push({key:"C",data:[v,w,_,A,h,d]}),a=m,l=g,r=h,i=d;break}case"Q":{const[h,d,m,g]=u,v=r+2*(h-r)/3,w=i+2*(d-i)/3,_=m+2*(h-m)/3,A=g+2*(d-g)/3;e.push({key:"C",data:[v,w,_,A,m,g]}),a=h,l=d,r=m,i=g;break}case"A":{const h=Math.abs(u[0]),d=Math.abs(u[1]),m=u[2],g=u[3],v=u[4],w=u[5],_=u[6];h===0||d===0?(e.push({key:"C",data:[r,i,w,_,w,_]}),r=w,i=_):(r!==w||i!==_)&&(B9(r,i,w,_,h,d,m,g,v).forEach(function(A){e.push({key:"C",data:A})}),r=w,i=_);break}case"Z":e.push({key:"Z",data:[]}),r=s,i=o}t=c}return e}function k0(n,e,t){return[n*Math.cos(t)-e*Math.sin(t),n*Math.sin(t)+e*Math.cos(t)]}function B9(n,e,t,r,i,s,o,a,l,c){const u=(h=o,Math.PI*h/180);var h;let d=[],m=0,g=0,v=0,w=0;if(c)[m,g,v,w]=c;else{[n,e]=k0(n,e,-u),[t,r]=k0(t,r,-u);const Q=(n-t)/2,Y=(e-r)/2;let ee=Q*Q/(i*i)+Y*Y/(s*s);ee>1&&(ee=Math.sqrt(ee),i*=ee,s*=ee);const $=i*i,oe=s*s,G=$*oe-$*Y*Y-oe*Q*Q,te=$*Y*Y+oe*Q*Q,re=(a===l?-1:1)*Math.sqrt(Math.abs(G/te));v=re*i*Y/s+(n+t)/2,w=re*-s*Q/i+(e+r)/2,m=Math.asin(parseFloat(((e-w)/s).toFixed(9))),g=Math.asin(parseFloat(((r-w)/s).toFixed(9))),n<v&&(m=Math.PI-m),t<v&&(g=Math.PI-g),m<0&&(m=2*Math.PI+m),g<0&&(g=2*Math.PI+g),l&&m>g&&(m-=2*Math.PI),!l&&g>m&&(g-=2*Math.PI)}let _=g-m;if(Math.abs(_)>120*Math.PI/180){const Q=g,Y=t,ee=r;g=l&&g>m?m+120*Math.PI/180*1:m+120*Math.PI/180*-1,d=B9(t=v+i*Math.cos(g),r=w+s*Math.sin(g),Y,ee,i,s,o,0,l,[g,Q,v,w])}_=g-m;const A=Math.cos(m),S=Math.sin(m),R=Math.cos(g),B=Math.sin(g),I=Math.tan(_/4),N=4/3*i*I,U=4/3*s*I,O=[n,e],P=[n+N*S,e-U*A],F=[t+N*B,r-U*R],K=[t,r];if(P[0]=2*O[0]-P[0],P[1]=2*O[1]-P[1],c)return[P,F,K].concat(d);{d=[P,F,K].concat(d);const Q=[];for(let Y=0;Y<d.length;Y+=3){const ee=k0(d[Y][0],d[Y][1],u),$=k0(d[Y+1][0],d[Y+1][1],u),oe=k0(d[Y+2][0],d[Y+2][1],u);Q.push([ee[0],ee[1],$[0],$[1],oe[0],oe[1]])}return Q}}const ISe={randOffset:function(n,e){return Ln(n,e)},randOffsetWithRange:function(n,e,t){return Kb(n,e,t)},ellipse:function(n,e,t,r,i){const s=L9(t,r,i);return C2(n,e,i,s).opset},doubleLineOps:function(n,e,t,r,i){return mf(n,e,t,r,i,!0)}};function I9(n,e,t,r,i){return{type:"path",ops:mf(n,e,t,r,i)}}function vw(n,e,t){const r=(n||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...mf(n[s][0],n[s][1],n[s+1][0],n[s+1][1],t));return e&&i.push(...mf(n[r-1][0],n[r-1][1],n[0][0],n[0][1],t)),{type:"path",ops:i}}return r===2?I9(n[0][0],n[0][1],n[1][0],n[1][1],t):{type:"path",ops:[]}}function LSe(n,e,t,r,i){return function(s,o){return vw(s,!0,o)}([[n,e],[n+t,e],[n+t,e+r],[n,e+r]],i)}function C3(n,e){if(n.length){const t=typeof n[0][0]=="number"?[n]:n,r=X_(t[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:X_(t[0],1.5*(1+.22*e.roughness),M3(e));for(let s=1;s<t.length;s++){const o=t[s];if(o.length){const a=X_(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:X_(o,1.5*(1+.22*e.roughness),M3(e));for(const c of a)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function L9(n,e,t){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(n/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(t.curveStepCount,t.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let o=Math.abs(n/2),a=Math.abs(e/2);const l=1-t.curveFitting;return o+=Ln(o*l,t),a+=Ln(a*l,t),{increment:s,rx:o,ry:a}}function C2(n,e,t,r){const[i,s]=R3(r.increment,n,e,r.rx,r.ry,1,r.increment*Kb(.1,Kb(.4,1,t),t),t);let o=Jb(i,null,t);if(!t.disableMultiStroke&&t.roughness!==0){const[a]=R3(r.increment,n,e,r.rx,r.ry,1.5,0,t),l=Jb(a,null,t);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function T3(n,e,t,r,i,s,o,a,l){const c=n,u=e;let h=Math.abs(t/2),d=Math.abs(r/2);h+=Ln(.01*h,l),d+=Ln(.01*d,l);let m=i,g=s;for(;m<0;)m+=2*Math.PI,g+=2*Math.PI;g-m>2*Math.PI&&(m=0,g=2*Math.PI);const v=2*Math.PI/l.curveStepCount,w=Math.min(v/2,(g-m)/2),_=P3(w,c,u,h,d,m,g,1,l);if(!l.disableMultiStroke){const A=P3(w,c,u,h,d,m,g,1.5,l);_.push(...A)}return o&&(a?_.push(...mf(c,u,c+h*Math.cos(m),u+d*Math.sin(m),l),...mf(c,u,c+h*Math.cos(g),u+d*Math.sin(g),l)):_.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+h*Math.cos(m),u+d*Math.sin(m)]})),{type:"path",ops:_}}function E3(n,e){const t=k9(P9(qk(n))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of t)switch(o){case"M":s=[a[0],a[1]],i=[a[0],a[1]];break;case"L":r.push(...mf(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,u,h,d,m]=a;r.push(...DSe(l,c,u,h,d,m,s,e)),s=[d,m];break}case"Z":r.push(...mf(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:r}}function AE(n,e){const t=[];for(const r of n)if(r.length){const i=e.maxRandomnessOffset||0,s=r.length;if(s>2){t.push({op:"move",data:[r[0][0]+Ln(i,e),r[0][1]+Ln(i,e)]});for(let o=1;o<s;o++)t.push({op:"lineTo",data:[r[o][0]+Ln(i,e),r[o][1]+Ln(i,e)]})}}return{type:"fillPath",ops:t}}function zm(n,e){return function(t,r){let i=t.fillStyle||"hachure";if(!Ko[i])switch(i){case"zigzag":Ko[i]||(Ko[i]=new TSe(r));break;case"cross-hatch":Ko[i]||(Ko[i]=new ESe(r));break;case"dots":Ko[i]||(Ko[i]=new MSe(r));break;case"dashed":Ko[i]||(Ko[i]=new RSe(r));break;case"zigzag-line":Ko[i]||(Ko[i]=new PSe(r));break;default:i="hachure",Ko[i]||(Ko[i]=new Xk(r))}return Ko[i]}(e,ISe).fillPolygons(n,e)}function M3(n){const e=Object.assign({},n);return e.randomizer=void 0,n.seed&&(e.seed=n.seed+1),e}function D9(n){return n.randomizer||(n.randomizer=new kSe(n.seed||0)),n.randomizer.next()}function Kb(n,e,t,r=1){return t.roughness*r*(D9(t)*(e-n)+n)}function Ln(n,e,t=1){return Kb(-n,n,e,t)}function mf(n,e,t,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=T2(n,e,t,r,i,!0,!1);if(o)return a;const l=T2(n,e,t,r,i,!0,!0);return a.concat(l)}function T2(n,e,t,r,i,s,o){const a=Math.pow(n-t,2)+Math.pow(e-r,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const h=u/2,d=.2+.2*D9(i);let m=i.bowing*i.maxRandomnessOffset*(r-e)/200,g=i.bowing*i.maxRandomnessOffset*(n-t)/200;m=Ln(m,i,c),g=Ln(g,i,c);const v=[],w=()=>Ln(h,i,c),_=()=>Ln(u,i,c),A=i.preserveVertices;return o?v.push({op:"move",data:[n+(A?0:w()),e+(A?0:w())]}):v.push({op:"move",data:[n+(A?0:Ln(u,i,c)),e+(A?0:Ln(u,i,c))]}),o?v.push({op:"bcurveTo",data:[m+n+(t-n)*d+w(),g+e+(r-e)*d+w(),m+n+2*(t-n)*d+w(),g+e+2*(r-e)*d+w(),t+(A?0:w()),r+(A?0:w())]}):v.push({op:"bcurveTo",data:[m+n+(t-n)*d+_(),g+e+(r-e)*d+_(),m+n+2*(t-n)*d+_(),g+e+2*(r-e)*d+_(),t+(A?0:_()),r+(A?0:_())]}),v}function X_(n,e,t){if(!n.length)return[];const r=[];r.push([n[0][0]+Ln(e,t),n[0][1]+Ln(e,t)]),r.push([n[0][0]+Ln(e,t),n[0][1]+Ln(e,t)]);for(let i=1;i<n.length;i++)r.push([n[i][0]+Ln(e,t),n[i][1]+Ln(e,t)]),i===n.length-1&&r.push([n[i][0]+Ln(e,t),n[i][1]+Ln(e,t)]);return Jb(r,null,t)}function Jb(n,e,t){const r=n.length,i=[];if(r>3){const s=[],o=1-t.curveTightness;i.push({op:"move",data:[n[1][0],n[1][1]]});for(let a=1;a+2<r;a++){const l=n[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*n[a+1][0]-o*n[a-1][0])/6,l[1]+(o*n[a+1][1]-o*n[a-1][1])/6],s[2]=[n[a+1][0]+(o*n[a][0]-o*n[a+2][0])/6,n[a+1][1]+(o*n[a][1]-o*n[a+2][1])/6],s[3]=[n[a+1][0],n[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[n[1][0],n[1][1]]}),i.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[2][0],n[2][1]]})):r===2&&i.push(...T2(n[0][0],n[0][1],n[1][0],n[1][1],t,!0,!0));return i}function R3(n,e,t,r,i,s,o,a){const l=[],c=[];if(a.roughness===0){n/=4,c.push([e+r*Math.cos(-n),t+i*Math.sin(-n)]);for(let u=0;u<=2*Math.PI;u+=n){const h=[e+r*Math.cos(u),t+i*Math.sin(u)];l.push(h),c.push(h)}c.push([e+r*Math.cos(0),t+i*Math.sin(0)]),c.push([e+r*Math.cos(n),t+i*Math.sin(n)])}else{const u=Ln(.5,a)-Math.PI/2;c.push([Ln(s,a)+e+.9*r*Math.cos(u-n),Ln(s,a)+t+.9*i*Math.sin(u-n)]);const h=2*Math.PI+u-.01;for(let d=u;d<h;d+=n){const m=[Ln(s,a)+e+r*Math.cos(d),Ln(s,a)+t+i*Math.sin(d)];l.push(m),c.push(m)}c.push([Ln(s,a)+e+r*Math.cos(u+2*Math.PI+.5*o),Ln(s,a)+t+i*Math.sin(u+2*Math.PI+.5*o)]),c.push([Ln(s,a)+e+.98*r*Math.cos(u+o),Ln(s,a)+t+.98*i*Math.sin(u+o)]),c.push([Ln(s,a)+e+.9*r*Math.cos(u+.5*o),Ln(s,a)+t+.9*i*Math.sin(u+.5*o)])}return[c,l]}function P3(n,e,t,r,i,s,o,a,l){const c=s+Ln(.1,l),u=[];u.push([Ln(a,l)+e+.9*r*Math.cos(c-n),Ln(a,l)+t+.9*i*Math.sin(c-n)]);for(let h=c;h<=o;h+=n)u.push([Ln(a,l)+e+r*Math.cos(h),Ln(a,l)+t+i*Math.sin(h)]);return u.push([e+r*Math.cos(o),t+i*Math.sin(o)]),u.push([e+r*Math.cos(o),t+i*Math.sin(o)]),Jb(u,null,l)}function DSe(n,e,t,r,i,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const h=a.disableMultiStroke?1:2,d=a.preserveVertices;for(let m=0;m<h;m++)m===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:Ln(c[0],a)),o[1]+(d?0:Ln(c[0],a))]}),u=d?[i,s]:[i+Ln(c[m],a),s+Ln(c[m],a)],l.push({op:"bcurveTo",data:[n+Ln(c[m],a),e+Ln(c[m],a),t+Ln(c[m],a),r+Ln(c[m],a),u[0],u[1]]});return l}function B0(n){return[...n]}function k3(n,e=0){const t=n.length;if(t<3)throw new Error("A curve must have at least three points.");const r=[];if(t===3)r.push(B0(n[0]),B0(n[1]),B0(n[2]),B0(n[2]));else{const i=[];i.push(n[0],n[0]);for(let a=1;a<n.length;a++)i.push(n[a]),a===n.length-1&&i.push(n[a]);const s=[],o=1-e;r.push(B0(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function _w(n,e){return Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)}function FSe(n,e,t){const r=_w(e,t);if(r===0)return _w(n,e);let i=((n[0]-e[0])*(t[0]-e[0])+(n[1]-e[1])*(t[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),_w(n,Md(e,t,i))}function Md(n,e,t){return[n[0]+(e[0]-n[0])*t,n[1]+(e[1]-n[1])*t]}function E2(n,e,t,r){const i=r||[];if(function(a,l){const c=a[l+0],u=a[l+1],h=a[l+2],d=a[l+3];let m=3*u[0]-2*c[0]-d[0];m*=m;let g=3*u[1]-2*c[1]-d[1];g*=g;let v=3*h[0]-2*d[0]-c[0];v*=v;let w=3*h[1]-2*d[1]-c[1];return w*=w,m<v&&(m=v),g<w&&(g=w),m+g}(n,e)<t){const a=n[e+0];i.length?(s=i[i.length-1],o=a,Math.sqrt(_w(s,o))>1&&i.push(a)):i.push(a),i.push(n[e+3])}else{const l=n[e+0],c=n[e+1],u=n[e+2],h=n[e+3],d=Md(l,c,.5),m=Md(c,u,.5),g=Md(u,h,.5),v=Md(d,m,.5),w=Md(m,g,.5),_=Md(v,w,.5);E2([l,d,v,_],0,t,i),E2([_,w,g,h],0,t,i)}var s,o;return i}function NSe(n,e){return Zb(n,0,n.length,e)}function Zb(n,e,t,r,i){const s=i||[],o=n[e],a=n[t-1];let l=0,c=1;for(let u=e+1;u<t-1;++u){const h=FSe(n[u],o,a);h>l&&(l=h,c=u)}return Math.sqrt(l)>r?(Zb(n,e,c+1,r,s),Zb(n,c,t,r,s)):(s.length||s.push(o),s.push(a)),s}function SE(n,e=.15,t){const r=[],i=(n.length-1)/3;for(let s=0;s<i;s++)E2(n,3*s,e,r);return t&&t>0?Zb(r,0,r.length,t):r}const va="none";class Qb{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,r){return{shape:e,sets:t||[],options:r||this.defaultOptions}}line(e,t,r,i,s){const o=this._o(s);return this._d("line",[I9(e,t,r,i,o)],o)}rectangle(e,t,r,i,s){const o=this._o(s),a=[],l=LSe(e,t,r,i,o);if(o.fill){const c=[[e,t],[e+r,t],[e+r,t+i],[e,t+i]];o.fillStyle==="solid"?a.push(AE([c],o)):a.push(zm([c],o))}return o.stroke!==va&&a.push(l),this._d("rectangle",a,o)}ellipse(e,t,r,i,s){const o=this._o(s),a=[],l=L9(r,i,o),c=C2(e,t,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=C2(e,t,o,l).opset;u.type="fillPath",a.push(u)}else a.push(zm([c.estimatedPoints],o));return o.stroke!==va&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,t,r,i){const s=this.ellipse(e,t,r,r,i);return s.shape="circle",s}linearPath(e,t){const r=this._o(t);return this._d("linearPath",[vw(e,!1,r)],r)}arc(e,t,r,i,s,o,a=!1,l){const c=this._o(l),u=[],h=T3(e,t,r,i,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const m=T3(e,t,r,i,s,o,!0,!1,d);m.type="fillPath",u.push(m)}else u.push(function(d,m,g,v,w,_,A){const S=d,R=m;let B=Math.abs(g/2),I=Math.abs(v/2);B+=Ln(.01*B,A),I+=Ln(.01*I,A);let N=w,U=_;for(;N<0;)N+=2*Math.PI,U+=2*Math.PI;U-N>2*Math.PI&&(N=0,U=2*Math.PI);const O=(U-N)/A.curveStepCount,P=[];for(let F=N;F<=U;F+=O)P.push([S+B*Math.cos(F),R+I*Math.sin(F)]);return P.push([S+B*Math.cos(U),R+I*Math.sin(U)]),P.push([S,R]),zm([P],A)}(e,t,r,i,s,o,c));return c.stroke!==va&&u.push(h),this._d("arc",u,c)}curve(e,t){const r=this._o(t),i=[],s=C3(e,r);if(r.fill&&r.fill!==va)if(r.fillStyle==="solid"){const o=C3(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...SE(k3([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):o.push(...SE(k3(c),10,(1+r.roughness)/2))}o.length&&i.push(zm([o],r))}return r.stroke!==va&&i.push(s),this._d("curve",i,r)}polygon(e,t){const r=this._o(t),i=[],s=vw(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(AE([e],r)):i.push(zm([e],r))),r.stroke!==va&&i.push(s),this._d("polygon",i,r)}path(e,t){const r=this._o(t),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==va,o=r.stroke!==va,a=!!(r.simplification&&r.simplification<1),l=function(u,h,d){const m=k9(P9(qk(u))),g=[];let v=[],w=[0,0],_=[];const A=()=>{_.length>=4&&v.push(...SE(_,h)),_=[]},S=()=>{A(),v.length&&(g.push(v),v=[])};for(const{key:B,data:I}of m)switch(B){case"M":S(),w=[I[0],I[1]],v.push(w);break;case"L":A(),v.push([I[0],I[1]]);break;case"C":if(!_.length){const N=v.length?v[v.length-1]:w;_.push([N[0],N[1]])}_.push([I[0],I[1]]),_.push([I[2],I[3]]),_.push([I[4],I[5]]);break;case"Z":A(),v.push([w[0],w[1]])}if(S(),!d)return g;const R=[];for(const B of g){const I=NSe(B,d);I.length&&R.push(I)}return R}(e,1,a?4-4*(r.simplification||1):(1+r.roughness)/2),c=E3(e,r);if(s)if(r.fillStyle==="solid")if(l.length===1){const u=E3(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else i.push(AE(l,r));else i.push(zm(l,r));return o&&(a?l.forEach(u=>{i.push(vw(u,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(e,t){let r="";for(const i of e.ops){const s=typeof t=="number"&&t>=0?i.data.map(o=>+o.toFixed(t)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(e){const t=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const s of t){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:va};break;case"fillPath":o={d:this.opsToPath(s),stroke:va,strokeWidth:0,fill:r.fill||va};break;case"fillSketch":o=this.fillSketch(s,r)}o&&i.push(o)}return i}fillSketch(e,t){let r=t.fillWeight;return r<0&&(r=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||va,strokeWidth:r,fill:va}}_mergedShape(e){return e.filter((t,r)=>r===0||t.op!=="move")}}class OSe{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Qb(t)}draw(e){const t=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of t)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r)}}fillSketch(e,t,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,t,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,r,i="nonzero"){e.beginPath();for(const s of t.ops){const o=typeof r=="number"&&r>=0?s.data.map(a=>+a.toFixed(r)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}t.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,r,i,s){const o=this.gen.line(e,t,r,i,s);return this.draw(o),o}rectangle(e,t,r,i,s){const o=this.gen.rectangle(e,t,r,i,s);return this.draw(o),o}ellipse(e,t,r,i,s){const o=this.gen.ellipse(e,t,r,i,s);return this.draw(o),o}circle(e,t,r,i){const s=this.gen.circle(e,t,r,i);return this.draw(s),s}linearPath(e,t){const r=this.gen.linearPath(e,t);return this.draw(r),r}polygon(e,t){const r=this.gen.polygon(e,t);return this.draw(r),r}arc(e,t,r,i,s,o,a=!1,l){const c=this.gen.arc(e,t,r,i,s,o,a,l);return this.draw(c),c}curve(e,t){const r=this.gen.curve(e,t);return this.draw(r),r}path(e,t){const r=this.gen.path(e,t);return this.draw(r),r}}const q_="http://www.w3.org/2000/svg";class USe{constructor(e,t){this.svg=e,this.gen=new Qb(t)}draw(e){const t=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(q_,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of t){let l=null;switch(a.type){case"path":l=i.createElementNS(q_,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(q_,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,a,r)}l&&s.appendChild(l)}return s}fillSketch(e,t,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=e.createElementNS(q_,"path");return s.setAttribute("d",this.opsToPath(t,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,r,i,s){const o=this.gen.line(e,t,r,i,s);return this.draw(o)}rectangle(e,t,r,i,s){const o=this.gen.rectangle(e,t,r,i,s);return this.draw(o)}ellipse(e,t,r,i,s){const o=this.gen.ellipse(e,t,r,i,s);return this.draw(o)}circle(e,t,r,i){const s=this.gen.circle(e,t,r,i);return this.draw(s)}linearPath(e,t){const r=this.gen.linearPath(e,t);return this.draw(r)}polygon(e,t){const r=this.gen.polygon(e,t);return this.draw(r)}arc(e,t,r,i,s,o,a=!1,l){const c=this.gen.arc(e,t,r,i,s,o,a,l);return this.draw(c)}curve(e,t){const r=this.gen.curve(e,t);return this.draw(r)}path(e,t){const r=this.gen.path(e,t);return this.draw(r)}}var gn={canvas:(n,e)=>new OSe(n,e),svg:(n,e)=>new USe(n,e),generator:n=>new Qb(n),newSeed:()=>Qb.newSeed()},Un=V(async(n,e,t)=>{var h,d;let r;const i=e.useHtmlLabels||qs((h=Fr())==null?void 0:h.htmlLabels);t?r=t:r="node default";const s=n.insert("g").attr("class",r).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",Do(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await ly(o,gp(ay(a),Fr()),{useHtmlLabels:i,width:e.width||((d=Fr().flowchart)==null?void 0:d.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const u=((e==null?void 0:e.padding)??0)/2;if(i){const m=l.children[0],g=Dr(l),v=m.getElementsByTagName("img");if(v){const w=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...v].map(_=>new Promise(A=>{function S(){if(_.style.display="flex",_.style.flexDirection="column",w){const R=Fr().fontSize?Fr().fontSize:window.getComputedStyle(document.body).fontSize,B=5,[I=n8.fontSize]=TS(R),N=I*B+"px";_.style.minWidth=N,_.style.maxWidth=N}else _.style.width="100%";A(_)}V(S,"setupImage"),setTimeout(()=>{_.complete&&S()}),_.addEventListener("error",S),_.addEventListener("load",S)})))}c=m.getBoundingClientRect(),g.attr("width",c.width),g.attr("height",c.height)}return i?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:u,label:o}},"labelHelper"),CE=V(async(n,e,t)=>{var l,c,u,h,d,m;const r=t.useHtmlLabels||qs((c=(l=Fr())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=n.insert("g").attr("class","label").attr("style",t.labelStyle||""),s=await ly(i,gp(ay(e),Fr()),{useHtmlLabels:r,width:t.width||((h=(u=Fr())==null?void 0:u.flowchart)==null?void 0:h.wrappingWidth),style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let o=s.getBBox();const a=t.padding/2;if(qs((m=(d=Fr())==null?void 0:d.flowchart)==null?void 0:m.htmlLabels)){const g=s.children[0],v=Dr(s);o=g.getBoundingClientRect(),v.attr("width",o.width),v.attr("height",o.height)}return r?i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):i.attr("transform","translate(0, "+-o.height/2+")"),t.centerLabel&&i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:n,bbox:o,halfPadding:a,label:i}},"insertLabel"),bn=V((n,e)=>{const t=e.node().getBBox();n.width=t.width,n.height=t.height},"updateNodeBounds"),zn=V((n,e)=>(n.look==="handDrawn"?"rough-node":"node")+" "+n.cssClasses+" "+(e||""),"getNodeClasses");function Sr(n){const e=n.map((t,r)=>`${r===0?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}V(Sr,"createPathFromPoints");function gf(n,e,t,r,i,s){const o=[],l=t-n,c=r-e,u=l/s,h=2*Math.PI/u,d=e+c/2;for(let m=0;m<=50;m++){const g=m/50,v=n+g*l,w=d+i*Math.sin(h*(v-n));o.push({x:v,y:w})}return o}V(gf,"generateFullSineWavePoints");function Yk(n,e,t,r,i,s){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let h=0;h<r;h++){const d=a+h*u,m=n+t*Math.cos(d),g=e+t*Math.sin(d);o.push({x:-m,y:-g})}return o}V(Yk,"generateCirclePoints");var zSe=V((n,e)=>{var t=n.x,r=n.y,i=e.x-t,s=e.y-r,o=n.width/2,a=n.height/2,l,c;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=s===0?0:a*i/s,c=a):(i<0&&(o=-o),l=o,c=i===0?0:o*s/i),{x:t+l,y:r+c}},"intersectRect"),cy=zSe;function F9(n,e){e&&n.attr("style",e)}V(F9,"applyStyle");async function N9(n){const e=Dr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),t=e.append("xhtml:div");let r=n.label;n.label&&Lg(n.label)&&(r=await ik(n.label.replace(iy.lineBreakRegex,`
`),Fr()));const i=n.isNode?"nodeLabel":"edgeLabel";return t.html('<span class="'+i+'" '+(n.labelStyle?'style="'+n.labelStyle+'"':"")+">"+r+"</span>"),F9(t,n.labelStyle),t.style("display","inline-block"),t.style("padding-right","1px"),t.style("white-space","nowrap"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}V(N9,"addHtmlLabel");var HSe=V(async(n,e,t,r)=>{let i=n||"";if(typeof i=="object"&&(i=i[0]),qs(Fr().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),yt.info("vertexText"+i);const s={isNode:r,label:ay(i).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await N9(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),t?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),$d=HSe,Zu=V((n,e,t,r,i)=>["M",n+i,e,"H",n+t-i,"A",i,i,0,0,1,n+t,e+i,"V",e+r-i,"A",i,i,0,0,1,n+t-i,e+r,"H",n+i,"A",i,i,0,0,1,n,e+r-i,"V",e+i,"A",i,i,0,0,1,n+i,e,"Z"].join(" "),"createRoundedRectPathD"),jSe=V(n=>{const{handDrawnSeed:e}=Fr();return{fill:n,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:n,seed:e}},"solidStateFill"),uy=V(n=>{const e=GSe([...n.cssCompiledStyles||[],...n.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),GSe=V(n=>{const e=new Map;return n.forEach(t=>{const[r,i]=t.split(":");e.set(r.trim(),i==null?void 0:i.trim())}),e},"styles2Map"),An=V(n=>{const{stylesArray:e}=uy(n),t=[],r=[],i=[],s=[];return e.forEach(o=>{const a=o[0];a==="color"||a==="font-size"||a==="font-family"||a==="font-weight"||a==="font-style"||a==="text-decoration"||a==="text-align"||a==="text-transform"||a==="line-height"||a==="letter-spacing"||a==="word-spacing"||a==="text-shadow"||a==="text-overflow"||a==="white-space"||a==="word-wrap"||a==="word-break"||a==="overflow-wrap"||a==="hyphens"?t.push(o.join(":")+" !important"):(r.push(o.join(":")+" !important"),a.includes("stroke")&&i.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:t.join(";"),nodeStyles:r.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:s}},"styles2String"),yn=V((n,e)=>{var l;const{themeVariables:t,handDrawnSeed:r}=Fr(),{nodeBorder:i,mainBkg:s}=t,{stylesMap:o}=uy(n);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||i,seed:r,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},e)},"userNodeOverrides"),O9=V(async(n,e)=>{yt.info("Creating subgraph rect for ",e.id,e);const t=Fr(),{themeVariables:r,handDrawnSeed:i}=t,{clusterBkg:s,clusterBorder:o}=r,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=An(e),h=n.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=qs(t.flowchart.htmlLabels),m=h.insert("g").attr("class","cluster-label "),g=await ly(m,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0});let v=g.getBBox();if(qs(t.flowchart.htmlLabels)){const N=g.children[0],U=Dr(g);v=N.getBoundingClientRect(),U.attr("width",v.width),U.attr("height",v.height)}const w=e.width<=v.width+e.padding?v.width+e.padding:e.width;e.width<=v.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;const _=e.height,A=e.x-w/2,S=e.y-_/2;yt.trace("Data ",e,JSON.stringify(e));let R;if(e.look==="handDrawn"){const N=gn.svg(h),U=yn(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:i}),O=N.path(Zu(A,S,w,_,0),U);R=h.insert(()=>(yt.debug("Rough node insert CXC",O),O),":first-child"),R.select("path:nth-child(2)").attr("style",c.join(";")),R.select("path").attr("style",u.join(";").replace("fill","stroke"))}else R=h.insert("rect",":first-child"),R.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",A).attr("y",S).attr("width",w).attr("height",_);const{subGraphTitleTopMargin:B}=gk(t);if(m.attr("transform",`translate(${e.x-v.width/2}, ${e.y-e.height/2+B})`),a){const N=m.select("span");N&&N.attr("style",a)}const I=R.node().getBBox();return e.offsetX=0,e.width=I.width,e.height=I.height,e.offsetY=v.height-e.padding/2,e.intersect=function(N){return cy(e,N)},{cluster:h,labelBBox:v}},"rect"),VSe=V((n,e)=>{const t=n.insert("g").attr("class","note-cluster").attr("id",e.id),r=t.insert("rect",":first-child"),i=0*e.padding,s=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return cy(e,a)},{cluster:t,labelBBox:{width:0,height:0}}},"noteGroup"),WSe=V(async(n,e)=>{const t=Fr(),{themeVariables:r,handDrawnSeed:i}=t,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=r,c=n.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=c.insert("g",":first-child"),h=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const m=h.node().appendChild(await $d(e.label,e.labelStyle,void 0,!0));let g=m.getBBox();if(qs(t.flowchart.htmlLabels)){const O=m.children[0],P=Dr(m);g=O.getBoundingClientRect(),P.attr("width",g.width),P.attr("height",g.height)}const v=0*e.padding,w=v/2,_=(e.width<=g.width+e.padding?g.width+e.padding:e.width)+v;e.width<=g.width+e.padding?e.diff=(_-e.width)/2-e.padding:e.diff=-e.padding;const A=e.height+v,S=e.height+v-g.height-6,R=e.x-_/2,B=e.y-A/2;e.width=_;const I=e.y-e.height/2-w+g.height+2;let N;if(e.look==="handDrawn"){const O=e.cssClasses.includes("statediagram-cluster-alt"),P=gn.svg(c),F=e.rx||e.ry?P.path(Zu(R,B,_,A,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:i}):P.rectangle(R,B,_,A,{seed:i});N=c.insert(()=>F,":first-child");const K=P.rectangle(R,I,_,S,{fill:O?s:o,fillStyle:O?"hachure":"solid",stroke:l,seed:i});N=c.insert(()=>F,":first-child"),d=c.insert(()=>K)}else N=u.insert("rect",":first-child"),N.attr("class","outer").attr("x",R).attr("y",B).attr("width",_).attr("height",A).attr("data-look",e.look),d.attr("class","inner").attr("x",R).attr("y",I).attr("width",_).attr("height",S);h.attr("transform",`translate(${e.x-g.width/2}, ${B+1-(qs(t.flowchart.htmlLabels)?0:3)})`);const U=N.node().getBBox();return e.height=U.height,e.offsetX=0,e.offsetY=g.height-e.padding/2,e.labelBBox=g,e.intersect=function(O){return cy(e,O)},{cluster:c,labelBBox:g}},"roundedWithTitle"),$Se=V(async(n,e)=>{yt.info("Creating subgraph rect for ",e.id,e);const t=Fr(),{themeVariables:r,handDrawnSeed:i}=t,{clusterBkg:s,clusterBorder:o}=r,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:u}=An(e),h=n.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=qs(t.flowchart.htmlLabels),m=h.insert("g").attr("class","cluster-label "),g=await ly(m,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0,width:e.width});let v=g.getBBox();if(qs(t.flowchart.htmlLabels)){const N=g.children[0],U=Dr(g);v=N.getBoundingClientRect(),U.attr("width",v.width),U.attr("height",v.height)}const w=e.width<=v.width+e.padding?v.width+e.padding:e.width;e.width<=v.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;const _=e.height,A=e.x-w/2,S=e.y-_/2;yt.trace("Data ",e,JSON.stringify(e));let R;if(e.look==="handDrawn"){const N=gn.svg(h),U=yn(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:i}),O=N.path(Zu(A,S,w,_,e.rx),U);R=h.insert(()=>(yt.debug("Rough node insert CXC",O),O),":first-child"),R.select("path:nth-child(2)").attr("style",c.join(";")),R.select("path").attr("style",u.join(";").replace("fill","stroke"))}else R=h.insert("rect",":first-child"),R.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",A).attr("y",S).attr("width",w).attr("height",_);const{subGraphTitleTopMargin:B}=gk(t);if(m.attr("transform",`translate(${e.x-v.width/2}, ${e.y-e.height/2+B})`),a){const N=m.select("span");N&&N.attr("style",a)}const I=R.node().getBBox();return e.offsetX=0,e.width=I.width,e.height=I.height,e.offsetY=v.height-e.padding/2,e.intersect=function(N){return cy(e,N)},{cluster:h,labelBBox:v}},"kanbanSection"),XSe=V((n,e)=>{const t=Fr(),{themeVariables:r,handDrawnSeed:i}=t,{nodeBorder:s}=r,o=n.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const u=e.height+l,h=e.x-c/2,d=e.y-u/2;e.width=c;let m;if(e.look==="handDrawn"){const w=gn.svg(o).rectangle(h,d,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});m=o.insert(()=>w,":first-child")}else m=a.insert("rect",":first-child"),m.attr("class","divider").attr("x",h).attr("y",d).attr("width",c).attr("height",u).attr("data-look",e.look);const g=m.node().getBBox();return e.height=g.height,e.offsetX=0,e.offsetY=0,e.intersect=function(v){return cy(e,v)},{cluster:o,labelBBox:{}}},"divider"),qSe=O9,YSe={rect:O9,squareRect:qSe,roundedWithTitle:WSe,noteGroup:VSe,divider:XSe,kanbanSection:$Se},U9=new Map,KSe=V(async(n,e)=>{const t=e.shape||"rect",r=await YSe[t](n,e);return U9.set(e.id,r),r},"insertCluster"),k2e=V(()=>{U9=new Map},"clear");function z9(n,e){return n.intersect(e)}V(z9,"intersectNode");var JSe=z9;function H9(n,e,t,r){var i=n.x,s=n.y,o=i-r.x,a=s-r.y,l=Math.sqrt(e*e*a*a+t*t*o*o),c=Math.abs(e*t*o/l);r.x<i&&(c=-c);var u=Math.abs(e*t*a/l);return r.y<s&&(u=-u),{x:i+c,y:s+u}}V(H9,"intersectEllipse");var j9=H9;function G9(n,e,t){return j9(n,e,e,t)}V(G9,"intersectCircle");var ZSe=G9;function V9(n,e,t,r){var i,s,o,a,l,c,u,h,d,m,g,v,w,_,A;if(i=e.y-n.y,o=n.x-e.x,l=e.x*n.y-n.x*e.y,d=i*t.x+o*t.y+l,m=i*r.x+o*r.y+l,!(d!==0&&m!==0&&M2(d,m))&&(s=r.y-t.y,a=t.x-r.x,c=r.x*t.y-t.x*r.y,u=s*n.x+a*n.y+c,h=s*e.x+a*e.y+c,!(u!==0&&h!==0&&M2(u,h))&&(g=i*a-s*o,g!==0)))return v=Math.abs(g/2),w=o*c-a*l,_=w<0?(w-v)/g:(w+v)/g,w=s*l-i*c,A=w<0?(w-v)/g:(w+v)/g,{x:_,y:A}}V(V9,"intersectLine");function M2(n,e){return n*e>0}V(M2,"sameSign");var QSe=V9;function W9(n,e,t){let r=n.x,i=n.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(u){o=Math.min(o,u.x),a=Math.min(a,u.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let l=r-n.width/2-o,c=i-n.height/2-a;for(let u=0;u<e.length;u++){let h=e[u],d=e[u<e.length-1?u+1:0],m=QSe(n,t,{x:l+h.x,y:c+h.y},{x:l+d.x,y:c+d.y});m&&s.push(m)}return s.length?(s.length>1&&s.sort(function(u,h){let d=u.x-t.x,m=u.y-t.y,g=Math.sqrt(d*d+m*m),v=h.x-t.x,w=h.y-t.y,_=Math.sqrt(v*v+w*w);return g<_?-1:g===_?0:1}),s[0]):n}V(W9,"intersectPolygon");var eCe=W9,pn={node:JSe,circle:ZSe,ellipse:j9,polygon:eCe,rect:cy};function $9(n,e){const{labelStyles:t}=An(e);e.labelStyle=t;const r=zn(e);let i=r;r||(i="anchor");const s=n.insert("g").attr("class",i).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,l=gn.svg(s),c=yn(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const u=l.circle(0,0,o*2,c),h=s.insert(()=>u,":first-child");return h.attr("class","anchor").attr("style",Do(a)),bn(e,h),e.intersect=function(d){return yt.info("Circle intersect",e,o,d),pn.circle(e,o,d)},s}V($9,"anchor");function R2(n,e,t,r,i,s,o){const l=(n+t)/2,c=(e+r)/2,u=Math.atan2(r-e,t-n),h=(t-n)/2,d=(r-e)/2,m=h/i,g=d/s,v=Math.sqrt(m**2+g**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const w=Math.sqrt(1-v**2),_=l+w*s*Math.sin(u)*(o?-1:1),A=c-w*i*Math.cos(u)*(o?-1:1),S=Math.atan2((e-A)/s,(n-_)/i);let B=Math.atan2((r-A)/s,(t-_)/i)-S;o&&B<0&&(B+=2*Math.PI),!o&&B>0&&(B-=2*Math.PI);const I=[];for(let N=0;N<20;N++){const U=N/19,O=S+U*B,P=_+i*Math.cos(O),F=A+s*Math.sin(O);I.push({x:P,y:F})}return I}V(R2,"generateArcPoints");async function X9(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=s.width+e.padding+20,a=s.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:u}=e,h=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...R2(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...R2(o/2,a/2,o/2,-a/2,c,l,!0)],d=gn.svg(i),m=yn(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=Sr(h),v=d.path(g,m),w=i.insert(()=>v,":first-child");return w.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${c/2}, 0)`),bn(e,w),e.intersect=function(_){return pn.polygon(e,h,_)},i}V(X9,"bowTieRect");function Qu(n,e,t,r){return n.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+t/2+")")}V(Qu,"insertPolygonShape");async function q9(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=s.height+e.padding,a=12,l=s.width+e.padding+a,c=0,u=l,h=-o,d=0,m=[{x:c+a,y:h},{x:u,y:h},{x:u,y:d},{x:c,y:d},{x:c,y:h+a},{x:c+a,y:h}];let g;const{cssStyles:v}=e;if(e.look==="handDrawn"){const w=gn.svg(i),_=yn(e,{}),A=Sr(m),S=w.path(A,_);g=i.insert(()=>S,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),v&&g.attr("style",v)}else g=Qu(i,l,o,m);return r&&g.attr("style",r),bn(e,g),e.intersect=function(w){return pn.polygon(e,m,w)},i}V(q9,"card");function Y9(n,e){const{nodeStyles:t}=An(e);e.label="";const r=n.insert("g").attr("class",zn(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=gn.svg(r),l=yn(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Sr(o),u=a.path(c,l),h=r.insert(()=>u,":first-child");return i&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",i),t&&e.look!=="handDrawn"&&h.selectAll("path").attr("style",t),e.width=28,e.height=28,e.intersect=function(d){return pn.polygon(e,o,d)},r}V(Y9,"choice");async function K9(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,halfPadding:o}=await Un(n,e,zn(e)),a=s.width/2+o;let l;const{cssStyles:c}=e;if(e.look==="handDrawn"){const u=gn.svg(i),h=yn(e,{}),d=u.circle(0,0,a*2,h);l=i.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",Do(c))}else l=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",a).attr("cx",0).attr("cy",0);return bn(e,l),e.intersect=function(u){return yt.info("Circle intersect",e,a,u),pn.circle(e,a,u)},i}V(K9,"circle");function J9(n){const e=Math.cos(Math.PI/4),t=Math.sin(Math.PI/4),r=n*2,i={x:r/2*e,y:r/2*t},s={x:-(r/2)*e,y:r/2*t},o={x:-(r/2)*e,y:-(r/2)*t},a={x:r/2*e,y:-(r/2)*t};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${i.x},${i.y} L ${o.x},${o.y}`}V(J9,"createLine");function Z9(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t,e.label="";const i=n.insert("g").attr("class",zn(e)).attr("id",e.domId??e.id),s=Math.max(30,(e==null?void 0:e.width)??0),{cssStyles:o}=e,a=gn.svg(i),l=yn(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),u=J9(s),h=a.path(u,l),d=i.insert(()=>c,":first-child");return d.insert(()=>h),o&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",o),r&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",r),bn(e,d),e.intersect=function(m){return yt.info("crossedCircle intersect",e,{radius:s,point:m}),pn.circle(e,s,m)},i}V(Z9,"crossedCircle");function ku(n,e,t,r=100,i=0,s=180){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let h=0;h<r;h++){const d=a+h*u,m=n+t*Math.cos(d),g=e+t*Math.sin(d);o.push({x:-m,y:-g})}return o}V(ku,"generateCirclePoints");async function Q9(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,h=[...ku(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...ku(a/2+c*2,-c,c,20,-180,-270),...ku(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...ku(a/2,l/2,c,20,0,90)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...ku(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...ku(a/2+a*.1,-c,c,20,-180,-270),...ku(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...ku(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],m=gn.svg(i),g=yn(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const w=Sr(h).replace("Z",""),_=m.path(w,g),A=Sr(d),S=m.path(A,{...g}),R=i.insert("g",":first-child");return R.insert(()=>S,":first-child").attr("stroke-opacity",0),R.insert(()=>_,":first-child"),R.attr("class","text"),u&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",r),R.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),bn(e,R),e.intersect=function(B){return pn.polygon(e,d,B)},i}V(Q9,"curlyBraceLeft");function Bu(n,e,t,r=100,i=0,s=180){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let h=0;h<r;h++){const d=a+h*u,m=n+t*Math.cos(d),g=e+t*Math.sin(d);o.push({x:m,y:g})}return o}V(Bu,"generateCirclePoints");async function eV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,h=[...Bu(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Bu(a/2+c*2,-c,c,20,-180,-270),...Bu(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Bu(a/2,l/2,c,20,0,90)],d=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...Bu(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Bu(a/2+c*2,-c,c,20,-180,-270),...Bu(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Bu(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],m=gn.svg(i),g=yn(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const w=Sr(h).replace("Z",""),_=m.path(w,g),A=Sr(d),S=m.path(A,{...g}),R=i.insert("g",":first-child");return R.insert(()=>S,":first-child").attr("stroke-opacity",0),R.insert(()=>_,":first-child"),R.attr("class","text"),u&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",r),R.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),bn(e,R),e.intersect=function(B){return pn.polygon(e,d,B)},i}V(eV,"curlyBraceRight");function js(n,e,t,r=100,i=0,s=180){const o=[],a=i*Math.PI/180,u=(s*Math.PI/180-a)/(r-1);for(let h=0;h<r;h++){const d=a+h*u,m=n+t*Math.cos(d),g=e+t*Math.sin(d);o.push({x:-m,y:-g})}return o}V(js,"generateCirclePoints");async function tV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=e,h=[...js(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...js(a/2+c*2,-c,c,20,-180,-270),...js(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...js(a/2,l/2,c,20,0,90)],d=[...js(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...js(-a/2-c/2,-c,c,20,0,90),...js(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...js(-a/2+c+c/2,l/2,c,30,-180,-270)],m=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...js(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...js(a/2+c*2,-c,c,20,-180,-270),...js(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...js(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...js(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...js(-a/2-c/2,-c,c,20,0,90),...js(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...js(-a/2+c+c/2,l/2,c,30,-180,-270)],g=gn.svg(i),v=yn(e,{fill:"none"});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const _=Sr(h).replace("Z",""),A=g.path(_,v),R=Sr(d).replace("Z",""),B=g.path(R,v),I=Sr(m),N=g.path(I,{...v}),U=i.insert("g",":first-child");return U.insert(()=>N,":first-child").attr("stroke-opacity",0),U.insert(()=>A,":first-child"),U.insert(()=>B,":first-child"),U.attr("class","text"),u&&e.look!=="handDrawn"&&U.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&U.selectAll("path").attr("style",r),U.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),bn(e,U),e.intersect=function(O){return pn.polygon(e,m,O)},i}V(tV,"curlyBraces");async function nV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=80,a=20,l=Math.max(o,(s.width+(e.padding??0)*2)*1.25,(e==null?void 0:e.width)??0),c=Math.max(a,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=c/2,{cssStyles:h}=e,d=gn.svg(i),m=yn(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=l,v=c,w=g-u,_=v/4,A=[{x:w,y:0},{x:_,y:0},{x:0,y:v/2},{x:_,y:v},{x:w,y:v},...Yk(-w,-v/2,u,50,270,90)],S=Sr(A),R=d.path(S,m),B=i.insert(()=>R,":first-child");return B.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&B.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&B.selectChildren("path").attr("style",r),B.attr("transform",`translate(${-l/2}, ${-c/2})`),bn(e,B),e.intersect=function(I){return pn.polygon(e,A,I)},i}V(nV,"curvedTrapezoid");var tCe=V((n,e,t,r,i,s)=>[`M${n},${e+s}`,`a${i},${s} 0,0,0 ${t},0`,`a${i},${s} 0,0,0 ${-t},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${t},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),nCe=V((n,e,t,r,i,s)=>[`M${n},${e+s}`,`M${n+t},${e+s}`,`a${i},${s} 0,0,0 ${-t},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${t},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),rCe=V((n,e,t,r,i,s)=>[`M${n-t/2},${-r/2}`,`a${i},${s} 0,0,0 ${t},0`].join(" "),"createInnerCylinderPathD");async function rV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(s.height+c+e.padding,e.height??0);let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const m=gn.svg(i),g=nCe(0,0,a,u,l,c),v=rCe(0,c,a,u,l,c),w=m.path(g,yn(e,{})),_=m.path(v,yn(e,{fill:"none"}));h=i.insert(()=>_,":first-child"),h=i.insert(()=>w,":first-child"),h.attr("class","basic label-container"),d&&h.attr("style",d)}else{const m=tCe(0,0,a,u,l,c);h=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Do(d)).attr("style",r)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),bn(e,h),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(m){const g=pn.rect(e,m),v=g.x-(e.x??0);if(l!=0&&(Math.abs(v)<(e.width??0)/2||Math.abs(v)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-c)){let w=c*c*(1-v*v/(l*l));w>0&&(w=Math.sqrt(w)),w=c-w,m.y-(e.y??0)>0&&(w=-w),g.y+=w}return g},i}V(rV,"cylinder");async function iV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=s.width+e.padding,l=s.height+e.padding,c=l*.2,u=-a/2,h=-l/2-c/2,{cssStyles:d}=e,m=gn.svg(i),g=yn(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=[{x:u,y:h+c},{x:-u,y:h+c},{x:-u,y:-h},{x:u,y:-h},{x:u,y:h},{x:-u,y:h},{x:-u,y:h+c}],w=m.polygon(v.map(A=>[A.x,A.y]),g),_=i.insert(()=>w,":first-child");return _.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",r),o.attr("transform",`translate(${u+(e.padding??0)/2-(s.x-(s.left??0))}, ${h+c+(e.padding??0)/2-(s.y-(s.top??0))})`),bn(e,_),e.intersect=function(A){return pn.rect(e,A)},i}V(iV,"dividedRectangle");async function sV(n,e){var d,m;const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,halfPadding:o}=await Un(n,e,zn(e)),l=s.width/2+o+5,c=s.width/2+o;let u;const{cssStyles:h}=e;if(e.look==="handDrawn"){const g=gn.svg(i),v=yn(e,{roughness:.2,strokeWidth:2.5}),w=yn(e,{roughness:.2,strokeWidth:1.5}),_=g.circle(0,0,l*2,v),A=g.circle(0,0,c*2,w);u=i.insert("g",":first-child"),u.attr("class",Do(e.cssClasses)).attr("style",Do(h)),(d=u.node())==null||d.appendChild(_),(m=u.node())==null||m.appendChild(A)}else{u=i.insert("g",":first-child");const g=u.insert("circle",":first-child"),v=u.insert("circle");u.attr("class","basic label-container").attr("style",r),g.attr("class","outer-circle").attr("style",r).attr("r",l).attr("cx",0).attr("cy",0),v.attr("class","inner-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0)}return bn(e,u),e.intersect=function(g){return yt.info("DoubleCircle intersect",e,l,g),pn.circle(e,l,g)},i}V(sV,"doublecircle");function oV(n,e,{config:{themeVariables:t}}){const{labelStyles:r,nodeStyles:i}=An(e);e.label="",e.labelStyle=r;const s=n.insert("g").attr("class",zn(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,l=gn.svg(s),{nodeBorder:c}=t,u=yn(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const h=l.circle(0,0,o*2,u),d=s.insert(()=>h,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",a),i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),bn(e,d),e.intersect=function(m){return yt.info("filledCircle intersect",e,{radius:o,point:m}),pn.circle(e,o,m)},s}V(oV,"filledCircle");async function aV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=s.width+(e.padding??0),l=a+s.height,c=a+s.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:h}=e,d=gn.svg(i),m=yn(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=Sr(u),v=d.path(g,m),w=i.insert(()=>v,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return h&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",r),e.width=a,e.height=l,bn(e,w),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(_){return yt.info("Triangle intersect",e,u,_),pn.polygon(e,u,_)},i}V(aV,"flippedTriangle");function lV(n,e,{dir:t,config:{state:r,themeVariables:i}}){const{nodeStyles:s}=An(e);e.label="";const o=n.insert("g").attr("class",zn(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,(e==null?void 0:e.width)??0),c=Math.max(10,(e==null?void 0:e.height)??0);t==="LR"&&(l=Math.max(10,(e==null?void 0:e.width)??0),c=Math.max(70,(e==null?void 0:e.height)??0));const u=-1*l/2,h=-1*c/2,d=gn.svg(o),m=yn(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=d.rectangle(u,h,l,c,m),v=o.insert(()=>g,":first-child");a&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),s&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",s),bn(e,v);const w=(r==null?void 0:r.padding)??0;return e.width&&e.height&&(e.width+=w/2||0,e.height+=w/2||0),e.intersect=function(_){return pn.rect(e,_)},o}V(lV,"forkJoin");async function cV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const i=80,s=50,{shapeSvg:o,bbox:a}=await Un(n,e,zn(e)),l=Math.max(i,a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s,a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=c/2,{cssStyles:h}=e,d=gn.svg(o),m=yn(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:-l/2,y:-c/2},{x:l/2-u,y:-c/2},...Yk(-l/2+u,0,u,50,90,270),{x:l/2-u,y:c/2},{x:-l/2,y:c/2}],v=Sr(g),w=d.path(v,m),_=o.insert(()=>w,":first-child");return _.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",r),bn(e,_),e.intersect=function(A){return yt.info("Pill intersect",e,{radius:u,point:A}),pn.polygon(e,g,A)},o}V(cV,"halfRoundedRectangle");var iCe=V((n,e,t,r,i)=>[`M${n+i},${e}`,`L${n+t-i},${e}`,`L${n+t},${e-r/2}`,`L${n+t-i},${e-r}`,`L${n+i},${e-r}`,`L${n},${e-r/2}`,"Z"].join(" "),"createHexagonPathD");async function uV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=4,a=s.height+e.padding,l=a/o,c=s.width+2*l+e.padding,u=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-a/2},{x:c-l,y:-a},{x:l,y:-a},{x:0,y:-a/2}];let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const m=gn.svg(i),g=yn(e,{}),v=iCe(0,0,c,a,l),w=m.path(v,g);h=i.insert(()=>w,":first-child").attr("transform",`translate(${-c/2}, ${a/2})`),d&&h.attr("style",d)}else h=Qu(i,c,a,u);return r&&h.attr("style",r),e.width=c,e.height=a,bn(e,h),e.intersect=function(m){return pn.polygon(e,u,m)},i}V(uV,"hexagon");async function hV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.label="",e.labelStyle=t;const{shapeSvg:i}=await Un(n,e,zn(e)),s=Math.max(30,(e==null?void 0:e.width)??0),o=Math.max(30,(e==null?void 0:e.height)??0),{cssStyles:a}=e,l=gn.svg(i),c=yn(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],h=Sr(u),d=l.path(h,c),m=i.insert(()=>d,":first-child");return m.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",a),r&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),m.attr("transform",`translate(${-s/2}, ${-o/2})`),bn(e,m),e.intersect=function(g){return yt.info("Pill intersect",e,{points:u}),pn.polygon(e,u,g)},i}V(hV,"hourglass");async function fV(n,e,{config:{themeVariables:t,flowchart:r}}){const{labelStyles:i}=An(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:h}=await Un(n,e,"icon-shape default"),d=e.pos==="t",m=a,g=a,{nodeBorder:v}=t,{stylesMap:w}=uy(e),_=-g/2,A=-m/2,S=e.label?8:0,R=gn.svg(c),B=yn(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(B.roughness=0,B.fillStyle="solid");const I=R.rectangle(_,A,g,m,B),N=Math.max(g,u.width),U=m+u.height+S,O=R.rectangle(-N/2,-U/2,N,U,{...B,fill:"transparent",stroke:"none"}),P=c.insert(()=>I,":first-child"),F=c.insert(()=>O);if(e.icon){const K=c.append("g");K.html(`<g>${await mS(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const Q=K.node().getBBox(),Y=Q.width,ee=Q.height,$=Q.x,oe=Q.y;K.attr("transform",`translate(${-Y/2-$},${d?u.height/2+S/2-ee/2-oe:-u.height/2-S/2-ee/2-oe})`),K.attr("style",`color: ${w.get("stroke")??v};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${d?-U/2:U/2-u.height})`),P.attr("transform",`translate(0,${d?u.height/2+S/2:-u.height/2-S/2})`),bn(e,F),e.intersect=function(K){if(yt.info("iconSquare intersect",e,K),!e.label)return pn.rect(e,K);const Q=e.x??0,Y=e.y??0,ee=e.height??0;let $=[];return d?$=[{x:Q-u.width/2,y:Y-ee/2},{x:Q+u.width/2,y:Y-ee/2},{x:Q+u.width/2,y:Y-ee/2+u.height+S},{x:Q+g/2,y:Y-ee/2+u.height+S},{x:Q+g/2,y:Y+ee/2},{x:Q-g/2,y:Y+ee/2},{x:Q-g/2,y:Y-ee/2+u.height+S},{x:Q-u.width/2,y:Y-ee/2+u.height+S}]:$=[{x:Q-g/2,y:Y-ee/2},{x:Q+g/2,y:Y-ee/2},{x:Q+g/2,y:Y-ee/2+m},{x:Q+u.width/2,y:Y-ee/2+m},{x:Q+u.width/2/2,y:Y+ee/2},{x:Q-u.width/2,y:Y+ee/2},{x:Q-u.width/2,y:Y-ee/2+m},{x:Q-g/2,y:Y-ee/2+m}],pn.polygon(e,$,K)},c}V(fV,"icon");async function dV(n,e,{config:{themeVariables:t,flowchart:r}}){const{labelStyles:i}=An(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,label:h}=await Un(n,e,"icon-shape default"),d=20,m=e.label?8:0,g=e.pos==="t",{nodeBorder:v,mainBkg:w}=t,{stylesMap:_}=uy(e),A=gn.svg(c),S=yn(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const R=_.get("fill");S.stroke=R??w;const B=c.append("g");e.icon&&B.html(`<g>${await mS(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const I=B.node().getBBox(),N=I.width,U=I.height,O=I.x,P=I.y,F=Math.max(N,U)*Math.SQRT2+d*2,K=A.circle(0,0,F,S),Q=Math.max(F,u.width),Y=F+u.height+m,ee=A.rectangle(-Q/2,-Y/2,Q,Y,{...S,fill:"transparent",stroke:"none"}),$=c.insert(()=>K,":first-child"),oe=c.insert(()=>ee);return B.attr("transform",`translate(${-N/2-O},${g?u.height/2+m/2-U/2-P:-u.height/2-m/2-U/2-P})`),B.attr("style",`color: ${_.get("stroke")??v};`),h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${g?-Y/2:Y/2-u.height})`),$.attr("transform",`translate(0,${g?u.height/2+m/2:-u.height/2-m/2})`),bn(e,oe),e.intersect=function(G){return yt.info("iconSquare intersect",e,G),pn.rect(e,G)},c}V(dV,"iconCircle");async function pV(n,e,{config:{themeVariables:t,flowchart:r}}){const{labelStyles:i}=An(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:h,label:d}=await Un(n,e,"icon-shape default"),m=e.pos==="t",g=a+h*2,v=a+h*2,{nodeBorder:w,mainBkg:_}=t,{stylesMap:A}=uy(e),S=-v/2,R=-g/2,B=e.label?8:0,I=gn.svg(c),N=yn(e,{});e.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");const U=A.get("fill");N.stroke=U??_;const O=I.path(Zu(S,R,v,g,5),N),P=Math.max(v,u.width),F=g+u.height+B,K=I.rectangle(-P/2,-F/2,P,F,{...N,fill:"transparent",stroke:"none"}),Q=c.insert(()=>O,":first-child").attr("class","icon-shape2"),Y=c.insert(()=>K);if(e.icon){const ee=c.append("g");ee.html(`<g>${await mS(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const $=ee.node().getBBox(),oe=$.width,G=$.height,te=$.x,re=$.y;ee.attr("transform",`translate(${-oe/2-te},${m?u.height/2+B/2-G/2-re:-u.height/2-B/2-G/2-re})`),ee.attr("style",`color: ${A.get("stroke")??w};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-F/2:F/2-u.height})`),Q.attr("transform",`translate(0,${m?u.height/2+B/2:-u.height/2-B/2})`),bn(e,Y),e.intersect=function(ee){if(yt.info("iconSquare intersect",e,ee),!e.label)return pn.rect(e,ee);const $=e.x??0,oe=e.y??0,G=e.height??0;let te=[];return m?te=[{x:$-u.width/2,y:oe-G/2},{x:$+u.width/2,y:oe-G/2},{x:$+u.width/2,y:oe-G/2+u.height+B},{x:$+v/2,y:oe-G/2+u.height+B},{x:$+v/2,y:oe+G/2},{x:$-v/2,y:oe+G/2},{x:$-v/2,y:oe-G/2+u.height+B},{x:$-u.width/2,y:oe-G/2+u.height+B}]:te=[{x:$-v/2,y:oe-G/2},{x:$+v/2,y:oe-G/2},{x:$+v/2,y:oe-G/2+g},{x:$+u.width/2,y:oe-G/2+g},{x:$+u.width/2/2,y:oe+G/2},{x:$-u.width/2,y:oe+G/2},{x:$-u.width/2,y:oe-G/2+g},{x:$-v/2,y:oe-G/2+g}],pn.polygon(e,te,ee)},c}V(pV,"iconRounded");async function mV(n,e,{config:{themeVariables:t,flowchart:r}}){const{labelStyles:i}=An(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=r==null?void 0:r.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:u,halfPadding:h,label:d}=await Un(n,e,"icon-shape default"),m=e.pos==="t",g=a+h*2,v=a+h*2,{nodeBorder:w,mainBkg:_}=t,{stylesMap:A}=uy(e),S=-v/2,R=-g/2,B=e.label?8:0,I=gn.svg(c),N=yn(e,{});e.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");const U=A.get("fill");N.stroke=U??_;const O=I.path(Zu(S,R,v,g,.1),N),P=Math.max(v,u.width),F=g+u.height+B,K=I.rectangle(-P/2,-F/2,P,F,{...N,fill:"transparent",stroke:"none"}),Q=c.insert(()=>O,":first-child"),Y=c.insert(()=>K);if(e.icon){const ee=c.append("g");ee.html(`<g>${await mS(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const $=ee.node().getBBox(),oe=$.width,G=$.height,te=$.x,re=$.y;ee.attr("transform",`translate(${-oe/2-te},${m?u.height/2+B/2-G/2-re:-u.height/2-B/2-G/2-re})`),ee.attr("style",`color: ${A.get("stroke")??w};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-F/2:F/2-u.height})`),Q.attr("transform",`translate(0,${m?u.height/2+B/2:-u.height/2-B/2})`),bn(e,Y),e.intersect=function(ee){if(yt.info("iconSquare intersect",e,ee),!e.label)return pn.rect(e,ee);const $=e.x??0,oe=e.y??0,G=e.height??0;let te=[];return m?te=[{x:$-u.width/2,y:oe-G/2},{x:$+u.width/2,y:oe-G/2},{x:$+u.width/2,y:oe-G/2+u.height+B},{x:$+v/2,y:oe-G/2+u.height+B},{x:$+v/2,y:oe+G/2},{x:$-v/2,y:oe+G/2},{x:$-v/2,y:oe-G/2+u.height+B},{x:$-u.width/2,y:oe-G/2+u.height+B}]:te=[{x:$-v/2,y:oe-G/2},{x:$+v/2,y:oe-G/2},{x:$+v/2,y:oe-G/2+g},{x:$+u.width/2,y:oe-G/2+g},{x:$+u.width/2/2,y:oe+G/2},{x:$-u.width/2,y:oe+G/2},{x:$-u.width/2,y:oe-G/2+g},{x:$-v/2,y:oe-G/2+g}],pn.polygon(e,te,ee)},c}V(mV,"iconSquare");async function gV(n,e,{config:{flowchart:t}}){const r=new Image;r.src=(e==null?void 0:e.img)??"",await r.decode();const i=Number(r.naturalWidth.toString().replace("px","")),s=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/s;const{labelStyles:o}=An(e);e.labelStyle=o;const a=t==null?void 0:t.wrappingWidth;e.defaultWidth=t==null?void 0:t.wrappingWidth;const l=Math.max(e.label?a??0:0,(e==null?void 0:e.assetWidth)??i),c=e.constraint==="on"&&e!=null&&e.assetHeight?e.assetHeight*e.imageAspectRatio:l,u=e.constraint==="on"?c/e.imageAspectRatio:(e==null?void 0:e.assetHeight)??s;e.width=Math.max(c,a??0);const{shapeSvg:h,bbox:d,label:m}=await Un(n,e,"image-shape default"),g=e.pos==="t",v=-c/2,w=-u/2,_=e.label?8:0,A=gn.svg(h),S=yn(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const R=A.rectangle(v,w,c,u,S),B=Math.max(c,d.width),I=u+d.height+_,N=A.rectangle(-B/2,-I/2,B,I,{...S,fill:"none",stroke:"none"}),U=h.insert(()=>R,":first-child"),O=h.insert(()=>N);if(e.img){const P=h.append("image");P.attr("href",e.img),P.attr("width",c),P.attr("height",u),P.attr("preserveAspectRatio","none"),P.attr("transform",`translate(${-c/2},${g?I/2-u:-I/2})`)}return m.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-u/2-d.height/2-_/2:u/2-d.height/2+_/2})`),U.attr("transform",`translate(0,${g?d.height/2+_/2:-d.height/2-_/2})`),bn(e,O),e.intersect=function(P){if(yt.info("iconSquare intersect",e,P),!e.label)return pn.rect(e,P);const F=e.x??0,K=e.y??0,Q=e.height??0;let Y=[];return g?Y=[{x:F-d.width/2,y:K-Q/2},{x:F+d.width/2,y:K-Q/2},{x:F+d.width/2,y:K-Q/2+d.height+_},{x:F+c/2,y:K-Q/2+d.height+_},{x:F+c/2,y:K+Q/2},{x:F-c/2,y:K+Q/2},{x:F-c/2,y:K-Q/2+d.height+_},{x:F-d.width/2,y:K-Q/2+d.height+_}]:Y=[{x:F-c/2,y:K-Q/2},{x:F+c/2,y:K-Q/2},{x:F+c/2,y:K-Q/2+u},{x:F+d.width/2,y:K-Q/2+u},{x:F+d.width/2/2,y:K+Q/2},{x:F-d.width/2,y:K+Q/2},{x:F-d.width/2,y:K-Q/2+u},{x:F-c/2,y:K-Q/2+u}],pn.polygon(e,Y,P)},h}V(gV,"imageSquare");async function yV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const h=gn.svg(i),d=yn(e,{}),m=Sr(l),g=h.path(m,d);c=i.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=Qu(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,bn(e,c),e.intersect=function(h){return pn.polygon(e,l,h)},i}V(yV,"inv_trapezoid");async function kS(n,e,t){const{labelStyles:r,nodeStyles:i}=An(e);e.labelStyle=r;const{shapeSvg:s,bbox:o}=await Un(n,e,zn(e)),a=Math.max(o.width+t.labelPaddingX*2,(e==null?void 0:e.width)||0),l=Math.max(o.height+t.labelPaddingY*2,(e==null?void 0:e.height)||0),c=-a/2,u=-l/2;let h,{rx:d,ry:m}=e;const{cssStyles:g}=e;if(t!=null&&t.rx&&t.ry&&(d=t.rx,m=t.ry),e.look==="handDrawn"){const v=gn.svg(s),w=yn(e,{}),_=d||m?v.path(Zu(c,u,a,l,d||0),w):v.rectangle(c,u,a,l,w);h=s.insert(()=>_,":first-child"),h.attr("class","basic label-container").attr("style",Do(g))}else h=s.insert("rect",":first-child"),h.attr("class","basic label-container").attr("style",i).attr("rx",Do(d)).attr("ry",Do(m)).attr("x",c).attr("y",u).attr("width",a).attr("height",l);return bn(e,h),e.intersect=function(v){return pn.rect(e,v)},s}V(kS,"drawRect");async function xV(n,e){const{shapeSvg:t,bbox:r,label:i}=await Un(n,e,"label"),s=t.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),t.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),bn(e,s),e.intersect=function(l){return pn.rect(e,l)},t}V(xV,"labelRect");async function vV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const h=gn.svg(i),d=yn(e,{}),m=Sr(l),g=h.path(m,d);c=i.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=Qu(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,bn(e,c),e.intersect=function(h){return pn.polygon(e,l,h)},i}V(vV,"lean_left");async function _V(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const h=gn.svg(i),d=yn(e,{}),m=Sr(l),g=h.path(m,d);c=i.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=Qu(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,bn(e,c),e.intersect=function(h){return pn.polygon(e,l,h)},i}V(_V,"lean_right");function wV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.label="",e.labelStyle=t;const i=n.insert("g").attr("class",zn(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,(e==null?void 0:e.width)??0),a=Math.max(35,(e==null?void 0:e.height)??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],u=gn.svg(i),h=yn(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=Sr(c),m=u.path(d,h),g=i.insert(()=>m,":first-child");return s&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",s),r&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",r),g.attr("transform",`translate(-${o/2},${-a})`),bn(e,g),e.intersect=function(v){return yt.info("lightningBolt intersect",e,v),pn.polygon(e,c,v)},i}V(wV,"lightningBolt");var sCe=V((n,e,t,r,i,s,o)=>[`M${n},${e+s}`,`a${i},${s} 0,0,0 ${t},0`,`a${i},${s} 0,0,0 ${-t},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${t},0`,`l0,${-r}`,`M${n},${e+s+o}`,`a${i},${s} 0,0,0 ${t},0`].join(" "),"createCylinderPathD"),oCe=V((n,e,t,r,i,s,o)=>[`M${n},${e+s}`,`M${n+t},${e+s}`,`a${i},${s} 0,0,0 ${-t},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${t},0`,`l0,${-r}`,`M${n},${e+s+o}`,`a${i},${s} 0,0,0 ${t},0`].join(" "),"createOuterCylinderPathD"),aCe=V((n,e,t,r,i,s)=>[`M${n-t/2},${-r/2}`,`a${i},${s} 0,0,0 ${t},0`].join(" "),"createInnerCylinderPathD");async function bV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),u=Math.max(s.height+c+(e.padding??0),e.height??0),h=u*.1;let d;const{cssStyles:m}=e;if(e.look==="handDrawn"){const g=gn.svg(i),v=oCe(0,0,a,u,l,c,h),w=aCe(0,c,a,u,l,c),_=yn(e,{}),A=g.path(v,_),S=g.path(w,_);i.insert(()=>S,":first-child").attr("class","line"),d=i.insert(()=>A,":first-child"),d.attr("class","basic label-container"),m&&d.attr("style",m)}else{const g=sCe(0,0,a,u,l,c,h);d=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",Do(m)).attr("style",r)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(u/2+c)})`),bn(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),e.intersect=function(g){const v=pn.rect(e,g),w=v.x-(e.x??0);if(l!=0&&(Math.abs(w)<(e.width??0)/2||Math.abs(w)==(e.width??0)/2&&Math.abs(v.y-(e.y??0))>(e.height??0)/2-c)){let _=c*c*(1-w*w/(l*l));_>0&&(_=Math.sqrt(_)),_=c-_,g.y-(e.y??0)>0&&(_=-_),v.y+=_}return v},i}V(bV,"linedCylinder");async function AV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=l+c,{cssStyles:h}=e,d=gn.svg(i),m=yn(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:-a/2-a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:u/2},...gf(-a/2-a/2*.1,u/2,a/2+a/2*.1,u/2,c,.8),{x:a/2+a/2*.1,y:-u/2},{x:-a/2-a/2*.1,y:-u/2},{x:-a/2,y:-u/2},{x:-a/2,y:u/2*1.1},{x:-a/2,y:-u/2}],v=d.polygon(g.map(_=>[_.x,_.y]),m),w=i.insert(()=>v,":first-child");return w.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),bn(e,w),e.intersect=function(_){return pn.polygon(e,g,_)},i}V(AV,"linedWaveEdgedRect");async function SV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,u=-a/2,h=-l/2,{cssStyles:d}=e,m=gn.svg(i),g=yn(e,{}),v=[{x:u-c,y:h+c},{x:u-c,y:h+l+c},{x:u+a-c,y:h+l+c},{x:u+a-c,y:h+l},{x:u+a,y:h+l},{x:u+a,y:h+l-c},{x:u+a+c,y:h+l-c},{x:u+a+c,y:h-c},{x:u+c,y:h-c},{x:u+c,y:h},{x:u,y:h},{x:u,y:h+c}],w=[{x:u,y:h+c},{x:u+a-c,y:h+c},{x:u+a-c,y:h+l},{x:u+a,y:h+l},{x:u+a,y:h},{x:u,y:h}];e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const _=Sr(v),A=m.path(_,g),S=Sr(w),R=m.path(S,{...g,fill:"none"}),B=i.insert(()=>R,":first-child");return B.insert(()=>A,":first-child"),B.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),bn(e,B),e.intersect=function(I){return pn.polygon(e,v,I)},i}V(SV,"multiRect");async function CV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=l+c,h=-a/2,d=-u/2,m=5,{cssStyles:g}=e,v=gf(h-m,d+u+m,h+a-m,d+u+m,c,.8),w=v==null?void 0:v[v.length-1],_=[{x:h-m,y:d+m},{x:h-m,y:d+u+m},...v,{x:h+a-m,y:w.y-m},{x:h+a,y:w.y-m},{x:h+a,y:w.y-2*m},{x:h+a+m,y:w.y-2*m},{x:h+a+m,y:d-m},{x:h+m,y:d-m},{x:h+m,y:d},{x:h,y:d},{x:h,y:d+m}],A=[{x:h,y:d+m},{x:h+a-m,y:d+m},{x:h+a-m,y:w.y-m},{x:h+a,y:w.y-m},{x:h+a,y:d},{x:h,y:d}],S=gn.svg(i),R=yn(e,{});e.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const B=Sr(_),I=S.path(B,R),N=Sr(A),U=S.path(N,R),O=i.insert(()=>I,":first-child");return O.insert(()=>U),O.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",g),r&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",r),O.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-m-(s.x-(s.left??0))}, ${-(s.height/2)+m-c/2-(s.y-(s.top??0))})`),bn(e,O),e.intersect=function(P){return pn.polygon(e,_,P)},i}V(CV,"multiWaveEdgedRectangle");async function TV(n,e,{config:{themeVariables:t}}){var _;const{labelStyles:r,nodeStyles:i}=An(e);e.labelStyle=r,e.useHtmlLabels||((_=rc().flowchart)==null?void 0:_.htmlLabels)!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:a}=await Un(n,e,zn(e)),l=Math.max(a.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(a.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=-l/2,h=-c/2,{cssStyles:d}=e,m=gn.svg(o),g=yn(e,{fill:t.noteBkgColor,stroke:t.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=m.rectangle(u,h,l,c,g),w=o.insert(()=>v,":first-child");return w.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",i),bn(e,w),e.intersect=function(A){return pn.rect(e,A)},o}V(TV,"note");var lCe=V((n,e,t)=>[`M${n+t/2},${e}`,`L${n+t},${e-t/2}`,`L${n+t/2},${e-t}`,`L${n},${e-t/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function EV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=s.width+e.padding,a=s.height+e.padding,l=o+a,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:h}=e;if(e.look==="handDrawn"){const d=gn.svg(i),m=yn(e,{}),g=lCe(0,0,l),v=d.path(g,m);u=i.insert(()=>v,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),h&&u.attr("style",h)}else u=Qu(i,l,l,c);return r&&u.attr("style",r),bn(e,u),e.intersect=function(d){return yt.debug(`APA12 Intersect called SPLIT
point:`,d,`
node:
`,e,`
res:`,pn.polygon(e,c,d)),pn.polygon(e,c,d)},i}V(EV,"question");async function MV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),c=-a/2,u=-l/2,h=u/2,d=[{x:c+h,y:u},{x:c,y:0},{x:c+h,y:-u},{x:-c,y:-u},{x:-c,y:u}],{cssStyles:m}=e,g=gn.svg(i),v=yn(e,{});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const w=Sr(d),_=g.path(w,v),A=i.insert(()=>_,":first-child");return A.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&A.selectAll("path").attr("style",m),r&&e.look!=="handDrawn"&&A.selectAll("path").attr("style",r),A.attr("transform",`translate(${-h/2},0)`),o.attr("transform",`translate(${-h/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),bn(e,A),e.intersect=function(S){return pn.polygon(e,d,S)},i}V(MV,"rect_left_inv_arrow");async function RV(n,e){var U,O;const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;let i;e.cssClasses?i="node "+e.cssClasses:i="node default";const s=n.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",r),l=e.description,c=e.label,u=a.node().appendChild(await $d(c,e.labelStyle,!0,!0));let h={width:0,height:0};if(qs((O=(U=Fr())==null?void 0:U.flowchart)==null?void 0:O.htmlLabels)){const P=u.children[0],F=Dr(u);h=P.getBoundingClientRect(),F.attr("width",h.width),F.attr("height",h.height)}yt.info("Text 2",l);const d=l||[],m=u.getBBox(),g=a.node().appendChild(await $d(d.join?d.join("<br/>"):d,e.labelStyle,!0,!0)),v=g.children[0],w=Dr(g);h=v.getBoundingClientRect(),w.attr("width",h.width),w.attr("height",h.height);const _=(e.padding||0)/2;Dr(g).attr("transform","translate( "+(h.width>m.width?0:(m.width-h.width)/2)+", "+(m.height+_+5)+")"),Dr(u).attr("transform","translate( "+(h.width<m.width?0:-(m.width-h.width)/2)+", 0)"),h=a.node().getBBox(),a.attr("transform","translate("+-h.width/2+", "+(-h.height/2-_+3)+")");const A=h.width+(e.padding||0),S=h.height+(e.padding||0),R=-h.width/2-_,B=-h.height/2-_;let I,N;if(e.look==="handDrawn"){const P=gn.svg(s),F=yn(e,{}),K=P.path(Zu(R,B,A,S,e.rx||0),F),Q=P.line(-h.width/2-_,-h.height/2-_+m.height+_,h.width/2+_,-h.height/2-_+m.height+_,F);N=s.insert(()=>(yt.debug("Rough node insert CXC",K),Q),":first-child"),I=s.insert(()=>(yt.debug("Rough node insert CXC",K),K),":first-child")}else I=o.insert("rect",":first-child"),N=o.insert("line"),I.attr("class","outer title-state").attr("style",r).attr("x",-h.width/2-_).attr("y",-h.height/2-_).attr("width",h.width+(e.padding||0)).attr("height",h.height+(e.padding||0)),N.attr("class","divider").attr("x1",-h.width/2-_).attr("x2",h.width/2+_).attr("y1",-h.height/2-_+m.height+_).attr("y2",-h.height/2-_+m.height+_);return bn(e,I),e.intersect=function(P){return pn.rect(e,P)},s}V(RV,"rectWithTitle");async function PV(n,e){const t={rx:5,ry:5,classes:"",labelPaddingX:((e==null?void 0:e.padding)||0)*1,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return kS(n,e,t)}V(PV,"roundedRect");async function kV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=(e==null?void 0:e.padding)??0,l=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=-s.width/2-a,h=-s.height/2-a,{cssStyles:d}=e,m=gn.svg(i),g=yn(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=[{x:u,y:h},{x:u+l+8,y:h},{x:u+l+8,y:h+c},{x:u-8,y:h+c},{x:u-8,y:h},{x:u,y:h},{x:u,y:h+c}],w=m.polygon(v.map(A=>[A.x,A.y]),g),_=i.insert(()=>w,":first-child");return _.attr("class","basic label-container").attr("style",Do(d)),r&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",r),d&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",r),o.attr("transform",`translate(${-l/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),bn(e,_),e.intersect=function(A){return pn.rect(e,A)},i}V(kV,"shadedProcess");async function BV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=-a/2,u=-l/2,{cssStyles:h}=e,d=gn.svg(i),m=yn(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:c,y:u},{x:c,y:u+l},{x:c+a,y:u+l},{x:c+a,y:u-l/2}],v=Sr(g),w=d.path(v,m),_=i.insert(()=>w,":first-child");return _.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",r),_.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))}, ${-l/4+(e.padding??0)-(s.y-(s.top??0))})`),bn(e,_),e.intersect=function(A){return pn.polygon(e,g,A)},i}V(BV,"slopedRect");async function IV(n,e){const t={rx:0,ry:0,classes:"",labelPaddingX:((e==null?void 0:e.padding)||0)*2,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return kS(n,e,t)}V(IV,"squareRect");async function LV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=s.height+e.padding,a=s.width+o/4+e.padding;let l;const{cssStyles:c}=e;if(e.look==="handDrawn"){const u=gn.svg(i),h=yn(e,{}),d=Zu(-a/2,-o/2,a,o,o/2),m=u.path(d,h);l=i.insert(()=>m,":first-child"),l.attr("class","basic label-container").attr("style",Do(c))}else l=i.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",r).attr("rx",o/2).attr("ry",o/2).attr("x",-a/2).attr("y",-o/2).attr("width",a).attr("height",o);return bn(e,l),e.intersect=function(u){return pn.rect(e,u)},i}V(LV,"stadium");async function DV(n,e){return kS(n,e,{rx:5,ry:5,classes:"flowchart-node"})}V(DV,"state");function FV(n,e,{config:{themeVariables:t}}){const{labelStyles:r,nodeStyles:i}=An(e);e.labelStyle=r;const{cssStyles:s}=e,{lineColor:o,stateBorder:a,nodeBorder:l}=t,c=n.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=gn.svg(c),h=yn(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=u.circle(0,0,14,{...h,stroke:o,strokeWidth:2}),m=a??l,g=u.circle(0,0,5,{...h,fill:m,stroke:m,strokeWidth:2,fillStyle:"solid"}),v=c.insert(()=>d,":first-child");return v.insert(()=>g),s&&v.selectAll("path").attr("style",s),i&&v.selectAll("path").attr("style",i),bn(e,v),e.intersect=function(w){return pn.circle(e,7,w)},c}V(FV,"stateEnd");function NV(n,e,{config:{themeVariables:t}}){const{lineColor:r}=t,i=n.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const a=gn.svg(i).circle(0,0,14,jSe(r));s=i.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return bn(e,s),e.intersect=function(o){return pn.circle(e,7,o)},i}V(NV,"stateStart");async function OV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=((e==null?void 0:e.padding)||0)/2,a=s.width+e.padding,l=s.height+e.padding,c=-s.width/2-o,u=-s.height/2-o,h=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const d=gn.svg(i),m=yn(e,{}),g=d.rectangle(c-8,u,a+16,l,m),v=d.line(c,u,c,u+l,m),w=d.line(c+a,u,c+a,u+l,m);i.insert(()=>v,":first-child"),i.insert(()=>w,":first-child");const _=i.insert(()=>g,":first-child"),{cssStyles:A}=e;_.attr("class","basic label-container").attr("style",Do(A)),bn(e,_)}else{const d=Qu(i,a,l,h);r&&d.attr("style",r),bn(e,d)}return e.intersect=function(d){return pn.polygon(e,h,d)},i}V(OV,"subroutine");async function UV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),a=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),l=-o/2,c=-a/2,u=.2*a,h=.2*a,{cssStyles:d}=e,m=gn.svg(i),g=yn(e,{}),v=[{x:l-u/2,y:c},{x:l+o+u/2,y:c},{x:l+o+u/2,y:c+a},{x:l-u/2,y:c+a}],w=[{x:l+o-u/2,y:c+a},{x:l+o+u/2,y:c+a},{x:l+o+u/2,y:c+a-h}];e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const _=Sr(v),A=m.path(_,g),S=Sr(w),R=m.path(S,{...g,fillStyle:"solid"}),B=i.insert(()=>R,":first-child");return B.insert(()=>A,":first-child"),B.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",r),bn(e,B),e.intersect=function(I){return pn.polygon(e,v,I)},i}V(UV,"taggedRect");async function zV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/4,u=.2*a,h=.2*l,d=l+c,{cssStyles:m}=e,g=gn.svg(i),v=yn(e,{});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const w=[{x:-a/2-a/2*.1,y:d/2},...gf(-a/2-a/2*.1,d/2,a/2+a/2*.1,d/2,c,.8),{x:a/2+a/2*.1,y:-d/2},{x:-a/2-a/2*.1,y:-d/2}],_=-a/2+a/2*.1,A=-d/2-h*.4,S=[{x:_+a-u,y:(A+l)*1.4},{x:_+a,y:A+l-h},{x:_+a,y:(A+l)*.9},...gf(_+a,(A+l)*1.3,_+a-u,(A+l)*1.5,-l*.03,.5)],R=Sr(w),B=g.path(R,v),I=Sr(S),N=g.path(I,{...v,fillStyle:"solid"}),U=i.insert(()=>N,":first-child");return U.insert(()=>B,":first-child"),U.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&U.selectAll("path").attr("style",m),r&&e.look!=="handDrawn"&&U.selectAll("path").attr("style",r),U.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),bn(e,U),e.intersect=function(O){return pn.polygon(e,w,O)},i}V(zV,"taggedWaveEdgedRectangle");async function HV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=Math.max(s.width+e.padding,(e==null?void 0:e.width)||0),a=Math.max(s.height+e.padding,(e==null?void 0:e.height)||0),l=-o/2,c=-a/2,u=i.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),bn(e,u),e.intersect=function(h){return pn.rect(e,h)},i}V(HV,"text");var cCe=V((n,e,t,r,i,s)=>`M${n},${e}
    a${i},${s} 0,0,1 0,${-r}
    l${t},0
    a${i},${s} 0,0,1 0,${r}
    M${t},${-r}
    a${i},${s} 0,0,0 0,${r}
    l${-t},0`,"createCylinderPathD"),uCe=V((n,e,t,r,i,s)=>[`M${n},${e}`,`M${n+t},${e}`,`a${i},${s} 0,0,0 0,${-r}`,`l${-t},0`,`a${i},${s} 0,0,0 0,${r}`,`l${t},0`].join(" "),"createOuterCylinderPathD"),hCe=V((n,e,t,r,i,s)=>[`M${n+t/2},${-r/2}`,`a${i},${s} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function jV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o,halfPadding:a}=await Un(n,e,zn(e)),l=e.look==="neo"?a*2:a,c=s.height+l,u=c/2,h=u/(2.5+c/50),d=s.width+h+l,{cssStyles:m}=e;let g;if(e.look==="handDrawn"){const v=gn.svg(i),w=uCe(0,0,d,c,h,u),_=hCe(0,0,d,c,h,u),A=v.path(w,yn(e,{})),S=v.path(_,yn(e,{fill:"none"}));g=i.insert(()=>S,":first-child"),g=i.insert(()=>A,":first-child"),g.attr("class","basic label-container"),m&&g.attr("style",m)}else{const v=cCe(0,0,d,c,h,u);g=i.insert("path",":first-child").attr("d",v).attr("class","basic label-container").attr("style",Do(m)).attr("style",r),g.attr("class","basic label-container"),m&&g.selectAll("path").attr("style",m),r&&g.selectAll("path").attr("style",r)}return g.attr("label-offset-x",h),g.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-h-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),bn(e,g),e.intersect=function(v){const w=pn.rect(e,v),_=w.y-(e.y??0);if(u!=0&&(Math.abs(_)<(e.height??0)/2||Math.abs(_)==(e.height??0)/2&&Math.abs(w.x-(e.x??0))>(e.width??0)/2-h)){let A=h*h*(1-_*_/(u*u));A!=0&&(A=Math.sqrt(Math.abs(A))),A=h-A,v.x-(e.x??0)>0&&(A=-A),w.x+=A}return w},i}V(jV,"tiltedCylinder");async function GV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=s.width+e.padding,a=s.height+e.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:u}=e;if(e.look==="handDrawn"){const h=gn.svg(i),d=yn(e,{}),m=Sr(l),g=h.path(m,d);c=i.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),u&&c.attr("style",u)}else c=Qu(i,o,a,l);return r&&c.attr("style",r),e.width=o,e.height=a,bn(e,c),e.intersect=function(h){return pn.polygon(e,l,h)},i}V(GV,"trapezoid");async function VV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=60,a=20,l=Math.max(o,s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(a,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),{cssStyles:u}=e,h=gn.svg(i),d=yn(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],g=Sr(m),v=h.path(g,d),w=i.insert(()=>v,":first-child");return w.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",u),r&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",r),bn(e,w),e.intersect=function(_){return pn.polygon(e,m,_)},i}V(VV,"trapezoidalPentagon");async function WV(n,e){var A;const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=qs((A=Fr().flowchart)==null?void 0:A.htmlLabels),l=s.width+(e.padding??0),c=l+s.height,u=l+s.height,h=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:d}=e,m=gn.svg(i),g=yn(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=Sr(h),w=m.path(v,g),_=i.insert(()=>w,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",r),e.width=l,e.height=c,bn(e,_),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(S){return yt.info("Triangle intersect",e,h,S),pn.polygon(e,h,S)},i}V(WV,"triangle");async function $V(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=l/8,u=l+c,{cssStyles:h}=e,m=70-a,g=m>0?m/2:0,v=gn.svg(i),w=yn(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const _=[{x:-a/2-g,y:u/2},...gf(-a/2-g,u/2,a/2+g,u/2,c,.8),{x:a/2+g,y:-u/2},{x:-a/2-g,y:-u/2}],A=Sr(_),S=v.path(A,w),R=i.insert(()=>S,":first-child");return R.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",h),r&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",r),R.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c-(s.y-(s.top??0))})`),bn(e,R),e.intersect=function(B){return pn.polygon(e,_,B)},i}V($V,"waveEdgedRectangle");async function XV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s}=await Un(n,e,zn(e)),o=100,a=50,l=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),c=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=l/c;let h=l,d=c;h>d*u?d=h/u:h=d*u,h=Math.max(h,o),d=Math.max(d,a);const m=Math.min(d*.2,d/4),g=d+m*2,{cssStyles:v}=e,w=gn.svg(i),_=yn(e,{});e.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const A=[{x:-h/2,y:g/2},...gf(-h/2,g/2,h/2,g/2,m,1),{x:h/2,y:-g/2},...gf(h/2,-g/2,-h/2,-g/2,m,-1)],S=Sr(A),R=w.path(S,_),B=i.insert(()=>R,":first-child");return B.attr("class","basic label-container"),v&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",v),r&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",r),bn(e,B),e.intersect=function(I){return pn.polygon(e,A,I)},i}V(XV,"waveRectangle");async function qV(n,e){const{labelStyles:t,nodeStyles:r}=An(e);e.labelStyle=t;const{shapeSvg:i,bbox:s,label:o}=await Un(n,e,zn(e)),a=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),l=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),c=5,u=-a/2,h=-l/2,{cssStyles:d}=e,m=gn.svg(i),g=yn(e,{}),v=[{x:u-c,y:h-c},{x:u-c,y:h+l},{x:u+a,y:h+l},{x:u+a,y:h-c}],w=`M${u-c},${h-c} L${u+a},${h-c} L${u+a},${h+l} L${u-c},${h+l} L${u-c},${h-c}
                M${u-c},${h} L${u+a},${h}
                M${u},${h-c} L${u},${h+l}`;e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const _=m.path(w,g),A=i.insert(()=>_,":first-child");return A.attr("transform",`translate(${c/2}, ${c/2})`),A.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&A.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&A.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),bn(e,A),e.intersect=function(S){return pn.polygon(e,v,S)},i}V(qV,"windowPane");async function YV(n,e,t,r,i=t.class.padding??12){const s=r?0:3,o=n.insert("g").attr("class",zn(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,u=null,h=0,d=0,m=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const A=e.annotations[0];await G0(a,{text:`«${A}»`},0),h=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await G0(l,e,0,["font-weight: bolder"]);const g=l.node().getBBox();d=g.height,c=o.insert("g").attr("class","members-group text");let v=0;for(const A of e.members){const S=await G0(c,A,v,[A.parseClassifier()]);v+=S+s}m=c.node().getBBox().height,m<=0&&(m=i/2),u=o.insert("g").attr("class","methods-group text");let w=0;for(const A of e.methods){const S=await G0(u,A,w,[A.parseClassifier()]);w+=S+s}let _=o.node().getBBox();if(a!==null){const A=a.node().getBBox();a.attr("transform",`translate(${-A.width/2})`)}return l.attr("transform",`translate(${-g.width/2}, ${h})`),_=o.node().getBBox(),c.attr("transform",`translate(0, ${h+d+i*2})`),_=o.node().getBBox(),u.attr("transform",`translate(0, ${h+d+(m?m+i*4:i*2)})`),_=o.node().getBBox(),{shapeSvg:o,bbox:_}}V(YV,"textHelper");async function G0(n,e,t,r=[]){const i=n.insert("g").attr("class","label").attr("style",r.join("; ")),s=rc();let o="useHtmlLabels"in e?e.useHtmlLabels:qs(s.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),Lg(a)&&(o=!0);const l=await ly(i,d8(ay(a)),{width:Ug(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,u=1;if(o){const h=l.children[0],d=Dr(l);u=h.innerHTML.split("<br>").length,h.innerHTML.includes("</math>")&&(u+=h.innerHTML.split("<mrow>").length-1);const m=h.getElementsByTagName("img");if(m){const g=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(v=>new Promise(w=>{function _(){var A;if(v.style.display="flex",v.style.flexDirection="column",g){const S=((A=s.fontSize)==null?void 0:A.toString())??window.getComputedStyle(document.body).fontSize,B=parseInt(S,10)*5+"px";v.style.minWidth=B,v.style.maxWidth=B}else v.style.width="100%";w(v)}V(_,"setupImage"),setTimeout(()=>{v.complete&&_()}),v.addEventListener("error",_),v.addEventListener("load",_)})))}c=h.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{r.includes("font-weight: bolder")&&Dr(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const h=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(h.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(h.textContent=h.textContent[0]+" "+h.textContent.substring(1))),h.textContent==="undefined"&&(h.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*u)+t)+")"),c.height}V(G0,"addText");async function KV(n,e){var O,P;const t=Fr(),r=t.class.padding??12,i=r,s=e.useHtmlLabels??qs(t.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await YV(n,e,t,s,i),{labelStyles:c,nodeStyles:u}=An(e);e.labelStyle=c,e.cssStyles=o.styles||"";const h=((O=o.styles)==null?void 0:O.join(";"))||u||"";e.cssStyles||(e.cssStyles=h.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!((P=t.class)!=null&&P.hideEmptyMembersBox),m=gn.svg(a),g=yn(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=l.width;let w=l.height;o.members.length===0&&o.methods.length===0?w+=i:o.members.length>0&&o.methods.length===0&&(w+=i*2);const _=-v/2,A=-w/2,S=m.rectangle(_-r,A-r-(d?r:o.members.length===0&&o.methods.length===0?-r/2:0),v+2*r,w+2*r+(d?r*2:o.members.length===0&&o.methods.length===0?-r:0),g),R=a.insert(()=>S,":first-child");R.attr("class","basic label-container");const B=R.node().getBBox();a.selectAll(".text").each((F,K,Q)=>{var te;const Y=Dr(Q[K]),ee=Y.attr("transform");let $=0;if(ee){const Z=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(ee);Z&&($=parseFloat(Z[2]))}let oe=$+A+r-(d?r:o.members.length===0&&o.methods.length===0?-r/2:0);s||(oe-=4);let G=_;(Y.attr("class").includes("label-group")||Y.attr("class").includes("annotation-group"))&&(G=-((te=Y.node())==null?void 0:te.getBBox().width)/2||0,a.selectAll("text").each(function(re,Z,ne){window.getComputedStyle(ne[Z]).textAnchor==="middle"&&(G=0)})),Y.attr("transform",`translate(${G}, ${oe})`)});const I=a.select(".annotation-group").node().getBBox().height-(d?r/2:0)||0,N=a.select(".label-group").node().getBBox().height-(d?r/2:0)||0,U=a.select(".members-group").node().getBBox().height-(d?r/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const F=m.line(B.x,I+N+A+r,B.x+B.width,I+N+A+r,g);a.insert(()=>F).attr("class","divider").attr("style",h)}if(d||o.members.length>0||o.methods.length>0){const F=m.line(B.x,I+N+U+A+i*2+r,B.x+B.width,I+N+U+A+r+i*2,g);a.insert(()=>F).attr("class","divider").attr("style",h)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",h),R.select(":nth-child(2)").attr("style",h),a.selectAll(".divider").select("path").attr("style",h),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",h),!s){const F=RegExp(/color\s*:\s*([^;]*)/),K=F.exec(h);if(K){const Q=K[0].replace("color","fill");a.selectAll("tspan").attr("style",Q)}else if(c){const Q=F.exec(c);if(Q){const Y=Q[0].replace("color","fill");a.selectAll("tspan").attr("style",Y)}}}return bn(e,R),e.intersect=function(F){return pn.rect(e,F)},a}V(KV,"classBox");var fCe=V(n=>{switch(n){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function JV(n,e,{config:t}){var K,Q;const{labelStyles:r,nodeStyles:i}=An(e);e.labelStyle=r||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await Un(n,e,zn(e)),u=e.padding||10;let h="",d;"ticket"in e&&e.ticket&&((K=t==null?void 0:t.kanban)!=null&&K.ticketBaseUrl)&&(h=(Q=t==null?void 0:t.kanban)==null?void 0:Q.ticketBaseUrl.replace("#TICKET#",e.ticket),d=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",h).attr("target","_blank"));const m={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let g,v;d?{label:g,bbox:v}=await CE(d,"ticket"in e&&e.ticket||"",m):{label:g,bbox:v}=await CE(a,"ticket"in e&&e.ticket||"",m);const{label:w,bbox:_}=await CE(a,"assigned"in e&&e.assigned||"",m);e.width=o;const A=10,S=(e==null?void 0:e.width)||0,R=Math.max(v.height,_.height)/2,B=Math.max(l.height+A*2,(e==null?void 0:e.height)||0)+R,I=-S/2,N=-B/2;c.attr("transform","translate("+(u-S/2)+", "+(-R-l.height/2)+")"),g.attr("transform","translate("+(u-S/2)+", "+(-R+l.height/2)+")"),w.attr("transform","translate("+(u+S/2-_.width-2*s)+", "+(-R+l.height/2)+")");let U;const{rx:O,ry:P}=e,{cssStyles:F}=e;if(e.look==="handDrawn"){const Y=gn.svg(a),ee=yn(e,{}),$=O||P?Y.path(Zu(I,N,S,B,O||0),ee):Y.rectangle(I,N,S,B,ee);U=a.insert(()=>$,":first-child"),U.attr("class","basic label-container").attr("style",F||null)}else{U=a.insert("rect",":first-child"),U.attr("class","basic label-container __APA__").attr("style",i).attr("rx",O??5).attr("ry",P??5).attr("x",I).attr("y",N).attr("width",S).attr("height",B);const Y="priority"in e&&e.priority;if(Y){const ee=a.append("line"),$=I+2,oe=N+Math.floor((O??0)/2),G=N+B-Math.floor((O??0)/2);ee.attr("x1",$).attr("y1",oe).attr("x2",$).attr("y2",G).attr("stroke-width","4").attr("stroke",fCe(Y))}}return bn(e,U),e.height=B,e.intersect=function(Y){return pn.rect(e,Y)},a}V(JV,"kanbanItem");var dCe=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:IV},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:PV},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:LV},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:OV},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:rV},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:K9},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:EV},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:uV},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:_V},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:vV},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:GV},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:yV},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:sV},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:HV},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:q9},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:kV},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:NV},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:FV},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:lV},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:hV},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:Q9},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:eV},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:tV},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:wV},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:$V},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:cV},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:jV},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:bV},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:nV},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:iV},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:WV},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:qV},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:oV},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:VV},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:aV},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:BV},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:CV},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:SV},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:X9},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:Z9},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:zV},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:UV},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:XV},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:MV},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:AV}],pCe=V(()=>{const e=[...Object.entries({state:DV,choice:Y9,note:TV,rectWithTitle:RV,labelRect:xV,iconSquare:mV,iconCircle:dV,icon:fV,iconRounded:pV,imageSquare:gV,anchor:$9,kanbanItem:JV,classBox:KV}),...dCe.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(i=>[i,t.handler]))];return Object.fromEntries(e)},"generateShapeMap"),ZV=pCe();function mCe(n){return n in ZV}V(mCe,"isValidShape");var BS=new Map;async function QV(n,e,t){let r,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?ZV[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;t.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),r=n.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),i=await s(r,e,t)}else i=await s(n,e,t),r=i;return e.tooltip&&i.attr("title",e.tooltip),BS.set(e.id,r),e.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}V(QV,"insertNode");var B2e=V((n,e)=>{BS.set(e.id,n)},"setNodeElem"),I2e=V(()=>{BS.clear()},"clear"),L2e=V(n=>{const e=BS.get(n.id);yt.trace("Transforming node",n.diff,n,"translate("+(n.x-n.width/2-5)+", "+n.width/2+")");const t=8,r=n.diff||0;return n.clusterNode?e.attr("transform","translate("+(n.x+r-n.width/2)+", "+(n.y-n.height/2-t)+")"):e.attr("transform","translate("+n.x+", "+n.y+")"),r},"positionNode"),qa={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function V0(n,e){if(n===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};n=yi(n),e=yi(e);const[t,r]=[n.x,n.y],[i,s]=[e.x,e.y],o=i-t,a=s-r;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}V(V0,"calculateDeltaAndAngle");var yi=V(n=>Array.isArray(n)?{x:n[0],y:n[1]}:n,"pointTransformer"),gCe=V(n=>({x:V(function(e,t,r){let i=0;const s=yi(r[0]).x<yi(r[r.length-1]).x?"left":"right";if(t===0&&Object.hasOwn(qa,n.arrowTypeStart)){const{angle:m,deltaX:g}=V0(r[0],r[1]);i=qa[n.arrowTypeStart]*Math.cos(m)*(g>=0?1:-1)}else if(t===r.length-1&&Object.hasOwn(qa,n.arrowTypeEnd)){const{angle:m,deltaX:g}=V0(r[r.length-1],r[r.length-2]);i=qa[n.arrowTypeEnd]*Math.cos(m)*(g>=0?1:-1)}const o=Math.abs(yi(e).x-yi(r[r.length-1]).x),a=Math.abs(yi(e).y-yi(r[r.length-1]).y),l=Math.abs(yi(e).x-yi(r[0]).x),c=Math.abs(yi(e).y-yi(r[0]).y),u=qa[n.arrowTypeStart],h=qa[n.arrowTypeEnd],d=1;if(o<h&&o>0&&a<h){let m=h+d-o;m*=s==="right"?-1:1,i-=m}if(l<u&&l>0&&c<u){let m=u+d-l;m*=s==="right"?-1:1,i+=m}return yi(e).x+i},"x"),y:V(function(e,t,r){let i=0;const s=yi(r[0]).y<yi(r[r.length-1]).y?"down":"up";if(t===0&&Object.hasOwn(qa,n.arrowTypeStart)){const{angle:m,deltaY:g}=V0(r[0],r[1]);i=qa[n.arrowTypeStart]*Math.abs(Math.sin(m))*(g>=0?1:-1)}else if(t===r.length-1&&Object.hasOwn(qa,n.arrowTypeEnd)){const{angle:m,deltaY:g}=V0(r[r.length-1],r[r.length-2]);i=qa[n.arrowTypeEnd]*Math.abs(Math.sin(m))*(g>=0?1:-1)}const o=Math.abs(yi(e).y-yi(r[r.length-1]).y),a=Math.abs(yi(e).x-yi(r[r.length-1]).x),l=Math.abs(yi(e).y-yi(r[0]).y),c=Math.abs(yi(e).x-yi(r[0]).x),u=qa[n.arrowTypeStart],h=qa[n.arrowTypeEnd],d=1;if(o<h&&o>0&&a<h){let m=h+d-o;m*=s==="up"?-1:1,i-=m}if(l<u&&l>0&&c<u){let m=u+d-l;m*=s==="up"?-1:1,i+=m}return yi(e).y+i},"y")}),"getLineFunctionsWithOffset"),yCe=V((n,e,t,r,i)=>{e.arrowTypeStart&&B3(n,"start",e.arrowTypeStart,t,r,i),e.arrowTypeEnd&&B3(n,"end",e.arrowTypeEnd,t,r,i)},"addEdgeMarkers"),xCe={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},B3=V((n,e,t,r,i,s)=>{const o=xCe[t];if(!o){yt.warn(`Unknown arrow type: ${t}`);return}const a=e==="start"?"Start":"End";n.attr(`marker-${e}`,`url(${r}#${i}_${s}-${o}${a})`)},"addEdgeMarker"),eA=new Map,Gs=new Map,D2e=V(()=>{eA.clear(),Gs.clear()},"clear"),I0=V(n=>n?n.reduce((t,r)=>t+";"+r,""):"","getLabelStyles"),vCe=V(async(n,e)=>{let t=qs(Fr().flowchart.htmlLabels);const r=await ly(n,e.label,{style:I0(e.labelStyle),useHtmlLabels:t,addSvgBackground:!0,isNode:!1});yt.info("abc82",e,e.labelType);const i=n.insert("g").attr("class","edgeLabel"),s=i.insert("g").attr("class","label");s.node().appendChild(r);let o=r.getBBox();if(t){const l=r.children[0],c=Dr(r);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),eA.set(e.id,i),e.width=o.width,e.height=o.height;let a;if(e.startLabelLeft){const l=await $d(e.startLabelLeft,I0(e.labelStyle)),c=n.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Gs.get(e.id)||Gs.set(e.id,{}),Gs.get(e.id).startLeft=c,W0(a,e.startLabelLeft)}if(e.startLabelRight){const l=await $d(e.startLabelRight,I0(e.labelStyle)),c=n.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=c.node().appendChild(l),u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Gs.get(e.id)||Gs.set(e.id,{}),Gs.get(e.id).startRight=c,W0(a,e.startLabelRight)}if(e.endLabelLeft){const l=await $d(e.endLabelLeft,I0(e.labelStyle)),c=n.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),c.node().appendChild(l),Gs.get(e.id)||Gs.set(e.id,{}),Gs.get(e.id).endLeft=c,W0(a,e.endLabelLeft)}if(e.endLabelRight){const l=await $d(e.endLabelRight,I0(e.labelStyle)),c=n.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),c.node().appendChild(l),Gs.get(e.id)||Gs.set(e.id,{}),Gs.get(e.id).endRight=c,W0(a,e.endLabelRight)}return r},"insertEdgeLabel");function W0(n,e){Fr().flowchart.htmlLabels&&n&&(n.style.width=e.length*9+"px",n.style.height="12px")}V(W0,"setTerminalWidth");var _Ce=V((n,e)=>{yt.debug("Moving label abc88 ",n.id,n.label,eA.get(n.id),e);let t=e.updatedPath?e.updatedPath:e.originalPath;const r=Fr(),{subGraphTitleTotalMargin:i}=gk(r);if(n.label){const s=eA.get(n.id);let o=n.x,a=n.y;if(t){const l=Rc.calcLabelPosition(t);yt.debug("Moving label "+n.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+i/2})`)}if(n.startLabelLeft){const s=Gs.get(n.id).startLeft;let o=n.x,a=n.y;if(t){const l=Rc.calcTerminalLabelPosition(n.arrowTypeStart?10:0,"start_left",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(n.startLabelRight){const s=Gs.get(n.id).startRight;let o=n.x,a=n.y;if(t){const l=Rc.calcTerminalLabelPosition(n.arrowTypeStart?10:0,"start_right",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(n.endLabelLeft){const s=Gs.get(n.id).endLeft;let o=n.x,a=n.y;if(t){const l=Rc.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,"end_left",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(n.endLabelRight){const s=Gs.get(n.id).endRight;let o=n.x,a=n.y;if(t){const l=Rc.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,"end_right",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),wCe=V((n,e)=>{const t=n.x,r=n.y,i=Math.abs(e.x-t),s=Math.abs(e.y-r),o=n.width/2,a=n.height/2;return i>=o||s>=a},"outsideNode"),bCe=V((n,e,t)=>{yt.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(t)}
  node        : x:${n.x} y:${n.y} w:${n.width} h:${n.height}`);const r=n.x,i=n.y,s=Math.abs(r-t.x),o=n.width/2;let a=t.x<e.x?o-s:o+s;const l=n.height/2,c=Math.abs(e.y-t.y),u=Math.abs(e.x-t.x);if(Math.abs(i-e.y)*o>Math.abs(r-e.x)*l){let h=t.y<e.y?e.y-l-i:i-l-e.y;a=u*h/c;const d={x:t.x<e.x?t.x+a:t.x-u+a,y:t.y<e.y?t.y+c-h:t.y-c+h};return a===0&&(d.x=e.x,d.y=e.y),u===0&&(d.x=e.x),c===0&&(d.y=e.y),yt.debug(`abc89 top/bottom calc, Q ${c}, q ${h}, R ${u}, r ${a}`,d),d}else{t.x<e.x?a=e.x-o-r:a=r-o-e.x;let h=c*a/u,d=t.x<e.x?t.x+u-a:t.x-u+a,m=t.y<e.y?t.y+h:t.y-h;return yt.debug(`sides calc abc89, Q ${c}, q ${h}, R ${u}, r ${a}`,{_x:d,_y:m}),a===0&&(d=e.x,m=e.y),u===0&&(d=e.x),c===0&&(m=e.y),{x:d,y:m}}},"intersection"),I3=V((n,e)=>{yt.warn("abc88 cutPathAtIntersect",n,e);let t=[],r=n[0],i=!1;return n.forEach(s=>{if(yt.info("abc88 checking point",s,e),!wCe(e,s)&&!i){const o=bCe(e,r,s);yt.debug("abc88 inside",s,r,o),yt.debug("abc88 intersection",o,e);let a=!1;t.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),t.some(l=>l.x===o.x&&l.y===o.y)?yt.warn("abc88 no intersect",o,t):t.push(o),i=!0}else yt.warn("abc88 outside",s,r),r=s,i||t.push(s)}),yt.debug("returning points",t),t},"cutPathAtIntersect");function eW(n){const e=[],t=[];for(let r=1;r<n.length-1;r++){const i=n[r-1],s=n[r],o=n[r+1];(i.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===o.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),t.push(r))}return{cornerPoints:e,cornerPointPositions:t}}V(eW,"extractCornerPoints");var L3=V(function(n,e,t){const r=e.x-n.x,i=e.y-n.y,s=Math.sqrt(r*r+i*i),o=t/s;return{x:e.x-o*r,y:e.y-o*i}},"findAdjacentPoint"),ACe=V(function(n){const{cornerPointPositions:e}=eW(n),t=[];for(let r=0;r<n.length;r++)if(e.includes(r)){const i=n[r-1],s=n[r+1],o=n[r],a=L3(i,o,5),l=L3(s,o,5),c=l.x-a.x,u=l.y-a.y;t.push(a);const h=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){yt.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const m=5;o.x===a.x?d={x:c<0?a.x-m+h:a.x+m-h,y:u<0?a.y-h:a.y+h}:d={x:c<0?a.x-h:a.x+h,y:u<0?a.y-m+h:a.y+m-h}}else yt.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));t.push(d,l)}else t.push(n[r]);return t},"fixCorners"),SCe=V(function(n,e,t,r,i,s,o){const{handDrawnSeed:a}=Fr();let l=e.points,c=!1;const u=i;var h=s;h.intersect&&u.intersect&&(l=l.slice(1,e.points.length-1),l.unshift(u.intersect(l[0])),yt.debug("Last point APA12",e.start,"-->",e.end,l[l.length-1],h,h.intersect(l[l.length-1])),l.push(h.intersect(l[l.length-1]))),e.toCluster&&(yt.info("to cluster abc88",t.get(e.toCluster)),l=I3(e.points,t.get(e.toCluster).node),c=!0),e.fromCluster&&(yt.debug("from cluster abc88",t.get(e.fromCluster),JSON.stringify(l,null,2)),l=I3(l.reverse(),t.get(e.fromCluster).node).reverse(),c=!0);let d=l.filter(N=>!Number.isNaN(N.y));d=ACe(d);let m=MG;e.curve&&(m=e.curve);const{x:g,y:v}=gCe(e),w=k_e().x(g).y(v).curve(m);let _;switch(e.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-invisible";break;default:_="edge-thickness-normal"}switch(e.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break;default:_+=" edge-pattern-solid"}let A,S=w(d);const R=Array.isArray(e.style)?e.style:[e.style];if(e.look==="handDrawn"){const N=gn.svg(n);Object.assign([],d);const U=N.path(S,{roughness:.3,seed:a});_+=" transition",A=Dr(U).select("path").attr("id",e.id).attr("class"," "+_+(e.classes?" "+e.classes:"")).attr("style",R?R.reduce((P,F)=>P+";"+F,""):"");let O=A.attr("d");A.attr("d",O),n.node().appendChild(A.node())}else A=n.append("path").attr("d",S).attr("id",e.id).attr("class"," "+_+(e.classes?" "+e.classes:"")).attr("style",R?R.reduce((N,U)=>N+";"+U,""):"");let B="";(Fr().flowchart.arrowMarkerAbsolute||Fr().state.arrowMarkerAbsolute)&&(B=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,B=B.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),yt.info("arrowTypeStart",e.arrowTypeStart),yt.info("arrowTypeEnd",e.arrowTypeEnd),yCe(A,e,B,o,r);let I={};return c&&(I.updatedPath=l),I.originalPath=e.points,I},"insertEdge"),CCe=V((n,e,t,r)=>{e.forEach(i=>{DCe[i](n,t,r)})},"insertMarkers"),TCe=V((n,e,t)=>{yt.trace("Making markers for ",t),n.append("defs").append("marker").attr("id",t+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),ECe=V((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),MCe=V((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),RCe=V((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),PCe=V((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),n.append("defs").append("marker").attr("id",t+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),kCe=V((n,e,t)=>{n.append("marker").attr("id",t+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),n.append("marker").attr("id",t+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),BCe=V((n,e,t)=>{n.append("marker").attr("id",t+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),n.append("marker").attr("id",t+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),ICe=V((n,e,t)=>{n.append("marker").attr("id",t+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),n.append("marker").attr("id",t+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),LCe=V((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),DCe={extension:TCe,composition:ECe,aggregation:MCe,dependency:RCe,lollipop:PCe,point:kCe,circle:BCe,cross:ICe,barb:LCe},FCe=CCe,NCe={common:iy,getConfig:rc,insertCluster:KSe,insertEdge:SCe,insertEdgeLabel:vCe,insertMarkers:FCe,insertNode:QV,interpolateToCurve:Ik,labelHelper:Un,log:yt,positionEdgeLabel:_Ce},nv={},tW=V(n=>{for(const e of n)nv[e.name]=e},"registerLayoutLoaders"),OCe=V(()=>{tW([{name:"dagre",loader:V(async()=>await Yr(()=>import("./dagre-4EVJKHTY-CSPBMEDK.js"),__vite__mapDeps([0,1,2,3,4,5])),"loader")}])},"registerDefaultLayoutLoaders");OCe();var F2e=V(async(n,e)=>{if(!(n.layoutAlgorithm in nv))throw new Error(`Unknown layout algorithm: ${n.layoutAlgorithm}`);const t=nv[n.layoutAlgorithm];return(await t.loader()).render(n,e,NCe,{algorithm:t.algorithm})},"render"),N2e=V((n="",{fallback:e="dagre"}={})=>{if(n in nv)return n;if(e in nv)return yt.warn(`Layout algorithm ${n} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${n} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),D3="11.4.1",UCe=V(n=>{var i;const{securityLevel:e}=Fr();let t=Dr("body");if(e==="sandbox"){const o=((i=Dr(`#i${n}`).node())==null?void 0:i.contentDocument)??document;t=Dr(o.body)}return t.select(`#${n}`)},"selectSvgElement"),nW="comm",rW="rule",iW="decl",zCe="@import",HCe="@namespace",jCe="@keyframes",GCe="@layer",sW=Math.abs,Kk=String.fromCharCode;function oW(n){return n.trim()}function ww(n,e,t){return n.replace(e,t)}function VCe(n,e,t){return n.indexOf(e,t)}function cg(n,e){return n.charCodeAt(e)|0}function zg(n,e,t){return n.slice(e,t)}function Tc(n){return n.length}function WCe(n){return n.length}function Y_(n,e){return e.push(n),n}var IS=1,Hg=1,aW=0,ol=0,is=0,hy="";function Jk(n,e,t,r,i,s,o,a){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:IS,column:Hg,length:o,return:"",siblings:a}}function $Ce(){return is}function XCe(){return is=ol>0?cg(hy,--ol):0,Hg--,is===10&&(Hg=1,IS--),is}function Kl(){return is=ol<aW?cg(hy,ol++):0,Hg++,is===10&&(Hg=1,IS++),is}function nf(){return cg(hy,ol)}function bw(){return ol}function LS(n,e){return zg(hy,n,e)}function rv(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qCe(n){return IS=Hg=1,aW=Tc(hy=n),ol=0,[]}function YCe(n){return hy="",n}function TE(n){return oW(LS(ol-1,P2(n===91?n+2:n===40?n+1:n)))}function KCe(n){for(;(is=nf())&&is<33;)Kl();return rv(n)>2||rv(is)>3?"":" "}function JCe(n,e){for(;--e&&Kl()&&!(is<48||is>102||is>57&&is<65||is>70&&is<97););return LS(n,bw()+(e<6&&nf()==32&&Kl()==32))}function P2(n){for(;Kl();)switch(is){case n:return ol;case 34:case 39:n!==34&&n!==39&&P2(is);break;case 40:n===41&&P2(n);break;case 92:Kl();break}return ol}function ZCe(n,e){for(;Kl()&&n+is!==57;)if(n+is===84&&nf()===47)break;return"/*"+LS(e,ol-1)+"*"+Kk(n===47?n:Kl())}function QCe(n){for(;!rv(nf());)Kl();return LS(n,ol)}function eTe(n){return YCe(Aw("",null,null,null,[""],n=qCe(n),0,[0],n))}function Aw(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,m=0,g=0,v=1,w=1,_=1,A=0,S="",R=i,B=s,I=r,N=S;w;)switch(g=A,A=Kl()){case 40:if(g!=108&&cg(N,h-1)==58){VCe(N+=ww(TE(A),"&","&\f"),"&\f",sW(c?a[c-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:N+=TE(A);break;case 9:case 10:case 13:case 32:N+=KCe(g);break;case 92:N+=JCe(bw()-1,7);continue;case 47:switch(nf()){case 42:case 47:Y_(tTe(ZCe(Kl(),bw()),e,t,l),l),(rv(g||1)==5||rv(nf()||1)==5)&&Tc(N)&&zg(N,-1,void 0)!==" "&&(N+=" ");break;default:N+="/"}break;case 123*v:a[c++]=Tc(N)*_;case 125*v:case 59:case 0:switch(A){case 0:case 125:w=0;case 59+u:_==-1&&(N=ww(N,/\f/g,"")),m>0&&(Tc(N)-h||v===0&&g===47)&&Y_(m>32?N3(N+";",r,t,h-1,l):N3(ww(N," ","")+";",r,t,h-2,l),l);break;case 59:N+=";";default:if(Y_(I=F3(N,e,t,c,u,i,a,S,R=[],B=[],h,s),s),A===123)if(u===0)Aw(N,e,I,I,R,s,h,a,B);else{switch(d){case 99:if(cg(N,3)===110)break;case 108:if(cg(N,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Aw(n,I,I,r&&Y_(F3(n,I,I,0,0,i,a,S,i,R=[],h,B),B),i,B,h,a,r?R:B):Aw(N,I,I,I,[""],B,0,a,B)}}c=u=m=0,v=_=1,S=N="",h=o;break;case 58:h=1+Tc(N),m=g;default:if(v<1){if(A==123)--v;else if(A==125&&v++==0&&XCe()==125)continue}switch(N+=Kk(A),A*v){case 38:_=u>0?1:(N+="\f",-1);break;case 44:a[c++]=(Tc(N)-1)*_,_=1;break;case 64:nf()===45&&(N+=TE(Kl())),d=nf(),u=h=Tc(S=N+=QCe(bw())),A++;break;case 45:g===45&&Tc(N)==2&&(v=0)}}return s}function F3(n,e,t,r,i,s,o,a,l,c,u,h){for(var d=i-1,m=i===0?s:[""],g=WCe(m),v=0,w=0,_=0;v<r;++v)for(var A=0,S=zg(n,d+1,d=sW(w=o[v])),R=n;A<g;++A)(R=oW(w>0?m[A]+" "+S:ww(S,/&\f/g,m[A])))&&(l[_++]=R);return Jk(n,e,t,i===0?rW:a,l,c,u,h)}function tTe(n,e,t,r){return Jk(n,e,t,nW,Kk($Ce()),zg(n,2,-2),0,r)}function N3(n,e,t,r,i){return Jk(n,e,t,iW,zg(n,0,r),zg(n,r+1,-1),r,i)}function k2(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function nTe(n,e,t,r){switch(n.type){case GCe:if(n.children.length)break;case zCe:case HCe:case iW:return n.return=n.return||n.value;case nW:return"";case jCe:return n.return=n.value+"{"+k2(n.children,r)+"}";case rW:if(!Tc(n.value=n.props.join(",")))return""}return Tc(t=k2(n.children,r))?n.return=n.value+"{"+t+"}":""}var rTe=jG(Object.keys,Object),iTe=Object.prototype,sTe=iTe.hasOwnProperty;function oTe(n){if(!SS(n))return rTe(n);var e=[];for(var t in Object(n))sTe.call(n,t)&&t!="constructor"&&e.push(t);return e}var B2=Mp(Yc,"DataView"),I2=Mp(Yc,"Promise"),L2=Mp(Yc,"Set"),D2=Mp(Yc,"WeakMap"),O3="[object Map]",aTe="[object Object]",U3="[object Promise]",z3="[object Set]",H3="[object WeakMap]",j3="[object DataView]",lTe=Ep(B2),cTe=Ep(tv),uTe=Ep(I2),hTe=Ep(L2),fTe=Ep(D2),Rd=sy;(B2&&Rd(new B2(new ArrayBuffer(1)))!=j3||tv&&Rd(new tv)!=O3||I2&&Rd(I2.resolve())!=U3||L2&&Rd(new L2)!=z3||D2&&Rd(new D2)!=H3)&&(Rd=function(n){var e=sy(n),t=e==aTe?n.constructor:void 0,r=t?Ep(t):"";if(r)switch(r){case lTe:return j3;case cTe:return O3;case uTe:return U3;case hTe:return z3;case fTe:return H3}return e});var dTe="[object Map]",pTe="[object Set]",mTe=Object.prototype,gTe=mTe.hasOwnProperty;function G3(n){if(n==null)return!0;if(CS(n)&&(Wb(n)||typeof n=="string"||typeof n.splice=="function"||kk(n)||Bk(n)||Vb(n)))return!n.length;var e=Rd(n);if(e==dTe||e==pTe)return!n.size;if(SS(n))return!oTe(n).length;for(var t in n)if(gTe.call(n,t))return!1;return!0}var lW="c4",yTe=V(n=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(n),"detector"),xTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./c4Diagram-6F5ED5ID-DGv58o6n.js");return{diagram:e}},__vite__mapDeps([6,7]));return{id:lW,diagram:n}},"loader"),vTe={id:lW,detector:yTe,loader:xTe},_Te=vTe,cW="flowchart",wTe=V((n,e)=>{var t,r;return((t=e==null?void 0:e.flowchart)==null?void 0:t.defaultRenderer)==="dagre-wrapper"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(n)},"detector"),bTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./flowDiagram-7ASYPVHJ-C_20zU8L.js");return{diagram:e}},__vite__mapDeps([8,9,10]));return{id:cW,diagram:n}},"loader"),ATe={id:cW,detector:wTe,loader:bTe},STe=ATe,uW="flowchart-v2",CTe=V((n,e)=>{var t,r,i;return((t=e==null?void 0:e.flowchart)==null?void 0:t.defaultRenderer)==="dagre-d3"?!1:(((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"&&(e.layout="elk"),/^\s*graph/.test(n)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(n))},"detector"),TTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./flowDiagram-7ASYPVHJ-C_20zU8L.js");return{diagram:e}},__vite__mapDeps([8,9,10]));return{id:uW,diagram:n}},"loader"),ETe={id:uW,detector:CTe,loader:TTe},MTe=ETe,hW="er",RTe=V(n=>/^\s*erDiagram/.test(n),"detector"),PTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./erDiagram-6RL3IURR-CJxvveQe.js");return{diagram:e}},__vite__mapDeps([11,1,2,3,4]));return{id:hW,diagram:n}},"loader"),kTe={id:hW,detector:RTe,loader:PTe},BTe=kTe,fW="gitGraph",ITe=V(n=>/^\s*gitGraph/.test(n),"detector"),LTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./gitGraphDiagram-NRZ2UAAF-CZJsnLvG.js");return{diagram:e}},__vite__mapDeps([12,13,14,15,2,4,5]));return{id:fW,diagram:n}},"loader"),DTe={id:fW,detector:ITe,loader:LTe},FTe=DTe,dW="gantt",NTe=V(n=>/^\s*gantt/.test(n),"detector"),OTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./ganttDiagram-NTVNEXSI-BVb2h2NF.js");return{diagram:e}},__vite__mapDeps([16,17,18]));return{id:dW,diagram:n}},"loader"),UTe={id:dW,detector:NTe,loader:OTe},zTe=UTe,pW="info",HTe=V(n=>/^\s*info/.test(n),"detector"),jTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./infoDiagram-A4XQUW5V-Ca7JD2wq.js");return{diagram:e}},__vite__mapDeps([19,15,2,4,5]));return{id:pW,diagram:n}},"loader"),GTe={id:pW,detector:HTe,loader:jTe},mW="pie",VTe=V(n=>/^\s*pie/.test(n),"detector"),WTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./pieDiagram-YF2LJOPJ-BjJEtYik.js");return{diagram:e}},__vite__mapDeps([20,13,15,2,4,5,21,22,18]));return{id:mW,diagram:n}},"loader"),$Te={id:mW,detector:VTe,loader:WTe},gW="quadrantChart",XTe=V(n=>/^\s*quadrantChart/.test(n),"detector"),qTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./quadrantDiagram-OS5C2QUG-DVEVKOSw.js");return{diagram:e}},__vite__mapDeps([23,17,18]));return{id:gW,diagram:n}},"loader"),YTe={id:gW,detector:XTe,loader:qTe},KTe=YTe,yW="xychart",JTe=V(n=>/^\s*xychart-beta/.test(n),"detector"),ZTe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./xychartDiagram-6QU3TZC5-CXCWbYpg.js");return{diagram:e}},__vite__mapDeps([24,18,22,17]));return{id:yW,diagram:n}},"loader"),QTe={id:yW,detector:JTe,loader:ZTe},eEe=QTe,xW="requirement",tEe=V(n=>/^\s*requirement(Diagram)?/.test(n),"detector"),nEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./requirementDiagram-MIRIMTAZ-BbzqVhpf.js");return{diagram:e}},__vite__mapDeps([25,1,2,3,4]));return{id:xW,diagram:n}},"loader"),rEe={id:xW,detector:tEe,loader:nEe},iEe=rEe,vW="sequence",sEe=V(n=>/^\s*sequenceDiagram/.test(n),"detector"),oEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./sequenceDiagram-G6AWOVSC-B7BketID.js");return{diagram:e}},__vite__mapDeps([26,7,14]));return{id:vW,diagram:n}},"loader"),aEe={id:vW,detector:sEe,loader:oEe},lEe=aEe,_W="class",cEe=V((n,e)=>{var t;return((t=e==null?void 0:e.class)==null?void 0:t.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(n)},"detector"),uEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./classDiagram-LNE6IOMH-DMgXiBPJ.js");return{diagram:e}},__vite__mapDeps([27,28,9]));return{id:_W,diagram:n}},"loader"),hEe={id:_W,detector:cEe,loader:uEe},fEe=hEe,wW="classDiagram",dEe=V((n,e)=>{var t;return/^\s*classDiagram/.test(n)&&((t=e==null?void 0:e.class)==null?void 0:t.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(n)},"detector"),pEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./classDiagram-v2-MQ7JQ4JX-DMgXiBPJ.js");return{diagram:e}},__vite__mapDeps([29,28,9]));return{id:wW,diagram:n}},"loader"),mEe={id:wW,detector:dEe,loader:pEe},gEe=mEe,bW="state",yEe=V((n,e)=>{var t;return((t=e==null?void 0:e.state)==null?void 0:t.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(n)},"detector"),xEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./stateDiagram-MAYHULR4-DOLzneMU.js");return{diagram:e}},__vite__mapDeps([30,31,9,1,2,3,4]));return{id:bW,diagram:n}},"loader"),vEe={id:bW,detector:yEe,loader:xEe},_Ee=vEe,AW="stateDiagram",wEe=V((n,e)=>{var t;return!!(/^\s*stateDiagram-v2/.test(n)||/^\s*stateDiagram/.test(n)&&((t=e==null?void 0:e.state)==null?void 0:t.defaultRenderer)==="dagre-wrapper")},"detector"),bEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./stateDiagram-v2-4JROLMXI-C7Y3iR-A.js");return{diagram:e}},__vite__mapDeps([32,31,9]));return{id:AW,diagram:n}},"loader"),AEe={id:AW,detector:wEe,loader:bEe},SEe=AEe,SW="journey",CEe=V(n=>/^\s*journey/.test(n),"detector"),TEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./journeyDiagram-G5WM74LC-BtKQ3QGu.js");return{diagram:e}},__vite__mapDeps([33,7,21]));return{id:SW,diagram:n}},"loader"),EEe={id:SW,detector:CEe,loader:TEe},MEe=EEe,REe=V((n,e,t)=>{yt.debug(`rendering svg for syntax error
`);const r=UCe(e),i=r.append("g");r.attr("viewBox","0 0 2412 512"),h8(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${t}`)},"draw"),CW={draw:REe},PEe=CW,kEe={db:{},renderer:CW,parser:{parse:V(()=>{},"parse")}},BEe=kEe,TW="flowchart-elk",IEe=V((n,e={})=>{var t;return/^\s*flowchart-elk/.test(n)||/^\s*flowchart|graph/.test(n)&&((t=e==null?void 0:e.flowchart)==null?void 0:t.defaultRenderer)==="elk"?(e.layout="elk",!0):!1},"detector"),LEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./flowDiagram-7ASYPVHJ-C_20zU8L.js");return{diagram:e}},__vite__mapDeps([8,9,10]));return{id:TW,diagram:n}},"loader"),DEe={id:TW,detector:IEe,loader:LEe},FEe=DEe,EW="timeline",NEe=V(n=>/^\s*timeline/.test(n),"detector"),OEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./timeline-definition-U7ZMHBDA-ChUO_e3R.js");return{diagram:e}},__vite__mapDeps([34,21]));return{id:EW,diagram:n}},"loader"),UEe={id:EW,detector:NEe,loader:OEe},zEe=UEe,MW="mindmap",HEe=V(n=>/^\s*mindmap/.test(n),"detector"),jEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./mindmap-definition-GWI6TPTV-C6dDsane.js");return{diagram:e}},__vite__mapDeps([35,36]));return{id:MW,diagram:n}},"loader"),GEe={id:MW,detector:HEe,loader:jEe},VEe=GEe,RW="kanban",WEe=V(n=>/^\s*kanban/.test(n),"detector"),$Ee=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./kanban-definition-QRCXZQQD-B7_xfPH8.js");return{diagram:e}},[]);return{id:RW,diagram:n}},"loader"),XEe={id:RW,detector:WEe,loader:$Ee},qEe=XEe,PW="sankey",YEe=V(n=>/^\s*sankey-beta/.test(n),"detector"),KEe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./sankeyDiagram-Y46BX6SQ-CNVuVJvz.js");return{diagram:e}},__vite__mapDeps([37,22,18]));return{id:PW,diagram:n}},"loader"),JEe={id:PW,detector:YEe,loader:KEe},ZEe=JEe,kW="packet",QEe=V(n=>/^\s*packet-beta/.test(n),"detector"),eMe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./diagram-QW4FP2JN-BJTux46e.js");return{diagram:e}},__vite__mapDeps([38,13,15,2,4,5]));return{id:kW,diagram:n}},"loader"),tMe={id:kW,detector:QEe,loader:eMe},BW="block",nMe=V(n=>/^\s*block-beta/.test(n),"detector"),rMe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./blockDiagram-ZHA2E4KO-0uo0sgJ7.js");return{diagram:e}},__vite__mapDeps([39,5,2,1,10]));return{id:BW,diagram:n}},"loader"),iMe={id:BW,detector:nMe,loader:rMe},sMe=iMe,IW="architecture",oMe=V(n=>/^\s*architecture/.test(n),"detector"),aMe=V(async()=>{const{diagram:n}=await Yr(async()=>{const{diagram:e}=await import("./architectureDiagram-UYN6MBPD-B2EBJXYm.js");return{diagram:e}},__vite__mapDeps([40,13,14,15,2,4,5,36]));return{id:IW,diagram:n}},"loader"),lMe={id:IW,detector:oMe,loader:aMe},cMe=lMe,V3=!1,DS=V(()=>{V3||(V3=!0,Cb("error",BEe,n=>n.toLowerCase().trim()==="error"),Cb("---",{db:{clear:V(()=>{},"clear")},styles:{},renderer:{draw:V(()=>{},"draw")},parser:{parse:V(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:V(()=>null,"init")},n=>n.toLowerCase().trimStart().startsWith("---")),ZH(_Te,qEe,gEe,fEe,BTe,zTe,GTe,$Te,iEe,lEe,FEe,MTe,STe,VEe,zEe,FTe,SEe,_Ee,MEe,KTe,ZEe,tMe,eEe,sMe,cMe))},"addDiagrams"),uMe=V(async()=>{yt.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(kg).map(async([t,{detector:r,loader:i}])=>{if(i)try{qM(t)}catch{try{const{diagram:s,id:o}=await i();Cb(o,s,r)}catch(s){throw yt.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete kg[t],s}}}))).filter(t=>t.status==="rejected");if(e.length>0){yt.error(`Failed to load ${e.length} external diagrams`);for(const t of e)yt.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),hMe="graphics-document document";function LW(n,e){n.attr("role",hMe),e!==""&&n.attr("aria-roledescription",e)}V(LW,"setA11yDiagramInfo");function DW(n,e,t,r){if(n.insert!==void 0){if(t){const i=`chart-desc-${r}`;n.attr("aria-describedby",i),n.insert("desc",":first-child").attr("id",i).text(t)}if(e){const i=`chart-title-${r}`;n.attr("aria-labelledby",i),n.insert("title",":first-child").attr("id",i).text(e)}}}V(DW,"addSVGa11yTitleDescription");var np,F2=(np=class{constructor(e,t,r,i,s){this.type=e,this.text=t,this.db=r,this.parser=i,this.renderer=s}static async fromText(e,t={}){var c,u;const r=rc(),i=rk(e,r);e=HAe(e)+`
`;try{qM(i)}catch{const h=Oge(i);if(!h)throw new JH(`Diagram ${i} not found.`);const{id:d,diagram:m}=await h();Cb(d,m)}const{db:s,parser:o,renderer:a,init:l}=qM(i);return o.parser&&(o.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(r),t.title&&((u=s.setDiagramTitle)==null||u.call(s,t.title)),await o.parse(e),new np(i,e,s,o,a)}async render(e,t){await this.renderer.draw(this.text,e,t,this)}getParser(){return this.parser}getType(){return this.type}},V(np,"Diagram"),np),W3=[],fMe=V(()=>{W3.forEach(n=>{n()}),W3=[]},"attachFunctions"),dMe=V(n=>n.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function FW(n){const e=n.match(KH);if(!e)return{text:n,metadata:{}};let t=N0e(e[1],{schema:F0e})??{};t=typeof t=="object"&&!Array.isArray(t)?t:{};const r={};return t.displayMode&&(r.displayMode=t.displayMode.toString()),t.title&&(r.title=t.title.toString()),t.config&&(r.config=t.config),{text:n.slice(e[0].length),metadata:r}}V(FW,"extractFrontMatter");var pMe=V(n=>n.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,t,r)=>"<"+t+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),mMe=V(n=>{const{text:e,metadata:t}=FW(n),{displayMode:r,title:i,config:s={}}=t;return r&&(s.gantt||(s.gantt={}),s.gantt.displayMode=r),{title:i,config:s,text:e}},"processFrontmatter"),gMe=V(n=>{const e=Rc.detectInit(n)??{},t=Rc.detectDirective(n,"wrap");return Array.isArray(t)?e.wrap=t.some(({type:r})=>r==="wrap"):(t==null?void 0:t.type)==="wrap"&&(e.wrap=!0),{text:MAe(n),directive:e}},"processDirectives");function Zk(n){const e=pMe(n),t=mMe(e),r=gMe(t.text),i=Ok(t.config,r.directive);return n=dMe(r.text),{code:n,title:t.title,config:i}}V(Zk,"preprocessDiagram");function NW(n){const e=new TextEncoder().encode(n),t=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(t)}V(NW,"toBase64");var yMe=5e4,xMe="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",vMe="sandbox",_Me="loose",wMe="http://www.w3.org/2000/svg",bMe="http://www.w3.org/1999/xlink",AMe="http://www.w3.org/1999/xhtml",SMe="100%",CMe="100%",TMe="border:0;margin:0;",EMe="margin:0",MMe="allow-top-navigation-by-user-activation allow-popups",RMe='The "iframe" tag is not supported by your browser.',PMe=["foreignobject"],kMe=["dominant-baseline"];function Qk(n){const e=Zk(n);return Ab(),eye(e.config??{}),e}V(Qk,"processAndSetConfigs");async function OW(n,e){DS();try{const{code:t,config:r}=Qk(n);return{diagramType:(await zW(t)).type,config:r}}catch(t){if(e!=null&&e.suppressErrors)return!1;throw t}}V(OW,"parse");var $3=V((n,e,t=[])=>`
.${n} ${e} { ${t.join(" !important; ")} !important; }`,"cssImportantStyles"),BMe=V((n,e=new Map)=>{var r;let t="";if(n.themeCSS!==void 0&&(t+=`
${n.themeCSS}`),n.fontFamily!==void 0&&(t+=`
:root { --mermaid-font-family: ${n.fontFamily}}`),n.altFontFamily!==void 0&&(t+=`
:root { --mermaid-alt-font-family: ${n.altFontFamily}}`),e instanceof Map){const a=n.htmlLabels??((r=n.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(l=>{G3(l.styles)||a.forEach(c=>{t+=$3(l.id,c,l.styles)}),G3(l.textStyles)||(t+=$3(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return t},"createCssStyles"),IMe=V((n,e,t,r)=>{const i=BMe(n,t),s=vye(e,i,n.themeVariables);return k2(eTe(`${r}{${s}}`),nTe)},"createUserStyles"),LMe=V((n="",e,t)=>{let r=n;return!t&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=ay(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),DMe=V((n="",e)=>{var i,s;const t=(s=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&s.height?e.viewBox.baseVal.height+"px":CMe,r=NW(`<body style="${EMe}">${n}</body>`);return`<iframe style="width:${SMe};height:${t};${TMe}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${MMe}">
  ${RMe}
</iframe>`},"putIntoIFrame"),X3=V((n,e,t,r,i)=>{const s=n.append("div");s.attr("id",t),r&&s.attr("style",r);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",wMe);return i&&o.attr("xmlns:xlink",i),o.append("g"),n},"appendDivSvgG");function N2(n,e){return n.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}V(N2,"sandboxedIframe");var FMe=V((n,e,t,r)=>{var i,s,o;(i=n.getElementById(e))==null||i.remove(),(s=n.getElementById(t))==null||s.remove(),(o=n.getElementById(r))==null||o.remove()},"removeExistingElements"),NMe=V(async function(n,e,t){var K,Q,Y,ee,$,oe;DS();const r=Qk(e);e=r.code;const i=rc();yt.debug(i),e.length>((i==null?void 0:i.maxTextSize)??yMe)&&(e=xMe);const s="#"+n,o="i"+n,a="#"+o,l="d"+n,c="#"+l,u=V(()=>{const te=Dr(d?a:c).node();te&&"remove"in te&&te.remove()},"removeTempElements");let h=Dr("body");const d=i.securityLevel===vMe,m=i.securityLevel===_Me,g=i.fontFamily;if(t!==void 0){if(t&&(t.innerHTML=""),d){const G=N2(Dr(t),o);h=Dr(G.nodes()[0].contentDocument.body),h.node().style.margin=0}else h=Dr(t);X3(h,n,l,`font-family: ${g}`,bMe)}else{if(FMe(document,n,l,o),d){const G=N2(Dr("body"),o);h=Dr(G.nodes()[0].contentDocument.body),h.node().style.margin=0}else h=Dr("body");X3(h,n,l)}let v,w;try{v=await F2.fromText(e,{title:r.title})}catch(G){if(i.suppressErrorRendering)throw u(),G;v=await F2.fromText("error"),w=G}const _=h.select(c).node(),A=v.type,S=_.firstChild,R=S.firstChild,B=(Q=(K=v.renderer).getClasses)==null?void 0:Q.call(K,e,v),I=IMe(i,A,B,s),N=document.createElement("style");N.innerHTML=I,S.insertBefore(N,R);try{await v.renderer.draw(e,n,D3,v)}catch(G){throw i.suppressErrorRendering?u():PEe.draw(e,n,D3),G}const U=h.select(`${c} svg`),O=(ee=(Y=v.db).getAccTitle)==null?void 0:ee.call(Y),P=(oe=($=v.db).getAccDescription)==null?void 0:oe.call($);HW(A,U,O,P),h.select(`[id="${n}"]`).selectAll("foreignobject > *").attr("xmlns",AMe);let F=h.select(c).node().innerHTML;if(yt.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),F=LMe(F,d,qs(i.arrowMarkerAbsolute)),d){const G=h.select(c+" svg").node();F=DMe(F,G)}else m||(F=Pg.sanitize(F,{ADD_TAGS:PMe,ADD_ATTR:kMe,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(fMe(),w)throw w;return u(),{diagramType:A,svg:F,bindFunctions:v.db.bindFunctions}},"render");function UW(n={}){var r;const e=$s({},n);e!=null&&e.fontFamily&&!((r=e.themeVariables)!=null&&r.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),Zge(e),e!=null&&e.theme&&e.theme in ju?e.themeVariables=ju[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=ju.default.getThemeVariables(e.themeVariables));const t=typeof e=="object"?Jge(e):i8();nk(t.logLevel),DS()}V(UW,"initialize");var zW=V((n,e={})=>{const{code:t}=Zk(n);return F2.fromText(t,e)},"getDiagramFromText");function HW(n,e,t,r){LW(e,n),DW(e,t,r,e.attr("id"))}V(HW,"addA11yInfo");var wp=Object.freeze({render:NMe,parse:OW,getDiagramFromText:zW,initialize:UW,getConfig:rc,setConfig:s8,getSiteConfig:i8,updateSiteConfig:Qge,reset:V(()=>{Ab()},"reset"),globalReset:V(()=>{Ab(Bg)},"globalReset"),defaultConfig:Bg});nk(rc().logLevel);Ab(rc());var OMe=V((n,e,t)=>{yt.warn(n),Nk(n)?(t&&t(n.str,n.hash),e.push({...n,message:n.str,error:n})):(t&&t(n),n instanceof Error&&e.push({str:n.message,message:n.message,hash:n.name,error:n}))},"handleError"),jW=V(async function(n={querySelector:".mermaid"}){try{await UMe(n)}catch(e){if(Nk(e)&&yt.error(e.str),Sa.parseError&&Sa.parseError(e),!n.suppressErrors)throw yt.error("Use the suppressErrors option to suppress these errors"),e}},"run"),UMe=V(async function({postRenderCallback:n,querySelector:e,nodes:t}={querySelector:".mermaid"}){const r=wp.getConfig();yt.debug(`${n?"":"No "}Callback function found`);let i;if(t)i=t;else if(e)i=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");yt.debug(`Found ${i.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(yt.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),wp.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const s=new Rc.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const a=[];for(const l of Array.from(i)){if(yt.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=v9(Rc.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Rc.detectInit(o);u&&yt.debug("Detected early reinit: ",u);try{const{svg:h,bindFunctions:d}=await $W(c,o,l);l.innerHTML=h,n&&await n(c),d&&d(l)}catch(h){OMe(h,a,Sa.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),GW=V(function(n){wp.initialize(n)},"initialize"),zMe=V(async function(n,e,t){yt.warn("mermaid.init is deprecated. Please use run instead."),n&&GW(n);const r={postRenderCallback:t,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await jW(r)},"init"),HMe=V(async(n,{lazyLoad:e=!0}={})=>{DS(),ZH(...n),e===!1&&await uMe()},"registerExternalDiagrams"),VW=V(function(){if(Sa.startOnLoad){const{startOnLoad:n}=wp.getConfig();n&&Sa.run().catch(e=>yt.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",VW,!1);var jMe=V(function(n){Sa.parseError=n},"setParseErrorHandler"),tA=[],EE=!1,WW=V(async()=>{if(!EE){for(EE=!0;tA.length>0;){const n=tA.shift();if(n)try{await n()}catch(e){yt.error("Error executing queue",e)}}EE=!1}},"executeQueue"),GMe=V(async(n,e)=>new Promise((t,r)=>{const i=V(()=>new Promise((s,o)=>{wp.parse(n,e).then(a=>{s(a),t(a)},a=>{var l;yt.error("Error parsing",a),(l=Sa.parseError)==null||l.call(Sa,a),o(a),r(a)})}),"performCall");tA.push(i),WW().catch(r)}),"parse"),$W=V((n,e,t)=>new Promise((r,i)=>{const s=V(()=>new Promise((o,a)=>{wp.render(n,e,t).then(l=>{o(l),r(l)},l=>{var c;yt.error("Error parsing",l),(c=Sa.parseError)==null||c.call(Sa,l),a(l),i(l)})}),"performCall");tA.push(s),WW().catch(i)}),"render"),Sa={startOnLoad:!0,mermaidAPI:wp,parse:GMe,render:$W,init:zMe,run:jW,registerExternalDiagrams:HMe,registerLayoutLoaders:tW,initialize:GW,parseError:void 0,contentLoaded:VW,setParseErrorHandler:jMe,detectType:rk,registerIconPacks:sxe},XW=Sa;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */XW.initialize({theme:"default",themeVariables:{primaryColor:"#3498db",primaryTextColor:"#fff",primaryBorderColor:"#2980b9",lineColor:"#2c3e50",secondaryColor:"#16a085",tertiaryColor:"#f1c40f"},flowchart:{htmlLabels:!0,curve:"basis"}});const VMe=()=>{const[n,e]=L.useState(""),[t,r]=L.useState("Beginner"),[i,s]=L.useState("grammar"),[o,a]=L.useState("self-paced"),[l,c]=L.useState(""),[u,h]=L.useState("3-months"),[d,m]=L.useState(""),[g,v]=L.useState(!1),[w,_]=L.useState(""),[A,S]=L.useState(""),[R,B]=L.useState(""),[I,N]=L.useState(""),[U,O]=L.useState("balanced"),[P,F]=L.useState(!1),K=async()=>{v(!0);try{await new Promise(ye=>setTimeout(ye,1e3));const ce=Q({language:n||"Target Language",level:t||"Beginner",focus:i||"comprehensive",method:o||"flexible",learningGoal:l||"general proficiency",timeframe:u||"flexible",additionalInfo:A||"",previousExperience:R||"none",weeklyHours:I||"5-10",learningStyle:U||"balanced"});m(ce.mermaidCode),_(ce.recommendation)}catch(ne){console.error("Error generating AI roadmap:",ne),_("Failed to generate roadmap. Please try again later."),m("")}finally{v(!1)}},Q=ne=>{let ce=`graph TD
`,ye=0;const he=()=>(ye++,`N${ye}`),Ce=he();ce+=`${Ce}[Start Learning ${ne.language}] --> `;const ke=he();ce+=`${ke}[Initial ${ne.level} Assessment]
`;const Ue=[];if(ne.level==="Beginner"){const le=he(),vt=he();Ue.push(le,vt),ce+=`${ke} --> ${le}[Learn Alphabet & Pronunciation]
`,ce+=`${le} --> ${vt}[Master 100 Essential Phrases]
`}else if(ne.level==="Intermediate"){const le=he(),vt=he();Ue.push(le,vt),ce+=`${ke} --> ${le}[Review Fundamentals]
`,ce+=`${le} --> ${vt}[Address Skill Gaps]
`}else{const le=he(),vt=he();Ue.push(le,vt),ce+=`${ke} --> ${le}[Detailed Proficiency Assessment]
`,ce+=`${le} --> ${vt}[Identify Specialized Focus Areas]
`}const Qe=Ue[Ue.length-1],Te=[];if(ne.focus==="grammar"){const le=Y(ne,he,Qe);ce+=le.roadmapSection,Te.push(...le.endNodes)}else if(ne.focus==="vocabulary"){const le=ee(ne,he,Qe);ce+=le.roadmapSection,Te.push(...le.endNodes)}else if(ne.focus==="speaking"){const le=$(ne,he,Qe);ce+=le.roadmapSection,Te.push(...le.endNodes)}else if(ne.focus==="listening"){const le=oe(ne,he,Qe);ce+=le.roadmapSection,Te.push(...le.endNodes)}else if(ne.focus==="writing"){const le=G(ne,he,Qe);ce+=le.roadmapSection,Te.push(...le.endNodes)}else{const le=te(ne,he,Qe);ce+=le.roadmapSection,Te.push(...le.endNodes)}const $e=re(ne,he,Te[0]);ce+=$e.roadmapSection;const Ee=he();ce+=`${$e.lastNode} --> ${Ee}[${ne.learningGoal}]
`,ce+=`class ${Ce},${Ee} goalNode;
`,ce+=`class ${ke} assessmentNode;
`;const Oe=Z(ne);return{mermaidCode:ce,recommendation:Oe}},Y=(ne,ce,ye)=>{let he="";const Ce=[],ke=ce();if(he+=`${ye} --> ${ke}[Master ${ne.level} Grammar]
`,ne.level==="Beginner"){const Te=[ce(),ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Basic Sentence Structure]
`,he+=`${Te[0]} --> ${Te[1]}[Present Tense Verbs]
`,he+=`${Te[1]} --> ${Te[2]}[Question Formation]
`,he+=`${Te[2]} --> ${Te[3]}[Simple Past Tense]
`,Ce.push(Te[3])}else if(ne.level==="Intermediate"){const Te=[ce(),ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Complex Sentence Structures]
`,he+=`${Te[0]} --> ${Te[1]}[All Tense Mastery]
`,he+=`${Te[1]} --> ${Te[2]}[Conditional Statements]
`,he+=`${Te[2]} --> ${Te[3]}[Passive Voice Construction]
`,Ce.push(Te[3])}else{const Te=[ce(),ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Advanced Clause Structures]
`,he+=`${Te[0]} --> ${Te[1]}[Subjunctive Mood]
`,he+=`${Te[1]} --> ${Te[2]}[Complex Conditional Forms]
`,he+=`${Te[2]} --> ${Te[3]}[Stylistic Variations]
`,Ce.push(Te[3])}const Ue=ce(),Qe=Ce[Ce.length-1];if(he+=`${Qe} --> ${Ue}[Grammar Application Practice]
`,ne.method==="self-paced"){const Te=ce();he+=`${Ue} --> ${Te}[Self-correction Exercises]
`,Ce.push(Te)}else if(ne.method==="tutor-led"){const Te=ce();he+=`${Ue} --> ${Te}[Tutor-guided Grammar Drills]
`,Ce.push(Te)}else if(ne.method==="immersive"){const Te=ce();he+=`${Ue} --> ${Te}[Contextual Grammar in Conversations]
`,Ce.push(Te)}else Ce.push(Ue);return{roadmapSection:he,endNodes:Ce}},ee=(ne,ce,ye)=>{let he="";const Ce=[],ke=ce();if(he+=`${ye} --> ${ke}[Build ${ne.level} Vocabulary]
`,ne.level==="Beginner"){const Ee=[ce(),ce(),ce()];he+=`${ke} --> ${Ee[0]}[First 500 Most Common Words]
`,he+=`${Ee[0]} --> ${Ee[1]}[Basic Expressions & Phrases]
`,he+=`${Ee[1]} --> ${Ee[2]}[Essential Topic Vocabulary]
`,Ce.push(Ee[2])}else if(ne.level==="Intermediate"){const Ee=[ce(),ce(),ce()];he+=`${ke} --> ${Ee[0]}[2000-3000 Common Words]
`,he+=`${Ee[0]} --> ${Ee[1]}[Idiomatic Expressions]
`,he+=`${Ee[1]} --> ${Ee[2]}[Domain-Specific Vocabulary]
`,Ce.push(Ee[2])}else{const Ee=[ce(),ce(),ce()];he+=`${ke} --> ${Ee[0]}[5000+ Advanced Vocabulary]
`,he+=`${Ee[0]} --> ${Ee[1]}[Nuanced Synonyms & Collocations]
`,he+=`${Ee[1]} --> ${Ee[2]}[Cultural & Literary References]
`,Ce.push(Ee[2])}const Ue=ce(),Qe=Ce[Ce.length-1];he+=`${Qe} --> ${Ue}[Vocabulary Application]
`;const Te=ce();let $e="";return ne.weeklyHours==="1-5"?$e="Learn 25-50 New Words Weekly":ne.weeklyHours==="5-10"?$e="Learn 50-100 New Words Weekly":ne.weeklyHours==="10+"?$e="Learn 100-150 New Words Weekly":$e="Consistent Vocabulary Expansion",he+=`${Ue} --> ${Te}[${$e}]
`,Ce.push(Te),{roadmapSection:he,endNodes:Ce}},$=(ne,ce,ye)=>{let he="";const Ce=[],ke=ce();if(he+=`${ye} --> ${ke}[Develop ${ne.level} Speaking Skills]
`,ne.level==="Beginner"){const Te=[ce(),ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Pronunciation Fundamentals]
`,he+=`${Te[0]} --> ${Te[1]}[Basic Conversation Scripts]
`,he+=`${Te[1]} --> ${Te[2]}[Simple Dialog Practice]
`,he+=`${Te[2]} --> ${Te[3]}[Guided Role Playing]
`,Ce.push(Te[3])}else if(ne.level==="Intermediate"){const Te=[ce(),ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Fluency Building Exercises]
`,he+=`${Te[0]} --> ${Te[1]}[Impromptu Speaking Practice]
`,he+=`${Te[1]} --> ${Te[2]}[Conversation Strategy Training]
`,he+=`${Te[2]} --> ${Te[3]}[Group Discussion Skills]
`,Ce.push(Te[3])}else{const Te=[ce(),ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Advanced Pronunciation Refinement]
`,he+=`${Te[0]} --> ${Te[1]}[Public Speaking in Target Language]
`,he+=`${Te[1]} --> ${Te[2]}[Debate & Persuasive Speech]
`,he+=`${Te[2]} --> ${Te[3]}[Cultural Speaking Nuances]
`,Ce.push(Te[3])}const Ue=ce(),Qe=Ce[Ce.length-1];return ne.method==="self-paced"?he+=`${Qe} --> ${Ue}[Find Language Exchange Partners]
`:ne.method==="tutor-led"?he+=`${Qe} --> ${Ue}[Structured Speaking Sessions with Tutor]
`:ne.method==="immersive"?he+=`${Qe} --> ${Ue}[Daily Speaking with Native Speakers]
`:he+=`${Qe} --> ${Ue}[Regular Speaking Practice]
`,Ce.push(Ue),{roadmapSection:he,endNodes:Ce}},oe=(ne,ce,ye)=>{let he="";const Ce=[],ke=ce();if(he+=`${ye} --> ${ke}[Enhance ${ne.level} Listening Comprehension]
`,ne.level==="Beginner"){const $e=[ce(),ce(),ce()];he+=`${ke} --> ${$e[0]}[Slow & Clear Audio Content]
`,he+=`${$e[0]} --> ${$e[1]}[Structured Listening Exercises]
`,he+=`${$e[1]} --> ${$e[2]}[Simple Content with Transcripts]
`,Ce.push($e[2])}else if(ne.level==="Intermediate"){const $e=[ce(),ce(),ce()];he+=`${ke} --> ${$e[0]}[Authentic Media at Moderate Speed]
`,he+=`${$e[0]} --> ${$e[1]}[Podcasts & Shows with Subtitles]
`,he+=`${$e[1]} --> ${$e[2]}[Active Note-Taking During Listening]
`,Ce.push($e[2])}else{const $e=[ce(),ce(),ce()];he+=`${ke} --> ${$e[0]}[Native-Speed Content without Aids]
`,he+=`${$e[0]} --> ${$e[1]}[Various Accents & Dialects]
`,he+=`${$e[1]} --> ${$e[2]}[Complex Content Comprehension]
`,Ce.push($e[2])}const Ue=ce(),Qe=Ce[Ce.length-1];let Te="";return ne.weeklyHours==="1-5"?Te="15 Minutes Daily Listening":ne.weeklyHours==="5-10"?Te="30 Minutes Daily Listening":ne.weeklyHours==="10+"?Te="60+ Minutes Daily Listening":Te="Consistent Listening Practice",he+=`${Qe} --> ${Ue}[${Te}]
`,Ce.push(Ue),{roadmapSection:he,endNodes:Ce}},G=(ne,ce,ye)=>{let he="";const Ce=[],ke=ce();if(he+=`${ye} --> ${ke}[Build ${ne.level} Writing Skills]
`,ne.level==="Beginner"){const Te=[ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Basic Sentence Construction]
`,he+=`${Te[0]} --> ${Te[1]}[Simple Forms & Messages]
`,he+=`${Te[1]} --> ${Te[2]}[Guided Short Paragraphs]
`,Ce.push(Te[2])}else if(ne.level==="Intermediate"){const Te=[ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Paragraph Development]
`,he+=`${Te[0]} --> ${Te[1]}[Short Essays & Letters]
`,he+=`${Te[1]} --> ${Te[2]}[Descriptive & Narrative Writing]
`,Ce.push(Te[2])}else{const Te=[ce(),ce(),ce()];he+=`${ke} --> ${Te[0]}[Complex Composition Skills]
`,he+=`${Te[0]} --> ${Te[1]}[Persuasive & Analytical Writing]
`,he+=`${Te[1]} --> ${Te[2]}[Professional/Academic Writing]
`,Ce.push(Te[2])}const Ue=ce(),Qe=Ce[Ce.length-1];return ne.method==="self-paced"?he+=`${Qe} --> ${Ue}[Get Writing Feedback via Language Exchanges]
`:ne.method==="tutor-led"?he+=`${Qe} --> ${Ue}[Regular Writing Correction from Tutor]
`:ne.method==="immersive"?he+=`${Qe} --> ${Ue}[Native Speaker Writing Review]
`:he+=`${Qe} --> ${Ue}[Regular Writing Practice & Feedback]
`,Ce.push(Ue),{roadmapSection:he,endNodes:Ce}},te=(ne,ce,ye)=>{let he="";const Ce=[],ke=ce();he+=`${ye} --> ${ke}[Integrated Skills Development]
`;const Ue=ce(),Qe=ce(),Te=ce(),$e=ce(),Ee=ce();he+=`${ke} --> ${Ue}[Vocabulary Building]
`,he+=`${ke} --> ${Qe}[Grammar Mastery]
`,he+=`${ke} --> ${Te}[Speaking Practice]
`,he+=`${ke} --> ${$e}[Listening Training]
`,he+=`${ke} --> ${Ee}[Writing Development]
`;const Oe=ce();return he+=`${Ue} --> ${Oe}[Skills Integration]
`,he+=`${Qe} --> ${Oe}
`,he+=`${Te} --> ${Oe}
`,he+=`${$e} --> ${Oe}
`,he+=`${Ee} --> ${Oe}
`,Ce.push(Oe),{roadmapSection:he,endNodes:Ce}},re=(ne,ce,ye)=>{let he="",Ce=[];if(ne.timeframe==="3-months"){const ke=ce(),Ue=ce(),Qe=ce();he+=`${ye} --> ${ke}[Month 1: Foundation]
`,he+=`${ke} --> ${Ue}[Month 2: Practice & Expansion]
`,he+=`${Ue} --> ${Qe}[Month 3: Integration & Assessment]
`,Ce=[ke,Ue,Qe]}else if(ne.timeframe==="6-months"){const ke=ce(),Ue=ce(),Qe=ce(),Te=ce();he+=`${ye} --> ${ke}[Month 1: Foundation]
`,he+=`${ke} --> ${Ue}[Month 2: Core Skills]
`,he+=`${Ue} --> ${Qe}[Month 4: Intermediate Practice]
`,he+=`${Qe} --> ${Te}[Month 6: Advanced Application]
`,Ce=[ke,Ue,Qe,Te]}else if(ne.timeframe==="1-year"){const ke=ce(),Ue=ce(),Qe=ce(),Te=ce(),$e=ce();he+=`${ye} --> ${ke}[Month 1: Foundations]
`,he+=`${ke} --> ${Ue}[Month 3: Core Skills]
`,he+=`${Ue} --> ${Qe}[Month 6: Intermediate Milestone]
`,he+=`${Qe} --> ${Te}[Month 9: Advanced Practice]
`,he+=`${Te} --> ${$e}[Month 12: Proficiency Assessment]
`,Ce=[ke,Ue,Qe,Te,$e]}else{const ke=ce(),Ue=ce(),Qe=ce();he+=`${ye} --> ${ke}[Phase 1: Foundations]
`,he+=`${ke} --> ${Ue}[Phase 2: Skill Building]
`,he+=`${Ue} --> ${Qe}[Phase 3: Practical Application]
`,Ce=[ke,Ue,Qe]}return{roadmapSection:he,lastNode:Ce[Ce.length-1]}},Z=ne=>{let ce=`Based on your ${ne.level.toLowerCase()} level in ${ne.language} with a focus on ${ne.focus}, here is a personalized recommendation:

`;return ne.level==="Beginner"?(ce+=`• Start with high-frequency vocabulary and essential grammar patterns. Focus on building a solid foundation rather than trying to progress too quickly.
`,ce+=`• Use visual aids, flashcards, and simple content designed for beginners.
`):ne.level==="Intermediate"?(ce+=`• Expand your skills by consuming authentic content while strategically addressing knowledge gaps.
`,ce+=`• Begin specializing your vocabulary for your specific goals (e.g., travel, business, academic).
`):(ce+=`• Focus on nuance, cultural context, and specialized language for your specific domains.
`,ce+=`• Engage with complex native content and work on eliminating subtle errors in your production.
`),ne.method==="self-paced"?(ce+=`• With your self-paced approach, establish a consistent daily schedule and use spaced repetition systems.
`,ce+=`• Join language communities online to maintain accountability and motivation.
`):ne.method==="tutor-led"?(ce+=`• Maximize your tutor sessions by preparing specific questions and focusing on areas you can't easily practice alone.
`,ce+=`• Do independent work between sessions to apply what you've learned.
`):ne.method==="immersive"&&(ce+=`• In your immersive approach, don't shy away from making mistakes. Focus on communicative success rather than perfection.
`,ce+=`• Create language boundaries in your environment (e.g., certain activities only in the target language).
`),ne.timeframe==="3-months"?(ce+=`• With your 3-month timeframe, focus on high-impact skills and vocabulary most relevant to your goals.
`,ce+=`• Schedule weekly reviews and adjust your approach based on progress.
`):ne.timeframe==="6-months"?(ce+=`• Your 6-month timeline allows for systematic skill building. Aim for measurable monthly progress markers.
`,ce+=`• Include mid-point assessments to recalibrate your focus as needed.
`):ne.timeframe==="1-year"&&(ce+=`• Your 1-year commitment enables a comprehensive and deep dive into the language. Focus on building all four skills (reading, writing, speaking, listening) systematically.
`,ce+=`• Set quarterly goals to ensure steady progress and adjust your learning plan based on your evolving needs.
`),ce};return L.useEffect(()=>{d&&XW.contentLoaded()},[d]),C.jsx("div",{className:"min-h-screen w-full bg-gradient-to-b from-blue-300 via-purple-200 to-white p-8 flex justify-center items-center",children:C.jsxs("div",{className:"max-w-3xl w-full mx-auto p-6 bg-white rounded-lg shadow-lg",children:[C.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Language Learning Roadmap Generator"}),C.jsxs("div",{className:"space-y-5",children:[C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Language:"}),C.jsx("input",{type:"text",value:n,onChange:ne=>e(ne.target.value),className:"w-full p-2 border border-blue-500 rounded"})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Level:"}),C.jsxs("select",{value:t,onChange:ne=>r(ne.target.value),className:"w-full p-2 border border-blue-500 rounded",children:[C.jsx("option",{value:"Beginner",children:"Beginner"}),C.jsx("option",{value:"Intermediate",children:"Intermediate"}),C.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Focus Area:"}),C.jsxs("select",{value:i,onChange:ne=>s(ne.target.value),className:"w-full p-2 border border-blue-500 rounded",children:[C.jsx("option",{value:"grammar",children:"Grammar"}),C.jsx("option",{value:"vocabulary",children:"Vocabulary"}),C.jsx("option",{value:"speaking",children:"Speaking"}),C.jsx("option",{value:"listening",children:"Listening"}),C.jsx("option",{value:"writing",children:"Writing"}),C.jsx("option",{value:"comprehensive",children:"Comprehensive"})]})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Learning Method:"}),C.jsxs("select",{value:o,onChange:ne=>a(ne.target.value),className:"w-full p-2 border border-blue-500 rounded",children:[C.jsx("option",{value:"self-paced",children:"Self-Paced"}),C.jsx("option",{value:"tutor-led",children:"Tutor-Led"}),C.jsx("option",{value:"immersive",children:"Immersive"}),C.jsx("option",{value:"flexible",children:"Flexible"})]})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Learning Goal:"}),C.jsx("input",{type:"text",value:l,onChange:ne=>c(ne.target.value),className:"w-full p-2 border border-blue-500 rounded"})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Timeframe:"}),C.jsxs("select",{value:u,onChange:ne=>h(ne.target.value),className:"w-full p-2 border border-blue-500 rounded",children:[C.jsx("option",{value:"3-months",children:"3 Months"}),C.jsx("option",{value:"6-months",children:"6 Months"}),C.jsx("option",{value:"1-year",children:"1 Year"}),C.jsx("option",{value:"flexible",children:"Flexible"})]})]}),C.jsx("button",{onClick:()=>F(!P),className:"py-2 px-4 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:P?"Hide Advanced Options":"Show Advanced Options"}),P&&C.jsxs("div",{className:"space-y-5 mt-4",children:[C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Previous Experience:"}),C.jsx("input",{type:"text",value:R,onChange:ne=>B(ne.target.value),className:"w-full p-2 border border-blue-500 rounded"})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Weekly Hours:"}),C.jsx("input",{type:"text",value:I,onChange:ne=>N(ne.target.value),className:"w-full p-2 border border-blue-500 rounded"})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block mb-1 font-semibold",children:"Learning Style:"}),C.jsxs("select",{value:U,onChange:ne=>O(ne.target.value),className:"w-full p-2 border border-blue-500 rounded",children:[C.jsx("option",{value:"visual",children:"Visual"}),C.jsx("option",{value:"auditory",children:"Auditory"}),C.jsx("option",{value:"kinesthetic",children:"Kinesthetic"}),C.jsx("option",{value:"balanced",children:"Balanced"})]})]})]}),C.jsx("button",{onClick:K,disabled:g,className:"w-full py-2 px-4 bg-blue-500 text-white font-bold rounded hover:bg-blue-600",children:g?"Generating...":"Generate Roadmap"})]}),d&&C.jsxs("div",{className:"mt-5",children:[C.jsx("div",{className:"mermaid text-center p-4 bg-gray-50 rounded shadow",children:d}),w&&C.jsx("div",{className:"mt-5 p-4 bg-gray-100 border-l-4 border-blue-500 text-gray-700",children:w})]})]})})},WMe=[{name:"Hand Gesture Recognition",description:"Use your camera to recognize hand gestures in real time!",route:"handtracking",image:"🤟"},{name:"Finger Spelling Practice",description:"Learn and practice spelling words using sign language fingerspelling!",route:"spelling",image:"🖐️"}],$Me=()=>{const n=al();return C.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-300 via-cyan-200 to-white p-8 flex items-center justify-center",children:C.jsx("div",{className:"flex flex-col items-center justify-center w-full pt-32",children:C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-10 max-w-3xl mx-auto",children:WMe.map((e,t)=>C.jsxs("div",{className:"relative bg-white shadow-lg rounded-2xl p-5 hover:shadow-2xl transition-transform transform hover:scale-110 cursor-pointer flex flex-col items-center text-center",onClick:()=>n(`/${e.route}`),children:[C.jsx("div",{className:"flex items-center justify-center mb-4 text-7xl h-24 w-24 bg-blue-100 rounded-full",children:e.image}),C.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-2",children:e.name}),C.jsx("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),C.jsx("button",{onClick:r=>{r.stopPropagation(),n(`/${e.route}`)},className:"px-6 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 transition-all",children:"Start Now"})]},t))})})})};var ME={},q3;function XMe(){return q3||(q3=1,(function(){function n(P){var F=0;return function(){return F<P.length?{done:!1,value:P[F++]}:{done:!0}}}var e=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,F,K){return P==Array.prototype||P==Object.prototype||(P[F]=K.value),P};function t(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sw=="object"&&Sw];for(var F=0;F<P.length;++F){var K=P[F];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=t(this);function i(P,F){if(F)e:{var K=r;P=P.split(".");for(var Q=0;Q<P.length-1;Q++){var Y=P[Q];if(!(Y in K))break e;K=K[Y]}P=P[P.length-1],Q=K[P],F=F(Q),F!=Q&&F!=null&&e(K,P,{configurable:!0,writable:!0,value:F})}}i("Symbol",function(P){function F(ee){if(this instanceof F)throw new TypeError("Symbol is not a constructor");return new K(Q+(ee||"")+"_"+Y++,ee)}function K(ee,$){this.g=ee,e(this,"description",{configurable:!0,writable:!0,value:$})}if(P)return P;K.prototype.toString=function(){return this.g};var Q="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Y=0;return F}),i("Symbol.iterator",function(P){if(P)return P;P=Symbol("Symbol.iterator");for(var F="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),K=0;K<F.length;K++){var Q=r[F[K]];typeof Q=="function"&&typeof Q.prototype[P]!="function"&&e(Q.prototype,P,{configurable:!0,writable:!0,value:function(){return s(n(this))}})}return P});function s(P){return P={next:P},P[Symbol.iterator]=function(){return this},P}function o(P){var F=typeof Symbol<"u"&&Symbol.iterator&&P[Symbol.iterator];return F?F.call(P):{next:n(P)}}function a(){this.i=!1,this.g=null,this.o=void 0,this.j=1,this.m=0,this.h=null}function l(P){if(P.i)throw new TypeError("Generator is already running");P.i=!0}a.prototype.l=function(P){this.o=P};function c(P,F){P.h={F,G:!0},P.j=P.m}a.prototype.return=function(P){this.h={return:P},this.j=this.m};function u(P){this.g=new a,this.h=P}function h(P,F){l(P.g);var K=P.g.g;return K?d(P,"return"in K?K.return:function(Q){return{value:Q,done:!0}},F,P.g.return):(P.g.return(F),m(P))}function d(P,F,K,Q){try{var Y=F.call(P.g.g,K);if(!(Y instanceof Object))throw new TypeError("Iterator result "+Y+" is not an object");if(!Y.done)return P.g.i=!1,Y;var ee=Y.value}catch($){return P.g.g=null,c(P.g,$),m(P)}return P.g.g=null,Q.call(P.g,ee),m(P)}function m(P){for(;P.g.j;)try{var F=P.h(P.g);if(F)return P.g.i=!1,{value:F.value,done:!1}}catch(K){P.g.o=void 0,c(P.g,K)}if(P.g.i=!1,P.g.h){if(F=P.g.h,P.g.h=null,F.G)throw F.F;return{value:F.return,done:!0}}return{value:void 0,done:!0}}function g(P){this.next=function(F){return l(P.g),P.g.g?F=d(P,P.g.g.next,F,P.g.l):(P.g.l(F),F=m(P)),F},this.throw=function(F){return l(P.g),P.g.g?F=d(P,P.g.g.throw,F,P.g.l):(c(P.g,F),F=m(P)),F},this.return=function(F){return h(P,F)},this[Symbol.iterator]=function(){return this}}function v(P){function F(Q){return P.next(Q)}function K(Q){return P.throw(Q)}return new Promise(function(Q,Y){function ee($){$.done?Q($.value):Promise.resolve($.value).then(F,K).then(ee,Y)}ee(P.next())})}i("Promise",function(P){function F($){this.h=0,this.i=void 0,this.g=[],this.o=!1;var oe=this.j();try{$(oe.resolve,oe.reject)}catch(G){oe.reject(G)}}function K(){this.g=null}function Q($){return $ instanceof F?$:new F(function(oe){oe($)})}if(P)return P;K.prototype.h=function($){if(this.g==null){this.g=[];var oe=this;this.i(function(){oe.l()})}this.g.push($)};var Y=r.setTimeout;K.prototype.i=function($){Y($,0)},K.prototype.l=function(){for(;this.g&&this.g.length;){var $=this.g;this.g=[];for(var oe=0;oe<$.length;++oe){var G=$[oe];$[oe]=null;try{G()}catch(te){this.j(te)}}}this.g=null},K.prototype.j=function($){this.i(function(){throw $})},F.prototype.j=function(){function $(te){return function(re){G||(G=!0,te.call(oe,re))}}var oe=this,G=!1;return{resolve:$(this.A),reject:$(this.l)}},F.prototype.A=function($){if($===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if($ instanceof F)this.C($);else{e:switch(typeof $){case"object":var oe=$!=null;break e;case"function":oe=!0;break e;default:oe=!1}oe?this.v($):this.m($)}},F.prototype.v=function($){var oe=void 0;try{oe=$.then}catch(G){this.l(G);return}typeof oe=="function"?this.D(oe,$):this.m($)},F.prototype.l=function($){this.u(2,$)},F.prototype.m=function($){this.u(1,$)},F.prototype.u=function($,oe){if(this.h!=0)throw Error("Cannot settle("+$+", "+oe+"): Promise already settled in state"+this.h);this.h=$,this.i=oe,this.h===2&&this.B(),this.H()},F.prototype.B=function(){var $=this;Y(function(){if($.I()){var oe=r.console;typeof oe<"u"&&oe.error($.i)}},1)},F.prototype.I=function(){if(this.o)return!1;var $=r.CustomEvent,oe=r.Event,G=r.dispatchEvent;return typeof G>"u"?!0:(typeof $=="function"?$=new $("unhandledrejection",{cancelable:!0}):typeof oe=="function"?$=new oe("unhandledrejection",{cancelable:!0}):($=r.document.createEvent("CustomEvent"),$.initCustomEvent("unhandledrejection",!1,!0,$)),$.promise=this,$.reason=this.i,G($))},F.prototype.H=function(){if(this.g!=null){for(var $=0;$<this.g.length;++$)ee.h(this.g[$]);this.g=null}};var ee=new K;return F.prototype.C=function($){var oe=this.j();$.s(oe.resolve,oe.reject)},F.prototype.D=function($,oe){var G=this.j();try{$.call(oe,G.resolve,G.reject)}catch(te){G.reject(te)}},F.prototype.then=function($,oe){function G(ne,ce){return typeof ne=="function"?function(ye){try{te(ne(ye))}catch(he){re(he)}}:ce}var te,re,Z=new F(function(ne,ce){te=ne,re=ce});return this.s(G($,te),G(oe,re)),Z},F.prototype.catch=function($){return this.then(void 0,$)},F.prototype.s=function($,oe){function G(){switch(te.h){case 1:$(te.i);break;case 2:oe(te.i);break;default:throw Error("Unexpected state: "+te.h)}}var te=this;this.g==null?ee.h(G):this.g.push(G),this.o=!0},F.resolve=Q,F.reject=function($){return new F(function(oe,G){G($)})},F.race=function($){return new F(function(oe,G){for(var te=o($),re=te.next();!re.done;re=te.next())Q(re.value).s(oe,G)})},F.all=function($){var oe=o($),G=oe.next();return G.done?Q([]):new F(function(te,re){function Z(ye){return function(he){ne[ye]=he,ce--,ce==0&&te(ne)}}var ne=[],ce=0;do ne.push(void 0),ce++,Q(G.value).s(Z(ne.length-1),re),G=oe.next();while(!G.done)})},F});var w=typeof Object.assign=="function"?Object.assign:function(P,F){for(var K=1;K<arguments.length;K++){var Q=arguments[K];if(Q)for(var Y in Q)Object.prototype.hasOwnProperty.call(Q,Y)&&(P[Y]=Q[Y])}return P};i("Object.assign",function(P){return P||w});var _=this||self,A={facingMode:"user",width:640,height:480};function S(P,F){this.video=P,this.i=0,this.h=Object.assign(Object.assign({},A),F)}S.prototype.stop=function(){var P=this,F,K,Q,Y;return v(new g(new u(function(ee){if(P.g){for(F=P.g.getTracks(),K=o(F),Q=K.next();!Q.done;Q=K.next())Y=Q.value,Y.stop();P.g=void 0}ee.j=0})))},S.prototype.start=function(){var P=this,F;return v(new g(new u(function(K){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists."),F=P.h,K.return(navigator.mediaDevices.getUserMedia({video:{facingMode:F.facingMode,width:F.width,height:F.height}}).then(function(Q){B(P,Q)}).catch(function(Q){var Y="Failed to acquire camera feed: "+Q;throw console.error(Y),alert(Y),Q}))})))};function R(P){window.requestAnimationFrame(function(){I(P)})}function B(P,F){P.g=F,P.video.srcObject=F,P.video.onloadedmetadata=function(){P.video.play(),R(P)}}function I(P){var F=null;P.video.paused||P.video.currentTime===P.i||(P.i=P.video.currentTime,F=P.h.onFrame()),F?F.then(function(){R(P)}):R(P)}var N=["Camera"],U=_;N[0]in U||typeof U.execScript>"u"||U.execScript("var "+N[0]);for(var O;N.length&&(O=N.shift());)N.length||S===void 0?U[O]&&U[O]!==Object.prototype[O]?U=U[O]:U=U[O]={}:U[O]=S}).call(ME)),ME}var qMe=XMe(),RE={},Y3;function YMe(){return Y3||(Y3=1,(function(){var n;function e(E){var z=0;return function(){return z<E.length?{done:!1,value:E[z++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,z,W){return E==Array.prototype||E==Object.prototype||(E[z]=W.value),E};function r(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sw=="object"&&Sw];for(var z=0;z<E.length;++z){var W=E[z];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var i=r(this);function s(E,z){if(z)e:{var W=i;E=E.split(".");for(var ie=0;ie<E.length-1;ie++){var ge=E[ie];if(!(ge in W))break e;W=W[ge]}E=E[E.length-1],ie=W[E],z=z(ie),z!=ie&&z!=null&&t(W,E,{configurable:!0,writable:!0,value:z})}}s("Symbol",function(E){function z(_e){if(this instanceof z)throw new TypeError("Symbol is not a constructor");return new W(ie+(_e||"")+"_"+ge++,_e)}function W(_e,ve){this.h=_e,t(this,"description",{configurable:!0,writable:!0,value:ve})}if(E)return E;W.prototype.toString=function(){return this.h};var ie="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",ge=0;return z}),s("Symbol.iterator",function(E){if(E)return E;E=Symbol("Symbol.iterator");for(var z="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),W=0;W<z.length;W++){var ie=i[z[W]];typeof ie=="function"&&typeof ie.prototype[E]!="function"&&t(ie.prototype,E,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return E});function o(E){return E={next:E},E[Symbol.iterator]=function(){return this},E}function a(E){var z=typeof Symbol<"u"&&Symbol.iterator&&E[Symbol.iterator];return z?z.call(E):{next:e(E)}}function l(E){if(!(E instanceof Array)){E=a(E);for(var z,W=[];!(z=E.next()).done;)W.push(z.value);E=W}return E}var c=typeof Object.assign=="function"?Object.assign:function(E,z){for(var W=1;W<arguments.length;W++){var ie=arguments[W];if(ie)for(var ge in ie)Object.prototype.hasOwnProperty.call(ie,ge)&&(E[ge]=ie[ge])}return E};s("Object.assign",function(E){return E||c});var u=typeof Object.create=="function"?Object.create:function(E){function z(){}return z.prototype=E,new z},h;if(typeof Object.setPrototypeOf=="function")h=Object.setPrototypeOf;else{var d;e:{var m={a:!0},g={};try{g.__proto__=m,d=g.a;break e}catch{}d=!1}h=d?function(E,z){if(E.__proto__=z,E.__proto__!==z)throw new TypeError(E+" is not extensible");return E}:null}var v=h;function w(E,z){if(E.prototype=u(z.prototype),E.prototype.constructor=E,v)v(E,z);else for(var W in z)if(W!="prototype")if(Object.defineProperties){var ie=Object.getOwnPropertyDescriptor(z,W);ie&&Object.defineProperty(E,W,ie)}else E[W]=z[W];E.ya=z.prototype}function _(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function A(E){if(E.m)throw new TypeError("Generator is already running");E.m=!0}_.prototype.u=function(E){this.i=E};function S(E,z){E.l={ma:z,na:!0},E.h=E.s||E.v}_.prototype.return=function(E){this.l={return:E},this.h=this.v};function R(E,z,W){return E.h=W,{value:z}}function B(E){this.h=new _,this.i=E}function I(E,z){A(E.h);var W=E.h.j;return W?N(E,"return"in W?W.return:function(ie){return{value:ie,done:!0}},z,E.h.return):(E.h.return(z),U(E))}function N(E,z,W,ie){try{var ge=z.call(E.h.j,W);if(!(ge instanceof Object))throw new TypeError("Iterator result "+ge+" is not an object");if(!ge.done)return E.h.m=!1,ge;var _e=ge.value}catch(ve){return E.h.j=null,S(E.h,ve),U(E)}return E.h.j=null,ie.call(E.h,_e),U(E)}function U(E){for(;E.h.h;)try{var z=E.i(E.h);if(z)return E.h.m=!1,{value:z.value,done:!1}}catch(W){E.h.i=void 0,S(E.h,W)}if(E.h.m=!1,E.h.l){if(z=E.h.l,E.h.l=null,z.na)throw z.ma;return{value:z.return,done:!0}}return{value:void 0,done:!0}}function O(E){this.next=function(z){return A(E.h),E.h.j?z=N(E,E.h.j.next,z,E.h.u):(E.h.u(z),z=U(E)),z},this.throw=function(z){return A(E.h),E.h.j?z=N(E,E.h.j.throw,z,E.h.u):(S(E.h,z),z=U(E)),z},this.return=function(z){return I(E,z)},this[Symbol.iterator]=function(){return this}}function P(E){function z(ie){return E.next(ie)}function W(ie){return E.throw(ie)}return new Promise(function(ie,ge){function _e(ve){ve.done?ie(ve.value):Promise.resolve(ve.value).then(z,W).then(_e,ge)}_e(E.next())})}function F(E){return P(new O(new B(E)))}s("Promise",function(E){function z(ve){this.i=0,this.j=void 0,this.h=[],this.u=!1;var Be=this.l();try{ve(Be.resolve,Be.reject)}catch(Ye){Be.reject(Ye)}}function W(){this.h=null}function ie(ve){return ve instanceof z?ve:new z(function(Be){Be(ve)})}if(E)return E;W.prototype.i=function(ve){if(this.h==null){this.h=[];var Be=this;this.j(function(){Be.m()})}this.h.push(ve)};var ge=i.setTimeout;W.prototype.j=function(ve){ge(ve,0)},W.prototype.m=function(){for(;this.h&&this.h.length;){var ve=this.h;this.h=[];for(var Be=0;Be<ve.length;++Be){var Ye=ve[Be];ve[Be]=null;try{Ye()}catch(xt){this.l(xt)}}}this.h=null},W.prototype.l=function(ve){this.j(function(){throw ve})},z.prototype.l=function(){function ve(xt){return function(Ot){Ye||(Ye=!0,xt.call(Be,Ot))}}var Be=this,Ye=!1;return{resolve:ve(this.I),reject:ve(this.m)}},z.prototype.I=function(ve){if(ve===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(ve instanceof z)this.L(ve);else{e:switch(typeof ve){case"object":var Be=ve!=null;break e;case"function":Be=!0;break e;default:Be=!1}Be?this.F(ve):this.s(ve)}},z.prototype.F=function(ve){var Be=void 0;try{Be=ve.then}catch(Ye){this.m(Ye);return}typeof Be=="function"?this.M(Be,ve):this.s(ve)},z.prototype.m=function(ve){this.v(2,ve)},z.prototype.s=function(ve){this.v(1,ve)},z.prototype.v=function(ve,Be){if(this.i!=0)throw Error("Cannot settle("+ve+", "+Be+"): Promise already settled in state"+this.i);this.i=ve,this.j=Be,this.i===2&&this.K(),this.H()},z.prototype.K=function(){var ve=this;ge(function(){if(ve.D()){var Be=i.console;typeof Be<"u"&&Be.error(ve.j)}},1)},z.prototype.D=function(){if(this.u)return!1;var ve=i.CustomEvent,Be=i.Event,Ye=i.dispatchEvent;return typeof Ye>"u"?!0:(typeof ve=="function"?ve=new ve("unhandledrejection",{cancelable:!0}):typeof Be=="function"?ve=new Be("unhandledrejection",{cancelable:!0}):(ve=i.document.createEvent("CustomEvent"),ve.initCustomEvent("unhandledrejection",!1,!0,ve)),ve.promise=this,ve.reason=this.j,Ye(ve))},z.prototype.H=function(){if(this.h!=null){for(var ve=0;ve<this.h.length;++ve)_e.i(this.h[ve]);this.h=null}};var _e=new W;return z.prototype.L=function(ve){var Be=this.l();ve.T(Be.resolve,Be.reject)},z.prototype.M=function(ve,Be){var Ye=this.l();try{ve.call(Be,Ye.resolve,Ye.reject)}catch(xt){Ye.reject(xt)}},z.prototype.then=function(ve,Be){function Ye(cn,Pt){return typeof cn=="function"?function(en){try{xt(cn(en))}catch(sn){Ot(sn)}}:Pt}var xt,Ot,Cn=new z(function(cn,Pt){xt=cn,Ot=Pt});return this.T(Ye(ve,xt),Ye(Be,Ot)),Cn},z.prototype.catch=function(ve){return this.then(void 0,ve)},z.prototype.T=function(ve,Be){function Ye(){switch(xt.i){case 1:ve(xt.j);break;case 2:Be(xt.j);break;default:throw Error("Unexpected state: "+xt.i)}}var xt=this;this.h==null?_e.i(Ye):this.h.push(Ye),this.u=!0},z.resolve=ie,z.reject=function(ve){return new z(function(Be,Ye){Ye(ve)})},z.race=function(ve){return new z(function(Be,Ye){for(var xt=a(ve),Ot=xt.next();!Ot.done;Ot=xt.next())ie(Ot.value).T(Be,Ye)})},z.all=function(ve){var Be=a(ve),Ye=Be.next();return Ye.done?ie([]):new z(function(xt,Ot){function Cn(en){return function(sn){cn[en]=sn,Pt--,Pt==0&&xt(cn)}}var cn=[],Pt=0;do cn.push(void 0),Pt++,ie(Ye.value).T(Cn(cn.length-1),Ot),Ye=Be.next();while(!Ye.done)})},z});function K(E,z){E instanceof String&&(E+="");var W=0,ie=!1,ge={next:function(){if(!ie&&W<E.length){var _e=W++;return{value:z(_e,E[_e]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}s("Array.prototype.keys",function(E){return E||function(){return K(this,function(z){return z})}}),s("Array.prototype.fill",function(E){return E||function(z,W,ie){var ge=this.length||0;for(0>W&&(W=Math.max(0,ge+W)),(ie==null||ie>ge)&&(ie=ge),ie=Number(ie),0>ie&&(ie=Math.max(0,ge+ie)),W=Number(W||0);W<ie;W++)this[W]=z;return this}});function Q(E){return E||Array.prototype.fill}s("Int8Array.prototype.fill",Q),s("Uint8Array.prototype.fill",Q),s("Uint8ClampedArray.prototype.fill",Q),s("Int16Array.prototype.fill",Q),s("Uint16Array.prototype.fill",Q),s("Int32Array.prototype.fill",Q),s("Uint32Array.prototype.fill",Q),s("Float32Array.prototype.fill",Q),s("Float64Array.prototype.fill",Q),s("Object.is",function(E){return E||function(z,W){return z===W?z!==0||1/z===1/W:z!==z&&W!==W}}),s("Array.prototype.includes",function(E){return E||function(z,W){var ie=this;ie instanceof String&&(ie=String(ie));var ge=ie.length;for(W=W||0,0>W&&(W=Math.max(W+ge,0));W<ge;W++){var _e=ie[W];if(_e===z||Object.is(_e,z))return!0}return!1}}),s("String.prototype.includes",function(E){return E||function(z,W){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(z instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(z,W||0)!==-1}});var Y=this||self;function ee(E,z){E=E.split(".");var W=Y;E[0]in W||typeof W.execScript>"u"||W.execScript("var "+E[0]);for(var ie;E.length&&(ie=E.shift());)E.length||z===void 0?W[ie]&&W[ie]!==Object.prototype[ie]?W=W[ie]:W=W[ie]={}:W[ie]=z}function $(E){var z;e:{if((z=Y.navigator)&&(z=z.userAgent))break e;z=""}return z.indexOf(E)!=-1}var oe=Array.prototype.map?function(E,z){return Array.prototype.map.call(E,z,void 0)}:function(E,z){for(var W=E.length,ie=Array(W),ge=typeof E=="string"?E.split(""):E,_e=0;_e<W;_e++)_e in ge&&(ie[_e]=z.call(void 0,ge[_e],_e,E));return ie},G={},te=null;function re(E){var z=E.length,W=3*z/4;W%3?W=Math.floor(W):"=.".indexOf(E[z-1])!=-1&&(W="=.".indexOf(E[z-2])!=-1?W-2:W-1);var ie=new Uint8Array(W),ge=0;return Z(E,function(_e){ie[ge++]=_e}),ge!==W?ie.subarray(0,ge):ie}function Z(E,z){function W(Ye){for(;ie<E.length;){var xt=E.charAt(ie++),Ot=te[xt];if(Ot!=null)return Ot;if(!/^[\s\xa0]*$/.test(xt))throw Error("Unknown base64 encoding at char: "+xt)}return Ye}ne();for(var ie=0;;){var ge=W(-1),_e=W(0),ve=W(64),Be=W(64);if(Be===64&&ge===-1)break;z(ge<<2|_e>>4),ve!=64&&(z(_e<<4&240|ve>>2),Be!=64&&z(ve<<6&192|Be))}}function ne(){if(!te){te={};for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),z=["+/=","+/","-_=","-_.","-_"],W=0;5>W;W++){var ie=E.concat(z[W].split(""));G[W]=ie;for(var ge=0;ge<ie.length;ge++){var _e=ie[ge];te[_e]===void 0&&(te[_e]=ge)}}}}var ce=typeof Uint8Array<"u",ye=!($("Trident")||$("MSIE"))&&typeof Y.btoa=="function";function he(E){if(!ye){var z;z===void 0&&(z=0),ne(),z=G[z];for(var W=Array(Math.floor(E.length/3)),ie=z[64]||"",ge=0,_e=0;ge<E.length-2;ge+=3){var ve=E[ge],Be=E[ge+1],Ye=E[ge+2],xt=z[ve>>2];ve=z[(ve&3)<<4|Be>>4],Be=z[(Be&15)<<2|Ye>>6],Ye=z[Ye&63],W[_e++]=xt+ve+Be+Ye}switch(xt=0,Ye=ie,E.length-ge){case 2:xt=E[ge+1],Ye=z[(xt&15)<<2]||ie;case 1:E=E[ge],W[_e]=z[E>>2]+z[(E&3)<<4|xt>>4]+Ye+ie}return W.join("")}for(z="";10240<E.length;)z+=String.fromCharCode.apply(null,E.subarray(0,10240)),E=E.subarray(10240);return z+=String.fromCharCode.apply(null,E),btoa(z)}var Ce=RegExp("[-_.]","g");function ke(E){switch(E){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Ue(E){if(!ye)return re(E);Ce.test(E)&&(E=E.replace(Ce,ke)),E=atob(E);for(var z=new Uint8Array(E.length),W=0;W<E.length;W++)z[W]=E.charCodeAt(W);return z}var Qe;function Te(){return Qe||(Qe=new Uint8Array(0))}var $e={},Ee=typeof Uint8Array.prototype.slice=="function",Oe=0,le=0;function vt(E){var z=0>E;E=Math.abs(E);var W=E>>>0;E=Math.floor((E-W)/4294967296),z&&(W=a(_t(W,E)),z=W.next().value,E=W.next().value,W=z),Oe=W>>>0,le=E>>>0}var ft=typeof BigInt=="function";function _t(E,z){return z=~z,E?E=~E+1:z+=1,[E,z]}function mt(E,z){this.i=E>>>0,this.h=z>>>0}function Vt(E){if(!E)return bt||(bt=new mt(0,0));if(!/^-?\d+$/.test(E))return null;if(16>E.length)vt(Number(E));else if(ft)E=BigInt(E),Oe=Number(E&BigInt(4294967295))>>>0,le=Number(E>>BigInt(32)&BigInt(4294967295));else{var z=+(E[0]==="-");le=Oe=0;for(var W=E.length,ie=z,ge=(W-z)%6+z;ge<=W;ie=ge,ge+=6)ie=Number(E.slice(ie,ge)),le*=1e6,Oe=1e6*Oe+ie,4294967296<=Oe&&(le+=Oe/4294967296|0,Oe%=4294967296);z&&(z=a(_t(Oe,le)),E=z.next().value,z=z.next().value,Oe=E,le=z)}return new mt(Oe,le)}var bt;function de(E,z){return Error("Invalid wire type: "+E+" (at position "+z+")")}function ae(){return Error("Failed to read varint, encoding is invalid.")}function He(E,z){return Error("Tried to read past the end of the data "+z+" > "+E)}function Ze(){throw Error("Invalid UTF8")}function ut(E,z){return z=String.fromCharCode.apply(null,z),E==null?z:E+z}var st=void 0,It,Et=typeof TextDecoder<"u",Lt,hn=typeof TextEncoder<"u",gt;function jt(E){if(E!==$e)throw Error("illegal external caller")}function $t(E,z){if(jt(z),this.V=E,E!=null&&E.length===0)throw Error("ByteString should be constructed with non-empty values")}function zt(){return gt||(gt=new $t(null,$e))}function Ft(E){jt($e);var z=E.V;return z=z==null||ce&&z!=null&&z instanceof Uint8Array?z:typeof z=="string"?Ue(z):null,z==null?z:E.V=z}function Me(E){if(typeof E=="string")return{buffer:Ue(E),C:!1};if(Array.isArray(E))return{buffer:new Uint8Array(E),C:!1};if(E.constructor===Uint8Array)return{buffer:E,C:!1};if(E.constructor===ArrayBuffer)return{buffer:new Uint8Array(E),C:!1};if(E.constructor===$t)return{buffer:Ft(E)||Te(),C:!0};if(E instanceof Uint8Array)return{buffer:new Uint8Array(E.buffer,E.byteOffset,E.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function et(E,z){this.i=null,this.m=!1,this.h=this.j=this.l=0,wt(this,E,z)}function wt(E,z,W){W=W===void 0?{}:W,E.S=W.S===void 0?!1:W.S,z&&(z=Me(z),E.i=z.buffer,E.m=z.C,E.l=0,E.j=E.i.length,E.h=E.l)}et.prototype.reset=function(){this.h=this.l};function Se(E,z){if(E.h=z,z>E.j)throw He(E.j,z)}function je(E){var z=E.i,W=E.h,ie=z[W++],ge=ie&127;if(ie&128&&(ie=z[W++],ge|=(ie&127)<<7,ie&128&&(ie=z[W++],ge|=(ie&127)<<14,ie&128&&(ie=z[W++],ge|=(ie&127)<<21,ie&128&&(ie=z[W++],ge|=ie<<28,ie&128&&z[W++]&128&&z[W++]&128&&z[W++]&128&&z[W++]&128&&z[W++]&128)))))throw ae();return Se(E,W),ge}function qe(E,z){if(0>z)throw Error("Tried to read a negative byte length: "+z);var W=E.h,ie=W+z;if(ie>E.j)throw He(z,E.j-W);return E.h=ie,W}var at=[];function Nt(){this.h=[]}Nt.prototype.length=function(){return this.h.length},Nt.prototype.end=function(){var E=this.h;return this.h=[],E};function Dt(E,z,W){for(;0<W||127<z;)E.h.push(z&127|128),z=(z>>>7|W<<25)>>>0,W>>>=7;E.h.push(z)}function kt(E,z){for(;127<z;)E.h.push(z&127|128),z>>>=7;E.h.push(z)}function En(E,z){if(at.length){var W=at.pop();wt(W,E,z),E=W}else E=new et(E,z);this.h=E,this.j=this.h.h,this.i=this.l=-1,this.setOptions(z)}En.prototype.setOptions=function(E){E=E===void 0?{}:E,this.ca=E.ca===void 0?!1:E.ca},En.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function xr(E){var z=E.h;if(z.h==z.j)return!1;E.j=E.h.h;var W=je(E.h)>>>0;if(z=W>>>3,W&=7,!(0<=W&&5>=W))throw de(W,E.j);if(1>z)throw Error("Invalid field number: "+z+" (at position "+E.j+")");return E.l=z,E.i=W,!0}function Mn(E){switch(E.i){case 0:if(E.i!=0)Mn(E);else e:{E=E.h;for(var z=E.h,W=z+10,ie=E.i;z<W;)if(!(ie[z++]&128)){Se(E,z);break e}throw ae()}break;case 1:E=E.h,Se(E,E.h+8);break;case 2:E.i!=2?Mn(E):(z=je(E.h)>>>0,E=E.h,Se(E,E.h+z));break;case 5:E=E.h,Se(E,E.h+4);break;case 3:z=E.l;do{if(!xr(E))throw Error("Unmatched start-group tag: stream EOF");if(E.i==4){if(E.l!=z)throw Error("Unmatched end-group tag");break}Mn(E)}while(!0);break;default:throw de(E.i,E.j)}}var _r=[];function Or(){this.j=[],this.i=0,this.h=new Nt}function Xi(E,z){z.length!==0&&(E.j.push(z),E.i+=z.length)}function Ks(E,z){if(z=z.R){Xi(E,E.h.end());for(var W=0;W<z.length;W++)Xi(E,Ft(z[W])||Te())}}var ur=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Gr(E,z){return ur?E[ur]|=z:E.A!==void 0?E.A|=z:(Object.defineProperties(E,{A:{value:z,configurable:!0,writable:!0,enumerable:!1}}),z)}function Ni(E,z){ur?E[ur]&&(E[ur]&=~z):E.A!==void 0&&(E.A&=~z)}function Xn(E){var z;return ur?z=E[ur]:z=E.A,z??0}function fn(E,z){ur?E[ur]=z:E.A!==void 0?E.A=z:Object.defineProperties(E,{A:{value:z,configurable:!0,writable:!0,enumerable:!1}})}function Js(E){return Gr(E,1),E}function Pi(E,z){fn(z,(E|0)&-51)}function J(E,z){fn(z,(E|18)&-41)}var ue={};function Re(E){return E!==null&&typeof E=="object"&&!Array.isArray(E)&&E.constructor===Object}var Xe,it=[];fn(it,23),Xe=Object.freeze(it);function Le(E){if(Xn(E.o)&2)throw Error("Cannot mutate an immutable Message")}function me(E){var z=E.length;(z=z?E[z-1]:void 0)&&Re(z)?z.g=1:(z={},E.push((z.g=1,z)))}function De(E){var z=E.i+E.G;return E.B||(E.B=E.o[z]={})}function q(E,z){return z===-1?null:z>=E.i?E.B?E.B[z]:void 0:E.o[z+E.G]}function pe(E,z,W,ie){Le(E),be(E,z,W,ie)}function be(E,z,W,ie){E.j&&(E.j=void 0),z>=E.i||ie?De(E)[z]=W:(E.o[z+E.G]=W,(E=E.B)&&z in E&&delete E[z])}function xe(E,z,W,ie){var ge=q(E,z);Array.isArray(ge)||(ge=Xe);var _e=Xn(ge);if(_e&1||Js(ge),ie)_e&2||Gr(ge,2),W&1||Object.freeze(ge);else{ie=!(W&2);var ve=_e&2;W&1||!ve?ie&&_e&16&&!ve&&Ni(ge,16):(ge=Js(Array.prototype.slice.call(ge)),be(E,z,ge))}return ge}function Pe(E,z){var W=q(E,z),ie=W==null?W:typeof W=="number"||W==="NaN"||W==="Infinity"||W==="-Infinity"?Number(W):void 0;return ie!=null&&ie!==W&&be(E,z,ie),ie}function Ge(E,z,W,ie,ge){E.h||(E.h={});var _e=E.h[W],ve=xe(E,W,3,ge);if(!_e){var Be=ve;_e=[];var Ye=!!(Xn(E.o)&16);ve=!!(Xn(Be)&2);var xt=Be;!ge&&ve&&(Be=Array.prototype.slice.call(Be));for(var Ot=ve,Cn=0;Cn<Be.length;Cn++){var cn=Be[Cn],Pt=z,en=!1;if(en=en===void 0?!1:en,cn=Array.isArray(cn)?new Pt(cn):en?new Pt:void 0,cn!==void 0){Pt=cn.o;var sn=en=Xn(Pt);ve&&(sn|=2),Ye&&(sn|=16),sn!=en&&fn(Pt,sn),Pt=sn,Ot=Ot||!!(2&Pt),_e.push(cn)}}return E.h[W]=_e,Ye=Xn(Be),z=Ye|33,z=Ot?z&-9:z|8,Ye!=z&&(Ot=Be,Object.isFrozen(Ot)&&(Ot=Array.prototype.slice.call(Ot)),fn(Ot,z),Be=Ot),xt!==Be&&be(E,W,Be),(ge||ie&&ve)&&Gr(_e,2),ie&&Object.freeze(_e),_e}return ge||(ge=Object.isFrozen(_e),ie&&!ge?Object.freeze(_e):!ie&&ge&&(_e=Array.prototype.slice.call(_e),E.h[W]=_e)),_e}function nt(E,z,W){var ie=!!(Xn(E.o)&2);if(z=Ge(E,z,W,ie,ie),E=xe(E,W,3,ie),!(ie||Xn(E)&8)){for(ie=0;ie<z.length;ie++){if(W=z[ie],Xn(W.o)&2){var ge=In(W,!1);ge.j=W}else ge=W;W!==ge&&(z[ie]=ge,E[ie]=ge.o)}Gr(E,8)}return z}function rt(E,z,W){if(W!=null&&typeof W!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof W+": "+W);pe(E,z,W)}function dt(E,z,W,ie,ge){Le(E);var _e=Ge(E,W,z,!1,!1);return W=ie??new W,E=xe(E,z,2,!1),ge!=null?(_e.splice(ge,0,W),E.splice(ge,0,W.o)):(_e.push(W),E.push(W.o)),W.C()&&Ni(E,8),W}function Mt(E,z){return E??z}function Ct(E,z,W){return W=W===void 0?0:W,Mt(Pe(E,z),W)}var pt;function Wt(E){switch(typeof E){case"number":return isFinite(E)?E:String(E);case"object":if(E)if(Array.isArray(E)){if(Xn(E)&128)return E=Array.prototype.slice.call(E),me(E),E}else{if(ce&&E!=null&&E instanceof Uint8Array)return he(E);if(E instanceof $t){var z=E.V;return z==null?"":typeof z=="string"?z:E.V=he(z)}}}return E}function Gt(E,z,W,ie){if(E!=null){if(Array.isArray(E))E=Sn(E,z,W,ie!==void 0);else if(Re(E)){var ge={},_e;for(_e in E)ge[_e]=Gt(E[_e],z,W,ie);E=ge}else E=z(E,ie);return E}}function Sn(E,z,W,ie){var ge=Xn(E);ie=ie?!!(ge&16):void 0,E=Array.prototype.slice.call(E);for(var _e=0;_e<E.length;_e++)E[_e]=Gt(E[_e],z,W,ie);return W(ge,E),E}function nn(E){return E.ja===ue?E.toJSON():Wt(E)}function ln(E,z){E&128&&me(z)}function qt(E,z,W){if(W=W===void 0?J:W,E!=null){if(ce&&E instanceof Uint8Array)return E.length?new $t(new Uint8Array(E),$e):zt();if(Array.isArray(E)){var ie=Xn(E);return ie&2?E:z&&!(ie&32)&&(ie&16||ie===0)?(fn(E,ie|2),E):(E=Sn(E,qt,ie&4?J:W,!0),z=Xn(E),z&4&&z&2&&Object.freeze(E),E)}return E.ja===ue?xn(E):E}}function Hn(E,z,W,ie,ge,_e,ve){if(E=E.h&&E.h[W]){if(ie=Xn(E),ie&2?ie=E:(_e=oe(E,xn),J(ie,_e),Object.freeze(_e),ie=_e),Le(z),ve=ie==null?Xe:Js([]),ie!=null){for(_e=!!ie.length,E=0;E<ie.length;E++){var Be=ie[E];_e=_e&&!(Xn(Be.o)&2),ve[E]=Be.o}_e=(_e?8:0)|1,E=Xn(ve),(E&_e)!==_e&&(Object.isFrozen(ve)&&(ve=Array.prototype.slice.call(ve)),fn(ve,E|_e)),z.h||(z.h={}),z.h[W]=ie}else z.h&&(z.h[W]=void 0);be(z,W,ve,ge)}else pe(z,W,qt(ie,_e,ve),ge)}function xn(E){return Xn(E.o)&2||(E=In(E,!0),Gr(E.o,2)),E}function In(E,z){var W=E.o,ie=[];Gr(ie,16);var ge=E.constructor.h;if(ge&&ie.push(ge),ge=E.B,ge){ie.length=W.length,ie.fill(void 0,ie.length,W.length);var _e={};ie[ie.length-1]=_e}Xn(W)&128&&me(ie),z=z||E.C()?J:Pi,_e=E.constructor,pt=ie,ie=new _e(ie),pt=void 0,E.R&&(ie.R=E.R.slice()),_e=!!(Xn(W)&16);for(var ve=ge?W.length-1:W.length,Be=0;Be<ve;Be++)Hn(E,ie,Be-E.G,W[Be],!1,_e,z);if(ge)for(var Ye in ge)Hn(E,ie,+Ye,ge[Ye],!0,_e,z);return ie}function Jn(E,z,W){E==null&&(E=pt),pt=void 0;var ie=this.constructor.i||0,ge=0<ie,_e=this.constructor.h,ve=!1;if(E==null){E=_e?[_e]:[];var Be=48,Ye=!0;ge&&(ie=0,Be|=128),fn(E,Be)}else{if(!Array.isArray(E)||_e&&_e!==E[0])throw Error();var xt=Be=Gr(E,0);if((Ye=(16&xt)!==0)&&((ve=(32&xt)!==0)||(xt|=32)),ge){if(128&xt)ie=0;else if(0<E.length){var Ot=E[E.length-1];if(Re(Ot)&&"g"in Ot){ie=0,xt|=128,delete Ot.g;var Cn=!0,cn;for(cn in Ot){Cn=!1;break}Cn&&E.pop()}}}else if(128&xt)throw Error();Be!==xt&&fn(E,xt)}this.G=(_e?0:-1)-ie,this.h=void 0,this.o=E;e:{if(_e=this.o.length,ie=_e-1,_e&&(_e=this.o[ie],Re(_e))){this.B=_e,this.i=ie-this.G;break e}z!==void 0&&-1<z?(this.i=Math.max(z,ie+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!ge&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(W){z=Ye&&!ve&&!0,ge=this.i;var Pt;for(Ye=0;Ye<W.length;Ye++)ve=W[Ye],ve<ge?(ve+=this.G,(ie=E[ve])?Dn(ie,z):E[ve]=Xe):(Pt||(Pt=De(this)),(ie=Pt[ve])?Dn(ie,z):Pt[ve]=Xe)}}Jn.prototype.toJSON=function(){return Sn(this.o,nn,ln)},Jn.prototype.C=function(){return!!(Xn(this.o)&2)};function Dn(E,z){if(Array.isArray(E)){var W=Xn(E),ie=1;!z||W&2||(ie|=16),(W&ie)!==ie&&fn(E,W|ie)}}Jn.prototype.ja=ue,Jn.prototype.toString=function(){return this.o.toString()};function Wn(E,z,W){if(W){var ie={},ge;for(ge in W){var _e=W[ge],ve=_e.qa;ve||(ie.J=_e.wa||_e.oa.W,_e.ia?(ie.aa=eh(_e.ia),ve=function(Be){return function(Ye,xt,Ot){return Be.J(Ye,xt,Ot,Be.aa)}}(ie)):_e.ka?(ie.Z=Af(_e.da.P,_e.ka),ve=function(Be){return function(Ye,xt,Ot){return Be.J(Ye,xt,Ot,Be.Z)}}(ie)):ve=ie.J,_e.qa=ve),ve(z,E,_e.da),ie={J:ie.J,aa:ie.aa,Z:ie.Z}}}Ks(z,E)}var vn=Symbol();function Ur(E,z,W){return E[vn]||(E[vn]=function(ie,ge){return z(ie,ge,W)})}function pr(E){var z=E[vn];if(!z){var W=si(E);z=function(ie,ge){return Pa(ie,ge,W)},E[vn]=z}return z}function Br(E){var z=E.ia;if(z)return pr(z);if(z=E.va)return Ur(E.da.P,z,E.ka)}function ii(E){var z=Br(E),W=E.da,ie=E.oa.U;return z?function(ge,_e){return ie(ge,_e,W,z)}:function(ge,_e){return ie(ge,_e,W)}}function ir(E,z){var W=E[z];return typeof W=="function"&&W.length===0&&(W=W(),E[z]=W),Array.isArray(W)&&(Ls in W||Ma in W||0<W.length&&typeof W[0]=="function")?W:void 0}function as(E,z,W,ie,ge,_e){z.P=E[0];var ve=1;if(E.length>ve&&typeof E[ve]!="number"){var Be=E[ve++];W(z,Be)}for(;ve<E.length;){W=E[ve++];for(var Ye=ve+1;Ye<E.length&&typeof E[Ye]!="number";)Ye++;switch(Be=E[ve++],Ye-=ve,Ye){case 0:ie(z,W,Be);break;case 1:(Ye=ir(E,ve))?(ve++,ge(z,W,Be,Ye)):ie(z,W,Be,E[ve++]);break;case 2:Ye=ve++,Ye=ir(E,Ye),ge(z,W,Be,Ye,E[ve++]);break;case 3:_e(z,W,Be,E[ve++],E[ve++],E[ve++]);break;case 4:_e(z,W,Be,E[ve++],E[ve++],E[ve++],E[ve++]);break;default:throw Error("unexpected number of binary field arguments: "+Ye)}}return z}var Ea=Symbol();function eh(E){var z=E[Ea];if(!z){var W=$n(E);z=function(ie,ge){return Pp(ie,ge,W)},E[Ea]=z}return z}function Af(E,z){var W=E[Ea];return W||(W=function(ie,ge){return Wn(ie,ge,z)},E[Ea]=W),W}var Ma=Symbol();function th(E,z){E.push(z)}function ul(E,z,W){E.push(z,W.W)}function nh(E,z,W,ie){var ge=eh(ie),_e=$n(ie).P,ve=W.W;E.push(z,function(Be,Ye,xt){return ve(Be,Ye,xt,_e,ge)})}function Oo(E,z,W,ie,ge,_e){var ve=Af(ie,_e),Be=W.W;E.push(z,function(Ye,xt,Ot){return Be(Ye,xt,Ot,ie,ve)})}function $n(E){var z=E[Ma];return z||(z=as(E,E[Ma]=[],th,ul,nh,Oo),Ls in E&&Ma in E&&(E.length=0),z)}var Ls=Symbol();function hl(E,z){E[0]=z}function sc(E,z,W,ie){var ge=W.U;E[z]=ie?function(_e,ve,Be){return ge(_e,ve,Be,ie)}:ge}function Ra(E,z,W,ie,ge){var _e=W.U,ve=pr(ie),Be=si(ie).P;E[z]=function(Ye,xt,Ot){return _e(Ye,xt,Ot,Be,ve,ge)}}function fy(E,z,W,ie,ge,_e,ve){var Be=W.U,Ye=Ur(ie,ge,_e);E[z]=function(xt,Ot,Cn){return Be(xt,Ot,Cn,ie,Ye,ve)}}function si(E){var z=E[Ls];return z||(z=as(E,E[Ls]={},hl,sc,Ra,fy),Ls in E&&Ma in E&&(E.length=0),z)}function Pa(E,z,W){for(;xr(z)&&z.i!=4;){var ie=z.l,ge=W[ie];if(!ge){var _e=W[0];_e&&(_e=_e[ie])&&(ge=W[ie]=ii(_e))}if(!ge||!ge(z,E,ie)){ge=z,ie=E,_e=ge.j,Mn(ge);var ve=ge;if(!ve.ca){if(ge=ve.h.h-_e,ve.h.h=_e,ve=ve.h,ge==0)ge=zt();else{if(_e=qe(ve,ge),ve.S&&ve.m)ge=ve.i.subarray(_e,_e+ge);else{ve=ve.i;var Be=_e;ge=_e+ge,ge=Be===ge?Te():Ee?ve.slice(Be,ge):new Uint8Array(ve.subarray(Be,ge))}ge=ge.length==0?zt():new $t(ge,$e)}(_e=ie.R)?_e.push(ge):ie.R=[ge]}}}return E}function Pp(E,z,W){for(var ie=W.length,ge=ie%2==1,_e=ge?1:0;_e<ie;_e+=2)(0,W[_e+1])(z,E,W[_e]);Wn(E,z,ge?W[0]:void 0)}function ka(E,z){return{U:E,W:z}}var bs=ka(function(E,z,W){if(E.i!==5)return!1;E=E.h;var ie=E.i,ge=E.h,_e=ie[ge],ve=ie[ge+1],Be=ie[ge+2];return ie=ie[ge+3],Se(E,E.h+4),ve=(_e<<0|ve<<8|Be<<16|ie<<24)>>>0,E=2*(ve>>31)+1,_e=ve>>>23&255,ve&=8388607,pe(z,W,_e==255?ve?NaN:1/0*E:_e==0?E*Math.pow(2,-149)*ve:E*Math.pow(2,_e-150)*(ve+Math.pow(2,23))),!0},function(E,z,W){if(z=Pe(z,W),z!=null){kt(E.h,8*W+5),E=E.h;var ie=+z;ie===0?0<1/ie?Oe=le=0:(le=0,Oe=2147483648):isNaN(ie)?(le=0,Oe=2147483647):(ie=(W=0>ie?-2147483648:0)?-ie:ie,34028234663852886e22<ie?(le=0,Oe=(W|2139095040)>>>0):11754943508222875e-54>ie?(ie=Math.round(ie/Math.pow(2,-149)),le=0,Oe=(W|ie)>>>0):(z=Math.floor(Math.log(ie)/Math.LN2),ie*=Math.pow(2,-z),ie=Math.round(8388608*ie),16777216<=ie&&++z,le=0,Oe=(W|z+127<<23|ie&8388607)>>>0)),W=Oe,E.h.push(W>>>0&255),E.h.push(W>>>8&255),E.h.push(W>>>16&255),E.h.push(W>>>24&255)}}),Kc=ka(function(E,z,W){if(E.i!==0)return!1;var ie=E.h,ge=0,_e=E=0,ve=ie.i,Be=ie.h;do{var Ye=ve[Be++];ge|=(Ye&127)<<_e,_e+=7}while(32>_e&&Ye&128);for(32<_e&&(E|=(Ye&127)>>4),_e=3;32>_e&&Ye&128;_e+=7)Ye=ve[Be++],E|=(Ye&127)<<_e;if(Se(ie,Be),128>Ye)ie=ge>>>0,Ye=E>>>0,(E=Ye&2147483648)&&(ie=~ie+1>>>0,Ye=~Ye>>>0,ie==0&&(Ye=Ye+1>>>0)),ie=4294967296*Ye+(ie>>>0);else throw ae();return pe(z,W,E?-ie:ie),!0},function(E,z,W){z=q(z,W),z!=null&&(typeof z=="string"&&Vt(z),z!=null&&(kt(E.h,8*W),typeof z=="number"?(E=E.h,vt(z),Dt(E,Oe,le)):(W=Vt(z),Dt(E.h,W.i,W.h))))}),Uo=ka(function(E,z,W){return E.i!==0?!1:(pe(z,W,je(E.h)),!0)},function(E,z,W){if(z=q(z,W),z!=null&&z!=null)if(kt(E.h,8*W),E=E.h,W=z,0<=W)kt(E,W);else{for(z=0;9>z;z++)E.h.push(W&127|128),W>>=7;E.h.push(1)}}),oc=ka(function(E,z,W){if(E.i!==2)return!1;var ie=je(E.h)>>>0;E=E.h;var ge=qe(E,ie);if(E=E.i,Et){var _e=E,ve;(ve=It)||(ve=It=new TextDecoder("utf-8",{fatal:!0})),E=ge+ie,_e=ge===0&&E===_e.length?_e:_e.subarray(ge,E);try{var Be=ve.decode(_e)}catch(Cn){if(st===void 0){try{ve.decode(new Uint8Array([128]))}catch{}try{ve.decode(new Uint8Array([97])),st=!0}catch{st=!1}}throw!st&&(It=void 0),Cn}}else{Be=ge,ie=Be+ie,ge=[];for(var Ye=null,xt,Ot;Be<ie;)xt=E[Be++],128>xt?ge.push(xt):224>xt?Be>=ie?Ze():(Ot=E[Be++],194>xt||(Ot&192)!==128?(Be--,Ze()):ge.push((xt&31)<<6|Ot&63)):240>xt?Be>=ie-1?Ze():(Ot=E[Be++],(Ot&192)!==128||xt===224&&160>Ot||xt===237&&160<=Ot||((_e=E[Be++])&192)!==128?(Be--,Ze()):ge.push((xt&15)<<12|(Ot&63)<<6|_e&63)):244>=xt?Be>=ie-2?Ze():(Ot=E[Be++],(Ot&192)!==128||(xt<<28)+(Ot-144)>>30||((_e=E[Be++])&192)!==128||((ve=E[Be++])&192)!==128?(Be--,Ze()):(xt=(xt&7)<<18|(Ot&63)<<12|(_e&63)<<6|ve&63,xt-=65536,ge.push((xt>>10&1023)+55296,(xt&1023)+56320))):Ze(),8192<=ge.length&&(Ye=ut(Ye,ge),ge.length=0);Be=ut(Ye,ge)}return pe(z,W,Be),!0},function(E,z,W){if(z=q(z,W),z!=null){var ie=!1;if(ie=ie===void 0?!1:ie,hn){if(ie&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(z))throw Error("Found an unpaired surrogate");z=(Lt||(Lt=new TextEncoder)).encode(z)}else{for(var ge=0,_e=new Uint8Array(3*z.length),ve=0;ve<z.length;ve++){var Be=z.charCodeAt(ve);if(128>Be)_e[ge++]=Be;else{if(2048>Be)_e[ge++]=Be>>6|192;else{if(55296<=Be&&57343>=Be){if(56319>=Be&&ve<z.length){var Ye=z.charCodeAt(++ve);if(56320<=Ye&&57343>=Ye){Be=1024*(Be-55296)+Ye-56320+65536,_e[ge++]=Be>>18|240,_e[ge++]=Be>>12&63|128,_e[ge++]=Be>>6&63|128,_e[ge++]=Be&63|128;continue}else ve--}if(ie)throw Error("Found an unpaired surrogate");Be=65533}_e[ge++]=Be>>12|224,_e[ge++]=Be>>6&63|128}_e[ge++]=Be&63|128}}z=ge===_e.length?_e:_e.subarray(0,ge)}kt(E.h,8*W+2),kt(E.h,z.length),Xi(E,E.h.end()),Xi(E,z)}}),ac=ka(function(E,z,W,ie,ge){if(E.i!==2)return!1;z=dt(z,W,ie),W=E.h.j,ie=je(E.h)>>>0;var _e=E.h.h+ie,ve=_e-W;if(0>=ve&&(E.h.j=_e,ge(z,E,void 0,void 0,void 0),ve=_e-E.h.h),ve)throw Error("Message parsing ended unexpectedly. Expected to read "+(ie+" bytes, instead read "+(ie-ve)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return E.h.h=_e,E.h.j=W,!0},function(E,z,W,ie,ge){if(z=nt(z,ie,W),z!=null)for(ie=0;ie<z.length;ie++){var _e=E;kt(_e.h,8*W+2);var ve=_e.h.end();Xi(_e,ve),ve.push(_e.i),_e=ve,ge(z[ie],E),ve=E;var Be=_e.pop();for(Be=ve.i+ve.h.length()-Be;127<Be;)_e.push(Be&127|128),Be>>>=7,ve.i++;_e.push(Be),ve.i++}});function Oi(E){return function(z,W){e:{if(_r.length){var ie=_r.pop();ie.setOptions(W),wt(ie.h,z,W),z=ie}else z=new En(z,W);try{var ge=si(E),_e=Pa(new ge.P,z,ge);break e}finally{ge=z.h,ge.i=null,ge.m=!1,ge.l=0,ge.j=0,ge.h=0,ge.S=!1,z.l=-1,z.i=-1,100>_r.length&&_r.push(z)}_e=void 0}return _e}}function As(E){return function(){var z=new Or;Pp(this,z,$n(E)),Xi(z,z.h.end());for(var W=new Uint8Array(z.i),ie=z.j,ge=ie.length,_e=0,ve=0;ve<ge;ve++){var Be=ie[ve];W.set(Be,_e),_e+=Be.length}return z.j=[W],W}}function aa(E){Jn.call(this,E)}w(aa,Jn);var rh=[aa,1,Uo,2,bs,3,oc,4,oc];aa.prototype.l=As(rh);function lc(E){Jn.call(this,E,-1,ih)}w(lc,Jn),lc.prototype.addClassification=function(E,z){return dt(this,1,aa,E,z),this};var ih=[1],Ds=Oi([lc,1,ac,rh]);function fl(E){Jn.call(this,E)}w(fl,Jn);var Zs=[fl,1,bs,2,bs,3,bs,4,bs,5,bs];fl.prototype.l=As(Zs);function sh(E){Jn.call(this,E,-1,Ss)}w(sh,Jn);var Ss=[1],cc=Oi([sh,1,ac,Zs]);function zo(E){Jn.call(this,E)}w(zo,Jn);var Ho=[zo,1,bs,2,bs,3,bs,4,bs,5,bs,6,Kc],oh=Oi(Ho);zo.prototype.l=As(Ho);function qi(E,z,W){if(W=E.createShader(W===0?E.VERTEX_SHADER:E.FRAGMENT_SHADER),E.shaderSource(W,z),E.compileShader(W),!E.getShaderParameter(W,E.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+E.getShaderInfoLog(W));return W}function Ba(E){return nt(E,aa,1).map(function(z){var W=q(z,1);return{index:W??0,score:Ct(z,2),label:q(z,3)!=null?Mt(q(z,3),""):void 0,displayName:q(z,4)!=null?Mt(q(z,4),""):void 0}})}function uc(E){return{x:Ct(E,1),y:Ct(E,2),z:Ct(E,3),visibility:Pe(E,4)!=null?Ct(E,4):void 0}}function Ia(E){return E.map(function(z){return nt(cc(z),fl,1).map(uc)})}function La(E,z){this.i=E,this.h=z,this.m=0}function ls(E,z,W){return Qs(E,z),typeof E.h.canvas.transferToImageBitmap=="function"?Promise.resolve(E.h.canvas.transferToImageBitmap()):W?Promise.resolve(E.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(E.h.canvas):(E.j===void 0&&(E.j=document.createElement("canvas")),new Promise(function(ie){E.j.height=E.h.canvas.height,E.j.width=E.h.canvas.width,E.j.getContext("2d",{}).drawImage(E.h.canvas,0,0,E.h.canvas.width,E.h.canvas.height),ie(E.j)}))}function Qs(E,z){var W=E.h;if(E.s===void 0){var ie=qi(W,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),ge=qi(W,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),_e=W.createProgram();if(W.attachShader(_e,ie),W.attachShader(_e,ge),W.linkProgram(_e),!W.getProgramParameter(_e,W.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+W.getProgramInfoLog(_e));ie=E.s=_e,W.useProgram(ie),ge=W.getUniformLocation(ie,"sampler0"),E.l={O:W.getAttribLocation(ie,"aVertex"),N:W.getAttribLocation(ie,"aTex"),xa:ge},E.v=W.createBuffer(),W.bindBuffer(W.ARRAY_BUFFER,E.v),W.enableVertexAttribArray(E.l.O),W.vertexAttribPointer(E.l.O,2,W.FLOAT,!1,0,0),W.bufferData(W.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),E.u=W.createBuffer(),W.bindBuffer(W.ARRAY_BUFFER,E.u),W.enableVertexAttribArray(E.l.N),W.vertexAttribPointer(E.l.N,2,W.FLOAT,!1,0,0),W.bufferData(W.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),W.uniform1i(ge,0)}ie=E.l,W.useProgram(E.s),W.canvas.width=z.width,W.canvas.height=z.height,W.viewport(0,0,z.width,z.height),W.activeTexture(W.TEXTURE0),E.i.bindTexture2d(z.glName),W.enableVertexAttribArray(ie.O),W.bindBuffer(W.ARRAY_BUFFER,E.v),W.vertexAttribPointer(ie.O,2,W.FLOAT,!1,0,0),W.enableVertexAttribArray(ie.N),W.bindBuffer(W.ARRAY_BUFFER,E.u),W.vertexAttribPointer(ie.N,2,W.FLOAT,!1,0,0),W.bindFramebuffer(W.DRAW_FRAMEBUFFER?W.DRAW_FRAMEBUFFER:W.FRAMEBUFFER,null),W.clearColor(0,0,0,0),W.clear(W.COLOR_BUFFER_BIT),W.colorMask(!0,!0,!0,!0),W.drawArrays(W.TRIANGLE_FAN,0,4),W.disableVertexAttribArray(ie.O),W.disableVertexAttribArray(ie.N),W.bindBuffer(W.ARRAY_BUFFER,null),E.i.bindTexture2d(0)}function eo(E){this.h=E}var hc=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Sf(E,z){return z+E}function jo(E,z){window[E]=z}function Da(E){var z=document.createElement("script");return z.setAttribute("src",E),z.setAttribute("crossorigin","anonymous"),new Promise(function(W){z.addEventListener("load",function(){W()},!1),z.addEventListener("error",function(){W()},!1),document.body.appendChild(z)})}function ah(){return F(function(E){switch(E.h){case 1:return E.s=2,R(E,WebAssembly.instantiate(hc),4);case 4:E.h=3,E.s=0;break;case 2:return E.s=0,E.l=null,E.return(!1);case 3:return E.return(!0)}})}function fc(E){if(this.h=E,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=E&&E.locateFile||Sf,typeof window=="object")var z=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")z=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=z,E.options){z=a(Object.keys(E.options));for(var W=z.next();!W.done;W=z.next()){W=W.value;var ie=E.options[W].default;ie!==void 0&&(this.l[W]=typeof ie=="function"?ie():ie)}}}n=fc.prototype,n.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function lh(E){var z,W,ie,ge,_e,ve,Be,Ye,xt,Ot,Cn;return F(function(cn){switch(cn.h){case 1:return E.ga?(z=E.h.files===void 0?[]:typeof E.h.files=="function"?E.h.files(E.l):E.h.files,R(cn,ah(),2)):cn.return();case 2:if(W=cn.i,typeof window=="object")return jo("createMediapipeSolutionsWasm",{locateFile:E.locateFile}),jo("createMediapipeSolutionsPackedAssets",{locateFile:E.locateFile}),ve=z.filter(function(Pt){return Pt.data!==void 0}),Be=z.filter(function(Pt){return Pt.data===void 0}),Ye=Promise.all(ve.map(function(Pt){var en=dc(E,Pt.url);if(Pt.path!==void 0){var sn=Pt.path;en=en.then(function(wr){return E.overrideFile(sn,wr),Promise.resolve(wr)})}return en})),xt=Promise.all(Be.map(function(Pt){return Pt.simd===void 0||Pt.simd&&W||!Pt.simd&&!W?Da(E.locateFile(Pt.url,E.ha)):Promise.resolve()})).then(function(){var Pt,en,sn;return F(function(wr){if(wr.h==1)return Pt=window.createMediapipeSolutionsWasm,en=window.createMediapipeSolutionsPackedAssets,sn=E,R(wr,Pt(en),2);sn.i=wr.i,wr.h=0})}),Ot=function(){return F(function(Pt){return E.h.graph&&E.h.graph.url?Pt=R(Pt,dc(E,E.h.graph.url),0):(Pt.h=0,Pt=void 0),Pt})}(),R(cn,Promise.all([xt,Ye,Ot]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return ie=z.filter(function(Pt){return Pt.simd===void 0||Pt.simd&&W||!Pt.simd&&!W}).map(function(Pt){return E.locateFile(Pt.url,E.ha)}),importScripts.apply(null,l(ie)),ge=E,R(cn,createMediapipeSolutionsWasm(Module),6);case 6:ge.i=cn.i,E.m=new OffscreenCanvas(1,1),E.i.canvas=E.m,_e=E.i.GL.createContext(E.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),E.i.GL.makeContextCurrent(_e),cn.h=4;break;case 7:if(E.m=document.createElement("canvas"),Cn=E.m.getContext("webgl2",{}),!Cn&&(Cn=E.m.getContext("webgl",{}),!Cn))return alert("Failed to create WebGL canvas context when passing video frame."),cn.return();E.K=Cn,E.i.canvas=E.m,E.i.createContext(E.m,!0,!0,{});case 4:E.j=new E.i.SolutionWasm,E.ga=!1,cn.h=0}})}function kp(E){var z,W,ie,ge,_e,ve,Be,Ye;return F(function(xt){if(xt.h==1){if(E.h.graph&&E.h.graph.url&&E.fa===E.h.graph.url)return xt.return();if(E.u=!0,!E.h.graph||!E.h.graph.url){xt.h=2;return}return E.fa=E.h.graph.url,R(xt,dc(E,E.h.graph.url),3)}for(xt.h!=2&&(z=xt.i,E.j.loadGraph(z)),W=a(Object.keys(E.D)),ie=W.next();!ie.done;ie=W.next())ge=ie.value,E.j.overrideFile(ge,E.D[ge]);if(E.D={},E.h.listeners)for(_e=a(E.h.listeners),ve=_e.next();!ve.done;ve=_e.next())Be=ve.value,Ip(E,Be);Ye=E.l,E.l={},E.setOptions(Ye),xt.h=0})}n.reset=function(){var E=this;return F(function(z){E.j&&(E.j.reset(),E.s={},E.v={}),z.h=0})},n.setOptions=function(E,z){var W=this;if(z=z||this.h.options){for(var ie=[],ge=[],_e={},ve=a(Object.keys(E)),Be=ve.next();!Be.done;_e={X:_e.X,Y:_e.Y},Be=ve.next())if(Be=Be.value,!(Be in this.l&&this.l[Be]===E[Be])){this.l[Be]=E[Be];var Ye=z[Be];Ye!==void 0&&(Ye.onChange&&(_e.X=Ye.onChange,_e.Y=E[Be],ie.push(function(xt){return function(){var Ot;return F(function(Cn){if(Cn.h==1)return R(Cn,xt.X(xt.Y),2);Ot=Cn.i,Ot===!0&&(W.u=!0),Cn.h=0})}}(_e))),Ye.graphOptionXref&&(Be=Object.assign({},{calculatorName:"",calculatorIndex:0},Ye.graphOptionXref,{valueNumber:Ye.type===1?E[Be]:0,valueBoolean:Ye.type===0?E[Be]:!1,valueString:Ye.type===2?E[Be]:""}),ge.push(Be)))}(ie.length!==0||ge.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(ge),this.F=(this.F===void 0?[]:this.F).concat(ie))}};function Bp(E){var z,W,ie,ge,_e,ve,Be;return F(function(Ye){switch(Ye.h){case 1:if(!E.u)return Ye.return();if(!E.F){Ye.h=2;break}z=a(E.F),W=z.next();case 3:if(W.done){Ye.h=5;break}return ie=W.value,R(Ye,ie(),4);case 4:W=z.next(),Ye.h=3;break;case 5:E.F=void 0;case 2:if(E.H){for(ge=new E.i.GraphOptionChangeRequestList,_e=a(E.H),ve=_e.next();!ve.done;ve=_e.next())Be=ve.value,ge.push_back(Be);E.j.changeOptions(ge),ge.delete(),E.H=void 0}E.u=!1,Ye.h=0}})}n.initialize=function(){var E=this;return F(function(z){return z.h==1?R(z,lh(E),2):z.h!=3?R(z,kp(E),3):R(z,Bp(E),0)})};function dc(E,z){var W,ie;return F(function(ge){return z in E.L?ge.return(E.L[z]):(W=E.locateFile(z,""),ie=fetch(W).then(function(_e){return _e.arrayBuffer()}),E.L[z]=ie,ge.return(ie))})}n.overrideFile=function(E,z){this.j?this.j.overrideFile(E,z):this.D[E]=z},n.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},n.send=function(E,z){var W=this,ie,ge,_e,ve,Be,Ye,xt,Ot,Cn;return F(function(cn){switch(cn.h){case 1:return W.h.inputs?(ie=1e3*(z??performance.now()),R(cn,W.I,2)):cn.return();case 2:return R(cn,W.initialize(),3);case 3:for(ge=new W.i.PacketDataList,_e=a(Object.keys(E)),ve=_e.next();!ve.done;ve=_e.next())if(Be=ve.value,Ye=W.h.inputs[Be]){e:{var Pt=E[Be];switch(Ye.type){case"video":var en=W.s[Ye.stream];if(en||(en=new La(W.i,W.K),W.s[Ye.stream]=en),en.m===0&&(en.m=en.i.createTexture()),typeof HTMLVideoElement<"u"&&Pt instanceof HTMLVideoElement)var sn=Pt.videoWidth,wr=Pt.videoHeight;else typeof HTMLImageElement<"u"&&Pt instanceof HTMLImageElement?(sn=Pt.naturalWidth,wr=Pt.naturalHeight):(sn=Pt.width,wr=Pt.height);wr={glName:en.m,width:sn,height:wr},sn=en.h,sn.canvas.width=wr.width,sn.canvas.height=wr.height,sn.activeTexture(sn.TEXTURE0),en.i.bindTexture2d(en.m),sn.texImage2D(sn.TEXTURE_2D,0,sn.RGBA,sn.RGBA,sn.UNSIGNED_BYTE,Pt),en.i.bindTexture2d(0),en=wr;break e;case"detections":for(en=W.s[Ye.stream],en||(en=new eo(W.i),W.s[Ye.stream]=en),en.data||(en.data=new en.h.DetectionListData),en.data.reset(Pt.length),wr=0;wr<Pt.length;++wr){sn=Pt[wr];var sr=en.data,_i=sr.setBoundingBox,Cs=wr,Ui=sn.la,Zn=new zo;if(rt(Zn,1,Ui.ra),rt(Zn,2,Ui.sa),rt(Zn,3,Ui.height),rt(Zn,4,Ui.width),rt(Zn,5,Ui.rotation),pe(Zn,6,Ui.pa),Ui=Zn.l(),_i.call(sr,Cs,Ui),sn.ea)for(sr=0;sr<sn.ea.length;++sr){Zn=sn.ea[sr],_i=en.data,Cs=_i.addNormalizedLandmark,Ui=wr,Zn=Object.assign({},Zn,{visibility:Zn.visibility?Zn.visibility:0});var ki=new fl;rt(ki,1,Zn.x),rt(ki,2,Zn.y),rt(ki,3,Zn.z),Zn.visibility&&rt(ki,4,Zn.visibility),Zn=ki.l(),Cs.call(_i,Ui,Zn)}if(sn.ba)for(sr=0;sr<sn.ba.length;++sr)_i=en.data,Cs=_i.addClassification,Ui=wr,Zn=sn.ba[sr],ki=new aa,rt(ki,2,Zn.score),Zn.index&&pe(ki,1,Zn.index),Zn.label&&pe(ki,3,Zn.label),Zn.displayName&&pe(ki,4,Zn.displayName),Zn=ki.l(),Cs.call(_i,Ui,Zn)}en=en.data;break e;default:en={}}}switch(xt=en,Ot=Ye.stream,Ye.type){case"video":ge.pushTexture2d(Object.assign({},xt,{stream:Ot,timestamp:ie}));break;case"detections":Cn=xt,Cn.stream=Ot,Cn.timestamp=ie,ge.pushDetectionList(Cn);break;default:throw Error("Unknown input config type: '"+Ye.type+"'")}}return W.j.send(ge),R(cn,W.I,4);case 4:ge.delete(),cn.h=0}})};function ch(E,z,W){var ie,ge,_e,ve,Be,Ye,xt,Ot,Cn,cn,Pt,en,sn,wr;return F(function(sr){switch(sr.h){case 1:if(!W)return sr.return(z);for(ie={},ge=0,_e=a(Object.keys(W)),ve=_e.next();!ve.done;ve=_e.next())Be=ve.value,Ye=W[Be],typeof Ye!="string"&&Ye.type==="texture"&&z[Ye.stream]!==void 0&&++ge;1<ge&&(E.M=!1),xt=a(Object.keys(W)),ve=xt.next();case 2:if(ve.done){sr.h=4;break}if(Ot=ve.value,Cn=W[Ot],typeof Cn=="string")return sn=ie,wr=Ot,R(sr,Cf(E,Ot,z[Cn]),14);if(cn=z[Cn.stream],Cn.type==="detection_list"){if(cn){for(var _i=cn.getRectList(),Cs=cn.getLandmarksList(),Ui=cn.getClassificationsList(),Zn=[],ki=0;ki<_i.size();++ki){var to=oh(_i.get(ki)),pc=Ct(to,1),hh=Ct(to,2),mc=Ct(to,3),Fa=Ct(to,4),gc=Ct(to,5,0),Jc=void 0;Jc=Jc===void 0?0:Jc,to={la:{ra:pc,sa:hh,height:mc,width:Fa,rotation:gc,pa:Mt(q(to,6),Jc)},ea:nt(cc(Cs.get(ki)),fl,1).map(uc),ba:Ba(Ds(Ui.get(ki)))},Zn.push(to)}_i=Zn}else _i=[];ie[Ot]=_i,sr.h=7;break}if(Cn.type==="proto_list"){if(cn){for(_i=Array(cn.size()),Cs=0;Cs<cn.size();Cs++)_i[Cs]=cn.get(Cs);cn.delete()}else _i=[];ie[Ot]=_i,sr.h=7;break}if(cn===void 0){sr.h=3;break}if(Cn.type==="float_list"){ie[Ot]=cn,sr.h=7;break}if(Cn.type==="proto"){ie[Ot]=cn,sr.h=7;break}if(Cn.type!=="texture")throw Error("Unknown output config type: '"+Cn.type+"'");return Pt=E.v[Ot],Pt||(Pt=new La(E.i,E.K),E.v[Ot]=Pt),R(sr,ls(Pt,cn,E.M),13);case 13:en=sr.i,ie[Ot]=en;case 7:Cn.transform&&ie[Ot]&&(ie[Ot]=Cn.transform(ie[Ot])),sr.h=3;break;case 14:sn[wr]=sr.i;case 3:ve=xt.next(),sr.h=2;break;case 4:return sr.return(ie)}})}function Cf(E,z,W){var ie;return F(function(ge){return typeof W=="number"||W instanceof Uint8Array||W instanceof E.i.Uint8BlobList?ge.return(W):W instanceof E.i.Texture2dDataOut?(ie=E.v[z],ie||(ie=new La(E.i,E.K),E.v[z]=ie),ge.return(ls(ie,W,E.M))):ge.return(void 0)})}function Ip(E,z){for(var W=z.name||"$",ie=[].concat(l(z.wants)),ge=new E.i.StringList,_e=a(z.wants),ve=_e.next();!ve.done;ve=_e.next())ge.push_back(ve.value);_e=E.i.PacketListener.implement({onResults:function(Be){for(var Ye={},xt=0;xt<z.wants.length;++xt)Ye[ie[xt]]=Be.get(xt);var Ot=E.listeners[W];Ot&&(E.I=ch(E,Ye,z.outs).then(function(Cn){Cn=Ot(Cn);for(var cn=0;cn<z.wants.length;++cn){var Pt=Ye[ie[cn]];typeof Pt=="object"&&Pt.hasOwnProperty&&Pt.hasOwnProperty("delete")&&Pt.delete()}Cn&&(E.I=Cn)}))}}),E.j.attachMultiListener(ge,_e),ge.delete()}n.onResults=function(E,z){this.listeners[z||"$"]=E},ee("Solution",fc),ee("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Tf(E){return E===void 0&&(E=0),E===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function uh(E){var z=this;E=E||{},this.h=new fc({locateFile:E.locateFile,files:function(W){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Tf(W.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Ia},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Ia},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(W){return W.map(function(ie){return Ba(Ds(ie))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(W){var ie,ge,_e;return F(function(ve){return ve.h==1?(ie=Tf(W),ge="third_party/mediapipe/modules/hand_landmark/"+ie,R(ve,dc(z.h,ie),2)):(_e=ve.i,z.h.overrideFile(ge,_e),ve.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}n=uh.prototype,n.close=function(){return this.h.close(),Promise.resolve()},n.onResults=function(E){this.h.onResults(E)},n.initialize=function(){var E=this;return F(function(z){return R(z,E.h.initialize(),0)})},n.reset=function(){this.h.reset()},n.send=function(E){var z=this;return F(function(W){return R(W,z.h.send(E),0)})},n.setOptions=function(E){this.h.setOptions(E)},ee("Hands",uh),ee("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),ee("VERSION","0.4.1675469240")}).call(RE)),RE}var KMe=YMe();const JMe=()=>{const n=L.useRef(null),e=L.useRef(null),t=L.useRef(null),[r,i]=L.useState("Press Start to detect gestures"),[s,o]=L.useState(!1);L.useEffect(()=>{const h=new KMe.Hands({locateFile:d=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${d}`});return h.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),h.onResults(d=>{const m=e.current.getContext("2d");if(m.clearRect(0,0,e.current.width,e.current.height),d.multiHandLandmarks.length>0){const g=d.multiHandLandmarks[0];a(g,m);const v=l(g);i(v)}else i("No hand detected")}),s&&n.current&&(t.current=new qMe.Camera(n.current,{onFrame:async()=>{await h.send({image:n.current})},width:640,height:480}),t.current.start()),()=>{t.current&&t.current.stop()}},[s]);const a=(h,d)=>{h.forEach(m=>{d.beginPath(),d.arc(m.x*e.current.width,m.y*e.current.height,5,0,2*Math.PI),d.fillStyle="red",d.fill()})},l=h=>{const[d,m,g,v,w]=h;return m.y<g.y&&g.y<v.y&&v.y<w.y?"अ":d.x<m.x&&d.y<m.y?"आ":d.x>w.x?"म":"Unknown Gesture"},c=()=>{o(!0)},u=()=>{o(!1),i("Press Start to detect gestures")};return C.jsxs("div",{className:"flex flex-col items-center justify-center bg-gradient-to-b from-blue-400 via-cyan-200 to-white p-4",children:[C.jsx("div",{className:"h-25"}),C.jsxs("div",{className:"relative",children:[C.jsx("video",{ref:n,className:"hidden"}),C.jsx("canvas",{ref:e,width:"640",height:"480",className:"border-2 border-gray-300 rounded-lg shadow-md"})]}),C.jsx("p",{className:"mt-4 text-lg font-bold text-blue-600",children:r}),C.jsxs("div",{className:"mt-4 space-x-4",children:[C.jsx("button",{onClick:c,disabled:s,className:`px-6 py-2 rounded-lg text-white font-semibold transition ${s?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:"Start"}),C.jsx("button",{onClick:u,disabled:!s,className:`px-6 py-2 rounded-lg text-white font-semibold transition ${s?"bg-red-500 hover:bg-red-600":"bg-gray-400 cursor-not-allowed"}`,children:"Stop"})]})]})},ZMe=()=>{const[n,e]=L.useState(!1),[t,r]=L.useState(""),[i,s]=L.useState(null),[o,a]=L.useState([]),[l,c]=L.useState([]),[u,h]=L.useState(!0),[d,m]=L.useState(null),[g,v]=L.useState(!1),w=L.useRef(null),_=L.useRef(null);L.useRef([]);const A="http://localhost:4000";L.useEffect(()=>{v(!0),kr.get(`${A}/api/signs`).then(P=>{c(P.data.signs),v(!1)}).catch(P=>{console.error("Error fetching signs:",P),m("Failed to fetch available signs"),v(!1)})},[]),L.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const P=window.SpeechRecognition||window.webkitSpeechRecognition;w.current=new P,w.current.continuous=!0,w.current.interimResults=!0,w.current.lang="en-US",w.current.onresult=F=>{const Q=F.results[F.results.length-1][0].transcript.trim().toLowerCase();r(Q),S(Q)},w.current.onerror=F=>{console.error("Speech recognition error:",F.error),e(!1),m(`Speech recognition error: ${F.error}`)},w.current.onend=()=>{n&&w.current.start()}}else h(!1),m("Speech recognition is not supported in your browser");return()=>{w.current&&w.current.stop(),_.current&&_.current.stop()}},[n]);const S=async P=>{try{v(!0);const F=await kr.post(`${A}/api/test-speech`,{text:P});R(F.data),v(!1)}catch(F){console.error("Error processing speech:",F),m("Failed to process speech"),v(!1)}},R=P=>{if(P.action==="exit"){N(),r("Goodbye! Assistant stopped.");return}P.type==="gif"?(s(P.gifUrl),a([])):P.type==="letters"&&(s(null),a(P.letterUrls))},B=()=>{n?N():I()},I=()=>{if(m(null),w.current)try{w.current.start(),e(!0)}catch(P){console.error("Error starting speech recognition:",P),m("Failed to start speech recognition")}},N=()=>{w.current&&w.current.stop(),e(!1)},U=()=>{s(null),a([]),r(""),m(null)},O=P=>{P.preventDefault(),t.trim()&&S(t)};return C.jsx("div",{className:"min-h-screen w-full bg-gradient-to-b from-purple-300 via-pink-200 to-white p-8 flex justify-center items-center",children:C.jsxs("div",{className:"max-w-2xl w-full mx-auto p-6 bg-white rounded-lg shadow-lg",children:[C.jsxs("header",{className:"mb-6",children:[C.jsx("h1",{className:"text-3xl font-bold text-center text-blue-600",children:"Hearing Impairment Assistant"}),C.jsx("p",{className:"text-center text-gray-600",children:"Translates speech to sign language"})]}),d&&C.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[C.jsx("strong",{children:"Error:"})," ",d]}),C.jsxs("div",{className:"flex justify-center mb-6 space-x-2",children:[C.jsx("button",{onClick:B,disabled:!u||g,className:`px-4 py-2 rounded font-bold ${n?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"} disabled:opacity-50`,children:n?"Stop Listening":"Start Listening"}),C.jsx("button",{onClick:U,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded font-bold",children:"Clear"})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("div",{className:"mb-2 font-medium",children:"Recognized Speech:"}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("input",{type:"text",value:t,onChange:P=>r(P.target.value),className:"flex-grow p-2 border border-gray-300 rounded",placeholder:"Speak or type text here..."}),C.jsx("button",{onClick:O,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded font-bold",children:"Process"})]})]}),g&&C.jsx("div",{className:"text-center my-4 text-gray-600",children:"Processing..."}),i&&C.jsxs("div",{className:"mb-6",children:[C.jsx("div",{className:"mb-2 font-medium",children:"Sign Language:"}),C.jsx("div",{className:"border rounded p-4 flex justify-center bg-gray-50",children:C.jsx("img",{src:`${A}${i}`,alt:"Sign language visualization",className:"max-w-full h-auto",onError:P=>{P.target.onerror=null,P.target.src="https://via.placeholder.com/200?text=GIF+Not+Found",m("Sign language GIF not found")}})})]}),o.length>0&&C.jsxs("div",{className:"mb-6",children:[C.jsx("div",{className:"mb-2 font-medium",children:"Letter Signs:"}),C.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:o.map((P,F)=>C.jsx("div",{className:"border rounded p-2 bg-gray-50",children:C.jsx("img",{src:`${A}${P}`,alt:`Sign for letter ${P.split("/").pop()}`,className:"w-16 h-16 object-contain",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/80?text="+P.split("/").pop()}})},F))})]}),C.jsxs("div",{className:"mt-8 bg-blue-50 p-4 rounded",children:[C.jsx("h3",{className:"font-medium mb-2",children:"Instructions:"}),C.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[C.jsx("li",{children:'Click "Start Listening" to begin speech recognition'}),C.jsx("li",{children:"Speak clearly - recognized speech will be displayed above"}),C.jsx("li",{children:'You can also type text and click "Process" to test'}),C.jsx("li",{children:"For recognized phrases, a sign language GIF will be shown"}),C.jsx("li",{children:"For other words, individual letter signs will be shown"}),C.jsx("li",{children:'Say "goodbye" to stop the application'})]})]}),C.jsx("div",{className:"mt-4 text-sm text-gray-500",children:C.jsxs("p",{children:["Available phrases: ",l.length>0?`${l.length} phrases including "hello", "thank you", etc.`:"Loading..."]})})]})})},qW=L.forwardRef(({className:n,...e},t)=>C.jsx("textarea",{className:Mi("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));qW.displayName="Textarea";const QMe=()=>{const n="AIzaSyDOIZwZW4lnEZlcUGuy6CQS2g_cv2kpzhA",[e,t]=L.useState(null),[r,i]=L.useState(!1),[s,o]=L.useState("syllabus_output"),[a,l]=L.useState(""),[c,u]=L.useState([]),[h,d]=L.useState(""),[m,g]=L.useState(""),[v,w]=L.useState("pdf"),_=L.useCallback(P=>{u(F=>[...F,`[${new Date().toLocaleTimeString()}] ${P}`]),l(P)},[]),A=L.useCallback(async P=>{_(`Extracting text from PDF: ${P.name}`);try{const F=await Yr(()=>import("./webpack-B_-lwc3l.js"),[]),K=await new Promise((ne,ce)=>{const ye=new FileReader;ye.onload=()=>ne(ye.result),ye.onerror=ce,ye.readAsArrayBuffer(P)}),Q=new Uint8Array(K),ee=await F.getDocument(Q).promise;_(`PDF loaded. Total pages: ${ee.numPages}`);const $=Math.min(5,ee.numPages),oe=[];for(let ne=1;ne<=$;ne++)oe.push(S(ee,ne,$,_));const te=(await Promise.all(oe)).join(`

--- Page Break ---

`),re=Math.min(300,te.length),Z=te.substring(0,re)+(te.length>re?"...":"");return _(`Text extraction complete. Preview: "${Z}"`),d(te),te}catch(F){throw _(`Error extracting text from PDF: ${F.message}`),F}},[_]),S=async(P,F,K,Q)=>{Q(`Extracting text from page ${F}/${K}...`);try{return(await(await P.getPage(F)).getTextContent()).items.map(oe=>oe.str).join(" ")}catch(Y){return Q(`Error extracting page ${F}: ${Y.message}`),`[Error extracting page ${F}]`}},R=L.useCallback(async P=>{_("Processing text with Gemini...");const F=P.substring(0,1e5);try{const K=`
      You are an expert at analyzing educational content. I need you to extract the syllabus structure from the PDF text below.
      
      Please analyze the content and extract:
      1. Course title and description
      2. Main units or modules with their numbers and titles
      3. Topics or lessons within each unit, with IDs, titles and descriptions
      
      For each topic, also generate:
      - 3 specific learning objectives
      - 4 suggested learning activities
      - 3 recommended resources (readings, videos, exercises)
      
      Format your output as JSON with this structure:
      {
          "title": "Course title",
          "description": "Course description",
          "units": [
              {
                  "unit_type": "Unit/Module/Section",
                  "unit_number": 1,
                  "unit_title": "Unit title",
                  "topics": [
                      {
                          "topic_id": "1.1",
                          "topic_title": "Topic title",
                          "description": "Topic description",
                          "learning_objectives": ["Objective 1", "Objective 2", "Objective 3"],
                          "suggested_activities": ["Activity 1", "Activity 2", "Activity 3", "Activity 4"],
                          "resources": [
                              {
                                  "type": "Reading/Video/Exercise",
                                  "title": "Resource title",
                                  "description": "Resource description"
                              }
                          ]
                      }
                  ]
              }
          ]
      }
      
      Only respond with the JSON, no other text.
      
      PDF TEXT:
      ${F}
      `;_("Sending request to Gemini API...");const Q=new AbortController,Y=setTimeout(()=>Q.abort(),6e4);try{const ee=await fetch("https://generativelanguage.googleapis.com/v1/models/gemini-2.0-pro:generateContent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({contents:[{parts:[{text:K}]}],generationConfig:{temperature:.2,topP:.95,topK:32,maxOutputTokens:8192}}),signal:Q.signal});if(clearTimeout(Y),!ee.ok){const te=await ee.text();let re=`API Error: ${ee.status}`;try{const Z=JSON.parse(te);re+=` - ${JSON.stringify(Z)}`}catch{re+=` - ${te.substring(0,100)}`}throw new Error(re)}const $=await ee.json();if(!$.candidates||!$.candidates[0]||!$.candidates[0].content||!$.candidates[0].content.parts)throw new Error("Invalid API response structure");const oe=$.candidates[0].content.parts[0].text||"";_("Received response from Gemini");const G=oe.match(/\{[\s\S]*\}/);if(!G)throw new Error("Couldn't find valid JSON in the response");try{const te=JSON.parse(G[0]);return _("Successfully parsed JSON response"),te}catch(te){throw new Error(`JSON parsing error: ${te.message}`)}}catch(ee){throw ee.name==="AbortError"?new Error("API request timed out after 60 seconds"):ee}finally{clearTimeout(Y)}}catch(K){throw _(`Error processing with Gemini: ${K.message}`),K}},[_]),B=L.useCallback(async P=>{_(`Generating syllabus files in folder: ${s}`);try{if(I(P,"syllabus_overview.json"),P.units&&P.units.length>0){for(const F of P.units)if(await new Promise(K=>setTimeout(K,100)),I(F,`unit_${F.unit_number}.json`),F.topics&&F.topics.length>0)for(const K of F.topics){await new Promise(ee=>setTimeout(ee,100));const Q={unit_number:F.unit_number,unit_title:F.unit_title,topic_id:K.topic_id,topic_title:K.topic_title,description:K.description,learning_objectives:K.learning_objectives,suggested_activities:K.suggested_activities,resources:K.resources},Y=String(K.topic_id).replace(/[^a-z0-9]/gi,"_");I(Q,`lesson_${F.unit_number}_${Y}.json`)}}return _("Syllabus files generated successfully"),"syllabus_overview.json"}catch(F){throw _(`Error saving files: ${F.message}`),F}},[_,s]),I=(P,F)=>{try{const K=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),Q=URL.createObjectURL(K),Y=document.createElement("a");Y.href=Q,Y.download=F,document.body.appendChild(Y),Y.click(),setTimeout(()=>{try{document.body.removeChild(Y)}catch{console.log("Element already removed")}URL.revokeObjectURL(Q)},100)}catch(K){throw console.error(`Error downloading ${F}:`,K),K}},N=L.useCallback(P=>{const F=P.target.files[0];F&&(F.type==="application/pdf"?(t(F),d("")):(alert("Please select a PDF file"),P.target.value=""))},[]),U=L.useCallback(P=>{g(P.target.value),d("")},[]),O=L.useCallback(async P=>{P.preventDefault();let F="";if(v==="pdf"){if(!e){alert("Please select a PDF file");return}i(!0),u([]),d("");try{_(`Starting to process ${e.name}`),F=await A(e)}catch(K){_(`Error extracting PDF: ${K.message}`),i(!1);return}}else{if(!m.trim()){alert("Please enter some text to process");return}i(!0),u([]),d(""),_("Processing input text"),F=m;const K=Math.min(300,F.length),Q=F.substring(0,K)+(F.length>K?"...":"");_(`Text to process. Preview: "${Q}"`),d(F)}try{const K=await R(F);if(!K||!K.title||!Array.isArray(K.units))throw new Error("Invalid syllabus data structure returned from API");const Q=await B(K);_(`Syllabus generation complete! Main overview file: ${Q}`)}catch(K){_(`Error: ${K.message}`),console.error("Detailed error:",K)}finally{i(!1)}},[e,A,R,B,_,v,m]);return C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-200 to-purple-300 p-6",children:C.jsx("div",{className:"w-full max-w-2xl",children:C.jsxs(dA,{className:"w-full shadow-lg",children:[C.jsx(t4,{children:C.jsx(n4,{className:"text-2xl font-bold text-center text-black",children:"PDF to Syllabus Generator"})}),C.jsxs(rR,{children:[C.jsxs("form",{onSubmit:O,children:[C.jsxs(oR,{value:v,onValueChange:w,className:"mb-4",children:[C.jsxs(gA,{className:"grid w-full grid-cols-2",children:[C.jsx(sp,{value:"pdf",children:"Upload PDF"}),C.jsx(sp,{value:"text",children:"Enter Text"})]}),C.jsx(op,{value:"pdf",className:"mt-4",children:C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:"pdf-file",className:"block text-sm font-medium mb-2 text-white",children:"Upload PDF File"}),C.jsx("input",{type:"file",id:"pdf-file",accept:".pdf",onChange:N,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})}),C.jsx(op,{value:"text",className:"mt-4",children:C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:"input-text",className:"block text-sm font-medium mb-2 text-white",children:"Enter Course Text"}),C.jsx(qW,{id:"input-text",value:m,onChange:U,className:"block w-full p-2 border rounded-md h-52",placeholder:"Paste or type your course content here..."})]})})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{htmlFor:"output-folder",className:"block text-sm font-medium mb-2 text-white",children:"Output Folder Name"}),C.jsx("input",{type:"text",id:"output-folder",value:s,onChange:P=>o(P.target.value),className:"block w-full p-2 border rounded-md"})]}),C.jsx(ap,{type:"submit",className:"w-full bg-blue-900 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",disabled:r||v==="pdf"&&!e||v==="text"&&!m.trim(),children:r?C.jsxs("div",{className:"flex items-center justify-center",children:[C.jsx(zO,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Process Content"})]}),a&&C.jsx("div",{className:"mt-4 text-white",children:C.jsxs("p",{className:"font-semibold",children:["Status: ",a]})}),c.length>0&&C.jsxs("div",{className:"mt-4",children:[C.jsx("h3",{className:"font-semibold mb-2 text-white",children:"Processing Log:"}),C.jsx("div",{className:"bg-gray-100 p-2 rounded-md h-40 overflow-y-auto",children:c.map((P,F)=>C.jsx("div",{className:"text-sm mb-1",children:P},F))})]}),h&&C.jsxs("div",{className:"mt-4",children:[C.jsx("h3",{className:"font-semibold mb-2 text-white",children:"Extracted Text Preview:"}),C.jsx("div",{className:"bg-gray-100 p-2 rounded-md h-40 overflow-y-auto",children:C.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:h})})]})]}),C.jsx(r4,{className:"flex justify-center text-sm text-gray-300",children:"Powered by PDF.js and Gemini AI"})]})})})};function e2e(){return C.jsx(qJ,{children:C.jsx(VJ,{children:C.jsx(vq,{children:C.jsx(u6,{children:C.jsxs("div",{className:"App",children:[C.jsx(Jue,{}),C.jsxs(YX,{children:[C.jsx(Tr,{path:"/",element:C.jsx(BK,{})}),C.jsx(Tr,{path:"/signup",element:C.jsx(XJ,{})}),C.jsx(Tr,{path:"/login",element:C.jsx(YJ,{})}),C.jsx(Tr,{path:"/home",element:C.jsxs(Hr,{children:[C.jsx(oQ,{})," "]})}),C.jsx(Tr,{path:"/lesson/:levelId",element:C.jsxs(Hr,{children:[" ",C.jsx(Due,{})]})}),C.jsx(Tr,{path:"/games",element:C.jsxs(Hr,{children:[C.jsx(Nue,{})," "]})}),C.jsx(Tr,{path:"/flippedcard",element:C.jsxs(Hr,{children:[" ",C.jsx(lQ,{})]})}),C.jsx(Tr,{path:"/fillintheblanks",element:C.jsxs(Hr,{children:[C.jsx(Oue,{})," "]})}),C.jsx(Tr,{path:"/frog",element:C.jsxs(Hr,{children:[C.jsx(Uue,{})," "]})}),C.jsx(Tr,{path:"/match",element:C.jsxs(Hr,{children:[" ",C.jsx($ue,{})]})}),C.jsx(Tr,{path:"/canvas",element:C.jsx(Hr,{children:C.jsx(che,{})})}),C.jsx(Tr,{path:"/sentence",element:C.jsxs(Hr,{children:[C.jsx(Kue,{})," "]})}),C.jsx(Tr,{path:"/noun",element:C.jsxs(Hr,{children:[C.jsx(Xue,{})," "]})}),C.jsx(Tr,{path:"/rangoli",element:C.jsxs(Hr,{children:[C.jsx(Yue,{})," "]})}),C.jsx(Tr,{path:"/stories",element:C.jsxs(Hr,{children:[C.jsx(rhe,{})," "]})}),C.jsx(Tr,{path:"/golconda",element:C.jsx(Hr,{children:C.jsx(Que,{})})}),C.jsx(Tr,{path:"/cleanliness",element:C.jsx(Hr,{children:C.jsx(ihe,{})})}),C.jsx(Tr,{path:"/mahakumbh",element:C.jsx(Hr,{children:C.jsx(the,{})})}),C.jsx(Tr,{path:"/charminar",element:C.jsx(Hr,{children:C.jsx(ehe,{})})}),C.jsx(Tr,{path:"/learnings",element:C.jsxs(Hr,{children:[C.jsx(lhe,{})," "]})}),C.jsx(Tr,{path:"/habit1",element:C.jsxs(Hr,{children:[C.jsx(uhe,{})," "]})}),C.jsx(Tr,{path:"/habit2",element:C.jsxs(Hr,{children:[C.jsx(hhe,{})," "]})}),C.jsx(Tr,{path:"/habit3",element:C.jsxs(Hr,{children:[C.jsx(fhe,{})," "]})}),C.jsx(Tr,{path:"/habit4",element:C.jsxs(Hr,{children:[C.jsx(dhe,{})," "]})}),C.jsx(Tr,{path:"/habit5",element:C.jsxs(Hr,{children:[C.jsx(phe,{})," "]})}),C.jsx(Tr,{path:"/habit6",element:C.jsxs(Hr,{children:[C.jsx(mhe,{})," "]})}),C.jsx(Tr,{path:"/ar",element:C.jsxs(Hr,{children:[C.jsx(Zue,{})," "]})}),C.jsx(Tr,{path:"/roadmap",element:C.jsxs(Hr,{children:[C.jsx(VMe,{})," "]})}),C.jsx(Tr,{path:"/signdashboard",element:C.jsxs(Hr,{children:[C.jsx($Me,{})," "]})}),C.jsx(Tr,{path:"/handtracking",element:C.jsxs(Hr,{children:[C.jsx(JMe,{})," "]})}),C.jsx(Tr,{path:"/spelling",element:C.jsxs(Hr,{children:[C.jsx(ZMe,{})," "]})}),C.jsx(Tr,{path:"/pdf",element:C.jsxs(Hr,{children:[C.jsx(QMe,{})," "]})})]}),C.jsx(she,{}),C.jsx(Qme,{}),C.jsx(rge,{}),C.jsx(ohe,{})]})})})})})}kr.defaults.baseURL="https://indic-backend.onrender.com";kr.defaults.withCredentials=!0;J3.createRoot(document.getElementById("root")).render(C.jsx(L.StrictMode,{children:C.jsx(e2e,{})}));export{E_e as $,fx as A,n8 as B,Ok as C,rc as D,IAe as E,Mye as F,UCe as G,D3 as H,Vge as I,F0e as J,k_e as K,Lg as L,g2e as M,ik as N,TS as O,m2e as P,MG as Q,BAe as R,Fv as S,Fge as T,f8 as U,gye as V,Dv as W,wn as X,Bn as Y,SAe as Z,V as _,$s as a,_k as a$,QN as a0,ZN as a1,E2e as a2,b2e as a3,C2e as a4,S2e as a5,_2e as a6,Sk as a7,T2e as a8,w2e as a9,fbe as aA,dAe as aB,Rk as aC,G3 as aD,ASe as aE,M_e as aF,jg as aG,ixe as aH,sxe as aI,mS as aJ,Tp as aK,wAe as aL,KG as aM,wS as aN,CS as aO,Wb as aP,ZG as aQ,YG as aR,Jbe as aS,vk as aT,hG as aU,ra as aV,Uv as aW,e1e as aX,pG as aY,v2e as aZ,age as a_,Um as aa,R2e as ab,M2e as ac,A2e as ad,KSe as ae,QV as af,L2e as ag,i9 as ah,qs as ai,ly as aj,gk as ak,gCe as al,R9 as am,ay as an,On as ao,Vc as ap,FCe as aq,I2e as ar,D2e as as,k2e as at,bn as au,B2e as av,SCe as aw,_Ce as ax,vCe as ay,_Ae as az,Sye as b,Qh as b0,Zx as b1,$N as b2,a1e as b3,vAe as b4,fAe as b5,Qwe as b6,Pk as b7,Xbe as b8,AAe as b9,Hv as ba,sy as bb,jb as bc,iAe as bd,oTe as be,zv as bf,Vb as bg,Zbe as bh,GG as bi,nbe as bj,rbe as bk,Rd as bl,p3 as bm,ibe as bn,kk as bo,tbe as bp,abe as bq,oy as br,bf as bs,c3 as bt,Bk as bu,WG as bv,L2 as bw,bAe as bx,SS as by,Yr as bz,Aye as c,Fr as d,iy as e,o9 as f,bye as g,Ug as h,gp as i,Dr as j,h8 as k,yt as l,cxe as m,y2e as n,x2e as o,Cye as p,Tye as q,N0e as r,wye as s,mCe as t,Rc as u,_ye as v,FAe as w,P2e as x,N2e as y,F2e as z};
